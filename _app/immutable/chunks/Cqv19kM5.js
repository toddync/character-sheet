import{h as At,a as Jr,b as jr,E as to,c as eo,G as no,au as io,d as ro,e as oo,u as so,r as ao,m as G,av as lo,aw as co,ax as uo,ay as fo,D as ti,az as ho,aA as go,s as pt,aB as Xe,aC as lt,l as B,I as J,aD as ve,x as Pn,v as zt,R as Qt,w as yt,y as In,N as j,t as Ge,z as Zt,aE as Hn,K as L,aF as D,aG as wt,aH as Gt,a4 as po}from"./DQ4ISc1H.js";import{i as yo,d as mo,e as xo,f as wo,n as vo,g as _o,j as bo,t as ie,k as Ye,a as Tt,s as Ke,l as Oi,b as Eo}from"./54c0vtkL.js";import{i as mt}from"./DJakvyeT.js";import{p as I,s as it,a as Bi,l as st,i as ei}from"./BQ5rRwqh.js";function zn(t,e,n,i,r){var a;At&&Jr();var o=(a=e.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=e[n==="default"?"children":n],s=!0),o===void 0||o(t,s?()=>i:i)}function Bu(t){const e={};t.children&&(e.default=!0);for(const n in t.$$slots)e[n]=!0;return e}function Vu(t,e,...n){var i=t,r=no,o;jr(()=>{r!==(r=e())&&(o&&(io(o),o=null),o=eo(()=>r(i,...n)))},to),At&&(i=ro)}function No(t,e,n){oo(()=>{var i=so(()=>e(t,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,o={};ao(()=>{var s=n();G(s),r&&lo(o,s)&&(o=s,i.update(s))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function Vi(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=Vi(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Mo(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=Vi(t))&&(i&&(i+=" "),i+=e);return i}function $n(t){return typeof t=="object"?Mo(t):t??""}const ni=[...` 	
\r\fÂ \v\uFEFF`];function To(t,e,n){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),n){for(var r in n)if(n[r])i=i?i+" "+r:r;else if(i.length)for(var o=r.length,s=0;(s=i.indexOf(r,s))>=0;){var a=s+o;(s===0||ni.includes(i[s-1]))&&(a===i.length||ni.includes(i[a]))?i=(s===0?"":i.substring(0,s))+i.substring(a+1):s=a}}return i===""?null:i}function ii(t,e=!1){var n=e?" !important;":";",i="";for(var r in t){var o=t[r];o!=null&&o!==""&&(i+=" "+r+": "+o+n)}return i}function ln(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ao(t,e){if(e){var n="",i,r;if(Array.isArray(e)?(i=e[0],r=e[1]):i=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,s=0,a=!1,l=[];i&&l.push(...Object.keys(i).map(ln)),r&&l.push(...Object.keys(r).map(ln));var c=0,u=-1;const T=t.length;for(var d=0;d<T;d++){var f=t[d];if(a?f==="/"&&t[d-1]==="*"&&(a=!1):o?o===f&&(o=!1):f==="/"&&t[d+1]==="*"?a=!0:f==='"'||f==="'"?o=f:f==="("?s++:f===")"&&s--,!a&&o===!1&&s===0){if(f===":"&&u===-1)u=d;else if(f===";"||d===T-1){if(u!==-1){var g=ln(t.substring(c,u).trim());if(!l.includes(g)){f!==";"&&d++;var x=t.substring(c,d).trim();n+=" "+x+";"}}c=d+1,u=-1}}}}return i&&(n+=ii(i)),r&&(n+=ii(r,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function Xn(t,e,n,i,r,o){var s=t.__className;if(At||s!==n||s===void 0){var a=To(n,i,o);(!At||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a)),t.__className=n}else if(o&&r!==o)for(var l in o){var c=!!o[l];(r==null||c!==!!r[l])&&t.classList.toggle(l,c)}return o}function cn(t,e={},n,i){for(var r in n){var o=n[r];e[r]!==o&&(n[r]==null?t.style.removeProperty(r):t.style.setProperty(r,o,i))}}function Ue(t,e,n,i){var r=t.__style;if(At||r!==e){var o=Ao(e,i);(!At||o!==t.getAttribute("style"))&&(o==null?t.removeAttribute("style"):t.style.cssText=o),t.__style=e}else i&&(Array.isArray(i)?(cn(t,n==null?void 0:n[0],i[0]),cn(t,n==null?void 0:n[1],i[1],"important")):cn(t,n,i));return i}const oe=Symbol("class"),se=Symbol("style"),Li=Symbol("is custom element"),Di=Symbol("is html");function Lu(t){if(At){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var i=t.value;at(t,"value",null),t.value=i}if(t.hasAttribute("checked")){var r=t.checked;at(t,"checked",null),t.checked=r}}};t.__on_r=n,go(n),bo()}}function So(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function at(t,e,n,i){var r=Fi(t);At&&(r[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||r[e]!==(r[e]=n)&&(e==="loading"&&(t[co]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Wi(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Du(t,e,n,i,r=!1){var o=Fi(t),s=o[Li],a=!o[Di];let l=At&&s;l&&ti(!1);var c=e||{},u=t.tagName==="OPTION";for(var d in e)d in n||(n[d]=null);n.class?n.class=$n(n.class):(i||n[oe])&&(n.class=null),n[se]&&(n.style??(n.style=null));var f=Wi(t);for(const E in n){let m=n[E];if(u&&E==="value"&&m==null){t.value=t.__value="",c[E]=m;continue}if(E==="class"){var g=t.namespaceURI==="http://www.w3.org/1999/xhtml";Xn(t,g,m,i,e==null?void 0:e[oe],n[oe]),c[E]=m,c[oe]=n[oe];continue}if(E==="style"){Ue(t,m,e==null?void 0:e[se],n[se]),c[E]=m,c[se]=n[se];continue}var x=c[E];if(m!==x){c[E]=m;var T=E[0]+E[1];if(T!=="$$")if(T==="on"){const S={},$="$$"+E;let w=E.slice(2);var _=_o(w);if(yo(w)&&(w=w.slice(0,-7),S.capture=!0),!_&&x){if(m!=null)continue;t.removeEventListener(w,c[$],S),c[$]=null}if(m!=null)if(_)t[`__${w}`]=m,xo([w]);else{let k=function(Y){c[E].call(this,Y)};c[$]=mo(w,t,k,S)}else _&&(t[`__${w}`]=void 0)}else if(E==="style")at(t,E,m);else if(E==="autofocus")wo(t,!!m);else if(!s&&(E==="__value"||E==="value"&&m!=null))t.value=t.__value=m;else if(E==="selected"&&u)So(t,m);else{var v=E;a||(v=vo(v));var A=v==="defaultValue"||v==="defaultChecked";if(m==null&&!s&&!A)if(o[E]=null,v==="value"||v==="checked"){let S=t;const $=e===void 0;if(v==="value"){let w=S.defaultValue;S.removeAttribute(v),S.defaultValue=w,S.value=S.__value=$?w:null}else{let w=S.defaultChecked;S.removeAttribute(v),S.defaultChecked=w,S.checked=$?w:!1}}else t.removeAttribute(E);else A||f.includes(v)&&(s||typeof m!="string")?t[v]=m:typeof m!="function"&&at(t,v,m)}}}return l&&ti(!0),c}function Fi(t){return t.__attributes??(t.__attributes={[Li]:t.nodeName.includes("-"),[Di]:t.namespaceURI===uo})}var ri=new Map;function Wi(t){var e=ri.get(t.nodeName);if(e)return e;ri.set(t.nodeName,e=[]);for(var n,i=t,r=Element.prototype;r!==i;){n=ho(i);for(var o in n)n[o].set&&e.push(o);i=fo(i)}return e}function Yn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Yn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Co={value:()=>{}};function Qe(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ie(n)}function Ie(t){this._=t}function ko(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ie.prototype=Qe.prototype={constructor:Ie,on:function(t,e){var n=this._,i=ko(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Po(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=oi(n[r],t.name,e);else if(e==null)for(r in n)n[r]=oi(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ie(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Po(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function oi(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Co,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var xn="http://www.w3.org/1999/xhtml";const si={svg:"http://www.w3.org/2000/svg",xhtml:xn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ze(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),si.hasOwnProperty(e)?{space:si[e],local:t}:t}function Io(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xn&&e.documentElement.namespaceURI===xn?e.createElement(t):e.createElementNS(n,t)}}function Ho(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qi(t){var e=Ze(t);return(e.local?Ho:Io)(e)}function zo(){}function Rn(t){return t==null?zo:function(){return this.querySelector(t)}}function $o(t){typeof t!="function"&&(t=Rn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new ft(i,this._parents)}function Xo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Yo(){return[]}function Gi(t){return t==null?Yo:function(){return this.querySelectorAll(t)}}function Ro(t){return function(){return Xo(t.apply(this,arguments))}}function Oo(t){typeof t=="function"?t=Ro(t):t=Gi(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),r.push(l));return new ft(i,r)}function Ki(t){return function(){return this.matches(t)}}function Ui(t){return function(e){return e.matches(t)}}var Bo=Array.prototype.find;function Vo(t){return function(){return Bo.call(this.children,t)}}function Lo(){return this.firstElementChild}function Do(t){return this.select(t==null?Lo:Vo(typeof t=="function"?t:Ui(t)))}var Fo=Array.prototype.filter;function Wo(){return Array.from(this.children)}function qo(t){return function(){return Fo.call(this.children,t)}}function Go(t){return this.selectAll(t==null?Wo:qo(typeof t=="function"?t:Ui(t)))}function Ko(t){typeof t!="function"&&(t=Ki(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new ft(i,this._parents)}function Qi(t){return new Array(t.length)}function Uo(){return new ft(this._enter||this._groups.map(Qi),this._parents)}function Re(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Re.prototype={constructor:Re,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Qo(t){return function(){return t}}function Zo(t,e,n,i,r,o){for(var s=0,a,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new Re(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function Jo(t,e,n,i,r,o,s){var a,l,c=new Map,u=e.length,d=o.length,f=new Array(u),g;for(a=0;a<u;++a)(l=e[a])&&(f[a]=g=s.call(l,l.__data__,a,e)+"",c.has(g)?r[a]=l:c.set(g,l));for(a=0;a<d;++a)g=s.call(t,o[a],a,o)+"",(l=c.get(g))?(i[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new Re(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(f[a])===l&&(r[a]=l)}function jo(t){return t.__data__}function ts(t,e){if(!arguments.length)return Array.from(this,jo);var n=e?Jo:Zo,i=this._parents,r=this._groups;typeof t!="function"&&(t=Qo(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],f=d.length,g=es(t.call(u,u&&u.__data__,c,i)),x=g.length,T=a[c]=new Array(x),_=s[c]=new Array(x),v=l[c]=new Array(f);n(u,d,T,_,v,g,e);for(var A=0,E=0,m,S;A<x;++A)if(m=T[A]){for(A>=E&&(E=A+1);!(S=_[E])&&++E<x;);m._next=S||null}}return s=new ft(s,i),s._enter=a,s._exit=l,s}function es(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ns(){return new ft(this._exit||this._groups.map(Qi),this._parents)}function is(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function rs(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=n[l],u=i[l],d=c.length,f=a[l]=new Array(d),g,x=0;x<d;++x)(g=c[x]||u[x])&&(f[x]=g);for(;l<r;++l)a[l]=n[l];return new ft(a,this._parents)}function os(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ss(t){t||(t=as);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new ft(r,this._parents).order()}function as(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ls(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function cs(){return Array.from(this)}function us(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function fs(){let t=0;for(const e of this)++t;return t}function ds(){return!this.node()}function hs(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function gs(t){return function(){this.removeAttribute(t)}}function ps(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ys(t,e){return function(){this.setAttribute(t,e)}}function ms(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function xs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ws(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function vs(t,e){var n=Ze(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?ps:gs:typeof e=="function"?n.local?ws:xs:n.local?ms:ys)(n,e))}function Zi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _s(t){return function(){this.style.removeProperty(t)}}function bs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Es(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ns(t,e,n){return arguments.length>1?this.each((e==null?_s:typeof e=="function"?Es:bs)(t,e,n??"")):Jt(this.node(),t)}function Jt(t,e){return t.style.getPropertyValue(e)||Zi(t).getComputedStyle(t,null).getPropertyValue(e)}function Ms(t){return function(){delete this[t]}}function Ts(t,e){return function(){this[t]=e}}function As(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ss(t,e){return arguments.length>1?this.each((e==null?Ms:typeof e=="function"?As:Ts)(t,e)):this.node()[t]}function Ji(t){return t.trim().split(/^|\s+/)}function On(t){return t.classList||new ji(t)}function ji(t){this._node=t,this._names=Ji(t.getAttribute("class")||"")}ji.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function tr(t,e){for(var n=On(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function er(t,e){for(var n=On(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Cs(t){return function(){tr(this,t)}}function ks(t){return function(){er(this,t)}}function Ps(t,e){return function(){(e.apply(this,arguments)?tr:er)(this,t)}}function Is(t,e){var n=Ji(t+"");if(arguments.length<2){for(var i=On(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Ps:e?Cs:ks)(n,e))}function Hs(){this.textContent=""}function zs(t){return function(){this.textContent=t}}function $s(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Xs(t){return arguments.length?this.each(t==null?Hs:(typeof t=="function"?$s:zs)(t)):this.node().textContent}function Ys(){this.innerHTML=""}function Rs(t){return function(){this.innerHTML=t}}function Os(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Bs(t){return arguments.length?this.each(t==null?Ys:(typeof t=="function"?Os:Rs)(t)):this.node().innerHTML}function Vs(){this.nextSibling&&this.parentNode.appendChild(this)}function Ls(){return this.each(Vs)}function Ds(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fs(){return this.each(Ds)}function Ws(t){var e=typeof t=="function"?t:qi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qs(){return null}function Gs(t,e){var n=typeof t=="function"?t:qi(t),i=e==null?qs:typeof e=="function"?e:Rn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ks(){var t=this.parentNode;t&&t.removeChild(this)}function Us(){return this.each(Ks)}function Qs(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Js(t){return this.select(t?Zs:Qs)}function js(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ta(t){return function(e){t.call(this,e,this.__data__)}}function ea(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function na(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function ia(t,e,n){return function(){var i=this.__on,r,o=ta(e);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ra(t,e,n){var i=ea(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?ia:na,r=0;r<o;++r)this.each(a(i[r],e,n));return this}function nr(t,e,n){var i=Zi(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function oa(t,e){return function(){return nr(this,t,e)}}function sa(t,e){return function(){return nr(this,t,e.apply(this,arguments))}}function aa(t,e){return this.each((typeof e=="function"?sa:oa)(t,e))}function*la(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var ir=[null];function ft(t,e){this._groups=t,this._parents=e}function _e(){return new ft([[document.documentElement]],ir)}function ca(){return this}ft.prototype=_e.prototype={constructor:ft,select:$o,selectAll:Oo,selectChild:Do,selectChildren:Go,filter:Ko,data:ts,enter:Uo,exit:ns,join:is,merge:rs,selection:ca,order:os,sort:ss,call:ls,nodes:cs,node:us,size:fs,empty:ds,each:hs,attr:vs,style:Ns,property:Ss,classed:Is,text:Xs,html:Bs,raise:Ls,lower:Fs,append:Ws,insert:Gs,remove:Us,clone:Js,datum:js,on:ra,dispatch:aa,[Symbol.iterator]:la};function dt(t){return typeof t=="string"?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],ir)}function ua(t){let e;for(;e=t.sourceEvent;)t=e;return t}function vt(t,e){if(t=ua(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const fa={passive:!1},he={capture:!0,passive:!1};function un(t){t.stopImmediatePropagation()}function Kt(t){t.preventDefault(),t.stopImmediatePropagation()}function rr(t){var e=t.document.documentElement,n=dt(t).on("dragstart.drag",Kt,he);"onselectstart"in e?n.on("selectstart.drag",Kt,he):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function or(t,e){var n=t.document.documentElement,i=dt(t).on("dragstart.drag",null);e&&(i.on("click.drag",Kt,he),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Me=t=>()=>t;function wn(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}wn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function da(t){return!t.ctrlKey&&!t.button}function ha(){return this.parentNode}function ga(t,e){return e??{x:t.x,y:t.y}}function pa(){return navigator.maxTouchPoints||"ontouchstart"in this}function sr(){var t=da,e=ha,n=ga,i=pa,r={},o=Qe("start","drag","end"),s=0,a,l,c,u,d=0;function f(m){m.on("mousedown.drag",g).filter(i).on("touchstart.drag",_).on("touchmove.drag",v,fa).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(m,S){if(!(u||!t.call(this,m,S))){var $=E(this,e.call(this,m,S),m,S,"mouse");$&&(dt(m.view).on("mousemove.drag",x,he).on("mouseup.drag",T,he),rr(m.view),un(m),c=!1,a=m.clientX,l=m.clientY,$("start",m))}}function x(m){if(Kt(m),!c){var S=m.clientX-a,$=m.clientY-l;c=S*S+$*$>d}r.mouse("drag",m)}function T(m){dt(m.view).on("mousemove.drag mouseup.drag",null),or(m.view,c),Kt(m),r.mouse("end",m)}function _(m,S){if(t.call(this,m,S)){var $=m.changedTouches,w=e.call(this,m,S),k=$.length,Y,H;for(Y=0;Y<k;++Y)(H=E(this,w,m,S,$[Y].identifier,$[Y]))&&(un(m),H("start",m,$[Y]))}}function v(m){var S=m.changedTouches,$=S.length,w,k;for(w=0;w<$;++w)(k=r[S[w].identifier])&&(Kt(m),k("drag",m,S[w]))}function A(m){var S=m.changedTouches,$=S.length,w,k;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),w=0;w<$;++w)(k=r[S[w].identifier])&&(un(m),k("end",m,S[w]))}function E(m,S,$,w,k,Y){var H=o.copy(),R=vt(Y||$,S),X,P,h;if((h=n.call(m,new wn("beforestart",{sourceEvent:$,target:f,identifier:k,active:s,x:R[0],y:R[1],dx:0,dy:0,dispatch:H}),w))!=null)return X=h.x-R[0]||0,P=h.y-R[1]||0,function y(p,b,N){var M=R,C;switch(p){case"start":r[k]=y,C=s++;break;case"end":delete r[k],--s;case"drag":R=vt(N||b,S),C=s;break}H.call(p,m,new wn(p,{sourceEvent:b,subject:h,target:f,identifier:k,active:C,x:R[0]+X,y:R[1]+P,dx:R[0]-M[0],dy:R[1]-M[1],dispatch:H}),w)}}return f.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Me(!!m),f):t},f.container=function(m){return arguments.length?(e=typeof m=="function"?m:Me(m),f):e},f.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Me(m),f):n},f.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Me(!!m),f):i},f.on=function(){var m=o.on.apply(o,arguments);return m===o?f:m},f.clickDistance=function(m){return arguments.length?(d=(m=+m)*m,f):Math.sqrt(d)},f}function Bn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ar(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function be(){}var ge=.7,Oe=1/ge,Ut="\\s*([+-]?\\d+)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ya=/^#([0-9a-f]{3,8})$/,ma=new RegExp(`^rgb\\(${Ut},${Ut},${Ut}\\)$`),xa=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),wa=new RegExp(`^rgba\\(${Ut},${Ut},${Ut},${pe}\\)$`),va=new RegExp(`^rgba\\(${_t},${_t},${_t},${pe}\\)$`),_a=new RegExp(`^hsl\\(${pe},${_t},${_t}\\)$`),ba=new RegExp(`^hsla\\(${pe},${_t},${_t},${pe}\\)$`),ai={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bn(be,ye,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:li,formatHex:li,formatHex8:Ea,formatHsl:Na,formatRgb:ci,toString:ci});function li(){return this.rgb().formatHex()}function Ea(){return this.rgb().formatHex8()}function Na(){return lr(this).formatHsl()}function ci(){return this.rgb().formatRgb()}function ye(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ya.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ui(e):n===3?new ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Te(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ma.exec(t))?new ct(e[1],e[2],e[3],1):(e=xa.exec(t))?new ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wa.exec(t))?Te(e[1],e[2],e[3],e[4]):(e=va.exec(t))?Te(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_a.exec(t))?hi(e[1],e[2]/100,e[3]/100,1):(e=ba.exec(t))?hi(e[1],e[2]/100,e[3]/100,e[4]):ai.hasOwnProperty(t)?ui(ai[t]):t==="transparent"?new ct(NaN,NaN,NaN,0):null}function ui(t){return new ct(t>>16&255,t>>8&255,t&255,1)}function Te(t,e,n,i){return i<=0&&(t=e=n=NaN),new ct(t,e,n,i)}function Ma(t){return t instanceof be||(t=ye(t)),t?(t=t.rgb(),new ct(t.r,t.g,t.b,t.opacity)):new ct}function vn(t,e,n,i){return arguments.length===1?Ma(t):new ct(t,e,n,i??1)}function ct(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Bn(ct,vn,ar(be,{brighter(t){return t=t==null?Oe:Math.pow(Oe,t),new ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ct(Rt(this.r),Rt(this.g),Rt(this.b),Be(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fi,formatHex:fi,formatHex8:Ta,formatRgb:di,toString:di}));function fi(){return`#${Xt(this.r)}${Xt(this.g)}${Xt(this.b)}`}function Ta(){return`#${Xt(this.r)}${Xt(this.g)}${Xt(this.b)}${Xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function di(){const t=Be(this.opacity);return`${t===1?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${t===1?")":`, ${t})`}`}function Be(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xt(t){return t=Rt(t),(t<16?"0":"")+t.toString(16)}function hi(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new gt(t,e,n,i)}function lr(t){if(t instanceof gt)return new gt(t.h,t.s,t.l,t.opacity);if(t instanceof be||(t=ye(t)),!t)return new gt;if(t instanceof gt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(e===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new gt(s,a,l,t.opacity)}function Aa(t,e,n,i){return arguments.length===1?lr(t):new gt(t,e,n,i??1)}function gt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Bn(gt,Aa,ar(be,{brighter(t){return t=t==null?Oe:Math.pow(Oe,t),new gt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ge:Math.pow(ge,t),new gt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ct(fn(t>=240?t-240:t+120,r,i),fn(t,r,i),fn(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new gt(gi(this.h),Ae(this.s),Ae(this.l),Be(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Be(this.opacity);return`${t===1?"hsl(":"hsla("}${gi(this.h)}, ${Ae(this.s)*100}%, ${Ae(this.l)*100}%${t===1?")":`, ${t})`}`}}));function gi(t){return t=(t||0)%360,t<0?t+360:t}function Ae(t){return Math.max(0,Math.min(1,t||0))}function fn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const cr=t=>()=>t;function Sa(t,e){return function(n){return t+n*e}}function Ca(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function ka(t){return(t=+t)==1?ur:function(e,n){return n-e?Ca(e,n,t):cr(isNaN(e)?n:e)}}function ur(t,e){var n=e-t;return n?Sa(t,n):cr(isNaN(t)?e:t)}const pi=function t(e){var n=ka(e);function i(r,o){var s=n((r=vn(r)).r,(o=vn(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),c=ur(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i}(1);function Ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var _n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(_n.source,"g");function Pa(t){return function(){return t}}function Ia(t){return function(e){return t(e)+""}}function Ha(t,e){var n=_n.lastIndex=dn.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(i=_n.exec(t))&&(r=dn.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Ht(i,r)})),n=dn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Ia(l[0].x):Pa(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var yi=180/Math.PI,bn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fr(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*yi,skewX:Math.atan(l)*yi,scaleX:s,scaleY:a}}var Se;function za(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?bn:fr(e.a,e.b,e.c,e.d,e.e,e.f)}function $a(t){return t==null||(Se||(Se=document.createElementNS("http://www.w3.org/2000/svg","g")),Se.setAttribute("transform",t),!(t=Se.transform.baseVal.consolidate()))?bn:(t=t.matrix,fr(t.a,t.b,t.c,t.d,t.e,t.f))}function dr(t,e,n,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,d,f,g,x){if(c!==d||u!==f){var T=g.push("translate(",null,e,null,n);x.push({i:T-4,x:Ht(c,d)},{i:T-2,x:Ht(u,f)})}else(d||f)&&g.push("translate("+d+e+f+n)}function s(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:Ht(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}function a(c,u,d,f){c!==u?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:Ht(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}function l(c,u,d,f,g,x){if(c!==d||u!==f){var T=g.push(r(g)+"scale(",null,",",null,")");x.push({i:T-4,x:Ht(c,d)},{i:T-2,x:Ht(u,f)})}else(d!==1||f!==1)&&g.push(r(g)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,d,f),s(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(g){for(var x=-1,T=f.length,_;++x<T;)d[(_=f[x]).i]=_.x(g);return d.join("")}}}var Xa=dr(za,"px, ","px)","deg)"),Ya=dr($a,", ",")",")"),Ra=1e-12;function mi(t){return((t=Math.exp(t))+1/t)/2}function Oa(t){return((t=Math.exp(t))-1/t)/2}function Ba(t){return((t=Math.exp(2*t))-1)/(t+1)}const Va=function t(e,n,i){function r(o,s){var a=o[0],l=o[1],c=o[2],u=s[0],d=s[1],f=s[2],g=u-a,x=d-l,T=g*g+x*x,_,v;if(T<Ra)v=Math.log(f/c)/e,_=function(w){return[a+w*g,l+w*x,c*Math.exp(e*w*v)]};else{var A=Math.sqrt(T),E=(f*f-c*c+i*T)/(2*c*n*A),m=(f*f-c*c-i*T)/(2*f*n*A),S=Math.log(Math.sqrt(E*E+1)-E),$=Math.log(Math.sqrt(m*m+1)-m);v=($-S)/e,_=function(w){var k=w*v,Y=mi(S),H=c/(n*A)*(Y*Ba(e*k+S)-Oa(S));return[a+H*g,l+H*x,c*Y/mi(e*k+S)]}}return _.duration=v*1e3*e/Math.SQRT2,_}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return t(s,a,l)},r}(Math.SQRT2,2,4);var jt=0,ce=0,ae=0,hr=1e3,Ve,ue,Le=0,Bt=0,Je=0,me=typeof performance=="object"&&performance.now?performance:Date,gr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vn(){return Bt||(gr(La),Bt=me.now()+Je)}function La(){Bt=0}function De(){this._call=this._time=this._next=null}De.prototype=pr.prototype={constructor:De,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Vn():+n)+(e==null?0:+e),!this._next&&ue!==this&&(ue?ue._next=this:Ve=this,ue=this),this._call=t,this._time=n,En()},stop:function(){this._call&&(this._call=null,this._time=1/0,En())}};function pr(t,e,n){var i=new De;return i.restart(t,e,n),i}function Da(){Vn(),++jt;for(var t=Ve,e;t;)(e=Bt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--jt}function xi(){Bt=(Le=me.now())+Je,jt=ce=0;try{Da()}finally{jt=0,Wa(),Bt=0}}function Fa(){var t=me.now(),e=t-Le;e>hr&&(Je-=e,Le=t)}function Wa(){for(var t,e=Ve,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ve=n);ue=t,En(i)}function En(t){if(!jt){ce&&(ce=clearTimeout(ce));var e=t-Bt;e>24?(t<1/0&&(ce=setTimeout(xi,t-me.now()-Je)),ae&&(ae=clearInterval(ae))):(ae||(Le=me.now(),ae=setInterval(Fa,hr)),jt=1,gr(xi))}}function wi(t,e,n){var i=new De;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var qa=Qe("start","end","cancel","interrupt"),Ga=[],yr=0,vi=1,Nn=2,He=3,_i=4,Mn=5,ze=6;function je(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Ka(t,n,{name:e,index:i,group:r,on:qa,tween:Ga,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:yr})}function Ln(t,e){var n=xt(t,e);if(n.state>yr)throw new Error("too late; already scheduled");return n}function bt(t,e){var n=xt(t,e);if(n.state>He)throw new Error("too late; already running");return n}function xt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ka(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=pr(o,0,n.time);function o(c){n.state=vi,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,d,f,g;if(n.state!==vi)return l();for(u in i)if(g=i[u],g.name===n.name){if(g.state===He)return wi(s);g.state===_i?(g.state=ze,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[u]):+u<e&&(g.state=ze,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[u])}if(wi(function(){n.state===He&&(n.state=_i,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Nn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Nn){for(n.state=He,r=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=g);r.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Mn,1),d=-1,f=r.length;++d<f;)r[d].call(t,u);n.state===Mn&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ze,n.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function $e(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Nn&&i.state<Mn,i.state=ze,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function Ua(t){return this.each(function(){$e(this,t)})}function Qa(t,e){var n,i;return function(){var r=bt(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Za(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=bt(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function Ja(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=xt(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?Qa:Za)(n,t,e))}function Dn(t,e,n){var i=t._id;return t.each(function(){var r=bt(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return xt(r,i).value[e]}}function mr(t,e){var n;return(typeof e=="number"?Ht:e instanceof ye?pi:(n=ye(e))?(e=n,pi):Ha)(t,e)}function ja(t){return function(){this.removeAttribute(t)}}function tl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function el(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function nl(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function il(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function rl(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function ol(t,e){var n=Ze(t),i=n==="transform"?Ya:mr;return this.attrTween(t,typeof e=="function"?(n.local?rl:il)(n,i,Dn(this,"attr."+t,e)):e==null?(n.local?tl:ja)(n):(n.local?nl:el)(n,i,e))}function sl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function al(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ll(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&al(t,o)),n}return r._value=e,r}function cl(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&sl(t,o)),n}return r._value=e,r}function ul(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ze(t);return this.tween(n,(i.local?ll:cl)(i,e))}function fl(t,e){return function(){Ln(this,t).delay=+e.apply(this,arguments)}}function dl(t,e){return e=+e,function(){Ln(this,t).delay=e}}function hl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fl:dl)(e,t)):xt(this.node(),e).delay}function gl(t,e){return function(){bt(this,t).duration=+e.apply(this,arguments)}}function pl(t,e){return e=+e,function(){bt(this,t).duration=e}}function yl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gl:pl)(e,t)):xt(this.node(),e).duration}function ml(t,e){if(typeof e!="function")throw new Error;return function(){bt(this,t).ease=e}}function xl(t){var e=this._id;return arguments.length?this.each(ml(e,t)):xt(this.node(),e).ease}function wl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;bt(this,t).ease=n}}function vl(t){if(typeof t!="function")throw new Error;return this.each(wl(this._id,t))}function _l(t){typeof t!="function"&&(t=Ki(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new St(i,this._parents,this._name,this._id)}function bl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=e[a],c=n[a],u=l.length,d=s[a]=new Array(u),f,g=0;g<u;++g)(f=l[g]||c[g])&&(d[g]=f);for(;a<i;++a)s[a]=e[a];return new St(s,this._parents,this._name,this._id)}function El(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Nl(t,e,n){var i,r,o=El(e)?Ln:bt;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}function Ml(t,e){var n=this._id;return arguments.length<2?xt(this.node(),n).on.on(t):this.each(Nl(n,t,e))}function Tl(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Al(){return this.on("end.remove",Tl(this._id))}function Sl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Rn(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,c=o[s]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=t.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,je(c[f],e,n,f,c,xt(u,n)));return new St(o,this._parents,e,n)}function Cl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Gi(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=t.call(u,u.__data__,d,l),g,x=xt(u,n),T=0,_=f.length;T<_;++T)(g=f[T])&&je(g,e,n,T,f,x);o.push(f),s.push(u)}return new St(o,s,e,n)}var kl=_e.prototype.constructor;function Pl(){return new kl(this._groups,this._parents)}function Il(t,e){var n,i,r;return function(){var o=Jt(this,t),s=(this.style.removeProperty(t),Jt(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function xr(t){return function(){this.style.removeProperty(t)}}function Hl(t,e,n){var i,r=n+"",o;return function(){var s=Jt(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function zl(t,e,n){var i,r,o;return function(){var s=Jt(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Jt(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}function $l(t,e){var n,i,r,o="style."+e,s="end."+o,a;return function(){var l=bt(this,t),c=l.on,u=l.value[o]==null?a||(a=xr(e)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(s,r=u),l.on=i}}function Xl(t,e,n){var i=(t+="")=="transform"?Xa:mr;return e==null?this.styleTween(t,Il(t,i)).on("end.style."+t,xr(t)):typeof e=="function"?this.styleTween(t,zl(t,i,Dn(this,"style."+t,e))).each($l(this._id,t)):this.styleTween(t,Hl(t,i,e),n).on("end.style."+t,null)}function Yl(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Rl(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&Yl(t,s,n)),i}return o._value=e,o}function Ol(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Rl(t,e,n??""))}function Bl(t){return function(){this.textContent=t}}function Vl(t){return function(){var e=t(this);this.textContent=e??""}}function Ll(t){return this.tween("text",typeof t=="function"?Vl(Dn(this,"text",t)):Bl(t==null?"":t+""))}function Dl(t){return function(e){this.textContent=t.call(this,e)}}function Fl(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Dl(r)),e}return i._value=t,i}function Wl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Fl(t))}function ql(){for(var t=this._name,e=this._id,n=wr(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=xt(l,e);je(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new St(i,this._parents,t,n)}function Gl(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var c=bt(this,i),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),r===0&&o()})}var Kl=0;function St(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function wr(){return++Kl}var Nt=_e.prototype;St.prototype={constructor:St,select:Sl,selectAll:Cl,selectChild:Nt.selectChild,selectChildren:Nt.selectChildren,filter:_l,merge:bl,selection:Pl,transition:ql,call:Nt.call,nodes:Nt.nodes,node:Nt.node,size:Nt.size,empty:Nt.empty,each:Nt.each,on:Ml,attr:ol,attrTween:ul,style:Xl,styleTween:Ol,text:Ll,textTween:Wl,remove:Al,tween:Ja,delay:hl,duration:yl,ease:xl,easeVarying:vl,end:Gl,[Symbol.iterator]:Nt[Symbol.iterator]};function Ul(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ql={time:null,delay:0,duration:250,ease:Ul};function Zl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Jl(t){var e,n;t instanceof St?(e=t._id,t=t._name):(e=wr(),(n=Ql).time=Vn(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&je(l,t,e,c,s,n||Zl(l,e));return new St(i,this._parents,t,e)}_e.prototype.interrupt=Ua;_e.prototype.transition=Jl;const Ce=t=>()=>t;function jl(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Mt(t,e,n){this.k=t,this.x=e,this.y=n}Mt.prototype={constructor:Mt,scale:function(t){return t===1?this:new Mt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Mt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tn=new Mt(1,0,0);vr.prototype=Mt.prototype;function vr(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tn;return t.__zoom}function hn(t){t.stopImmediatePropagation()}function le(t){t.preventDefault(),t.stopImmediatePropagation()}function tc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ec(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function bi(){return this.__zoom||tn}function nc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function rc(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function oc(){var t=tc,e=ec,n=rc,i=nc,r=ic,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Va,c=Qe("start","zoom","end"),u,d,f,g=500,x=150,T=0,_=10;function v(h){h.property("__zoom",bi).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",Y).on("dblclick.zoom",H).filter(r).on("touchstart.zoom",R).on("touchmove.zoom",X).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(h,y,p,b){var N=h.selection?h.selection():h;N.property("__zoom",bi),h!==N?S(h,y,p,b):N.interrupt().each(function(){$(this,arguments).event(b).start().zoom(null,typeof y=="function"?y.apply(this,arguments):y).end()})},v.scaleBy=function(h,y,p,b){v.scaleTo(h,function(){var N=this.__zoom.k,M=typeof y=="function"?y.apply(this,arguments):y;return N*M},p,b)},v.scaleTo=function(h,y,p,b){v.transform(h,function(){var N=e.apply(this,arguments),M=this.__zoom,C=p==null?m(N):typeof p=="function"?p.apply(this,arguments):p,z=M.invert(C),O=typeof y=="function"?y.apply(this,arguments):y;return n(E(A(M,O),C,z),N,s)},p,b)},v.translateBy=function(h,y,p,b){v.transform(h,function(){return n(this.__zoom.translate(typeof y=="function"?y.apply(this,arguments):y,typeof p=="function"?p.apply(this,arguments):p),e.apply(this,arguments),s)},null,b)},v.translateTo=function(h,y,p,b,N){v.transform(h,function(){var M=e.apply(this,arguments),C=this.__zoom,z=b==null?m(M):typeof b=="function"?b.apply(this,arguments):b;return n(tn.translate(z[0],z[1]).scale(C.k).translate(typeof y=="function"?-y.apply(this,arguments):-y,typeof p=="function"?-p.apply(this,arguments):-p),M,s)},b,N)};function A(h,y){return y=Math.max(o[0],Math.min(o[1],y)),y===h.k?h:new Mt(y,h.x,h.y)}function E(h,y,p){var b=y[0]-p[0]*h.k,N=y[1]-p[1]*h.k;return b===h.x&&N===h.y?h:new Mt(h.k,b,N)}function m(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function S(h,y,p,b){h.on("start.zoom",function(){$(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(b).end()}).tween("zoom",function(){var N=this,M=arguments,C=$(N,M).event(b),z=e.apply(N,M),O=p==null?m(z):typeof p=="function"?p.apply(N,M):p,F=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),V=N.__zoom,W=typeof y=="function"?y.apply(N,M):y,K=l(V.invert(O).concat(F/V.k),W.invert(O).concat(F/W.k));return function(Q){if(Q===1)Q=W;else{var U=K(Q),Z=F/U[2];Q=new Mt(Z,O[0]-U[0]*Z,O[1]-U[1]*Z)}C.zoom(null,Q)}})}function $(h,y,p){return!p&&h.__zooming||new w(h,y)}function w(h,y){this.that=h,this.args=y,this.active=0,this.sourceEvent=null,this.extent=e.apply(h,y),this.taps=0}w.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,y){return this.mouse&&h!=="mouse"&&(this.mouse[1]=y.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=y.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=y.invert(this.touch1[0])),this.that.__zoom=y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var y=dt(this.that).datum();c.call(h,this.that,new jl(h,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:c}),y)}};function k(h,...y){if(!t.apply(this,arguments))return;var p=$(this,y).event(h),b=this.__zoom,N=Math.max(o[0],Math.min(o[1],b.k*Math.pow(2,i.apply(this,arguments)))),M=vt(h);if(p.wheel)(p.mouse[0][0]!==M[0]||p.mouse[0][1]!==M[1])&&(p.mouse[1]=b.invert(p.mouse[0]=M)),clearTimeout(p.wheel);else{if(b.k===N)return;p.mouse=[M,b.invert(M)],$e(this),p.start()}le(h),p.wheel=setTimeout(C,x),p.zoom("mouse",n(E(A(b,N),p.mouse[0],p.mouse[1]),p.extent,s));function C(){p.wheel=null,p.end()}}function Y(h,...y){if(f||!t.apply(this,arguments))return;var p=h.currentTarget,b=$(this,y,!0).event(h),N=dt(h.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",F,!0),M=vt(h,p),C=h.clientX,z=h.clientY;rr(h.view),hn(h),b.mouse=[M,this.__zoom.invert(M)],$e(this),b.start();function O(V){if(le(V),!b.moved){var W=V.clientX-C,K=V.clientY-z;b.moved=W*W+K*K>T}b.event(V).zoom("mouse",n(E(b.that.__zoom,b.mouse[0]=vt(V,p),b.mouse[1]),b.extent,s))}function F(V){N.on("mousemove.zoom mouseup.zoom",null),or(V.view,b.moved),le(V),b.event(V).end()}}function H(h,...y){if(t.apply(this,arguments)){var p=this.__zoom,b=vt(h.changedTouches?h.changedTouches[0]:h,this),N=p.invert(b),M=p.k*(h.shiftKey?.5:2),C=n(E(A(p,M),b,N),e.apply(this,y),s);le(h),a>0?dt(this).transition().duration(a).call(S,C,b,h):dt(this).call(v.transform,C,b,h)}}function R(h,...y){if(t.apply(this,arguments)){var p=h.touches,b=p.length,N=$(this,y,h.changedTouches.length===b).event(h),M,C,z,O;for(hn(h),C=0;C<b;++C)z=p[C],O=vt(z,this),O=[O,this.__zoom.invert(O),z.identifier],N.touch0?!N.touch1&&N.touch0[2]!==O[2]&&(N.touch1=O,N.taps=0):(N.touch0=O,M=!0,N.taps=1+!!u);u&&(u=clearTimeout(u)),M&&(N.taps<2&&(d=O[0],u=setTimeout(function(){u=null},g)),$e(this),N.start())}}function X(h,...y){if(this.__zooming){var p=$(this,y).event(h),b=h.changedTouches,N=b.length,M,C,z,O;for(le(h),M=0;M<N;++M)C=b[M],z=vt(C,this),p.touch0&&p.touch0[2]===C.identifier?p.touch0[0]=z:p.touch1&&p.touch1[2]===C.identifier&&(p.touch1[0]=z);if(C=p.that.__zoom,p.touch1){var F=p.touch0[0],V=p.touch0[1],W=p.touch1[0],K=p.touch1[1],Q=(Q=W[0]-F[0])*Q+(Q=W[1]-F[1])*Q,U=(U=K[0]-V[0])*U+(U=K[1]-V[1])*U;C=A(C,Math.sqrt(Q/U)),z=[(F[0]+W[0])/2,(F[1]+W[1])/2],O=[(V[0]+K[0])/2,(V[1]+K[1])/2]}else if(p.touch0)z=p.touch0[0],O=p.touch0[1];else return;p.zoom("touch",n(E(C,z,O),p.extent,s))}}function P(h,...y){if(this.__zooming){var p=$(this,y).event(h),b=h.changedTouches,N=b.length,M,C;for(hn(h),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),M=0;M<N;++M)C=b[M],p.touch0&&p.touch0[2]===C.identifier?delete p.touch0:p.touch1&&p.touch1[2]===C.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(C=vt(C,this),Math.hypot(d[0]-C[0],d[1]-C[1])<_)){var z=dt(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return v.wheelDelta=function(h){return arguments.length?(i=typeof h=="function"?h:Ce(+h),v):i},v.filter=function(h){return arguments.length?(t=typeof h=="function"?h:Ce(!!h),v):t},v.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Ce(!!h),v):r},v.extent=function(h){return arguments.length?(e=typeof h=="function"?h:Ce([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),v):e},v.scaleExtent=function(h){return arguments.length?(o[0]=+h[0],o[1]=+h[1],v):[o[0],o[1]]},v.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(h){return arguments.length?(n=h,v):n},v.duration=function(h){return arguments.length?(a=+h,v):a},v.interpolate=function(h){return arguments.length?(l=h,v):l},v.on=function(){var h=c.on.apply(c,arguments);return h===c?v:h},v.clickDistance=function(h){return arguments.length?(T=(h=+h)*h,v):Math.sqrt(T)},v.tapDistance=function(h){return arguments.length?(_=+h,v):_},v}const xe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Fe=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var te;(function(t){t.Strict="strict",t.Loose="loose"})(te||(te={}));var fe;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(fe||(fe={}));var Tn;(function(t){t.Partial="partial",t.Full="full"})(Tn||(Tn={}));const An={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Sn;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Sn||(Sn={}));var Ei;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ei||(Ei={}));var q;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(q||(q={}));const Ni={[q.Left]:q.Right,[q.Right]:q.Left,[q.Top]:q.Bottom,[q.Bottom]:q.Top};function sc(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function Mi(t,e,n){if(!n)return;const i=[];t.forEach((r,o)=>{e!=null&&e.has(o)||i.push(r)}),i.length&&n(i)}function Fu(t){return t===null?null:t?"valid":"invalid"}const ac=t=>"id"in t&&"source"in t&&"target"in t,Wu=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Fn=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Ee=(t,e=[0,0])=>{const{width:n,height:i}=Lt(t),r=t.origin??e,o=n*r[0],s=i*r[1];return{x:t.position.x-o,y:t.position.y-s}},qu=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,r)=>{const o=typeof r=="string";let s=!e.nodeLookup&&!o?r:void 0;e.nodeLookup&&(s=o?e.nodeLookup.get(r):Fn(r)?r:e.nodeLookup.get(r.id));const a=s?We(s,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return en(i,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return nn(n)},Wn=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const r=We(i);n=en(n,r)}}),nn(n)},lc=(t,e,[n,i,r]=[0,0,1],o=!1,s=!1)=>{const a={...on(e,[n,i,r]),width:e.width/r,height:e.height/r},l=[];for(const c of t.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=c;if(s&&!d||f)continue;const g=u.width??c.width??c.initialWidth??null,x=u.height??c.height??c.initialHeight??null,T=qn(a,rn(c)),_=(g??0)*(x??0),v=o&&T>0;(!c.internals.handleBounds||v||T>=_||c.dragging)&&l.push(c)}return l},cc=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function uc(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(r=>r.id)):null;return t.forEach(r=>{r.measured.width&&r.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function fc({nodes:t,width:e,height:n,panZoom:i,minZoom:r,maxZoom:o},s){if(t.size===0)return Promise.resolve(!0);const a=uc(t,s),l=Wn(a),c=Er(l,e,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await i.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function dc({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(t),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??i;let d=r;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",xe.error005());else{const g=a.measured.width,x=a.measured.height;g&&x&&(d=[[l,c],[l+g,c+x]])}else a&&ne(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const f=ne(d)?Vt(e,d,s.measured):e;return(s.measured.width===void 0||s.measured.height===void 0)&&(o==null||o("015",xe.error015())),{position:{x:f.x-l+(s.measured.width??0)*u[0],y:f.y-c+(s.measured.height??0)*u[1]},positionAbsolute:f}}async function hc({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(t.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),x=!g&&f.parentId&&s.find(T=>T.id===f.parentId);(g||x)&&s.push(f)}const a=new Set(e.map(f=>f.id)),l=i.filter(f=>f.deletable!==!1),u=cc(s,l);for(const f of l)a.has(f.id)&&!u.find(x=>x.id===f.id)&&u.push(f);if(!r)return{edges:u,nodes:s};const d=await r({nodes:s,edges:u});return typeof d=="boolean"?d?{edges:u,nodes:s}:{edges:[],nodes:[]}:d}const ee=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Vt=(t={x:0,y:0},e,n)=>({x:ee(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:ee(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function _r(t,e,n){const{width:i,height:r}=Lt(n),{x:o,y:s}=n.internals.positionAbsolute;return Vt(t,[[o,s],[o+i,s+r]],e)}const Ti=(t,e,n)=>t<e?ee(Math.abs(t-e),1,e)/e:t>n?-ee(Math.abs(t-n),1,e)/e:0,br=(t,e,n=15,i=40)=>{const r=Ti(t.x,i,e.width-i)*n,o=Ti(t.y,i,e.height-i)*n;return[r,o]},en=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Cn=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),nn=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),rn=(t,e=[0,0])=>{var r,o;const{x:n,y:i}=Fn(t)?t.internals.positionAbsolute:Ee(t,e);return{x:n,y:i,width:((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0,height:((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0}},We=(t,e=[0,0])=>{var r,o;const{x:n,y:i}=Fn(t)?t.internals.positionAbsolute:Ee(t,e);return{x:n,y:i,x2:n+(((r=t.measured)==null?void 0:r.width)??t.width??t.initialWidth??0),y2:i+(((o=t.measured)==null?void 0:o.height)??t.height??t.initialHeight??0)}},gc=(t,e)=>nn(en(Cn(t),Cn(e))),qn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},Gu=t=>Yt(t.width)&&Yt(t.height)&&Yt(t.x)&&Yt(t.y),Yt=t=>!isNaN(t)&&isFinite(t),pc=(t,e)=>{},Gn=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),on=({x:t,y:e},[n,i,r],o=!1,s=[1,1])=>{const a={x:(t-n)/r,y:(e-i)/r};return o?Gn(a,s):a},kn=({x:t,y:e},[n,i,r])=>({x:t*r+n,y:e*r+i});function Wt(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function yc(t,e,n){if(typeof t=="string"||typeof t=="number"){const i=Wt(t,n),r=Wt(t,e);return{top:i,right:r,bottom:i,left:r,x:r*2,y:i*2}}if(typeof t=="object"){const i=Wt(t.top??t.y??0,n),r=Wt(t.bottom??t.y??0,n),o=Wt(t.left??t.x??0,e),s=Wt(t.right??t.x??0,e);return{top:i,right:s,bottom:r,left:o,x:o+s,y:i+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function mc(t,e,n,i,r,o){const{x:s,y:a}=kn(t,[e,n,i]),{x:l,y:c}=kn({x:t.x+t.width,y:t.y+t.height},[e,n,i]),u=r-l,d=o-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(u),bottom:Math.floor(d)}}const Er=(t,e,n,i,r,o)=>{const s=yc(o,e,n),a=(e-s.x)/t.width,l=(n-s.y)/t.height,c=Math.min(a,l),u=ee(c,i,r),d=t.x+t.width/2,f=t.y+t.height/2,g=e/2-d*u,x=n/2-f*u,T=mc(t,g,x,u,e,n),_={left:Math.min(T.left-s.left,0),top:Math.min(T.top-s.top,0),right:Math.min(T.right-s.right,0),bottom:Math.min(T.bottom-s.bottom,0)};return{x:g-_.left+_.right,y:x-_.top+_.bottom,zoom:u}},Nr=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function ne(t){return t!==void 0&&t!=="parent"}function Lt(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function Ku(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Uu(t,e={width:0,height:0},n,i,r){const o={...t},s=i.get(n);if(s){const a=s.origin||r;o.x+=s.internals.positionAbsolute.x-(e.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(e.height??0)*a[1]}return o}function xc(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),resolve:t,reject:e}}function de(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:s}=Ot(t),a=on({x:o-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},i),{x:l,y:c}=n?Gn(a,e):a;return{xSnapped:l,ySnapped:c,...a}}const Mr=t=>({width:t.offsetWidth,height:t.offsetHeight}),wc=t=>{var e;return((e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},vc=["INPUT","SELECT","TEXTAREA"];function Qu(t){var i,r;const e=((r=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:r[0])||t.target;return(e==null?void 0:e.nodeType)!==1?!1:vc.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const Tr=t=>"clientX"in t,Ot=(t,e)=>{var o,s;const n=Tr(t),i=n?t.clientX:(o=t.touches)==null?void 0:o[0].clientX,r=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},Ai=(t,e,n,i,r)=>{const o=e.querySelectorAll(`.${t}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:t,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/i,y:(a.top-n.top)/i,...Mr(s)}})};function _c({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=t*.125+r*.375+s*.375+n*.125,c=e*.125+o*.375+a*.375+i*.125,u=Math.abs(l-t),d=Math.abs(c-e);return[l,c,u,d]}function ke(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Si({pos:t,x1:e,y1:n,x2:i,y2:r,c:o}){switch(t){case q.Left:return[e-ke(e-i,o),n];case q.Right:return[e+ke(i-e,o),n];case q.Top:return[e,n-ke(n-r,o)];case q.Bottom:return[e,n+ke(r-n,o)]}}function bc({sourceX:t,sourceY:e,sourcePosition:n=q.Bottom,targetX:i,targetY:r,targetPosition:o=q.Top,curvature:s=.25}){const[a,l]=Si({pos:n,x1:t,y1:e,x2:i,y2:r,c:s}),[c,u]=Si({pos:o,x1:i,y1:r,x2:t,y2:e,c:s}),[d,f,g,x]=_c({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${t},${e} C${a},${l} ${c},${u} ${i},${r}`,d,f,g,x]}function Ar({sourceX:t,sourceY:e,targetX:n,targetY:i}){const r=Math.abs(n-t)/2,o=n<t?n+r:n-r,s=Math.abs(i-e)/2,a=i<e?i+s:i-s;return[o,a,r,s]}function Ec({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(o?s:0)}function Nc({sourceNode:t,targetNode:e,width:n,height:i,transform:r}){const o=en(We(t),We(e));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return qn(s,nn(o))>0}const Mc=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Tc=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Ac=(t,e)=>{if(!t.source||!t.target)return e;let n;return ac(t)?n={...t}:n={...t,id:Mc(t)},Tc(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Sc({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[r,o,s,a]=Ar({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,r,o,s,a]}const Ci={[q.Left]:{x:-1,y:0},[q.Right]:{x:1,y:0},[q.Top]:{x:0,y:-1},[q.Bottom]:{x:0,y:1}},Cc=({source:t,sourcePosition:e=q.Bottom,target:n})=>e===q.Left||e===q.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ki=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function kc({source:t,sourcePosition:e=q.Bottom,target:n,targetPosition:i=q.Top,center:r,offset:o}){const s=Ci[e],a=Ci[i],l={x:t.x+s.x*o,y:t.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},u=Cc({source:l,sourcePosition:e,target:c}),d=u.x!==0?"x":"y",f=u[d];let g=[],x,T;const _={x:0,y:0},v={x:0,y:0},[A,E,m,S]=Ar({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){x=r.x??A,T=r.y??E;const w=[{x,y:l.y},{x,y:c.y}],k=[{x:l.x,y:T},{x:c.x,y:T}];s[d]===f?g=d==="x"?w:k:g=d==="x"?k:w}else{const w=[{x:l.x,y:c.y}],k=[{x:c.x,y:l.y}];if(d==="x"?g=s.x===f?k:w:g=s.y===f?w:k,e===i){const P=Math.abs(t[d]-n[d]);if(P<=o){const h=Math.min(o-1,o-P);s[d]===f?_[d]=(l[d]>t[d]?-1:1)*h:v[d]=(c[d]>n[d]?-1:1)*h}}if(e!==i){const P=d==="x"?"y":"x",h=s[d]===a[P],y=l[P]>c[P],p=l[P]<c[P];(s[d]===1&&(!h&&y||h&&p)||s[d]!==1&&(!h&&p||h&&y))&&(g=d==="x"?w:k)}const Y={x:l.x+_.x,y:l.y+_.y},H={x:c.x+v.x,y:c.y+v.y},R=Math.max(Math.abs(Y.x-g[0].x),Math.abs(H.x-g[0].x)),X=Math.max(Math.abs(Y.y-g[0].y),Math.abs(H.y-g[0].y));R>=X?(x=(Y.x+H.x)/2,T=g[0].y):(x=g[0].x,T=(Y.y+H.y)/2)}return[[t,{x:l.x+_.x,y:l.y+_.y},...g,{x:c.x+v.x,y:c.y+v.y},n],x,T,m,S]}function Pc(t,e,n,i){const r=Math.min(ki(t,e)/2,ki(e,n)/2,i),{x:o,y:s}=e;if(t.x===o&&o===n.x||t.y===s&&s===n.y)return`L${o} ${s}`;if(t.y===s){const c=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${o+r*c},${s}Q ${o},${s} ${o},${s+r*u}`}const a=t.x<n.x?1:-1,l=t.y<n.y?-1:1;return`L ${o},${s+r*l}Q ${o},${s} ${o+r*a},${s}`}function Sr({sourceX:t,sourceY:e,sourcePosition:n=q.Bottom,targetX:i,targetY:r,targetPosition:o=q.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[u,d,f,g,x]=kc({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:a,y:l},offset:c});return[u.reduce((_,v,A)=>{let E="";return A>0&&A<u.length-1?E=Pc(u[A-1],v,u[A+1],s):E=`${A===0?"M":"L"}${v.x} ${v.y}`,_+=E,_},""),d,f,g,x]}function Pi(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Ic(t){var d;const{sourceNode:e,targetNode:n}=t;if(!Pi(e)||!Pi(n))return null;const i=e.internals.handleBounds||Ii(e.handles),r=n.internals.handleBounds||Ii(n.handles),o=Hi((i==null?void 0:i.source)??[],t.sourceHandle),s=Hi(t.connectionMode===te.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),t.targetHandle);if(!o||!s)return(d=t.onError)==null||d.call(t,"008",xe.error008(o?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const a=(o==null?void 0:o.position)||q.Bottom,l=(s==null?void 0:s.position)||q.Top,c=we(e,o,a),u=we(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}function Ii(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function we(t,e,n=q.Left,i=!1){const r=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,o=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:s,height:a}=e??Lt(t);if(i)return{x:r+s/2,y:o+a/2};switch((e==null?void 0:e.position)??n){case q.Top:return{x:r+s/2,y:o};case q.Right:return{x:r+s,y:o+a/2};case q.Bottom:return{x:r+s/2,y:o+a};case q.Left:return{x:r,y:o+a/2}}}function Hi(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Hc(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function zc(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return t.reduce((s,a)=>([a.markerStart||i,a.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=Hc(l,e);o.has(c)||(s.push({id:c,color:l.color||n,...l}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Kn={nodeOrigin:[0,0],nodeExtent:Fe,elevateNodesOnSelect:!0,defaults:{}},$c={...Kn,checkEquality:!0};function Un(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function Xc(t,e,n){const i=Un(Kn,n);for(const r of t.values())if(r.parentId)Qn(r,t,e,i);else{const o=Ee(r,i.nodeOrigin),s=ne(r.extent)?r.extent:i.nodeExtent,a=Vt(o,s,Lt(r));r.internals.positionAbsolute=a}}function Cr(t,e,n,i){var l,c;const r=Un($c,i);let o=t.length>0;const s=new Map(e),a=r!=null&&r.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let d=s.get(u.id);if(r.checkEquality&&u===(d==null?void 0:d.internals.userNode))e.set(u.id,d);else{const f=Ee(u,r.nodeOrigin),g=ne(u.extent)?u.extent:r.nodeExtent,x=Vt(f,g,Lt(u));d={...r.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:x,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:kr(u,a),userNode:u}},e.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(o=!1),u.parentId&&Qn(d,e,n,i)}return o}function Yc(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Qn(t,e,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:s}=Un(Kn,i),a=t.parentId,l=e.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Yc(t,n);const c=r?1e3:0,{x:u,y:d,z:f}=Rc(t,l,o,s,c),{positionAbsolute:g}=t.internals,x=u!==g.x||d!==g.y;(x||f!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:x?{x:u,y:d}:g,z:f}})}function kr(t,e){return(Yt(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function Rc(t,e,n,i,r){const{x:o,y:s}=e.internals.positionAbsolute,a=Lt(t),l=Ee(t,n),c=ne(t.extent)?Vt(l,t.extent,a):l;let u=Vt({x:o+c.x,y:s+c.y},i,a);t.extent==="parent"&&(u=_r(u,a,e));const d=kr(t,r),f=e.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function Oc(t,e,n,i=[0,0]){var s;const r=[],o=new Map;for(const a of t){const l=e.get(a.parentId);if(!l)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??rn(l),u=gc(c,a.rect);o.set(a.parentId,{expandedRect:u,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},c)=>{var E;const u=l.internals.positionAbsolute,d=Lt(l),f=l.origin??i,g=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,x=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,T=Math.max(d.width,Math.round(a.width)),_=Math.max(d.height,Math.round(a.height)),v=(T-d.width)*f[0],A=(_-d.height)*f[1];(g>0||x>0||v||A)&&(r.push({id:c,type:"position",position:{x:l.position.x-g+v,y:l.position.y-x+A}}),(E=n.get(c))==null||E.forEach(m=>{t.some(S=>S.id===m.id)||r.push({id:m.id,type:"position",position:{x:m.position.x+g,y:m.position.y+x}})})),(d.width<a.width||d.height<a.height||g||x)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:T+(g?f[0]*g-v:0),height:_+(x?f[1]*x-A:0)}})}),r}function Bc(t,e,n,i,r,o){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(c.transform),d=[];for(const f of t.values()){const g=e.get(f.id);if(!g)continue;if(g.hidden){e.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const x=Mr(f.nodeElement),T=g.measured.width!==x.width||g.measured.height!==x.height;if(!!(x.width&&x.height&&(T||!g.internals.handleBounds||f.force))){const v=f.nodeElement.getBoundingClientRect(),A=ne(g.extent)?g.extent:o;let{positionAbsolute:E}=g.internals;g.parentId&&g.extent==="parent"?E=_r(E,x,e.get(g.parentId)):A&&(E=Vt(E,A,x));const m={...g,measured:x,internals:{...g.internals,positionAbsolute:E,handleBounds:{source:Ai("source",f.nodeElement,v,u,g.id),target:Ai("target",f.nodeElement,v,u,g.id)}}};e.set(g.id,m),g.parentId&&Qn(m,e,n,{nodeOrigin:r}),a=!0,T&&(l.push({id:g.id,type:"dimensions",dimensions:x}),g.expandParent&&g.parentId&&d.push({id:g.id,parentId:g.parentId,rect:rn(m,r)}))}}if(d.length>0){const f=Oc(d,e,n,r);l.push(...f)}return{changes:l,updatedInternals:a}}async function Vc({delta:t,panZoom:e,transform:n,translateExtent:i,width:r,height:o}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const s=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,o]],i),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function zi(t,e,n,i,r,o){let s=r;const a=i.get(s)||new Map;i.set(s,a.set(n,e)),s=`${r}-${t}`;const l=i.get(s)||new Map;if(i.set(s,l.set(n,e)),o){s=`${r}-${t}-${o}`;const c=i.get(s)||new Map;i.set(s,c.set(n,e))}}function Pr(t,e,n){t.clear(),e.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:a=null}=i,l={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:a},c=`${r}-${s}--${o}-${a}`,u=`${o}-${a}--${r}-${s}`;zi("source",l,u,t,r,s),zi("target",l,c,t,o,a),e.set(i.id,i)}}function Ir(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Ir(n,e):!1}function $i(t,e,n){var r;let i=t;do{if((r=i==null?void 0:i.matches)!=null&&r.call(i,e))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function Lc(t,e,n,i){const r=new Map;for(const[o,s]of t)if((s.selected||s.id===i)&&(!s.parentId||!Ir(s,t))&&(s.draggable||e&&typeof s.draggable>"u")){const a=t.get(o);a&&r.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function gn({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var s,a,l;const r=[];for(const[c,u]of e){const d=(s=n.get(c))==null?void 0:s.internals.userNode;d&&r.push({...d,position:u.position,dragging:i})}if(!t)return[r[0],r];const o=(a=n.get(t))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=e.get(t))==null?void 0:l.position)||o.position,dragging:i}:r[0],r]}function Zu({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},u=null,d=!1,f=null,g=!1;function x({noDragClassName:_,handleSelector:v,domNode:A,isSelectable:E,nodeId:m,nodeClickDistance:S=0}){f=dt(A);function $({x:H,y:R},X){const{nodeLookup:P,nodeExtent:h,snapGrid:y,snapToGrid:p,nodeOrigin:b,onNodeDrag:N,onSelectionDrag:M,onError:C,updateNodePositions:z}=e();o={x:H,y:R};let O=!1,F={x:0,y:0,x2:0,y2:0};if(a.size>1&&h){const V=Wn(a);F=Cn(V)}for(const[V,W]of a){if(!P.has(V))continue;let K={x:H-W.distance.x,y:R-W.distance.y};p&&(K=Gn(K,y));let Q=[[h[0][0],h[0][1]],[h[1][0],h[1][1]]];if(a.size>1&&h&&!W.extent){const{positionAbsolute:et}=W.internals,nt=et.x-F.x+h[0][0],tt=et.x+W.measured.width-F.x2+h[1][0],Ne=et.y-F.y+h[0][1],Et=et.y+W.measured.height-F.y2+h[1][1];Q=[[nt,Ne],[tt,Et]]}const{position:U,positionAbsolute:Z}=dc({nodeId:V,nextPosition:K,nodeLookup:P,nodeExtent:Q,nodeOrigin:b,onError:C});O=O||W.position.x!==U.x||W.position.y!==U.y,W.position=U,W.internals.positionAbsolute=Z}if(O&&(z(a,!0),X&&(i||N||!m&&M))){const[V,W]=gn({nodeId:m,dragItems:a,nodeLookup:P});i==null||i(X,a,V,W),N==null||N(X,V,W),m||M==null||M(X,W)}}async function w(){if(!u)return;const{transform:H,panBy:R,autoPanSpeed:X,autoPanOnNodeDrag:P}=e();if(!P){l=!1,cancelAnimationFrame(s);return}const[h,y]=br(c,u,X);(h!==0||y!==0)&&(o.x=(o.x??0)-h/H[2],o.y=(o.y??0)-y/H[2],await R({x:h,y})&&$(o,null)),s=requestAnimationFrame(w)}function k(H){var O;const{nodeLookup:R,multiSelectionActive:X,nodesDraggable:P,transform:h,snapGrid:y,snapToGrid:p,selectNodesOnDrag:b,onNodeDragStart:N,onSelectionDragStart:M,unselectNodesAndEdges:C}=e();d=!0,(!b||!E)&&!X&&m&&((O=R.get(m))!=null&&O.selected||C()),E&&b&&m&&(t==null||t(m));const z=de(H.sourceEvent,{transform:h,snapGrid:y,snapToGrid:p,containerBounds:u});if(o=z,a=Lc(R,P,z,m),a.size>0&&(n||N||!m&&M)){const[F,V]=gn({nodeId:m,dragItems:a,nodeLookup:R});n==null||n(H.sourceEvent,a,F,V),N==null||N(H.sourceEvent,F,V),m||M==null||M(H.sourceEvent,V)}}const Y=sr().clickDistance(S).on("start",H=>{const{domNode:R,nodeDragThreshold:X,transform:P,snapGrid:h,snapToGrid:y}=e();u=(R==null?void 0:R.getBoundingClientRect())||null,g=!1,X===0&&k(H),o=de(H.sourceEvent,{transform:P,snapGrid:h,snapToGrid:y,containerBounds:u}),c=Ot(H.sourceEvent,u)}).on("drag",H=>{const{autoPanOnNodeDrag:R,transform:X,snapGrid:P,snapToGrid:h,nodeDragThreshold:y,nodeLookup:p}=e(),b=de(H.sourceEvent,{transform:X,snapGrid:P,snapToGrid:h,containerBounds:u});if((H.sourceEvent.type==="touchmove"&&H.sourceEvent.touches.length>1||m&&!p.has(m))&&(g=!0),!g){if(!l&&R&&d&&(l=!0,w()),!d){const N=b.xSnapped-(o.x??0),M=b.ySnapped-(o.y??0);Math.sqrt(N*N+M*M)>y&&k(H)}(o.x!==b.xSnapped||o.y!==b.ySnapped)&&a&&d&&(c=Ot(H.sourceEvent,u),$(b,H.sourceEvent))}}).on("end",H=>{if(!(!d||g)&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:R,updateNodePositions:X,onNodeDragStop:P,onSelectionDragStop:h}=e();if(X(a,!1),r||P||!m&&h){const[y,p]=gn({nodeId:m,dragItems:a,nodeLookup:R,dragging:!1});r==null||r(H.sourceEvent,a,y,p),P==null||P(H.sourceEvent,y,p),m||h==null||h(H.sourceEvent,p)}}}).filter(H=>{const R=H.target;return!H.button&&(!_||!$i(R,`.${_}`,A))&&(!v||$i(R,v,A))});f.call(Y)}function T(){f==null||f.on(".drag",null)}return{update:x,destroy:T}}function Dc(t,e,n){const i=[],r={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const o of e.values())qn(r,rn(o))>0&&i.push(o);return i}const Fc=250;function Wc(t,e,n,i){var a,l;let r=[],o=1/0;const s=Dc(t,n,e+Fc);for(const c of s){const u=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of u){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:f,y:g}=we(c,d,d.position,!0),x=Math.sqrt(Math.pow(f-t.x,2)+Math.pow(g-t.y,2));x>e||(x<o?(r=[{...d,x:f,y:g}],o=x):x===o&&r.push({...d,x:f,y:g}))}}if(!r.length)return null;if(r.length>1){const c=i.type==="source"?"target":"source";return r.find(u=>u.type===c)??r[0]}return r[0]}function Hr(t,e,n,i,r,o=!1){var c,u,d;const s=i.get(t);if(!s)return null;const a=r==="strict"?(c=s.internals.handleBounds)==null?void 0:c[e]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...we(s,l,l.position,!0)}:l}function zr(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function qc(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const $r=()=>!0;function Gc(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:g,onConnectStart:x,onConnect:T,onConnectEnd:_,isValidConnection:v=$r,onReconnectEnd:A,updateConnection:E,getTransform:m,getFromHandle:S,autoPanSpeed:$}){const w=wc(t.target);let k=0,Y;const{x:H,y:R}=Ot(t),X=w==null?void 0:w.elementFromPoint(H,R),P=zr(o,X),h=a==null?void 0:a.getBoundingClientRect();if(!h||!P)return;const y=Hr(r,P,i,l,e);if(!y)return;let p=Ot(t,h),b=!1,N=null,M=!1,C=null;function z(){if(!u||!h)return;const[Z,et]=br(p,h,$);f({x:Z,y:et}),k=requestAnimationFrame(z)}const O={...y,nodeId:r,type:P,position:y.position},F=l.get(r),W={inProgress:!0,isValid:null,from:we(F,O,q.Left,!0),fromHandle:O,fromPosition:O.position,fromNode:F,to:p,toHandle:null,toPosition:Ni[O.position],toNode:null};E(W);let K=W;x==null||x(t,{nodeId:r,handleId:i,handleType:P});function Q(Z){if(!S()||!O){U(Z);return}const et=m();p=Ot(Z,h),Y=Wc(on(p,et,!1,[1,1]),n,l,O),b||(z(),b=!0);const nt=Xr(Z,{handle:Y,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:s?"target":"source",isValidConnection:v,doc:w,lib:c,flowId:d,nodeLookup:l});C=nt.handleDomNode,N=nt.connection,M=qc(!!Y,nt.isValid);const tt={...K,isValid:M,to:Y&&M?kn({x:Y.x,y:Y.y},et):p,toHandle:nt.toHandle,toPosition:M&&nt.toHandle?nt.toHandle.position:Ni[O.position],toNode:nt.toHandle?l.get(nt.toHandle.nodeId):null};M&&Y&&K.toHandle&&tt.toHandle&&K.toHandle.type===tt.toHandle.type&&K.toHandle.nodeId===tt.toHandle.nodeId&&K.toHandle.id===tt.toHandle.id&&K.to.x===tt.to.x&&K.to.y===tt.to.y||(E(tt),K=tt)}function U(Z){(Y||C)&&N&&M&&(T==null||T(N));const{inProgress:et,...nt}=K,tt={...nt,toPosition:K.toHandle?K.toPosition:null};_==null||_(Z,tt),o&&(A==null||A(Z,tt)),g(),cancelAnimationFrame(k),b=!1,M=!1,N=null,C=null,w.removeEventListener("mousemove",Q),w.removeEventListener("mouseup",U),w.removeEventListener("touchmove",Q),w.removeEventListener("touchend",U)}w.addEventListener("mousemove",Q),w.addEventListener("mouseup",U),w.addEventListener("touchmove",Q),w.addEventListener("touchend",U)}function Xr(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:c=$r,nodeLookup:u}){const d=o==="target",f=e?s.querySelector(`.${a}-flow__handle[data-id="${l}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:g,y:x}=Ot(t),T=s.elementFromPoint(g,x),_=T!=null&&T.classList.contains(`${a}-flow__handle`)?T:f,v={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const A=zr(void 0,_),E=_.getAttribute("data-nodeid"),m=_.getAttribute("data-handleid"),S=_.classList.contains("connectable"),$=_.classList.contains("connectableend");if(!E||!A)return v;const w={source:d?E:i,sourceHandle:d?m:r,target:d?i:E,targetHandle:d?r:m};v.connection=w;const Y=S&&$&&(n===te.Strict?d&&A==="source"||!d&&A==="target":E!==i||m!==r);v.isValid=Y&&c(w),v.toHandle=Hr(E,A,m,u,n,!1)}return v}const Kc={onPointerDown:Gc,isValid:Xr},Uc=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,sn=t=>({x:t.x,y:t.y,zoom:t.k}),pn=({x:t,y:e,zoom:n})=>tn.translate(t,e).scale(n),qt=(t,e)=>t.target.closest(`.${e}`),Yr=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),yn=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},Rr=t=>{const e=t.ctrlKey&&Nr()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Qc({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(qt(u,e))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&s){const _=vt(u),v=Rr(u),A=d*Math.pow(2,v);i.scaleTo(n,A,_,u);return}const f=u.deltaMode===1?20:1;let g=r===fe.Vertical?0:u.deltaX*f,x=r===fe.Horizontal?0:u.deltaY*f;!Nr()&&u.shiftKey&&r!==fe.Vertical&&(g=u.deltaY*f,x=0),i.translateBy(n,-(g/d)*o,-(x/d)*o,{internal:!0});const T=sn(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,a==null||a(u,T)),t.isPanScrolling&&(l==null||l(u,T),t.panScrollTimeout=setTimeout(()=>{c==null||c(u,T),t.isPanScrolling=!1},150))}}function Zc({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,r){const o=i.type==="wheel",s=!e&&o&&!i.ctrlKey,a=qt(i,t);if(i.ctrlKey&&o&&a&&i.preventDefault(),s||a)return null;i.preventDefault(),n.call(this,i,r)}}function Jc({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var o,s,a;if((o=i.sourceEvent)!=null&&o.internal)return;const r=sn(i.transform);t.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=r,((a=i.sourceEvent)==null?void 0:a.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,r))}}function jc({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,a;t.usedRightMouseButton=!!(n&&Yr(e,t.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((a=o.sourceEvent)!=null&&a.internal)&&(r==null||r(o.sourceEvent,sn(o.transform)))}}function tu({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(t.isZoomingOrPanning=!1,o&&Yr(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),t.usedRightMouseButton=!1,i(!1),r&&Uc(t.prevViewport,s.transform))){const l=sn(s.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,l)},n?150:0)}}}function eu({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return u=>{var x;const d=t||e,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(qt(u,`${c}-flow__node`)||qt(u,`${c}-flow__edge`)))return!0;if(!i&&!d&&!r&&!o&&!n||s||qt(u,a)&&u.type==="wheel"||qt(u,l)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!t)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((x=u.touches)==null?void 0:x.length)>1)return u.preventDefault(),!1;if(!d&&!r&&!f&&u.type==="wheel"||!i&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(i)&&!i.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Ju({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=t.getBoundingClientRect(),f=oc().clickDistance(!Yt(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(r),g=dt(t).call(f);E({x:o.x,y:o.y,zoom:ee(o.zoom,e,n)},[[0,0],[d.width,d.height]],r);const x=g.on("wheel.zoom"),T=g.on("dblclick.zoom");f.wheelDelta(Rr);function _(X,P){return g?new Promise(h=>{f==null||f.transform(yn(g,P==null?void 0:P.duration,()=>h(!0)),X)}):Promise.resolve(!1)}function v({noWheelClassName:X,noPanClassName:P,onPaneContextMenu:h,userSelectionActive:y,panOnScroll:p,panOnDrag:b,panOnScrollMode:N,panOnScrollSpeed:M,preventScrolling:C,zoomOnPinch:z,zoomOnScroll:O,zoomOnDoubleClick:F,zoomActivationKeyPressed:V,lib:W,onTransformChange:K}){y&&!u.isZoomingOrPanning&&A();const U=p&&!V&&!y?Qc({zoomPanValues:u,noWheelClassName:X,d3Selection:g,d3Zoom:f,panOnScrollMode:N,panOnScrollSpeed:M,zoomOnPinch:z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):Zc({noWheelClassName:X,preventScrolling:C,d3ZoomHandler:x});if(g.on("wheel.zoom",U,{passive:!1}),!y){const et=Jc({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});f.on("start",et);const nt=jc({zoomPanValues:u,panOnDrag:b,onPaneContextMenu:!!h,onPanZoom:s,onTransformChange:K});f.on("zoom",nt);const tt=tu({zoomPanValues:u,panOnDrag:b,panOnScroll:p,onPaneContextMenu:h,onPanZoomEnd:l,onDraggingChange:c});f.on("end",tt)}const Z=eu({zoomActivationKeyPressed:V,panOnDrag:b,zoomOnScroll:O,panOnScroll:p,zoomOnDoubleClick:F,zoomOnPinch:z,userSelectionActive:y,noPanClassName:P,noWheelClassName:X,lib:W});f.filter(Z),F?g.on("dblclick.zoom",T):g.on("dblclick.zoom",null)}function A(){f.on("zoom",null)}async function E(X,P,h){const y=pn(X),p=f==null?void 0:f.constrain()(y,P,h);return p&&await _(p),new Promise(b=>b(p))}async function m(X,P){const h=pn(X);return await _(h,P),new Promise(y=>y(h))}function S(X){if(g){const P=pn(X),h=g.property("__zoom");(h.k!==X.zoom||h.x!==X.x||h.y!==X.y)&&(f==null||f.transform(g,P,null,{sync:!0}))}}function $(){const X=g?vr(g.node()):{x:0,y:0,k:1};return{x:X.x,y:X.y,zoom:X.k}}function w(X,P){return g?new Promise(h=>{f==null||f.scaleTo(yn(g,P==null?void 0:P.duration,()=>h(!0)),X)}):Promise.resolve(!1)}function k(X,P){return g?new Promise(h=>{f==null||f.scaleBy(yn(g,P==null?void 0:P.duration,()=>h(!0)),X)}):Promise.resolve(!1)}function Y(X){f==null||f.scaleExtent(X)}function H(X){f==null||f.translateExtent(X)}function R(X){const P=!Yt(X)||X<0?0:X;f==null||f.clickDistance(P)}return{update:v,destroy:A,setViewport:m,setViewportConstrained:E,getViewport:$,scaleTo:w,scaleBy:k,setScaleExtent:Y,setTranslateExtent:H,syncViewport:S,setClickDistance:R}}var Xi;(function(t){t.Line="line",t.Handle="handle"})(Xi||(Xi={}));const ju=["top-left","top-right","bottom-left","bottom-right"],tf=["top","right","bottom","left"];function nu({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:r,affectsY:o}){const s=t-e,a=n-i,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function iu(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),r=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:r}}function Pt(t,e){return Math.max(0,e-t)}function It(t,e){return Math.max(0,t-e)}function Pe(t,e,n){return Math.max(0,e-t,t-n)}function Yi(t,e){return t?!e:e}function ru(t,e,n,i,r,o,s,a){let{affectsX:l,affectsY:c}=e;const{isHorizontal:u,isVertical:d}=e,f=u&&d,{xSnapped:g,ySnapped:x}=n,{minWidth:T,maxWidth:_,minHeight:v,maxHeight:A}=i,{x:E,y:m,width:S,height:$,aspectRatio:w}=t;let k=Math.floor(u?g-t.pointerX:0),Y=Math.floor(d?x-t.pointerY:0);const H=S+(l?-k:k),R=$+(c?-Y:Y),X=-o[0]*S,P=-o[1]*$;let h=Pe(H,T,_),y=Pe(R,v,A);if(s){let N=0,M=0;l&&k<0?N=Pt(E+k+X,s[0][0]):!l&&k>0&&(N=It(E+H+X,s[1][0])),c&&Y<0?M=Pt(m+Y+P,s[0][1]):!c&&Y>0&&(M=It(m+R+P,s[1][1])),h=Math.max(h,N),y=Math.max(y,M)}if(a){let N=0,M=0;l&&k>0?N=It(E+k,a[0][0]):!l&&k<0&&(N=Pt(E+H,a[1][0])),c&&Y>0?M=It(m+Y,a[0][1]):!c&&Y<0&&(M=Pt(m+R,a[1][1])),h=Math.max(h,N),y=Math.max(y,M)}if(r){if(u){const N=Pe(H/w,v,A)*w;if(h=Math.max(h,N),s){let M=0;!l&&!c||l&&!c&&f?M=It(m+P+H/w,s[1][1])*w:M=Pt(m+P+(l?k:-k)/w,s[0][1])*w,h=Math.max(h,M)}if(a){let M=0;!l&&!c||l&&!c&&f?M=Pt(m+H/w,a[1][1])*w:M=It(m+(l?k:-k)/w,a[0][1])*w,h=Math.max(h,M)}}if(d){const N=Pe(R*w,T,_)/w;if(y=Math.max(y,N),s){let M=0;!l&&!c||c&&!l&&f?M=It(E+R*w+X,s[1][0])/w:M=Pt(E+(c?Y:-Y)*w+X,s[0][0])/w,y=Math.max(y,M)}if(a){let M=0;!l&&!c||c&&!l&&f?M=Pt(E+R*w,a[1][0])/w:M=It(E+(c?Y:-Y)*w,a[0][0])/w,y=Math.max(y,M)}}}Y=Y+(Y<0?y:-y),k=k+(k<0?h:-h),r&&(f?H>R*w?Y=(Yi(l,c)?-k:k)/w:k=(Yi(l,c)?-Y:Y)*w:u?(Y=k/w,c=l):(k=Y*w,l=c));const p=l?E+k:E,b=c?m+Y:m;return{width:S+(l?-k:k),height:$+(c?-Y:Y),x:o[0]*k*(l?-1:1)+p,y:o[1]*Y*(c?-1:1)+b}}const Or={width:0,height:0,x:0,y:0},ou={...Or,pointerX:0,pointerY:0,aspectRatio:1};function su(t){return[[0,0],[t.measured.width,t.measured.height]]}function au(t,e,n){const i=e.position.x+t.position.x,r=e.position.y+t.position.y,o=t.measured.width??0,s=t.measured.height??0,a=n[0]*o,l=n[1]*s;return[[i-a,r-l],[i+o-a,r+s-l]]}function ef({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:r}){const o=dt(t);function s({controlPosition:l,boundaries:c,keepAspectRatio:u,resizeDirection:d,onResizeStart:f,onResize:g,onResizeEnd:x,shouldResize:T}){let _={...Or},v={...ou};const A=iu(l);let E,m=null,S=[],$,w,k;const Y=sr().on("start",H=>{const{nodeLookup:R,transform:X,snapGrid:P,snapToGrid:h,nodeOrigin:y,paneDomNode:p}=n();if(E=R.get(e),!E)return;m=(p==null?void 0:p.getBoundingClientRect())??null;const{xSnapped:b,ySnapped:N}=de(H.sourceEvent,{transform:X,snapGrid:P,snapToGrid:h,containerBounds:m});_={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},v={..._,pointerX:b,pointerY:N,aspectRatio:_.width/_.height},$=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&($=R.get(E.parentId),w=$&&E.extent==="parent"?su($):void 0),S=[],k=void 0;for(const[M,C]of R)if(C.parentId===e&&(S.push({id:M,position:{...C.position},extent:C.extent}),C.extent==="parent"||C.expandParent)){const z=au(C,E,C.origin??y);k?k=[[Math.min(z[0][0],k[0][0]),Math.min(z[0][1],k[0][1])],[Math.max(z[1][0],k[1][0]),Math.max(z[1][1],k[1][1])]]:k=z}f==null||f(H,{..._})}).on("drag",H=>{const{transform:R,snapGrid:X,snapToGrid:P,nodeOrigin:h}=n(),y=de(H.sourceEvent,{transform:R,snapGrid:X,snapToGrid:P,containerBounds:m}),p=[];if(!E)return;const{x:b,y:N,width:M,height:C}=_,z={},O=E.origin??h,{width:F,height:V,x:W,y:K}=ru(v,A,y,c,u,O,w,k),Q=F!==M,U=V!==C,Z=W!==b&&Q,et=K!==N&&U;if(!Z&&!et&&!Q&&!U)return;if((Z||et||O[0]===1||O[1]===1)&&(z.x=Z?W:_.x,z.y=et?K:_.y,_.x=z.x,_.y=z.y,S.length>0)){const Et=W-b,$t=K-N;for(const Dt of S)Dt.position={x:Dt.position.x-Et+O[0]*(F-M),y:Dt.position.y-$t+O[1]*(V-C)},p.push(Dt)}if((Q||U)&&(z.width=Q&&(!d||d==="horizontal")?F:_.width,z.height=U&&(!d||d==="vertical")?V:_.height,_.width=z.width,_.height=z.height),$&&E.expandParent){const Et=O[0]*(z.width??0);z.x&&z.x<Et&&(_.x=Et,v.x=v.x-(z.x-Et));const $t=O[1]*(z.height??0);z.y&&z.y<$t&&(_.y=$t,v.y=v.y-(z.y-$t))}const nt=nu({width:_.width,prevWidth:M,height:_.height,prevHeight:C,affectsX:A.affectsX,affectsY:A.affectsY}),tt={..._,direction:nt};(T==null?void 0:T(H,tt))!==!1&&(g==null||g(H,tt),i(z,p))}).on("end",H=>{x==null||x(H,{..._}),r==null||r({..._})});o.call(Y)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var lu=ie('<div role="button" tabindex="-1"><!></div>');function qe(t,e){pt(e,!1);const[n,i]=Bi(),r=()=>it(F,"$connectable",n),o=()=>it(U,"$connectionRadius",n),s=()=>it(K,"$domNode",n),a=()=>it(Q,"$nodeLookup",n),l=()=>it(W,"$connectionMode",n),c=()=>it(nt,"$lib",n),u=()=>it(Dr,"$autoPanOnConnect",n),d=()=>it(Ur,"$flowId",n),f=()=>it(et,"$isValidConnectionStore",n),g=()=>it(Ne,"$onedgecreate",n),x=()=>it(qr,"$onConnectAction",n),T=()=>it(Gr,"$onConnectStartAction",n),_=()=>it(Kr,"$onConnectEndAction",n),v=()=>it(Z,"$viewport",n),A=()=>it(Qr,"$connection",n),E=()=>it(Fr,"$edges",n),m=()=>it(Wr,"$connectionLookup",n),S=J(),$=J(),w=J(),k=J(),Y=J(),H=J(),R=J(),X=J();let P=I(e,"id",8,void 0),h=I(e,"type",8,"source"),y=I(e,"position",24,()=>q.Top),p=I(e,"style",8,void 0),b=I(e,"isValidConnection",8,void 0),N=I(e,"onconnect",8,void 0),M=I(e,"ondisconnect",8,void 0),C=I(e,"isConnectable",8,void 0),z=I(e,"class",8,void 0);const O=Xe("svelteflow__node_id"),F=Xe("svelteflow__node_connectable"),V=Zn(),{connectionMode:W,domNode:K,nodeLookup:Q,connectionRadius:U,viewport:Z,isValidConnection:et,lib:nt,addEdge:tt,onedgecreate:Ne,panBy:Et,cancelConnection:$t,updateConnection:Dt,autoPanOnConnect:Dr,edges:Fr,connectionLookup:Wr,onconnect:qr,onconnectstart:Gr,onconnectend:Kr,flowId:Ur,connection:Qr}=V;function Jn(rt){const ut=Tr(rt);(ut&&rt.button===0||!ut)&&Kc.onPointerDown(rt,{handleId:B(w),nodeId:O,isTarget:B(S),connectionRadius:o(),domNode:s(),nodeLookup:a(),connectionMode:l(),lib:c(),autoPanOnConnect:u(),flowId:d(),isValidConnection:b()??f(),updateConnection:Dt,cancelConnection:$t,panBy:Et,onConnect:ot=>{var kt;const Ct=g()?g()(ot):ot;Ct&&(tt(Ct),(kt=x())==null||kt(ot))},onConnectStart:(ot,Ct)=>{var kt;(kt=T())==null||kt(ot,{nodeId:Ct.nodeId,handleId:Ct.handleId,handleType:Ct.handleType})},onConnectEnd:(ot,Ct)=>{var kt;(kt=_())==null||kt(ot,Ct)},getTransform:()=>[v().x,v().y,v().zoom],getFromHandle:()=>A().fromHandle})}let Ft=J(null),re=J();lt(()=>G(h()),()=>{j(S,h()==="target")}),lt(()=>(G(C()),r()),()=>{j($,C()!==void 0?C():r())}),lt(()=>G(P()),()=>{j(w,P()||null)}),lt(()=>(G(N()),G(M()),E(),m(),G(h()),G(P())),()=>{(N()||M())&&(E(),j(re,m().get(`${O}-${h()}${P()?`-${P()}`:""}`)))}),lt(()=>(B(Ft),B(re),G(M()),G(N())),()=>{if(B(Ft)&&!sc(B(re),B(Ft))){const rt=B(re)??new Map;Mi(B(Ft),rt,M()),Mi(rt,B(Ft),N())}j(Ft,B(re)??new Map)}),lt(()=>A(),()=>{j(k,!!A().fromHandle)}),lt(()=>(A(),G(h()),B(w)),()=>{var rt,ut,ot;j(Y,((rt=A().fromHandle)==null?void 0:rt.nodeId)===O&&((ut=A().fromHandle)==null?void 0:ut.type)===h()&&((ot=A().fromHandle)==null?void 0:ot.id)===B(w))}),lt(()=>(A(),G(h()),B(w)),()=>{var rt,ut,ot;j(H,((rt=A().toHandle)==null?void 0:rt.nodeId)===O&&((ut=A().toHandle)==null?void 0:ut.type)===h()&&((ot=A().toHandle)==null?void 0:ot.id)===B(w))}),lt(()=>(l(),A(),G(h()),B(w)),()=>{var rt,ut,ot;j(R,l()===te.Strict?((rt=A().fromHandle)==null?void 0:rt.type)!==h():O!==((ut=A().fromHandle)==null?void 0:ut.nodeId)||B(w)!==((ot=A().fromHandle)==null?void 0:ot.id))}),lt(()=>(B(H),A()),()=>{j(X,B(H)&&A().isValid)}),ve(),mt();var ht=lu();at(ht,"data-nodeid",O);let jn;var Zr=Pn(ht);zn(Zr,e,"default",{}),In(ht),zt((rt,ut)=>{at(ht,"data-handleid",B(w)),at(ht,"data-handlepos",y()),at(ht,"data-id",`${d()??""}-${O??""}-${(P()||"")??""}-${h()??""}`),jn=Xn(ht,1,rt,null,jn,ut),Ue(ht,p())},[()=>$n(Yn(["svelte-flow__handle",`svelte-flow__handle-${y()}`,"nodrag","nopan",y(),z()])),()=>({valid:B(X),connectingto:B(H),connectingfrom:B(Y),source:!B(S),target:B(S),connectablestart:B($),connectableend:B($),connectable:B($),connectionindicator:B($)&&(!B(k)||B(R))})],Qt),Ye("mousedown",ht,Jn),Ye("touchstart",ht,Jn),Tt(t,ht),yt(),i()}var cu=ie("<!> <!>",1);function uu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["data","targetPosition","sourcePosition"]),pt(e,!1);let i=I(e,"data",24,()=>({label:"Node"})),r=I(e,"targetPosition",8,void 0),o=I(e,"sourcePosition",8,void 0);mt();var s=cu(),a=Ge(s);const l=Qt(()=>r()??q.Top);qe(a,{type:"target",get position(){return B(l)}});var c=Zt(a),u=Zt(c);const d=Qt(()=>o()??q.Bottom);qe(u,{type:"source",get position(){return B(d)}}),zt(()=>{var f;return Ke(c,` ${((f=i())==null?void 0:f.label)??""} `)}),Tt(t,s),yt()}var fu=ie(" <!>",1);function du(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["data","sourcePosition"]),pt(e,!1);let i=I(e,"data",24,()=>({label:"Node"})),r=I(e,"sourcePosition",8,void 0);mt(),Hn();var o=fu(),s=Ge(o),a=Zt(s);const l=Qt(()=>r()??q.Bottom);qe(a,{type:"source",get position(){return B(l)}}),zt(()=>{var c;return Ke(s,`${((c=i())==null?void 0:c.label)??""} `)}),Tt(t,o),yt()}var hu=ie(" <!>",1);function gu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["data","targetPosition"]),pt(e,!1);let i=I(e,"data",24,()=>({label:"Node"})),r=I(e,"targetPosition",8,void 0);mt(),Hn();var o=hu(),s=Ge(o),a=Zt(s);const l=Qt(()=>r()??q.Top);qe(a,{type:"target",get position(){return B(l)}}),zt(()=>{var c;return Ke(s,`${((c=i())==null?void 0:c.label)??""} `)}),Tt(t,o),yt()}function pu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,[])}function Ri(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function mn(t,{target:e,domNode:n}){return Ri(t,n,e),{async update({target:i,domNode:r}){Ri(t,r,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}var yu=ie("<div><!></div>");function mu(t,e){pt(e,!1);const[n,i]=Bi(),r=()=>it(o,"$domNode",n),{domNode:o}=Zn();mt();var s=yu(),a=Pn(s);zn(a,e,"default",{}),In(s),No(s,(l,c)=>mn==null?void 0:mn(l,c),()=>({target:".svelte-flow__edgelabel-renderer",domNode:r()})),Tt(t,s),yt(),i()}function xu(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:s}=Zn();return a=>{const l=L(t).get(a);if(!l){console.warn("012",xe.error012(a));return}(l.selectable||L(s)&&typeof l.selectable>"u")&&(e.set(null),n.set(null),l.selected?l.selected&&L(i)&&o({nodes:[],edges:[l]}):r([a]))}}var wu=ie('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function vu(t,e){pt(e,!1);let n=I(e,"style",8,void 0),i=I(e,"x",8,void 0),r=I(e,"y",8,void 0);const o=xu(),s=Xe("svelteflow__edge_id");mt(),mu(t,{children:(a,l)=>{var c=wu();let u;var d=Pn(c);zn(d,e,"default",{}),In(c),zt(()=>u=Ue(c,"pointer-events: all;"+n(),u,{transform:`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`})),Ye("keyup",c,()=>{}),Ye("click",c,()=>{s&&o(s)}),Tt(a,c)},$$slots:{default:!0}}),yt()}var _u=Oi('<path fill="none" class="svelte-flow__edge-interaction"></path>'),bu=Oi('<path fill="none"></path><!><!>',1);function an(t,e){pt(e,!1);let n=I(e,"id",8,void 0),i=I(e,"path",8),r=I(e,"label",8,void 0),o=I(e,"labelX",8,void 0),s=I(e,"labelY",8,void 0),a=I(e,"labelStyle",8,void 0),l=I(e,"markerStart",8,void 0),c=I(e,"markerEnd",8,void 0),u=I(e,"style",8,void 0),d=I(e,"interactionWidth",8,20),f=I(e,"class",8,void 0),g=d()===void 0?20:d();mt();var x=bu(),T=Ge(x),_=Zt(T);{var v=m=>{var S=_u();at(S,"stroke-opacity",0),at(S,"stroke-width",g),zt(()=>at(S,"d",i())),Tt(m,S)};ei(_,m=>{g&&m(v)})}var A=Zt(_);{var E=m=>{vu(m,{get x(){return o()},get y(){return s()},get style(){return a()},children:(S,$)=>{Hn();var w=Eo();zt(()=>Ke(w,r())),Tt(S,w)},$$slots:{default:!0}})};ei(A,m=>{r()&&m(E)})}zt(m=>{at(T,"id",n()),at(T,"d",i()),Xn(T,0,m),at(T,"marker-start",l()),at(T,"marker-end",c()),Ue(T,u())},[()=>$n(Yn(["svelte-flow__edge-path",f()]))],Qt),Tt(t,x),yt()}function Eu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),pt(e,!1);const i=J(),r=J(),o=J();let s=I(e,"label",8,void 0),a=I(e,"labelStyle",8,void 0),l=I(e,"style",8,void 0),c=I(e,"markerStart",8,void 0),u=I(e,"markerEnd",8,void 0),d=I(e,"interactionWidth",8,void 0),f=I(e,"sourceX",8),g=I(e,"sourceY",8),x=I(e,"sourcePosition",8),T=I(e,"targetX",8),_=I(e,"targetY",8),v=I(e,"targetPosition",8);lt(()=>(B(i),B(r),B(o),G(f()),G(g()),G(T()),G(_()),G(x()),G(v())),()=>{(A=>(j(i,A[0]),j(r,A[1]),j(o,A[2])))(bc({sourceX:f(),sourceY:g(),targetX:T(),targetY:_(),sourcePosition:x(),targetPosition:v()}))}),ve(),mt(),an(t,{get path(){return B(i)},get labelX(){return B(r)},get labelY(){return B(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return d()},get style(){return l()}}),yt()}function Nu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),pt(e,!1);const i=J(),r=J(),o=J();let s=I(e,"label",8,void 0),a=I(e,"labelStyle",8,void 0),l=I(e,"style",8,void 0),c=I(e,"markerStart",8,void 0),u=I(e,"markerEnd",8,void 0),d=I(e,"interactionWidth",8,void 0),f=I(e,"sourceX",8),g=I(e,"sourceY",8),x=I(e,"sourcePosition",8),T=I(e,"targetX",8),_=I(e,"targetY",8),v=I(e,"targetPosition",8);lt(()=>(B(i),B(r),B(o),G(f()),G(g()),G(T()),G(_()),G(x()),G(v())),()=>{(A=>(j(i,A[0]),j(r,A[1]),j(o,A[2])))(Sr({sourceX:f(),sourceY:g(),targetX:T(),targetY:_(),sourcePosition:x(),targetPosition:v()}))}),ve(),mt(),an(t,{get path(){return B(i)},get labelX(){return B(r)},get labelY(){return B(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return d()},get style(){return l()}}),yt()}function Mu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),pt(e,!1);const i=J(),r=J(),o=J();let s=I(e,"label",8,void 0),a=I(e,"labelStyle",8,void 0),l=I(e,"style",8,void 0),c=I(e,"markerStart",8,void 0),u=I(e,"markerEnd",8,void 0),d=I(e,"interactionWidth",8,void 0),f=I(e,"sourceX",8),g=I(e,"sourceY",8),x=I(e,"targetX",8),T=I(e,"targetY",8);lt(()=>(B(i),B(r),B(o),G(f()),G(g()),G(x()),G(T())),()=>{(_=>(j(i,_[0]),j(r,_[1]),j(o,_[2])))(Sc({sourceX:f(),sourceY:g(),targetX:x(),targetY:T()}))}),ve(),mt(),an(t,{get path(){return B(i)},get labelX(){return B(r)},get labelY(){return B(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return d()},get style(){return l()}}),yt()}function Tu(t,e){const n=st(e,["children","$$slots","$$events","$$legacy"]);st(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),pt(e,!1);const i=J(),r=J(),o=J();let s=I(e,"label",8,void 0),a=I(e,"labelStyle",8,void 0),l=I(e,"style",8,void 0),c=I(e,"markerStart",8,void 0),u=I(e,"markerEnd",8,void 0),d=I(e,"interactionWidth",8,void 0),f=I(e,"sourceX",8),g=I(e,"sourceY",8),x=I(e,"sourcePosition",8),T=I(e,"targetX",8),_=I(e,"targetY",8),v=I(e,"targetPosition",8);lt(()=>(B(i),B(r),B(o),G(f()),G(g()),G(T()),G(_()),G(x()),G(v())),()=>{(A=>(j(i,A[0]),j(r,A[1]),j(o,A[2])))(Sr({sourceX:f(),sourceY:g(),targetX:T(),targetY:_(),sourcePosition:x(),targetPosition:v(),borderRadius:0}))}),ve(),mt(),an(t,{get path(){return B(i)},get labelX(){return B(r)},get labelY(){return B(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return d()},get style(){return l()}}),yt()}function Au(t,e){const n=t.set,i=e.set,r=L(t),o=L(e);let a=r.length===0&&o.length>0?o:r;t.set(a);const l=c=>{const u=n(c);return a=u,i(a),u};t.set=e.set=l,t.update=e.update=c=>l(c(a))}function Su(t,e){const n=t.set,i=e.set;let r=L(e);t.set(r);const o=s=>{n(s),i(s),r=s};t.set=e.set=o,t.update=e.update=s=>o(s(r))}const Cu=(t,e,n)=>{if(!n)return;const i=L(t),r=e.set,o=n.set;let s=n?L(n):{x:0,y:0,zoom:1};e.set(s),e.set=a=>(r(a),o(a),s=a,a),n.set=a=>(i==null||i.syncViewport(a),r(a),o(a),s=a,a),e.update=a=>{e.set(a(s))},n.update=a=>{n.set(a(s))}},ku=(t,e,n,i=[0,0],r=Fe,o,s,a,l,c,u,d,f)=>{const{subscribe:g,set:x,update:T}=D([]);let _=t,v={},A=!0;const E=w=>{const k=Cr(w,e,n,{elevateNodesOnSelect:A,nodeOrigin:i,nodeExtent:r,defaults:v,checkEquality:!1});return L(o)&&k&&L(l)&&(fc({nodes:e,width:L(c),height:L(u),panZoom:L(l),minZoom:L(d),maxZoom:L(f)},L(s)).then(H=>{var R;(R=L(a))==null||R.resolve(H),a.set(null)}),o.set(!1),s.set(void 0)),_=w,x(_),_},m=w=>E(w(_)),S=w=>{v=w},$=w=>{A=w.elevateNodesOnSelect??A};return E(_),{subscribe:g,set:E,update:m,setDefaultOptions:S,setOptions:$}},Pu=(t,e,n,i)=>{const{subscribe:r,set:o,update:s}=D([]);let a=t,l={};const c=f=>{const g=l?f.map(x=>({...l,...x})):f;Pr(e,n,g),a=g,o(a)},u=f=>c(f(a)),d=f=>{l=f};return c(a),{subscribe:r,set:c,update:u,setDefaultOptions:d}},Br={input:du,output:gu,default:uu,group:pu},Vr={straight:Mu,smoothstep:Nu,default:Eu,step:Tu},Iu=({nodes:t=[],edges:e=[],width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s})=>{const a=new Map,l=new Map,c=new Map,u=new Map,d=o??[0,0],f=s??Fe;Cr(t,a,l,{nodeExtent:f,nodeOrigin:d,elevateNodesOnSelect:!1,checkEquality:!1}),Pr(c,u,e);let g={x:0,y:0,zoom:1};if(r&&n&&i){const $=Wn(a,{filter:w=>!!((w.width||w.initialWidth)&&(w.height||w.initialHeight))});g=Er($,n,i,.5,2,.1)}const x=D(!1),T=D(void 0),_=D(null),v=D(null),A=D(500),E=D(500),m=D(.5),S=D(2);return{flowId:D(null),nodes:ku(t,a,l,d,f,x,T,_,v,A,E,m,S),nodeLookup:wt(a),parentLookup:wt(l),edgeLookup:wt(u),visibleNodes:wt([]),edges:Pu(e,c,u),visibleEdges:wt([]),connectionLookup:wt(c),width:A,height:E,minZoom:m,maxZoom:S,nodeOrigin:D(d),nodeDragThreshold:D(1),nodeExtent:D(f),translateExtent:D(Fe),autoPanOnNodeDrag:D(!0),autoPanOnConnect:D(!0),fitViewQueued:x,fitViewOptions:T,fitViewResolver:_,panZoom:v,snapGrid:D(null),dragging:D(!1),selectionRect:D(null),selectionKeyPressed:D(!1),multiselectionKeyPressed:D(!1),deleteKeyPressed:D(!1),panActivationKeyPressed:D(!1),zoomActivationKeyPressed:D(!1),selectionRectMode:D(null),selectionMode:D(Tn.Partial),nodeTypes:D(Br),edgeTypes:D(Vr),viewport:D(g),connectionMode:D(te.Strict),domNode:D(null),connection:wt(An),connectionLineType:D(Sn.Bezier),connectionRadius:D(20),isValidConnection:D(()=>!0),nodesDraggable:D(!0),nodesConnectable:D(!0),elementsSelectable:D(!0),selectNodesOnDrag:D(!0),markers:wt([]),defaultMarkerColor:D("#b1b1b7"),lib:wt("svelte"),onlyRenderVisibleElements:D(!1),onerror:D(pc),ondelete:D(void 0),onedgecreate:D(void 0),onconnect:D(void 0),onconnectstart:D(void 0),onconnectend:D(void 0),onbeforedelete:D(void 0),nodesInitialized:D(!1),edgesInitialized:D(!1),viewportInitialized:D(!1),initialized:wt(!1)}};function Hu(t){const e=Gt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,r,o,s,a])=>r&&s&&a?n.filter(c=>{const u=i.get(c.source),d=i.get(c.target);return u&&d&&Nc({sourceNode:u,targetNode:d,width:s,height:a,transform:[o.x,o.y,o.zoom]})}):n);return Gt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,r,o])=>n.reduce((a,l)=>{const c=i.get(l.source),u=i.get(l.target);if(!c||!u)return a;const d=Ic({id:l.id,sourceNode:c,targetNode:u,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:r,onError:o});return d&&a.push({...l,zIndex:Ec({selected:l.selected,zIndex:l.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...d}),a},[]))}function zu(t){return Gt([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,r,o])=>{const s=[o.x,o.y,o.zoom];return n?lc(e,{x:0,y:0,width:i,height:r},s,!0):Array.from(e.values())})}const Lr=Symbol();function $u({nodes:t,edges:e,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=Iu({nodes:t,edges:e,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});function l(y){a.nodeTypes.set({...Br,...y})}function c(y){a.edgeTypes.set({...Vr,...y})}function u(y){const p=L(a.edges);a.edges.set(Ac(y,p))}const d=(y,p=!1)=>{var N;const b=L(a.nodeLookup);for(const[M,C]of y){const z=(N=b.get(M))==null?void 0:N.internals.userNode;z&&(z.position=C.position,z.dragging=p)}a.nodes.update(M=>M)};function f(y){var C,z,O;const p=L(a.nodeLookup),b=L(a.parentLookup),{changes:N,updatedInternals:M}=Bc(y,p,L(a.parentLookup),L(a.domNode),L(a.nodeOrigin));if(M){Xc(p,b,{nodeOrigin:o,nodeExtent:s});for(const F of N){const V=(C=p.get(F.id))==null?void 0:C.internals.userNode;if(V)switch(F.type){case"dimensions":{const W={...V.measured,...F.dimensions};F.setAttributes&&(V.width=((z=F.dimensions)==null?void 0:z.width)??V.width,V.height=((O=F.dimensions)==null?void 0:O.height)??V.height),V.measured=W;break}case"position":V.position=F.position??V.position;break}}a.nodes.update(F=>F),L(a.nodesInitialized)||a.nodesInitialized.set(!0)}}function g(y){const p=L(a.fitViewResolver)??xc();return a.fitViewQueued.set(!0),a.fitViewOptions.set(y),a.fitViewResolver.set(p),a.nodes.set(L(a.nodes)),p.promise}function x(y,p){const b=L(a.panZoom);return b?b.scaleBy(y,p):Promise.resolve(!1)}function T(y){return x(1.2,y)}function _(y){return x(1/1.2,y)}function v(y){const p=L(a.panZoom);p&&(p.setScaleExtent([y,L(a.maxZoom)]),a.minZoom.set(y))}function A(y){const p=L(a.panZoom);p&&(p.setScaleExtent([L(a.minZoom),y]),a.maxZoom.set(y))}function E(y){const p=L(a.panZoom);p&&(p.setTranslateExtent(y),a.translateExtent.set(y))}function m(y){let p=!1;return y.forEach(b=>{b.selected&&(b.selected=!1,p=!0)}),p}function S(y){var p;(p=L(a.panZoom))==null||p.setClickDistance(y)}function $(y){m((y==null?void 0:y.nodes)||L(a.nodes))&&a.nodes.set(L(a.nodes)),m((y==null?void 0:y.edges)||L(a.edges))&&a.edges.set(L(a.edges))}a.deleteKeyPressed.subscribe(async y=>{var p;if(y){const b=L(a.nodes),N=L(a.edges),M=b.filter(F=>F.selected),C=N.filter(F=>F.selected),{nodes:z,edges:O}=await hc({nodesToRemove:M,edgesToRemove:C,nodes:b,edges:N,onBeforeDelete:L(a.onbeforedelete)});(z.length||O.length)&&(a.nodes.update(F=>F.filter(V=>!z.some(W=>W.id===V.id))),a.edges.update(F=>F.filter(V=>!O.some(W=>W.id===V.id))),(p=L(a.ondelete))==null||p({nodes:z,edges:O}))}});function w(y){const p=L(a.multiselectionKeyPressed);a.nodes.update(b=>b.map(N=>{const M=y.includes(N.id),C=p&&N.selected||M;return N.selected=C,N})),p||a.edges.update(b=>b.map(N=>(N.selected=!1,N)))}function k(y){const p=L(a.multiselectionKeyPressed);a.edges.update(b=>b.map(N=>{const M=y.includes(N.id),C=p&&N.selected||M;return N.selected=C,N})),p||a.nodes.update(b=>b.map(N=>(N.selected=!1,N)))}function Y(y){var b;const p=(b=L(a.nodes))==null?void 0:b.find(N=>N.id===y);if(!p){console.warn("012",xe.error012(y));return}a.selectionRect.set(null),a.selectionRectMode.set(null),p.selected?p.selected&&L(a.multiselectionKeyPressed)&&$({nodes:[p],edges:[]}):w([y])}function H(y){const p=L(a.viewport);return Vc({delta:y,panZoom:L(a.panZoom),transform:[p.x,p.y,p.zoom],translateExtent:L(a.translateExtent),width:L(a.width),height:L(a.height)})}const R=D(An),X=y=>{R.set({...y})};function P(){R.set(An)}function h(){a.selectionRect.set(null),a.selectionRectMode.set(null),a.snapGrid.set(null),a.isValidConnection.set(()=>!0),$(),P()}return{...a,visibleEdges:Hu(a),visibleNodes:zu(a),connection:Gt([R,a.viewport],([y,p])=>y.inProgress?{...y,to:on(y.to,[p.x,p.y,p.zoom])}:{...y}),markers:Gt([a.edges,a.defaultMarkerColor,a.flowId],([y,p,b])=>zc(y,{defaultColor:p,id:b})),initialized:(()=>{let y=!1;const p=L(a.nodes).length,b=L(a.edges).length;return Gt([a.nodesInitialized,a.edgesInitialized,a.viewportInitialized],([N,M,C])=>y||(p===0?y=C:b===0?y=C&&N:y=C&&N&&M,y))})(),syncNodeStores:y=>Au(a.nodes,y),syncEdgeStores:y=>Su(a.edges,y),syncViewport:y=>Cu(a.panZoom,a.viewport,y),setNodeTypes:l,setEdgeTypes:c,addEdge:u,updateNodePositions:d,updateNodeInternals:f,zoomIn:T,zoomOut:_,fitView:y=>g(y),setMinZoom:v,setMaxZoom:A,setTranslateExtent:E,setPaneClickDistance:S,unselectNodesAndEdges:$,addSelectedNodes:w,addSelectedEdges:k,handleNodeSelection:Y,panBy:H,updateConnection:X,cancelConnection:P,reset:h}}function Zn(){const t=Xe(Lr);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function nf({nodes:t,edges:e,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=$u({nodes:t,edges:e,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});return po(Lr,{getStore:()=>a}),a}export{Mo as $,Fu as A,Eu as B,Sn as C,uu as D,Du as E,se as F,Bu as G,nf as H,te as I,Wu as J,qu as K,kn as L,Ei as M,on as N,hc as O,fe as P,Gu as Q,qn as R,Tn as S,rn as T,Er as U,Uu as V,Xi as W,Ju as X,ef as Y,tf as Z,ju as _,Vu as a,Lu as a0,No as b,$u as c,Xn as d,cc as e,lc as f,Ot as g,Ue as h,Zu as i,xe as j,Lr as k,$n as l,Yn as m,at as n,Ku as o,xu as p,Hc as q,Wn as r,zn as s,Yt as t,Zn as u,Nr as v,Qu as w,Sc as x,Sr as y,bc as z};
