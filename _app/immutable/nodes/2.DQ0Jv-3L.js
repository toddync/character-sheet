var fw=Object.defineProperty;var hw=Object.getPrototypeOf;var pw=Reflect.get;var Oh=n=>{throw TypeError(n)};var mw=(n,e,t)=>e in n?fw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var re=(n,e,t)=>mw(n,typeof e!="symbol"?e+"":e,t),hd=(n,e,t)=>e.has(n)||Oh("Cannot "+t);var O=(n,e,t)=>(hd(n,e,"read from private field"),t?t.call(n):e.get(n)),V=(n,e,t)=>e.has(n)?Oh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ct=(n,e,t,r)=>(hd(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ne=(n,e,t)=>(hd(n,e,"access private method"),t);var Th=(n,e,t)=>pw(hw(n),t,e);import{o as eu,p as gw,q as yw,r as Zm,t as G,a as C,k as wt,c as F,l as Tn,v as lt,m as vw,u as bw,w as ww,b as tf,s as nf,e as rf}from"../chunks/54c0vtkL.js";import{af as of,ay as xw,aI as Sw,h as St,a as oi,aJ as Qm,aK as kw,av as Mw,b as sf,p as lf,c as Hc,d as An,U as Cw,C as Ho,ah as zo,ag as eg,l as m,R as Ie,A as Ow,B as Ah,D as Hi,ao as Tw,F as af,aL as tg,as as ng,I as ze,X as Qn,aM as pd,q as Aw,ae as $a,aN as cf,aO as Ew,aP as df,aQ as Eh,aR as Pw,ar as Nw,aS as _w,au as rg,aT as Iw,am as og,v as Oe,aU as Dw,ap as Rw,an as zw,E as Lw,aV as Fw,u as dr,r as uf,e as or,N as _,aW as Bw,a9 as ff,s as J,a7 as Dn,aC as Be,aD as $n,w as Y,m as ue,x as be,y as ge,aX as Wc,aa as L,K as Ae,aF as pi,a4 as Ga,a5 as hf,t as E,z as te,aY as dn,aG as ig,aZ as sg,aB as tu,a8 as de,W as Ft,g as pf,i as nt,G as De,a_ as Vw,a$ as lg,aE as vt}from"../chunks/DQ4ISc1H.js";import{p as y,a as ut,s as fe,b as Kt,i as Ee,c as le,l as Ue,d as Hw,r as Te,m as Ww,e as Kw}from"../chunks/BQ5rRwqh.js";import{b as tn,c as X}from"../chunks/Cp4Wn3Cq.js";import{X as jw,u as Ut,s as je,b as un,P as nu,d as mr,g as Ph,e as Nh,f as $w,S as Gw,h as ur,i as Uw,D as _h,j as qw,l as jr,m as gr,n as st,o as Jw,p as Yw,B as Ih,q as Dh,M as Rh,r as Xw,t as zh,v as Lh,w as Zw,x as Fh,C as md,y as Bh,z as Qw,A as e0,E as Ve,F as t0,G as n0,H as r0,I as o0,k as i0,J as s0,K as l0,L as a0,N as c0,O as d0,Q as Vh,R as Hh,T as Wh,U as u0,V as f0,W as No,Y as h0,Z as p0,_ as m0,$ as Na,a as ae,a0 as ru}from"../chunks/Cqv19kM5.js";import{i as yt}from"../chunks/DJakvyeT.js";const g0=[];function mf(n,e=!1){return _a(n,new Map,"",g0)}function _a(n,e,t,r,o=null){if(typeof n=="object"&&n!==null){var i=e.get(n);if(i!==void 0)return i;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(of(n)){var s=Array(n.length);e.set(n,s),o!==null&&e.set(o,s);for(var l=0;l<n.length;l+=1){var a=n[l];l in n&&(s[l]=_a(a,e,t,r))}return s}if(xw(n)===Sw){s={},e.set(n,s),o!==null&&e.set(o,s);for(var c in n)s[c]=_a(n[c],e,t,r);return s}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function")return _a(n.toJSON(),e,t,r,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}function gf(n,e,t){St&&oi();var r=n,o=Cw,i,s=Qm()?kw:Mw;sf(()=>{s(o,o=e())&&(i&&lf(i),i=Hc(()=>t(r)))}),St&&(r=An)}function Gi(n,e){return e}function y0(n,e,t,r){for(var o=[],i=e.length,s=0;s<i;s++)Pw(e[s].e,o,!0);var l=i>0&&o.length===0&&t!==null;if(l){var a=t.parentNode;Nw(a),a.append(t),r.clear(),Mr(n,e[0].prev,e[i-1].next)}_w(o,()=>{for(var c=0;c<i;c++){var d=e[c];l||(r.delete(d.k),Mr(n,d.prev,d.next)),rg(d.e,!l)}})}function Hn(n,e,t,r,o,i=null){var s=n,l={flags:e,items:new Map,first:null},a=(e&tg)!==0;if(a){var c=n;s=St?Ho(zo(c)):c.appendChild(eg())}St&&oi();var d=null,u=!1,f=Ie(()=>{var h=t();return of(h)?h:h==null?[]:ng(h)});sf(()=>{var h=m(f),p=h.length;if(u&&p===0)return;u=p===0;let g=!1;if(St){var v=s.data===Ow;v!==(p===0)&&(s=Ah(),Ho(s),Hi(!1),g=!0)}if(St){for(var x=null,b,w=0;w<p;w++){if(An.nodeType===8&&An.data===Tw){s=An,g=!0,Hi(!1);break}var M=h[w],k=r(M,w);b=ag(An,l,x,null,M,k,w,o,e,t),l.items.set(k,b),x=b}p>0&&Ho(Ah())}St||v0(h,l,s,o,e,r,t),i!==null&&(p===0?d?af(d):d=Hc(()=>i(s)):d!==null&&lf(d,()=>{d=null})),g&&Hi(!0),m(f)}),St&&(s=An)}function v0(n,e,t,r,o,i,s){var I,j,H,$;var l=(o&Ew)!==0,a=(o&(df|cf))!==0,c=n.length,d=e.items,u=e.first,f=u,h,p=null,g,v=[],x=[],b,w,M,k;if(l)for(k=0;k<c;k+=1)b=n[k],w=i(b,k),M=d.get(w),M!==void 0&&((I=M.a)==null||I.measure(),(g??(g=new Set)).add(M));for(k=0;k<c;k+=1){if(b=n[k],w=i(b,k),M=d.get(w),M===void 0){var S=f?f.e.nodes_start:t;p=ag(S,e,p,p===null?e.first:p.next,b,w,k,r,o,s),d.set(w,p),v=[],x=[],f=p.next;continue}if(a&&b0(M,b,k,o),(M.e.f&pd)!==0&&(af(M.e),l&&((j=M.a)==null||j.unfix(),(g??(g=new Set)).delete(M))),M!==f){if(h!==void 0&&h.has(M)){if(v.length<x.length){var A=x[0],T;p=A.prev;var P=v[0],z=v[v.length-1];for(T=0;T<v.length;T+=1)Kh(v[T],A,t);for(T=0;T<x.length;T+=1)h.delete(x[T]);Mr(e,P.prev,z.next),Mr(e,p,P),Mr(e,z,A),f=A,p=z,k-=1,v=[],x=[]}else h.delete(M),Kh(M,f,t),Mr(e,M.prev,M.next),Mr(e,M,p===null?e.first:p.next),Mr(e,p,M),p=M;continue}for(v=[],x=[];f!==null&&f.k!==w;)(f.e.f&pd)===0&&(h??(h=new Set)).add(f),x.push(f),f=f.next;if(f===null)continue;M=f}v.push(M),p=M,f=M.next}if(f!==null||h!==void 0){for(var W=h===void 0?[]:ng(h);f!==null;)(f.e.f&pd)===0&&W.push(f),f=f.next;var R=W.length;if(R>0){var B=(o&tg)!==0&&c===0?t:null;if(l){for(k=0;k<R;k+=1)(H=W[k].a)==null||H.measure();for(k=0;k<R;k+=1)($=W[k].a)==null||$.fix()}y0(e,W,B,d)}}l&&Aw(()=>{var D;if(g!==void 0)for(M of g)(D=M.a)==null||D.apply()}),$a.first=e.first&&e.first.e,$a.last=p&&p.e}function b0(n,e,t,r){(r&df)!==0&&Eh(n.v,e),(r&cf)!==0?Eh(n.i,t):n.i=t}function ag(n,e,t,r,o,i,s,l,a,c){var d=(a&df)!==0,u=(a&Iw)===0,f=d?u?ze(o):Qn(o):o,h=(a&cf)===0?s:Qn(s),p={i:h,v:f,k:i,a:null,e:null,prev:t,next:r};try{return p.e=Hc(()=>l(n,f,h,c),St),p.e.prev=t&&t.e,p.e.next=r&&r.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Kh(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,i=n.e.nodes_start;i!==r;){var s=og(i);o.before(i),i=s}}function Mr(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function w0(n,e,t=!1,r=!1,o=!1){var i=n,s="";Oe(()=>{var l=$a;if(s===(s=e()??"")){St&&oi();return}if(l.nodes_start!==null&&(Dw(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),s!==""){if(St){An.data;for(var a=oi(),c=a;a!==null&&(a.nodeType!==8||a.data!=="");)c=a,a=og(a);if(a===null)throw Rw(),zw;eu(An,c),i=Ho(a);return}var d=s+"";t?d=`<svg>${d}</svg>`:r&&(d=`<math>${d}</math>`);var u=gw(d);if((t||r)&&(u=zo(u)),eu(zo(u),u.lastChild),t||r)for(;zo(u);)i.before(zo(u));else i.before(u)}})}function yf(n,e,t,r,o,i){let s=St;St&&oi();var l,a,c=null;St&&An.nodeType===1&&(c=An,oi());var d=St?An:n,u;sf(()=>{const f=e()||null;var h=t||f==="svg"?Fw:null;f!==l&&(u&&(f===null?lf(u,()=>{u=null,a=null}):f===a?af(u):rg(u)),f&&f!==a&&(u=Hc(()=>{if(c=St?c:h?document.createElementNS(h,f):document.createElement(f),eu(c,c),r){St&&yw(f)&&c.append(document.createComment(""));var p=St?zo(c):c.appendChild(eg());St&&(p===null?Hi(!1):Ho(p)),r(c,p)}$a.nodes_end=c,d.before(c)})),l=f,l&&(a=l))},Lw),s&&(Hi(!0),Ho(d))}function ou(n,e,t=e){var r=Qm();Zm(n,"input",o=>{var i=o?n.defaultValue:n.value;if(i=gd(n)?yd(i):i,t(i),r&&i!==(i=e())){var s=n.selectionStart,l=n.selectionEnd;n.value=i??"",l!==null&&(n.selectionStart=s,n.selectionEnd=Math.min(l,n.value.length))}}),(St&&n.defaultValue!==n.value||dr(e)==null&&n.value)&&t(gd(n)?yd(n.value):n.value),uf(()=>{var o=e();gd(n)&&o===yd(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function gd(n){var e=n.type;return e==="number"||e==="range"}function yd(n){return n===""?null:+n}function x0(n,e,t=e){Zm(n,"change",()=>{t(n.files)}),St&&n.files&&t(n.files),uf(()=>{n.files=e()})}var Ar,Go,ls,bc,cg;const wc=class wc{constructor(e){V(this,bc);V(this,Ar,new WeakMap);V(this,Go);V(this,ls);ct(this,ls,e)}observe(e,t){var r=O(this,Ar).get(e)||new Set;return r.add(t),O(this,Ar).set(e,r),Ne(this,bc,cg).call(this).observe(e,O(this,ls)),()=>{var o=O(this,Ar).get(e);o.delete(t),o.size===0&&(O(this,Ar).delete(e),O(this,Go).unobserve(e))}}};Ar=new WeakMap,Go=new WeakMap,ls=new WeakMap,bc=new WeakSet,cg=function(){return O(this,Go)??ct(this,Go,new ResizeObserver(e=>{for(var t of e){wc.entries.set(t.target,t);for(var r of O(this,Ar).get(t.target)||[])r(t)}}))},re(wc,"entries",new WeakMap);let iu=wc;var S0=new iu({box:"border-box"});function jh(n,e,t){var r=S0.observe(n,()=>t(n[e]));or(()=>(dr(()=>t(n[e])),r))}function Qe(n,e){var i;var t=(i=n.$$events)==null?void 0:i[e.type],r=of(t)?t.slice():t==null?[]:[t];for(var o of r)o.call(this,e)}function _o(n){_(n,n.v+1)}function k0(n){let e=0,t=Qn(0),r;return()=>{Bw()&&(m(t),uf(()=>(e===0&&(r=dr(()=>n(()=>_o(t)))),e+=1,()=>{ff().then(()=>{e-=1,e===0&&(r==null||r(),r=void 0)})})))}}function vd(n,e){const{panZoom:t,minZoom:r,maxZoom:o,initialViewport:i,viewport:s,dragging:l,translateExtent:a,paneClickDistance:c}=e,d=jw({domNode:n,minZoom:r,maxZoom:o,translateExtent:a,viewport:i,paneClickDistance:c,onDraggingChange:l.set}),u=d.getViewport();return s.set(u),t.set(d),d.update(e),{update(f){d.update(f)}}}var M0=G('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function C0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(D,"$panActivationKeyPressed",t),i=()=>fe(B,"$minZoom",t),s=()=>fe(I,"$maxZoom",t),l=()=>fe(q,"$zoomActivationKeyPressed",t),a=()=>fe(R,"$selectionRect",t),c=()=>fe(H,"$translateExtent",t),d=()=>fe($,"$lib",t),u=ze(),f=ze(),h=ze();let p=y(e,"initialViewport",8,void 0),g=y(e,"onMoveStart",8,void 0),v=y(e,"onMove",8,void 0),x=y(e,"onMoveEnd",8,void 0),b=y(e,"panOnScrollMode",8),w=y(e,"preventScrolling",8),M=y(e,"zoomOnScroll",8),k=y(e,"zoomOnDoubleClick",8),S=y(e,"zoomOnPinch",8),A=y(e,"panOnDrag",8),T=y(e,"panOnScroll",8),P=y(e,"paneClickDistance",8);const{viewport:z,panZoom:W,selectionRect:R,minZoom:B,maxZoom:I,dragging:j,translateExtent:H,lib:$,panActivationKeyPressed:D,zoomActivationKeyPressed:q,viewportInitialized:U}=Ut(),ie=K=>z.set({x:K[0],y:K[1],zoom:K[2]});Dn(()=>{Kt(U,!0)}),Be(()=>ue(p()),()=>{_(u,p()||{x:0,y:0,zoom:1})}),Be(()=>(o(),ue(A())),()=>{_(f,o()||A())}),Be(()=>(o(),ue(T())),()=>{_(h,o()||T())}),$n(),yt();var oe=M0(),ke=be(oe);je(ke,e,"default",{}),ge(oe),un(oe,(K,ee)=>vd==null?void 0:vd(K,ee),()=>({viewport:z,minZoom:i(),maxZoom:s(),initialViewport:m(u),dragging:j,panZoom:W,onPanZoomStart:g(),onPanZoom:v(),onPanZoomEnd:x(),zoomOnScroll:M(),zoomOnDoubleClick:k(),zoomOnPinch:S(),panOnScroll:m(h),panOnDrag:m(f),panOnScrollSpeed:.5,panOnScrollMode:b()||nu.Free,zoomActivationKeyPressed:l(),preventScrolling:typeof w()=="boolean"?w():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a(),translateExtent:c(),lib:d(),paneClickDistance:P(),onTransformChange:ie})),C(n,oe),Y(),r()}function $h(n,e){return t=>{t.target===e&&(n==null||n(t))}}function Gh(n){return e=>{const t=n.includes(e.id);return e.selected!==t&&(e.selected=t),e}}var O0=G("<div><!></div>");function T0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(j,"$panActivationKeyPressed",t),i=()=>fe(B,"$selectionKeyPressed",t),s=()=>fe(W,"$selectionRect",t),l=()=>fe(z,"$elementsSelectable",t),a=()=>fe(R,"$selectionRectMode",t),c=()=>fe($,"$connection",t),d=()=>fe(A,"$edges",t),u=()=>fe(S,"$nodeLookup",t),f=()=>fe(T,"$viewport",t),h=()=>fe(I,"$selectionMode",t),p=()=>fe(P,"$dragging",t),g=ze(),v=ze(),x=ze();let b=y(e,"panOnDrag",8,void 0),w=y(e,"selectionOnDrag",8,void 0);const M=Wc(),{nodes:k,nodeLookup:S,edges:A,viewport:T,dragging:P,elementsSelectable:z,selectionRect:W,selectionRectMode:R,selectionKeyPressed:B,selectionMode:I,panActivationKeyPressed:j,unselectNodesAndEdges:H,connection:$}=Ut();let D=ze(),q=null,U=[],ie=!1;function oe(ne){if(ie||c().inProgress){ie=!1;return}M("paneclick",{event:ne}),H(),R.set(null)}function ke(ne){var Ce,Pe;if(q=m(D).getBoundingClientRect(),!z||!m(v)||ne.button!==0||ne.target!==m(D)||!q)return;(Pe=(Ce=ne.target)==null?void 0:Ce.setPointerCapture)==null||Pe.call(Ce,ne.pointerId);const{x:me,y:Le}=Ph(ne,q);H(),W.set({width:0,height:0,startX:me,startY:Le,x:me,y:Le})}function K(ne){if(!m(v)||!q||!s())return;ie=!0;const me=Ph(ne,q),Le=s().startX??0,Ce=s().startY??0,Pe={...s(),x:me.x<Le?me.x:Le,y:me.y<Ce?me.y:Ce,width:Math.abs(me.x-Le),height:Math.abs(me.y-Ce)},He=U.map(tt=>tt.id),qe=Nh(U,d()).map(tt=>tt.id);U=$w(u(),Pe,[f().x,f().y,f().zoom],h()===Gw.Partial,!0);const ht=Nh(U,d()).map(tt=>tt.id),kt=U.map(tt=>tt.id);(He.length!==kt.length||kt.some(tt=>!He.includes(tt)))&&k.update(tt=>tt.map(Gh(kt))),(qe.length!==ht.length||ht.some(tt=>!qe.includes(tt)))&&A.update(tt=>tt.map(Gh(ht))),R.set("user"),W.set(Pe)}function ee(ne){var me,Le;ne.button===0&&((Le=(me=ne.target)==null?void 0:me.releasePointerCapture)==null||Le.call(me,ne.pointerId),!m(v)&&a()==="user"&&ne.target===m(D)&&(oe==null||oe(ne)),W.set(null),U.length>0&&Kt(R,"nodes"),i()&&(ie=!1))}const se=ne=>{var me;if(Array.isArray(m(g))&&((me=m(g))!=null&&me.includes(2))){ne.preventDefault();return}M("panecontextmenu",{event:ne})};Be(()=>(o(),ue(b())),()=>{_(g,o()||b())}),Be(()=>(i(),s(),ue(w()),m(g)),()=>{_(v,i()||s()||w()&&m(g)!==!0)}),Be(()=>(l(),m(v),a()),()=>{_(x,l()&&(m(v)||a()==="user"))}),$n(),yt();var Q=O0(),ce=L(()=>m(x)?void 0:$h(oe,m(D))),pe=L(()=>$h(se,m(D)));let Re;var Me=be(Q);je(Me,e,"default",{}),ge(Q),tn(Q,ne=>_(D,ne),()=>m(D)),Oe(ne=>Re=mr(Q,1,"svelte-flow__pane svelte-1esy7hx",null,Re,ne),[()=>({draggable:b()===!0||Array.isArray(b())&&b().includes(0),dragging:p(),selection:m(v)})],Ie),wt("click",Q,function(...ne){var me;(me=m(ce))==null||me.apply(this,ne)}),wt("pointerdown",Q,function(...ne){var me;(me=m(x)?ke:void 0)==null||me.apply(this,ne)}),wt("pointermove",Q,function(...ne){var me;(me=m(x)?K:void 0)==null||me.apply(this,ne)}),wt("pointerup",Q,function(...ne){var me;(me=m(x)?ee:void 0)==null||me.apply(this,ne)}),wt("contextmenu",Q,function(...ne){var me;(me=m(pe))==null||me.apply(this,ne)}),C(n,Q),Y(),r()}var A0=G('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function E0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(i,"$viewport",t),{viewport:i}=Ut();yt();var s=A0(),l=be(s);je(l,e,"default",{}),ge(s),Oe(()=>ur(s,`transform: translate(${o().x??""}px, ${o().y??""}px) scale(${o().zoom??""})`)),C(n,s),Y(),r()}function Wo(n,e){const{store:t,onDrag:r,onDragStart:o,onDragStop:i,onNodeMouseDown:s}=e,l=Uw({onDrag:r,onDragStart:o,onDragStop:i,onNodeMouseDown:s,getStoreItems:()=>{const c=Ae(t.snapGrid),d=Ae(t.viewport);return{nodes:Ae(t.nodes),nodeLookup:Ae(t.nodeLookup),edges:Ae(t.edges),nodeExtent:Ae(t.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:Ae(t.nodeOrigin),multiSelectionActive:Ae(t.multiselectionKeyPressed),domNode:Ae(t.domNode),transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:Ae(t.autoPanOnNodeDrag),nodesDraggable:Ae(t.nodesDraggable),selectNodesOnDrag:Ae(t.selectNodesOnDrag),nodeDragThreshold:Ae(t.nodeDragThreshold),unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodePositions:t.updateNodePositions,panBy:t.panBy}}});function a(c,d){if(d.disabled){l.destroy();return}l.update({domNode:c,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return a(n,e),{update(c){a(n,c)},destroy(){l.destroy()}}}function P0({width:n,height:e,initialWidth:t,initialHeight:r,measuredWidth:o,measuredHeight:i}){if(o===void 0&&i===void 0){const s=n??t,l=e??r;return{width:s?`width:${s}px;`:"",height:l?`height:${l}px;`:""}}return{width:n?`width:${n}px;`:"",height:e?`height:${e}px;`:""}}var N0=G("<div><!></div>");function _0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(Q,"$nodeTypes",t),i=()=>fe(ne,"$elementsSelectable",t),s=()=>fe(me,"$nodesDraggable",t),l=()=>fe(He,"$connectableStore",t),a=ze(void 0,!0),c=ze(void 0,!0),d=ze(void 0,!0),u=ze(void 0,!0);let f=y(e,"node",9),h=y(e,"id",9),p=y(e,"data",25,()=>({})),g=y(e,"selected",9,!1),v=y(e,"draggable",9,void 0),x=y(e,"selectable",9,void 0),b=y(e,"connectable",9,!0),w=y(e,"deletable",9,!0),M=y(e,"hidden",9,!1),k=y(e,"dragging",9,!1),S=y(e,"resizeObserver",9,null),A=y(e,"style",9,void 0),T=y(e,"type",9,"default"),P=y(e,"isParent",9,!1),z=y(e,"positionX",9),W=y(e,"positionY",9),R=y(e,"sourcePosition",9,void 0),B=y(e,"targetPosition",9,void 0),I=y(e,"zIndex",9),j=y(e,"measuredWidth",9,void 0),H=y(e,"measuredHeight",9,void 0),$=y(e,"initialWidth",9,void 0),D=y(e,"initialHeight",9,void 0),q=y(e,"width",9,void 0),U=y(e,"height",9,void 0),ie=y(e,"dragHandle",9,void 0),oe=y(e,"initialized",9,!1),ke=y(e,"parentId",9,void 0),K=y(e,"nodeClickDistance",9,void 0),ee=y(e,"class",9,"");const se=Ut(),{nodeTypes:Q,nodeDragThreshold:ce,selectNodesOnDrag:pe,handleNodeSelection:Re,updateNodeInternals:Me,elementsSelectable:ne,nodesDraggable:me}=se;let Le=ze(void 0,!0),Ce=ze(null,!0);const Pe=Wc(),He=pi(b());let qe=ze(void 0,!0),ht=ze(void 0,!0),kt=ze(void 0,!0);Ga("svelteflow__node_id",h()),Ga("svelteflow__node_connectable",He),hf(()=>{var Et;m(Ce)&&((Et=S())==null||Et.unobserve(m(Ce)))});function tt(Et){x()&&(!Ae(pe)||!v()||Ae(ce)>0)&&Re(h()),Pe("nodeclick",{node:f().internals.userNode,event:Et})}Be(()=>ue(T()),()=>{_(a,T()||"default")}),Be(()=>(o(),m(a)),()=>{_(c,!!o()[m(a)])}),Be(()=>(o(),m(a),_h),()=>{_(d,o()[m(a)]||_h)}),Be(()=>(m(c),ue(T())),()=>{m(c)||console.warn("003",qw.error003(T()))}),Be(()=>(ue(q()),ue(U()),ue($()),ue(D()),ue(j()),ue(H())),()=>{_(u,P0({width:q(),height:U(),initialWidth:$(),initialHeight:D(),measuredWidth:j(),measuredHeight:H()}))}),Be(()=>ue(b()),()=>{He.set(!!b())}),Be(()=>(m(qe),m(a),m(ht),ue(R()),m(kt),ue(B()),ue(h()),m(Le)),()=>{(m(qe)&&m(a)!==m(qe)||m(ht)&&R()!==m(ht)||m(kt)&&B()!==m(kt))&&requestAnimationFrame(()=>Me(new Map([[h(),{id:h(),nodeElement:m(Le),force:!0}]]))),_(qe,m(a)),_(ht,R()),_(kt,B())}),Be(()=>(ue(S()),m(Le),m(Ce),ue(oe())),()=>{S()&&(m(Le)!==m(Ce)||!oe())&&(m(Ce)&&S().unobserve(m(Ce)),m(Le)&&S().observe(m(Le)),_(Ce,m(Le)))}),$n(),yt(!0);var Mt=F(),wn=E(Mt);{var qr=Et=>{var gt=N0();let Pt,qt;var xt=be(gt);const sn=Ie(()=>g()??!1),Jt=Ie(()=>x()??i()??!0),xn=Ie(()=>w()??!0),Si=Ie(()=>v()??s()??!0);X(xt,()=>m(d),(at,Rn)=>{Rn(at,{get data(){return p()},get id(){return h()},get selected(){return m(sn)},get selectable(){return m(Jt)},get deletable(){return m(xn)},get sourcePosition(){return R()},get targetPosition(){return B()},get zIndex(){return I()},get dragging(){return k()},get draggable(){return m(Si)},get dragHandle(){return ie()},get parentId(){return ke()},get type(){return m(a)},get isConnectable(){return l()},get positionAbsoluteX(){return z()},get positionAbsoluteY(){return W()},get width(){return q()},get height(){return U()}})}),ge(gt),un(gt,(at,Rn)=>Wo==null?void 0:Wo(at,Rn),()=>({nodeId:h(),isSelectable:x(),disabled:!1,handleSelector:ie(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:Re,onDrag:(at,Rn,yr,Jr)=>{Pe("nodedrag",{event:at,targetNode:yr,nodes:Jr})},onDragStart:(at,Rn,yr,Jr)=>{Pe("nodedragstart",{event:at,targetNode:yr,nodes:Jr})},onDragStop:(at,Rn,yr,Jr)=>{Pe("nodedragstop",{event:at,targetNode:yr,nodes:Jr})},store:se})),tn(gt,at=>_(Le,at),()=>m(Le)),or(()=>wt("click",gt,tt)),or(()=>wt("mouseenter",gt,at=>Pe("nodemouseenter",{node:f(),event:at}))),or(()=>wt("mouseleave",gt,at=>Pe("nodemouseleave",{node:f(),event:at}))),or(()=>wt("mousemove",gt,at=>Pe("nodemousemove",{node:f(),event:at}))),or(()=>wt("contextmenu",gt,at=>Pe("nodecontextmenu",{node:f(),event:at}))),Oe((at,Rn)=>{st(gt,"data-id",h()),Pt=mr(gt,1,at,null,Pt,Rn),qt=ur(gt,`${A()??""??""};${m(u).width??""}${m(u).height??""}`,qt,{"z-index":I(),transform:`translate(${z()??""}px, ${W()??""}px)`,visibility:oe()?"visible":"hidden"})},[()=>jr(gr(["svelte-flow__node",`svelte-flow__node-${m(a)}`,ee()])),()=>({dragging:k(),selected:g(),draggable:v(),connectable:b(),selectable:x(),nopan:v(),parent:P()})],Ie),C(Et,gt)};Ee(wn,Et=>{M()||Et(qr)})}C(n,Mt),Y(),r()}var I0=G('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function D0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(d,"$visibleNodes",t),i=()=>fe(u,"$nodesDraggable",t),s=()=>fe(h,"$elementsSelectable",t),l=()=>fe(f,"$nodesConnectable",t),a=()=>fe(g,"$parentLookup",t);let c=y(e,"nodeClickDistance",8,0);const{visibleNodes:d,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:p,parentLookup:g}=Ut(),v=typeof ResizeObserver>"u"?null:new ResizeObserver(b=>{const w=new Map;b.forEach(M=>{const k=M.target.getAttribute("data-id");w.set(k,{id:k,nodeElement:M.target,force:!0})}),p(w)});hf(()=>{v==null||v.disconnect()}),yt();var x=I0();Hn(x,5,o,b=>b.id,(b,w)=>{const M=Ie(()=>!!m(w).selected),k=Ie(()=>!!m(w).hidden),S=Ie(()=>!!(m(w).draggable||i()&&typeof m(w).draggable>"u")),A=Ie(()=>!!(m(w).selectable||s()&&typeof m(w).selectable>"u")),T=Ie(()=>!!(m(w).connectable||l()&&typeof m(w).connectable>"u")),P=Ie(()=>m(w).deletable??!0),z=Ie(()=>a().has(m(w).id)),W=Ie(()=>m(w).type??"default"),R=Ie(()=>m(w).internals.z??0),B=Ie(()=>Jw(m(w)));_0(b,{get node(){return m(w)},get id(){return m(w).id},get data(){return m(w).data},get selected(){return m(M)},get hidden(){return m(k)},get draggable(){return m(S)},get selectable(){return m(A)},get connectable(){return m(T)},get deletable(){return m(P)},get positionX(){return m(w).internals.positionAbsolute.x},get positionY(){return m(w).internals.positionAbsolute.y},get isParent(){return m(z)},get style(){return m(w).style},get class(){return m(w).class},get type(){return m(W)},get sourcePosition(){return m(w).sourcePosition},get targetPosition(){return m(w).targetPosition},get dragging(){return m(w).dragging},get zIndex(){return m(R)},get dragHandle(){return m(w).dragHandle},get initialized(){return m(B)},get width(){return m(w).width},get height(){return m(w).height},get initialWidth(){return m(w).initialWidth},get initialHeight(){return m(w).initialHeight},get measuredWidth(){return m(w).measured.width},get measuredHeight(){return m(w).measured.height},get parentId(){return m(w).parentId},resizeObserver:v,get nodeClickDistance(){return c()},$$events:{nodeclick(I){Qe.call(this,e,I)},nodemouseenter(I){Qe.call(this,e,I)},nodemousemove(I){Qe.call(this,e,I)},nodemouseleave(I){Qe.call(this,e,I)},nodedrag(I){Qe.call(this,e,I)},nodedragstart(I){Qe.call(this,e,I)},nodedragstop(I){Qe.call(this,e,I)},nodecontextmenu(I){Qe.call(this,e,I)}}})}),ge(x),C(n,x),Y(),r()}var R0=Tn('<svg><g role="img"><!></g></svg>');function z0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(ee,"$edgeTypes",t),i=()=>fe(se,"$flowId",t),s=()=>fe(Q,"$elementsSelectable",t),l=()=>fe(K,"$edgeLookup",t),a=ze(void 0,!0),c=ze(void 0,!0),d=ze(void 0,!0),u=ze(void 0,!0),f=ze(void 0,!0);let h=y(e,"id",9),p=y(e,"type",9,"default"),g=y(e,"source",9,""),v=y(e,"target",9,""),x=y(e,"data",25,()=>({})),b=y(e,"style",9,void 0),w=y(e,"zIndex",9,void 0),M=y(e,"animated",9,!1),k=y(e,"selected",9,!1),S=y(e,"selectable",9,void 0),A=y(e,"deletable",9,void 0),T=y(e,"hidden",9,!1),P=y(e,"label",9,void 0),z=y(e,"labelStyle",9,void 0),W=y(e,"markerStart",9,void 0),R=y(e,"markerEnd",9,void 0),B=y(e,"sourceHandle",9,void 0),I=y(e,"targetHandle",9,void 0),j=y(e,"sourceX",9),H=y(e,"sourceY",9),$=y(e,"targetX",9),D=y(e,"targetY",9),q=y(e,"sourcePosition",9),U=y(e,"targetPosition",9),ie=y(e,"ariaLabel",9,void 0),oe=y(e,"interactionWidth",9,void 0),ke=y(e,"class",9,"");Ga("svelteflow__edge_id",h());const{edgeLookup:K,edgeTypes:ee,flowId:se,elementsSelectable:Q}=Ut(),ce=Wc(),pe=Yw();function Re(Ce){const Pe=l().get(h());Pe&&(pe(h()),ce("edgeclick",{event:Ce,edge:Pe}))}function Me(Ce,Pe){const He=l().get(h());He&&ce(Pe,{event:Ce,edge:He})}Be(()=>ue(p()),()=>{_(a,p()||"default")}),Be(()=>(o(),m(a),Ih),()=>{_(c,o()[m(a)]||Ih)}),Be(()=>(ue(W()),i()),()=>{_(d,W()?`url('#${Dh(W(),i())}')`:void 0)}),Be(()=>(ue(R()),i()),()=>{_(u,R()?`url('#${Dh(R(),i())}')`:void 0)}),Be(()=>(ue(S()),s()),()=>{_(f,S()??s())}),$n(),yt(!0);var ne=F(),me=E(ne);{var Le=Ce=>{var Pe=R0();let He;var qe=be(Pe);let ht;var kt=be(qe);const tt=Ie(()=>A()??!0);X(kt,()=>m(c),(Mt,wn)=>{wn(Mt,{get id(){return h()},get source(){return g()},get target(){return v()},get sourceX(){return j()},get sourceY(){return H()},get targetX(){return $()},get targetY(){return D()},get sourcePosition(){return q()},get targetPosition(){return U()},get animated(){return M()},get selected(){return k()},get label(){return P()},get labelStyle(){return z()},get data(){return x()},get style(){return b()},get interactionWidth(){return oe()},get selectable(){return m(f)},get deletable(){return m(tt)},get type(){return m(a)},get sourceHandleId(){return B()},get targetHandleId(){return I()},get markerStart(){return m(d)},get markerEnd(){return m(u)}})}),ge(qe),ge(Pe),Oe((Mt,wn)=>{He=ur(Pe,"",He,{"z-index":w()}),ht=mr(qe,0,Mt,null,ht,wn),st(qe,"data-id",h()),st(qe,"aria-label",ie()===null?void 0:ie()?ie():`Edge from ${g()} to ${v()}`)},[()=>jr(gr(["svelte-flow__edge",ke()])),()=>({animated:M(),selected:k(),selectable:m(f)})],Ie),wt("click",qe,Re),wt("contextmenu",qe,Mt=>{Me(Mt,"edgecontextmenu")}),wt("mouseenter",qe,Mt=>{Me(Mt,"edgemouseenter")}),wt("mouseleave",qe,Mt=>{Me(Mt,"edgemouseleave")}),C(Ce,Pe)};Ee(me,Ce=>{T()||Ce(Le)})}C(n,ne),Y(),r()}function L0(n,e){J(e,!1);let t=y(e,"onMount",8,void 0),r=y(e,"onDestroy",8,void 0);Dn(()=>{var o;return(o=t())==null||o(),r()}),yt(),Y()}var F0=Tn("<defs></defs>");function B0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(i,"$markers",t),{markers:i}=Ut();yt();var s=F0();Hn(s,5,o,l=>l.id,(l,a)=>{K0(l,le(()=>m(a)))}),ge(s),C(n,s),Y(),r()}var V0=Tn('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),H0=Tn('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),W0=Tn('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function K0(n,e){J(e,!1);let t=y(e,"id",8),r=y(e,"type",8),o=y(e,"width",8,12.5),i=y(e,"height",8,12.5),s=y(e,"markerUnits",8,"strokeWidth"),l=y(e,"orient",8,"auto-start-reverse"),a=y(e,"color",8,void 0),c=y(e,"strokeWidth",8,void 0);yt();var d=W0(),u=be(d);{var f=p=>{var g=V0();Oe(()=>{st(g,"stroke",a()),st(g,"stroke-width",c())}),C(p,g)},h=(p,g)=>{{var v=x=>{var b=H0();Oe(()=>{st(b,"stroke",a()),st(b,"stroke-width",c()),st(b,"fill",a())}),C(x,b)};Ee(p,x=>{r()===Rh.ArrowClosed&&x(v)},g)}};Ee(u,p=>{r()===Rh.Arrow?p(f):p(h,!1)})}ge(d),Oe(()=>{st(d,"id",t()),st(d,"markerWidth",`${o()}`),st(d,"markerHeight",`${i()}`),st(d,"markerUnits",s()),st(d,"orient",l())}),C(n,d),Y()}var j0=G('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function $0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(l,"$visibleEdges",t),i=()=>fe(d,"$elementsSelectable",t);let s=y(e,"defaultEdgeOptions",8);const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:d}=Ut();Dn(()=>{s()&&c(s())}),yt();var u=j0(),f=be(u),h=be(f);B0(h,{}),ge(f);var p=te(f,2);Hn(p,1,o,x=>x.id,(x,b)=>{const w=Ie(()=>m(b).selectable??i()),M=Ie(()=>m(b).type||"default");z0(x,{get id(){return m(b).id},get source(){return m(b).source},get target(){return m(b).target},get data(){return m(b).data},get style(){return m(b).style},get animated(){return m(b).animated},get selected(){return m(b).selected},get selectable(){return m(w)},get deletable(){return m(b).deletable},get hidden(){return m(b).hidden},get label(){return m(b).label},get labelStyle(){return m(b).labelStyle},get markerStart(){return m(b).markerStart},get markerEnd(){return m(b).markerEnd},get sourceHandle(){return m(b).sourceHandle},get targetHandle(){return m(b).targetHandle},get sourceX(){return m(b).sourceX},get sourceY(){return m(b).sourceY},get targetX(){return m(b).targetX},get targetY(){return m(b).targetY},get sourcePosition(){return m(b).sourcePosition},get targetPosition(){return m(b).targetPosition},get ariaLabel(){return m(b).ariaLabel},get interactionWidth(){return m(b).interactionWidth},get class(){return m(b).class},get type(){return m(M)},get zIndex(){return m(b).zIndex},$$events:{edgeclick(k){Qe.call(this,e,k)},edgecontextmenu(k){Qe.call(this,e,k)},edgemouseenter(k){Qe.call(this,e,k)},edgemouseleave(k){Qe.call(this,e,k)}}})});var g=te(p,2);{var v=x=>{L0(x,{onMount:()=>{Kt(a,!0)},onDestroy:()=>{Kt(a,!1)}})};Ee(g,x=>{o().length>0&&x(v)})}ge(u),C(n,u),Y(),r()}var G0=G('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function dg(n,e){let t=y(e,"x",8,0),r=y(e,"y",8,0),o=y(e,"width",8,0),i=y(e,"height",8,0),s=y(e,"isVisible",8,!0);var l=F(),a=E(l);{var c=d=>{var u=G0();let f;Oe(()=>f=ur(u,"",f,{width:typeof o()=="string"?o():`${o()}px`,height:typeof i()=="string"?i():`${i()}px`,transform:`translate(${t()}px, ${r()}px)`})),C(d,u)};Ee(a,d=>{s()&&d(c)})}C(n,l)}function U0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(s,"$selectionRect",t),i=()=>fe(l,"$selectionRectMode",t),{selectionRect:s,selectionRectMode:l}=Ut();yt();const a=Ie(()=>!!(o()&&i()==="user")),c=Ie(()=>{var h;return(h=o())==null?void 0:h.width}),d=Ie(()=>{var h;return(h=o())==null?void 0:h.height}),u=Ie(()=>{var h;return(h=o())==null?void 0:h.x}),f=Ie(()=>{var h;return(h=o())==null?void 0:h.y});dg(n,{get isVisible(){return m(a)},get width(){return m(c)},get height(){return m(d)},get x(){return m(u)},get y(){return m(f)}}),Y(),r()}var q0=G('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function J0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(a,"$selectionRectMode",t),i=()=>fe(d,"$nodeLookup",t),s=()=>fe(c,"$nodes",t),l=Ut(),{selectionRectMode:a,nodes:c,nodeLookup:d}=l,u=Wc();let f=ze(null);function h(b){const w=s().filter(M=>M.selected);u("selectioncontextmenu",{nodes:w,event:b})}function p(b){const w=s().filter(M=>M.selected);u("selectionclick",{nodes:w,event:b})}Be(()=>(o(),i(),s()),()=>{o()==="nodes"&&(_(f,Xw(i(),{filter:b=>!!b.selected})),s())}),$n(),yt();var g=F(),v=E(g);{var x=b=>{var w=q0(),M=be(w);dg(M,{width:"100%",height:"100%",x:0,y:0}),ge(w),un(w,(k,S)=>Wo==null?void 0:Wo(k,S),()=>({disabled:!1,store:l,onDrag:(k,S,A,T)=>{u("nodedrag",{event:k,targetNode:null,nodes:T})},onDragStart:(k,S,A,T)=>{u("nodedragstart",{event:k,targetNode:null,nodes:T})},onDragStop:(k,S,A,T)=>{u("nodedragstop",{event:k,targetNode:null,nodes:T})}})),or(()=>wt("contextmenu",w,h)),or(()=>wt("click",w,p)),or(()=>wt("keyup",w,()=>{})),Oe(()=>ur(w,`width: ${m(f).width??""}px; height: ${m(f).height??""}px; transform: translate(${m(f).x??""}px, ${m(f).y??""}px)`)),C(b,w)};Ee(v,b=>{o()==="nodes"&&m(f)&&zh(m(f).x)&&zh(m(f).y)&&b(x)})}C(n,g),Y(),r()}function ot(n,e){let{enabled:t=!0,trigger:r,type:o="keydown"}=e;function i(s){const l=Array.isArray(r)?r:[r],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const c of l){const d={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:u,key:f,callback:h,preventDefault:p,enabled:g}=d;if(g){if(u.length&&!(Array.isArray(u)?u:[u]).map(b=>typeof b=="string"?[b]:b).some(b=>b.every(w=>a[w])))continue;if(s.key===f){p&&s.preventDefault();const v={node:n,trigger:d,originalEvent:s};n.dispatchEvent(new CustomEvent("shortcut",{detail:v})),h==null||h(v)}}}}return t&&n.addEventListener(o,i),{update:s=>{const{enabled:l=!0,type:a="keydown"}=s;t&&(!l||o!==a)?n.removeEventListener(o,i):!t&&l&&n.addEventListener(a,i),t=l,o=a,r=s.trigger},destroy:()=>{n.removeEventListener(o,i)}}}function Y0(n,e){J(e,!1);let t=y(e,"selectionKey",8,"Shift"),r=y(e,"multiSelectionKey",24,()=>Lh()?"Meta":"Control"),o=y(e,"deleteKey",8,"Backspace"),i=y(e,"panActivationKey",8," "),s=y(e,"zoomActivationKey",24,()=>Lh()?"Meta":"Control");const{selectionKeyPressed:l,multiselectionKeyPressed:a,deleteKeyPressed:c,panActivationKeyPressed:d,zoomActivationKeyPressed:u,selectionRect:f}=Ut();function h(b){return b!==null&&typeof b=="object"}function p(b){return h(b)?b.modifier||[]:[]}function g(b){return b==null?"":h(b)?b.key:b}function v(b,w){return(Array.isArray(b)?b:[b]).map(k=>{const S=g(k);return{key:S,modifier:p(k),enabled:S!==null,callback:w}})}function x(){f.set(null),l.set(!1),a.set(!1),c.set(!1),d.set(!1),u.set(!1)}yt(),wt("blur",dn,x),wt("contextmenu",dn,x),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(t(),()=>l.set(!0)),type:"keydown"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(t(),()=>l.set(!1)),type:"keyup"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(r(),()=>a.set(!0)),type:"keydown"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(r(),()=>a.set(!1)),type:"keyup"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(o(),b=>{!(b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)&&!Zw(b.originalEvent)&&c.set(!0)}),type:"keydown"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(o(),()=>c.set(!1)),type:"keyup"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(i(),()=>d.set(!0)),type:"keydown"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(i(),()=>d.set(!1)),type:"keyup"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(s(),()=>u.set(!0)),type:"keydown"})),un(dn,(b,w)=>ot==null?void 0:ot(b,w),()=>({trigger:v(s(),()=>u.set(!1)),type:"keyup"})),Y()}var X0=Tn('<path fill="none" class="svelte-flow__connection-path"></path>'),Z0=Tn('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function Q0(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(h,"$connection",t),i=()=>fe(p,"$connectionLineType",t),s=()=>fe(u,"$width",t),l=()=>fe(f,"$height",t);let a=y(e,"containerStyle",8,""),c=y(e,"style",8,""),d=y(e,"isCustomComponent",8,!1);const{width:u,height:f,connection:h,connectionLineType:p}=Ut();let g=ze(null);Be(()=>(o(),ue(d()),i(),m(g),Fh),()=>{if(o().inProgress&&!d()){const{from:w,to:M,fromPosition:k,toPosition:S}=o(),A={sourceX:w.x,sourceY:w.y,sourcePosition:k,targetX:M.x,targetY:M.y,targetPosition:S};switch(i()){case md.Bezier:(T=>_(g,T[0]))(Qw(A));break;case md.Step:(T=>_(g,T[0]))(Bh({...A,borderRadius:0}));break;case md.SmoothStep:(T=>_(g,T[0]))(Bh(A));break;default:(T=>_(g,T[0]))(Fh(A))}}}),$n(),yt();var v=F(),x=E(v);{var b=w=>{var M=Z0(),k=be(M),S=be(k);je(S,e,"connectionLine",{});var A=te(S);{var T=P=>{var z=X0();Oe(()=>{st(z,"d",m(g)),ur(z,c())}),C(P,z)};Ee(A,P=>{d()||P(T)})}ge(k),ge(M),Oe(P=>{st(M,"width",s()),st(M,"height",l()),ur(M,a()),mr(k,0,P)},[()=>jr(gr(["svelte-flow__connection",e0(o().isValid)]))],Ie),C(w,M)};Ee(x,w=>{o().inProgress&&w(b)})}C(n,v),Y(),r()}var ex=G("<div><!></div>");function su(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),r=Ue(t,["position","style","class"]);J(e,!1);const[o,i]=ut(),s=()=>fe(u,"$selectionRectMode",o),l=ze();let a=y(e,"position",8,"top-right"),c=y(e,"style",8,void 0),d=y(e,"class",8,void 0);const{selectionRectMode:u}=Ut();Be(()=>ue(a()),()=>{_(l,`${a()}`.split("-"))}),$n(),yt();var f=ex();let h;var p=be(f);je(p,e,"default",{}),ge(f),Oe(g=>h=Ve(f,h,{class:g,style:c(),...r,[t0]:{"pointer-events":s()?"none":""}}),[()=>gr(["svelte-flow__panel",d(),...m(l)])],Ie),C(n,f),Y(),i()}var tx=G('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function nx(n,e){J(e,!1);let t=y(e,"proOptions",8,void 0),r=y(e,"position",8,"bottom-right");yt();var o=F(),i=E(o);{var s=l=>{su(l,{get position(){return r()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,c)=>{var d=tx();C(a,d)},$$slots:{default:!0}})};Ee(i,l=>{var a;(a=t())!=null&&a.hideAttribution||l(s)})}C(n,o),Y()}function Uh(n,{nodeTypes:e,edgeTypes:t,minZoom:r,maxZoom:o,translateExtent:i,paneClickDistance:s}){e!==void 0&&n.setNodeTypes(e),t!==void 0&&n.setEdgeTypes(t),r!==void 0&&n.setMinZoom(r),o!==void 0&&n.setMaxZoom(o),i!==void 0&&n.setTranslateExtent(i),s!==void 0&&n.setPaneClickDistance(s)}const rx=n=>Object.keys(n);function qh(n,e){rx(e).forEach(t=>{const r=e[t];r!==void 0&&n[t].set(r)})}function ox(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ix(n="light"){return ig("light",t=>{if(n!=="system"){t(n);return}const r=ox(),o=()=>t(r!=null&&r.matches?"dark":"light");return t(r!=null&&r.matches?"dark":"light"),r==null||r.addEventListener("change",o),()=>{r==null||r.removeEventListener("change",o)}})}var sx=G('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),lx=G("<!> <!>",1),ax=G("<div><!> <!> <!> <!></div>");function cx(n,e){const t=n0(e),r=Ue(e,["children","$$slots","$$events","$$legacy"]),o=Ue(r,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);J(e,!1);const[i,s]=ut(),l=()=>fe(w(),"$viewport",i),a=()=>fe(Xb,"$initialized",i),c=()=>fe(m(d),"$colorModeClass",i),d=ze();let u=y(e,"id",8,"1"),f=y(e,"nodes",8),h=y(e,"edges",8),p=y(e,"fitView",8,void 0),g=y(e,"fitViewOptions",8,void 0),v=y(e,"minZoom",8,void 0),x=y(e,"maxZoom",8,void 0),b=y(e,"initialViewport",8,void 0),w=y(e,"viewport",8,void 0),M=y(e,"nodeTypes",8,void 0),k=y(e,"edgeTypes",8,void 0),S=y(e,"selectionKey",8,void 0),A=y(e,"selectionMode",8,void 0),T=y(e,"panActivationKey",8,void 0),P=y(e,"multiSelectionKey",8,void 0),z=y(e,"zoomActivationKey",8,void 0),W=y(e,"nodesDraggable",8,void 0),R=y(e,"nodesConnectable",8,void 0),B=y(e,"nodeDragThreshold",8,void 0),I=y(e,"elementsSelectable",8,void 0),j=y(e,"snapGrid",8,void 0),H=y(e,"deleteKey",8,void 0),$=y(e,"connectionRadius",8,void 0),D=y(e,"connectionLineType",8,void 0),q=y(e,"connectionMode",24,()=>o0.Strict),U=y(e,"connectionLineStyle",8,""),ie=y(e,"connectionLineContainerStyle",8,""),oe=y(e,"onMoveStart",8,void 0),ke=y(e,"onMove",8,void 0),K=y(e,"onMoveEnd",8,void 0),ee=y(e,"isValidConnection",8,void 0),se=y(e,"translateExtent",8,void 0),Q=y(e,"nodeExtent",8,void 0),ce=y(e,"onlyRenderVisibleElements",8,void 0),pe=y(e,"panOnScrollMode",24,()=>nu.Free),Re=y(e,"preventScrolling",8,!0),Me=y(e,"zoomOnScroll",8,!0),ne=y(e,"zoomOnDoubleClick",8,!0),me=y(e,"zoomOnPinch",8,!0),Le=y(e,"panOnScroll",8,!1),Ce=y(e,"panOnDrag",8,!0),Pe=y(e,"selectionOnDrag",8,void 0),He=y(e,"autoPanOnConnect",8,!0),qe=y(e,"autoPanOnNodeDrag",8,!0),ht=y(e,"onerror",8,void 0),kt=y(e,"ondelete",8,void 0),tt=y(e,"onedgecreate",8,void 0),Mt=y(e,"attributionPosition",8,void 0),wn=y(e,"proOptions",8,void 0),qr=y(e,"defaultEdgeOptions",8,void 0),Et=y(e,"width",8,void 0),gt=y(e,"height",8,void 0),Pt=y(e,"colorMode",8,"light"),qt=y(e,"onconnect",8,void 0),xt=y(e,"onconnectstart",8,void 0),sn=y(e,"onconnectend",8,void 0),Jt=y(e,"onbeforedelete",8,void 0),xn=y(e,"oninit",8,void 0),Si=y(e,"nodeOrigin",8,void 0),at=y(e,"paneClickDistance",8,0),Rn=y(e,"nodeClickDistance",8,0),yr=y(e,"defaultMarkerColor",8,"#b1b1b7"),Jr=y(e,"style",8,void 0),Jb=y(e,"class",8,void 0),ud=ze(),ki=ze(),Mi=ze();const Yb=l()||b(),Qt=sg(i0)?Ut():r0({nodes:Ae(f()),edges:Ae(h()),width:Et(),height:gt(),fitView:p(),nodeOrigin:Si(),nodeExtent:Q()});Dn(()=>(Qt.width.set(m(ki)),Qt.height.set(m(Mi)),Qt.domNode.set(m(ud)),Qt.syncNodeStores(f()),Qt.syncEdgeStores(h()),Qt.syncViewport(w()),p()!==void 0&&Qt.fitViewQueued.set(p()),g()&&Qt.fitViewOptions.set(g()),Uh(Qt,{nodeTypes:M(),edgeTypes:k(),minZoom:v(),maxZoom:x(),translateExtent:se(),paneClickDistance:at()}),()=>{Qt.reset()}));const{initialized:Xb}=Qt;let fd=ze(!1);Be(()=>(m(ki),m(Mi)),()=>{m(ki)!==void 0&&m(Mi)!==void 0&&(Qt.width.set(m(ki)),Qt.height.set(m(Mi)))}),Be(()=>(m(fd),a(),ue(xn())),()=>{var Rt;!m(fd)&&a()&&((Rt=xn())==null||Rt(),_(fd,!0))}),Be(()=>(ue(u()),ue(D()),ue($()),ue(A()),ue(j()),ue(yr()),ue(W()),ue(R()),ue(I()),ue(ce()),ue(ee()),ue(He()),ue(qe()),ue(ht()),ue(kt()),ue(tt()),ue(q()),ue(B()),ue(qt()),ue(xt()),ue(sn()),ue(Jt()),ue(Si()),qh),()=>{const Rt={flowId:u(),connectionLineType:D(),connectionRadius:$(),selectionMode:A(),snapGrid:j(),defaultMarkerColor:yr(),nodesDraggable:W(),nodesConnectable:R(),elementsSelectable:I(),onlyRenderVisibleElements:ce(),isValidConnection:ee(),autoPanOnConnect:He(),autoPanOnNodeDrag:qe(),onerror:ht(),ondelete:kt(),onedgecreate:tt(),connectionMode:q(),nodeDragThreshold:B(),onconnect:qt(),onconnectstart:xt(),onconnectend:sn(),onbeforedelete:Jt(),nodeOrigin:Si()};qh(Qt,Rt)}),Be(()=>(ue(M()),ue(k()),ue(v()),ue(x()),ue(se()),ue(at())),()=>{Uh(Qt,{nodeTypes:M(),edgeTypes:k(),minZoom:v(),maxZoom:x(),translateExtent:se(),paneClickDistance:at()})}),Be(()=>ue(Pt()),()=>{Hw(_(d,ix(Pt())),"$colorModeClass",i)}),$n(),yt();var qn=ax();let mh;var gh=be(qn);Y0(gh,{get selectionKey(){return S()},get deleteKey(){return H()},get panActivationKey(){return T()},get multiSelectionKey(){return P()},get zoomActivationKey(){return z()}});var yh=te(gh,2);const Zb=Ie(()=>pe()===void 0?nu.Free:pe()),Qb=Ie(()=>Re()===void 0?!0:Re()),ew=Ie(()=>Me()===void 0?!0:Me()),tw=Ie(()=>ne()===void 0?!0:ne()),nw=Ie(()=>me()===void 0?!0:me()),rw=Ie(()=>Le()===void 0?!1:Le()),ow=Ie(()=>Ce()===void 0?!0:Ce()),iw=Ie(()=>at()===void 0?0:at());C0(yh,{initialViewport:Yb,get onMoveStart(){return oe()},get onMove(){return ke()},get onMoveEnd(){return K()},get panOnScrollMode(){return m(Zb)},get preventScrolling(){return m(Qb)},get zoomOnScroll(){return m(ew)},get zoomOnDoubleClick(){return m(tw)},get zoomOnPinch(){return m(nw)},get panOnScroll(){return m(rw)},get panOnDrag(){return m(ow)},get paneClickDistance(){return m(iw)},children:(Rt,x2)=>{const lw=Ie(()=>Ce()===void 0?!0:Ce());T0(Rt,{get panOnDrag(){return m(lw)},get selectionOnDrag(){return Pe()},$$events:{paneclick(Ci){Qe.call(this,e,Ci)},panecontextmenu(Ci){Qe.call(this,e,Ci)}},children:(Ci,S2)=>{var bh=lx(),wh=E(bh);E0(wh,{children:(cw,k2)=>{var xh=sx(),Sh=E(xh);$0(Sh,{get defaultEdgeOptions(){return qr()},$$events:{edgeclick(Xe){Qe.call(this,e,Xe)},edgecontextmenu(Xe){Qe.call(this,e,Xe)},edgemouseenter(Xe){Qe.call(this,e,Xe)},edgemouseleave(Xe){Qe.call(this,e,Xe)}}});var kh=te(Sh,2);Q0(kh,{get containerStyle(){return ie()},get style(){return U()},isCustomComponent:t.connectionLine,$$slots:{connectionLine:(Xe,M2)=>{var Ch=F(),uw=E(Ch);je(uw,e,"connectionLine",{}),C(Xe,Ch)}}});var Mh=te(kh,6);D0(Mh,{get nodeClickDistance(){return Rn()},$$events:{nodeclick(Xe){Qe.call(this,e,Xe)},nodemouseenter(Xe){Qe.call(this,e,Xe)},nodemousemove(Xe){Qe.call(this,e,Xe)},nodemouseleave(Xe){Qe.call(this,e,Xe)},nodedragstart(Xe){Qe.call(this,e,Xe)},nodedrag(Xe){Qe.call(this,e,Xe)},nodedragstop(Xe){Qe.call(this,e,Xe)},nodecontextmenu(Xe){Qe.call(this,e,Xe)}}});var dw=te(Mh,2);J0(dw,{$$events:{selectionclick(Xe){Qe.call(this,e,Xe)},selectioncontextmenu(Xe){Qe.call(this,e,Xe)},nodedragstart(Xe){Qe.call(this,e,Xe)},nodedrag(Xe){Qe.call(this,e,Xe)},nodedragstop(Xe){Qe.call(this,e,Xe)}}}),C(cw,xh)},$$slots:{default:!0}});var aw=te(wh,2);U0(aw,{}),C(Ci,bh)},$$slots:{default:!0}})},$$slots:{default:!0}});var vh=te(yh,2);nx(vh,{get proOptions(){return wn()},get position(){return Mt()}});var sw=te(vh,2);je(sw,e,"default",{}),ge(qn),tn(qn,Rt=>_(ud,Rt),()=>m(ud)),Oe(Rt=>mh=Ve(qn,mh,{style:Jr(),class:Rt,"data-testid":"svelte-flow__wrapper",...o,role:"application"},"svelte-18e9ir1"),[()=>gr(["svelte-flow",Jb(),c()])],Ie),jh(qn,"clientWidth",Rt=>_(ki,Rt)),jh(qn,"clientHeight",Rt=>_(Mi,Rt)),wt("dragover",qn,function(Rt){Qe.call(this,e,Rt)}),wt("drop",qn,function(Rt){Qe.call(this,e,Rt)}),C(n,qn),Y(),s()}var sr;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(sr||(sr={}));var dx=Tn("<circle></circle>");function ux(n,e){J(e,!1);let t=y(e,"radius",8,5),r=y(e,"class",8,"");yt();var o=dx();Oe(i=>{st(o,"cx",t()),st(o,"cy",t()),st(o,"r",t()),mr(o,0,i)},[()=>jr(gr(["svelte-flow__background-pattern","dots",r()]))],Ie),C(n,o),Y()}var fx=Tn("<path></path>");function hx(n,e){J(e,!1);let t=y(e,"lineWidth",8,1),r=y(e,"dimensions",8),o=y(e,"variant",8,void 0),i=y(e,"class",8,"");yt();var s=fx();Oe(l=>{st(s,"stroke-width",t()),st(s,"d",`M${r()[0]/2} 0 V${r()[1]} M0 ${r()[1]/2} H${r()[0]}`),mr(s,0,l)},[()=>jr(gr(["svelte-flow__background-pattern",o(),i()]))],Ie),C(n,s),Y()}const px={[sr.Dots]:1,[sr.Lines]:1,[sr.Cross]:6};var mx=Tn('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function gx(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(k,"$flowId",t),i=()=>fe(M,"$viewport",t),s=ze(),l=ze(),a=ze(),c=ze(),d=ze();let u=y(e,"id",8,void 0),f=y(e,"variant",24,()=>sr.Dots),h=y(e,"gap",8,20),p=y(e,"size",8,1),g=y(e,"lineWidth",8,1),v=y(e,"bgColor",8,void 0),x=y(e,"patternColor",8,void 0),b=y(e,"patternClass",8,void 0),w=y(e,"class",8,"");const{viewport:M,flowId:k}=Ut(),S=p()||px[f()],A=f()===sr.Dots,T=f()===sr.Cross,P=Array.isArray(h())?h():[h(),h()];Be(()=>(o(),ue(u())),()=>{_(s,`background-pattern-${o()}-${u()?u():""}`)}),Be(()=>i(),()=>{_(l,[P[0]*i().zoom||1,P[1]*i().zoom||1])}),Be(()=>i(),()=>{_(a,S*i().zoom)}),Be(()=>(m(a),m(l)),()=>{_(c,T?[m(a),m(a)]:m(l))}),Be(()=>(m(a),m(c)),()=>{_(d,A?[m(a)/2,m(a)/2]:[m(c)[0]/2,m(c)[1]/2])}),$n(),yt();var z=mx();let W;var R=be(z),B=be(R);{var I=$=>{const D=Ie(()=>m(a)/2);ux($,{get radius(){return m(D)},get class(){return b()}})},j=$=>{hx($,{get dimensions(){return m(c)},get variant(){return f()},get lineWidth(){return g()},get class(){return b()}})};Ee(B,$=>{A?$(I):$(j,!1)})}ge(R);var H=te(R);ge(z),Oe($=>{mr(z,0,$,"svelte-1r7pe8d"),W=ur(z,"",W,{"--xy-background-color-props":v(),"--xy-background-pattern-color-props":x()}),st(R,"id",m(s)),st(R,"x",i().x%m(l)[0]),st(R,"y",i().y%m(l)[1]),st(R,"width",m(l)[0]),st(R,"height",m(l)[1]),st(R,"patternTransform",`translate(-${m(d)[0]},-${m(d)[1]})`),st(H,"fill",`url(#${m(s)})`)},[()=>jr(gr(["svelte-flow__background",w()]))],Ie),C(n,z),Y(),r()}const Jh=n=>s0(n);function ko(){const{zoomIn:n,zoomOut:e,fitView:t,onbeforedelete:r,snapGrid:o,viewport:i,width:s,height:l,minZoom:a,maxZoom:c,panZoom:d,nodes:u,edges:f,domNode:h,nodeLookup:p,nodeOrigin:g,edgeLookup:v,connectionLookup:x}=Ut(),b=k=>{var z,W;const S=Ae(p),A=Jh(k)?k:S.get(k.id),T=A.parentId?f0(A.position,A.measured,A.parentId,S,Ae(g)):A.position,P={...A,position:T,width:((z=A.measured)==null?void 0:z.width)??A.width,height:((W=A.measured)==null?void 0:W.height)??A.height};return Wh(P)},w=(k,S,A={replace:!1})=>{var z;const T=(z=Ae(p).get(k))==null?void 0:z.internals.userNode;if(!T)return;const P=typeof S=="function"?S(T):S;A.replace?u.update(W=>W.map(R=>R.id===k?Jh(P)?P:{...R,...P}:R)):(Object.assign(T,P),u.update(W=>W))},M=k=>Ae(p).get(k);return{zoomIn:n,zoomOut:e,getInternalNode:M,getNode:k=>{var S;return(S=M(k))==null?void 0:S.internals.userNode},getNodes:k=>k===void 0?Ae(u):Yh(Ae(p),k),getEdge:k=>Ae(v).get(k),getEdges:k=>k===void 0?Ae(f):Yh(Ae(v),k),setZoom:(k,S)=>{const A=Ae(d);return A?A.scaleTo(k,{duration:S==null?void 0:S.duration}):Promise.resolve(!1)},getZoom:()=>Ae(i).zoom,setViewport:async(k,S)=>{const A=Ae(i),T=Ae(d);return T?(await T.setViewport({x:k.x??A.x,y:k.y??A.y,zoom:k.zoom??A.zoom},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Ae(i),setCenter:async(k,S,A)=>{const T=typeof(A==null?void 0:A.zoom)<"u"?A.zoom:Ae(c),P=Ae(d);return P?(await P.setViewport({x:Ae(s)/2-k*T,y:Ae(l)/2-S*T,zoom:T},{duration:A==null?void 0:A.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(k,S)=>{const A=Ae(d);if(!A)return Promise.resolve(!1);const T=u0(k,Ae(s),Ae(l),Ae(a),Ae(c),(S==null?void 0:S.padding)??.1);return await A.setViewport(T,{duration:S==null?void 0:S.duration}),Promise.resolve(!0)},getIntersectingNodes:(k,S=!0,A)=>{const T=Vh(k),P=T?k:b(k);return P?(A||Ae(u)).filter(z=>{const W=Ae(p).get(z.id);if(!W||!T&&z.id===k.id)return!1;const R=Wh(W),B=Hh(R,P);return S&&B>0||B>=P.width*P.height}):[]},isNodeIntersecting:(k,S,A=!0)=>{const P=Vh(k)?k:b(k);if(!P)return!1;const z=Hh(P,S);return A&&z>0||z>=P.width*P.height},deleteElements:async({nodes:k=[],edges:S=[]})=>{const{nodes:A,edges:T}=await d0({nodesToRemove:k,edgesToRemove:S,nodes:Ae(u),edges:Ae(f),onBeforeDelete:Ae(r)});return A&&u.update(P=>P.filter(z=>!A.some(({id:W})=>W===z.id))),T&&f.update(P=>P.filter(z=>!T.some(({id:W})=>W===z.id))),{deletedNodes:A,deletedEdges:T}},screenToFlowPosition:(k,S={snapToGrid:!0})=>{const A=Ae(h);if(!A)return k;const T=S.snapToGrid?Ae(o):!1,{x:P,y:z,zoom:W}=Ae(i),{x:R,y:B}=A.getBoundingClientRect(),I={x:k.x-R,y:k.y-B};return c0(I,[P,z,W],T!==null,T||[1,1])},flowToScreenPosition:k=>{const S=Ae(h);if(!S)return k;const{x:A,y:T,zoom:P}=Ae(i),{x:z,y:W}=S.getBoundingClientRect(),R=a0(k,[A,T,P]);return{x:R.x+z,y:R.y+W}},toObject:()=>({nodes:Ae(u).map(k=>({...k,position:{...k.position},data:{...k.data}})),edges:Ae(f).map(k=>({...k})),viewport:{...Ae(i)}}),updateNode:w,updateNodeData:(k,S,A)=>{var z;const T=(z=Ae(p).get(k))==null?void 0:z.internals.userNode;if(!T)return;const P=typeof S=="function"?S(T):S;T.data=A!=null&&A.replace?P:{...T.data,...P},u.update(W=>W)},getNodesBounds:k=>{const S=Ae(p),A=Ae(g);return l0(k,{nodeLookup:S,nodeOrigin:A})},getHandleConnections:({type:k,id:S,nodeId:A})=>{var T;return Array.from(((T=Ae(x).get(`${A}-${k}-${S??null}`))==null?void 0:T.values())??[])},viewport:i}}function Yh(n,e){var r;const t=[];for(const o of e){const i=n.get(o);if(i){const s="internals"in i?(r=i.internals)==null?void 0:r.userNode:i;t.push(s)}}return t}var yx=G("<div><!></div>");function Xh(n,e){J(e,!1);const[t,r]=ut(),o=()=>fe(U,"$nodeLookup",t),i=()=>fe(oe,"$viewport",t),s=()=>fe(ie,"$snapGrid",t),l=()=>fe(K,"$nodeOrigin",t),a=()=>fe(ee,"$domNode",t),c=()=>fe(ke,"$nodes",t),d=ze(),u=ze(),f=ze(),h=ze(),p=ze(),g=ze(),v=ze(),x=ze(),b=ze(),w=ze(),M=ze();let k=y(e,"nodeId",8,void 0),S=y(e,"position",8,void 0),A=y(e,"variant",24,()=>No.Handle),T=y(e,"color",8,void 0),P=y(e,"minWidth",8,10),z=y(e,"minHeight",8,10),W=y(e,"maxWidth",24,()=>Number.MAX_VALUE),R=y(e,"maxHeight",24,()=>Number.MAX_VALUE),B=y(e,"keepAspectRatio",8,!1),I=y(e,"shouldResize",8,void 0),j=y(e,"onResizeStart",8,void 0),H=y(e,"onResize",8,void 0),$=y(e,"onResizeEnd",8,void 0),D=y(e,"style",8,""),q=y(e,"class",8,"");const{nodeLookup:U,snapGrid:ie,viewport:oe,nodes:ke,nodeOrigin:K,domNode:ee}=Ut(),se=tu("svelteflow__node_id");let Q=ze(),ce=ze(null);Dn(()=>(m(Q)&&_(ce,h0({domNode:m(Q),nodeId:m(p),getStoreItems:()=>({nodeLookup:o(),transform:[i().x,i().y,i().zoom],snapGrid:s()??void 0,snapToGrid:!!s(),nodeOrigin:l(),paneDomNode:a()}),onChange:(Me,ne)=>{var Le,Ce;const me=(Le=o().get(m(p)))==null?void 0:Le.internals.userNode;if(me){Me.x!==void 0&&Me.y!==void 0&&(me.position={x:Me.x,y:Me.y}),Me.width!==void 0&&Me.height!==void 0&&(me.width=Me.width,me.height=Me.height);for(const Pe of ne){const He=(Ce=o().get(Pe.id))==null?void 0:Ce.internals.userNode;He&&(He.position=Pe.position)}Kt(ke,c())}}})),()=>{var Me;(Me=m(ce))==null||Me.destroy()})),Be(()=>ue(P()),()=>{_(d,P()??10)}),Be(()=>ue(z()),()=>{_(u,z()??10)}),Be(()=>ue(W()),()=>{_(f,W()??Number.MAX_VALUE)}),Be(()=>ue(R()),()=>{_(h,R()??Number.MAX_VALUE)}),Be(()=>ue(k()),()=>{_(p,typeof k()=="string"?k():se)}),Be(()=>(ue(A()),No),()=>{_(g,A()===No.Line?"right":"bottom-right")}),Be(()=>(ue(S()),m(g)),()=>{_(v,S()??m(g))}),Be(()=>m(v),()=>{_(x,m(v).split("-"))}),Be(()=>(ue(A()),No),()=>{_(b,A()===No.Line?"border-color":"background-color")}),Be(()=>ue(D()),()=>{_(w,D()??"")}),Be(()=>(ue(T()),m(w),m(b)),()=>{_(M,T()?`${m(w)} ${m(b)}: ${T()};`:m(w))}),Be(()=>(m(ce),m(v),m(d),m(u),m(f),m(h),ue(B()),ue(j()),ue(H()),ue($()),ue(I())),()=>{var Me;(Me=m(ce))==null||Me.update({controlPosition:m(v),boundaries:{minWidth:m(d),minHeight:m(u),maxWidth:m(f),maxHeight:m(h)},keepAspectRatio:!!B(),onResizeStart:j(),onResize:H(),onResizeEnd:$(),shouldResize:I()})}),$n(),yt();var pe=yx(),Re=be(pe);je(Re,e,"default",{}),ge(pe),tn(pe,Me=>_(Q,Me),()=>m(Q)),Oe(Me=>{mr(pe,1,Me),ur(pe,m(M))},[()=>jr(gr(["svelte-flow__resize-control","nodrag",...m(x),A(),q()]))],Ie),C(n,pe),Y(),r()}var vx=G("<!> <!>",1);function Ul(n,e){J(e,!1);let t=y(e,"nodeId",8,void 0),r=y(e,"isVisible",8,!0),o=y(e,"handleClass",8,void 0),i=y(e,"handleStyle",8,void 0),s=y(e,"lineClass",8,void 0),l=y(e,"lineStyle",8,void 0),a=y(e,"color",8,void 0),c=y(e,"minWidth",8,10),d=y(e,"minHeight",8,10),u=y(e,"maxWidth",24,()=>Number.MAX_VALUE),f=y(e,"maxHeight",24,()=>Number.MAX_VALUE),h=y(e,"keepAspectRatio",8,!1),p=y(e,"shouldResize",8,void 0),g=y(e,"onResizeStart",8,void 0),v=y(e,"onResize",8,void 0),x=y(e,"onResizeEnd",8,void 0),b=c()||10,w=d()||10,M=u()||Number.MAX_VALUE,k=f()||Number.MAX_VALUE;yt();var S=F(),A=E(S);{var T=P=>{var z=vx(),W=E(z);Hn(W,1,()=>p0,B=>B,(B,I)=>{Xh(B,{get class(){return s()},get style(){return l()},get nodeId(){return t()},get position(){return m(I)},get variant(){return No.Line},get color(){return a()},minWidth:b,minHeight:w,maxWidth:M,maxHeight:k,get onResizeStart(){return g()},get keepAspectRatio(){return h()},get shouldResize(){return p()},get onResize(){return v()},get onResizeEnd(){return x()}})});var R=te(W,2);Hn(R,1,()=>m0,B=>B,(B,I)=>{Xh(B,{get class(){return o()},get style(){return i()},get nodeId(){return t()},get position(){return m(I)},get color(){return a()},minWidth:b,minHeight:w,maxWidth:M,maxHeight:k,get onResizeStart(){return g()},get keepAspectRatio(){return h()},get shouldResize(){return p()},get onResize(){return v()},get onResizeEnd(){return x()}})}),C(P,z)};Ee(A,P=>{r()&&P(T)})}C(n,S),Y()}function bx(n){return typeof n=="function"}function wx(n){return n!==null&&typeof n=="object"}const xx=["string","number","bigint","boolean"];function lu(n){return n==null||xx.includes(typeof n)?!0:Array.isArray(n)?n.every(e=>lu(e)):typeof n=="object"?Object.getPrototypeOf(n)===Object.prototype:!1}const Ui=Symbol("box"),vf=Symbol("is-writable");function Sx(n){return wx(n)&&Ui in n}function kx(n){return N.isBox(n)&&vf in n}function N(n){let e=de(Ft(n));return{[Ui]:!0,[vf]:!0,get current(){return m(e)},set current(t){_(e,t,!0)}}}function Mx(n,e){const t=L(n);return e?{[Ui]:!0,[vf]:!0,get current(){return m(t)},set current(r){e(r)}}:{[Ui]:!0,get current(){return n()}}}function Cx(n){return N.isBox(n)?n:bx(n)?N.with(n):N(n)}function Ox(n){return Object.entries(n).reduce((e,[t,r])=>N.isBox(r)?(N.isWritableBox(r)?Object.defineProperty(e,t,{get(){return r.current},set(o){r.current=o}}):Object.defineProperty(e,t,{get(){return r.current}}),e):Object.assign(e,{[t]:r}),{})}function Tx(n){return N.isWritableBox(n)?{[Ui]:!0,get current(){return n.current}}:n}N.from=Cx;N.with=Mx;N.flatten=Ox;N.readonly=Tx;N.isBox=Sx;N.isWritableBox=kx;function ug(...n){return function(e){var t;for(const r of n)if(r){if(e.defaultPrevented)return;typeof r=="function"?r.call(this,e):(t=r.current)==null||t.call(this,e)}}}function Ax(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Oo={},bd,Zh;function Ex(){if(Zh)return bd;Zh=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,a=`
`,c="/",d="*",u="",f="comment",h="declaration";bd=function(g,v){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];v=v||{};var x=1,b=1;function w(B){var I=B.match(e);I&&(x+=I.length);var j=B.lastIndexOf(a);b=~j?B.length-j:b+B.length}function M(){var B={line:x,column:b};return function(I){return I.position=new k(B),T(),I}}function k(B){this.start=B,this.end={line:x,column:b},this.source=v.source}k.prototype.content=g;function S(B){var I=new Error(v.source+":"+x+":"+b+": "+B);if(I.reason=B,I.filename=v.source,I.line=x,I.column=b,I.source=g,!v.silent)throw I}function A(B){var I=B.exec(g);if(I){var j=I[0];return w(j),g=g.slice(j.length),I}}function T(){A(t)}function P(B){var I;for(B=B||[];I=z();)I!==!1&&B.push(I);return B}function z(){var B=M();if(!(c!=g.charAt(0)||d!=g.charAt(1))){for(var I=2;u!=g.charAt(I)&&(d!=g.charAt(I)||c!=g.charAt(I+1));)++I;if(I+=2,u===g.charAt(I-1))return S("End of comment missing");var j=g.slice(2,I-2);return b+=2,w(j),g=g.slice(I),b+=2,B({type:f,comment:j})}}function W(){var B=M(),I=A(r);if(I){if(z(),!A(o))return S("property missing ':'");var j=A(i),H=B({type:h,property:p(I[0].replace(n,u)),value:j?p(j[0].replace(n,u)):u});return A(s),H}}function R(){var B=[];P(B);for(var I;I=W();)I!==!1&&(B.push(I),P(B));return B}return T(),R()};function p(g){return g?g.replace(l,u):u}return bd}var Qh;function Px(){if(Qh)return Oo;Qh=1;var n=Oo&&Oo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.default=t;var e=n(Ex());function t(r,o){var i=null;if(!r||typeof r!="string")return i;var s=(0,e.default)(r),l=typeof o=="function";return s.forEach(function(a){if(a.type==="declaration"){var c=a.property,d=a.value;l?o(c,d,a):d&&(i=i||{},i[c]=d)}}),i}return Oo}var Nx=Px();const ep=Ax(Nx),_x=ep.default||ep,Ix=/\d/,Dx=["-","_","/","."];function Rx(n=""){if(!Ix.test(n))return n!==n.toLowerCase()}function zx(n){const e=[];let t="",r,o;for(const i of n){const s=Dx.includes(i);if(s===!0){e.push(t),t="",r=void 0;continue}const l=Rx(i);if(o===!1){if(r===!1&&l===!0){e.push(t),t=i,r=l;continue}if(r===!0&&l===!1&&t.length>1){const a=t.at(-1);e.push(t.slice(0,Math.max(0,t.length-1))),t=a+i,r=l;continue}}t+=i,r=l,o=s}return e.push(t),e}function fg(n){return n?zx(n).map(e=>Fx(e)).join(""):""}function Lx(n){return Bx(fg(n||""))}function Fx(n){return n?n[0].toUpperCase()+n.slice(1):""}function Bx(n){return n?n[0].toLowerCase()+n.slice(1):""}function Di(n){if(!n)return{};const e={};function t(r,o){if(r.startsWith("-moz-")||r.startsWith("-webkit-")||r.startsWith("-ms-")||r.startsWith("-o-")){e[fg(r)]=o;return}if(r.startsWith("--")){e[r]=o;return}e[Lx(r)]=o}return _x(n,t),e}function lr(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function Vx(n,e){const t=RegExp(n,"g");return r=>{if(typeof r!="string")throw new TypeError(`expected an argument of type string, but got ${typeof r}`);return r.match(t)?r.replace(t,e):r}}const Hx=Vx(/[A-Z]/,n=>`-${n.toLowerCase()}`);function Wx(n){if(!n||typeof n!="object"||Array.isArray(n))throw new TypeError(`expected an argument of type object, but got ${typeof n}`);return Object.keys(n).map(e=>`${Hx(e)}: ${n[e]};`).join(`
`)}function bf(n={}){return Wx(n).replace(`
`," ")}const hg={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};bf(hg);function Kx(n){var e;return n.length>2&&n.startsWith("on")&&n[2]===((e=n[2])==null?void 0:e.toLowerCase())}function Ye(...n){const e={...n[0]};for(let t=1;t<n.length;t++){const r=n[t];for(const o in r){const i=e[o],s=r[o],l=typeof i=="function",a=typeof s=="function";if(l&&Kx(o)){const c=i,d=s;e[o]=ug(c,d)}else if(l&&a)e[o]=lr(i,s);else if(o==="class"){const c=lu(i),d=lu(s);c&&d?e[o]=Na(i,s):c?e[o]=Na(i):d&&(e[o]=Na(s))}else if(o==="style"){const c=typeof i=="object",d=typeof s=="object",u=typeof i=="string",f=typeof s=="string";if(c&&d)e[o]={...i,...s};else if(c&&f){const h=Di(s);e[o]={...i,...h}}else if(u&&d){const h=Di(i);e[o]={...h,...s}}else if(u&&f){const h=Di(i),p=Di(s);e[o]={...h,...p}}else c?e[o]=i:d?e[o]=s:u?e[o]=i:f&&(e[o]=s)}else e[o]=s!==void 0?s:i}}return typeof e.style=="object"&&(e.style=bf(e.style).replaceAll(`
`," ")),e.hidden!==!0&&(e.hidden=void 0,delete e.hidden),e.disabled!==!0&&(e.disabled=void 0,delete e.disabled),e}const pg=typeof window<"u"?window:void 0;function jx(n){let e=n.activeElement;for(;e!=null&&e.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}var Ln,Fn,er,Uo,Ia;const ph=class ph extends Map{constructor(t){super();V(this,Uo);V(this,Ln,new Map);V(this,Fn,Qn(0));V(this,er,Qn(0));if(t){for(var[r,o]of t)super.set(r,o);O(this,er).v=super.size}}has(t){var r=O(this,Ln),o=r.get(t);if(o===void 0){var i=super.get(t);if(i!==void 0)o=Qn(0),r.set(t,o);else return m(O(this,Fn)),!1}return m(o),!0}forEach(t,r){Ne(this,Uo,Ia).call(this),super.forEach(t,r)}get(t){var r=O(this,Ln),o=r.get(t);if(o===void 0){var i=super.get(t);if(i!==void 0)o=Qn(0),r.set(t,o);else{m(O(this,Fn));return}}return m(o),super.get(t)}set(t,r){var u;var o=O(this,Ln),i=o.get(t),s=super.get(t),l=super.set(t,r),a=O(this,Fn);if(i===void 0)o.set(t,Qn(0)),_(O(this,er),super.size),_o(a);else if(s!==r){_o(i);var c=a.reactions===null?null:new Set(a.reactions),d=c===null||!((u=i.reactions)!=null&&u.every(f=>c.has(f)));d&&_o(a)}return l}delete(t){var r=O(this,Ln),o=r.get(t),i=super.delete(t);return o!==void 0&&(r.delete(t),_(O(this,er),super.size),_(o,-1),_o(O(this,Fn))),i}clear(){if(super.size!==0){super.clear();var t=O(this,Ln);_(O(this,er),0);for(var r of t.values())_(r,-1);_o(O(this,Fn)),t.clear()}}keys(){return m(O(this,Fn)),super.keys()}values(){return Ne(this,Uo,Ia).call(this),super.values()}entries(){return Ne(this,Uo,Ia).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return m(O(this,er)),super.size}};Ln=new WeakMap,Fn=new WeakMap,er=new WeakMap,Uo=new WeakSet,Ia=function(){m(O(this,Fn));var t=O(this,Ln);if(O(this,er).v!==t.size)for(var r of Th(ph.prototype,this,"keys").call(this))t.has(r)||t.set(r,Qn(0));for(var[,o]of O(this,Ln))m(o)};let au=ph;var qo,as;class $x{constructor(e={}){V(this,qo);V(this,as);const{window:t=pg,document:r=t==null?void 0:t.document}=e;t!==void 0&&(ct(this,qo,r),ct(this,as,k0(o=>{const i=lt(t,"focusin",o),s=lt(t,"focusout",o);return()=>{i(),s()}})))}get current(){var e;return(e=O(this,as))==null||e.call(this),O(this,qo)?jx(O(this,qo)):null}}qo=new WeakMap,as=new WeakMap;new $x;function Gx(n){return typeof n=="function"}function Ux(n,e){switch(n){case"post":nt(e);break;case"pre":pf(e);break}}function mg(n,e,t,r={}){const{lazy:o=!1}=r;let i=!o,s=Array.isArray(n)?[]:void 0;Ux(e,()=>{const l=Array.isArray(n)?n.map(c=>c()):n();if(!i){i=!0,s=l;return}const a=dr(()=>t(l,s));return s=l,a})}function Ze(n,e,t){mg(n,"post",e,t)}function qx(n,e,t){mg(n,"pre",e,t)}Ze.pre=qx;function Jx(n){return Gx(n)?n():n}var tr;class Yx{constructor(e,t={box:"border-box"}){V(this,tr,de(Ft({width:0,height:0})));var o,i;const r=t.window??pg;_(O(this,tr),{width:((o=t.initialSize)==null?void 0:o.width)??0,height:((i=t.initialSize)==null?void 0:i.height)??0},!0),nt(()=>{if(!r)return;const s=Jx(e);if(!s)return;const l=new r.ResizeObserver(a=>{for(const c of a){const d=t.box==="content-box"?c.contentBoxSize:c.borderBoxSize,u=Array.isArray(d)?d:[d];m(O(this,tr)).width=u.reduce((f,h)=>Math.max(f,h.inlineSize),0),m(O(this,tr)).height=u.reduce((f,h)=>Math.max(f,h.blockSize),0)}});return l.observe(s),()=>{l.disconnect()}})}get current(){return m(O(this,tr))}get width(){return m(O(this,tr)).width}get height(){return m(O(this,tr)).height}}tr=new WeakMap;var cs,ds;class Xx{constructor(e){V(this,cs,de(void 0));V(this,ds);nt(()=>{_(O(this,cs),O(this,ds),!0),ct(this,ds,e())})}get current(){return m(O(this,cs))}}cs=new WeakMap,ds=new WeakMap;var us,nr;class vn{constructor(e){V(this,us);V(this,nr);ct(this,us,e),ct(this,nr,Symbol(e))}get key(){return O(this,nr)}exists(){return sg(O(this,nr))}get(){const e=tu(O(this,nr));if(e===void 0)throw new Error(`Context "${O(this,us)}" not found`);return e}getOr(e){const t=tu(O(this,nr));return t===void 0?e:t}set(e){return Ga(O(this,nr),e)}}us=new WeakMap,nr=new WeakMap;function wf(n){nt(()=>()=>{n()})}function it({id:n,ref:e,deps:t=()=>!0,onRefChange:r,getRootNode:o}){Ze([()=>n.current,t],([i])=>{const s=(o==null?void 0:o())??document,l=s==null?void 0:s.getElementById(i);l?e.current=l:e.current=null,r==null||r(e.current)}),wf(()=>{e.current=null,r==null||r(null)})}function ql(n,e){return setTimeout(e,n)}function It(n){ff().then(n)}function Zx(n){nt(()=>dr(()=>n()))}function Kc(n){return n?"open":"closed"}function gg(n){return n?"true":"false"}function xf(n){return n?"true":"false"}function jc(n){return n?"":void 0}function Qx(n){return n?"true":"false"}function e1(n){return n?"true":void 0}function t1(n){return n?"":void 0}const ii="ArrowDown",Sf="ArrowLeft",kf="ArrowRight",qi="ArrowUp",Mf="End",Jl="Enter",n1="Escape",Cf="Home",r1="PageDown",o1="PageUp",Yl=" ",yg="Tab",i1="p",s1="n",l1="j",a1="k";function c1(n){return window.getComputedStyle(n).getPropertyValue("direction")}function d1(n="ltr",e="horizontal"){return{horizontal:n==="rtl"?Sf:kf,vertical:ii}[e]}function u1(n="ltr",e="horizontal"){return{horizontal:n==="rtl"?kf:Sf,vertical:qi}[e]}function f1(n="ltr",e="horizontal"){return["ltr","rtl"].includes(n)||(n="ltr"),["horizontal","vertical"].includes(e)||(e="horizontal"),{nextKey:d1(n,e),prevKey:u1(n,e)}}const $c=typeof document<"u",tp=h1();function h1(){var n,e;return $c&&((n=window==null?void 0:window.navigator)==null?void 0:n.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function fr(n){return n instanceof HTMLElement}function Ua(n){return n instanceof Element}function p1(n){return n instanceof Element||n instanceof SVGElement}function m1(n){return n!==null}function g1(n){return n instanceof HTMLInputElement&&"select"in n}function y1(n,e){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function v1(n){const e=N(null);function t(){if(!$c)return[];const s=document.getElementById(n.rootNodeId.current);return s?n.candidateSelector?Array.from(s.querySelectorAll(n.candidateSelector)):Array.from(s.querySelectorAll(`[${n.candidateAttr}]:not([data-disabled])`)):[]}function r(){var l;const s=t();s.length&&((l=s[0])==null||l.focus())}function o(s,l,a=!1){var w;const c=document.getElementById(n.rootNodeId.current);if(!c||!s)return;const d=t();if(!d.length)return;const u=d.indexOf(s),f=c1(c),{nextKey:h,prevKey:p}=f1(f,n.orientation.current),g=n.loop.current,v={[h]:u+1,[p]:u-1,[Cf]:0,[Mf]:d.length-1};if(a){const M=h===ii?kf:ii,k=p===qi?Sf:qi;v[M]=u+1,v[k]=u-1}let x=v[l.key];if(x===void 0)return;l.preventDefault(),x<0&&g?x=d.length-1:x===d.length&&g&&(x=0);const b=d[x];if(b)return b.focus(),e.current=b.id,(w=n.onCandidateFocus)==null||w.call(n,b),b}function i(s){const l=t(),a=e.current!==null;return s&&!a&&l[0]===s?(e.current=s.id,0):(s==null?void 0:s.id)===e.current?0:-1}return{setCurrentTabStopId(s){e.current=s},getTabIndex:i,handleKeydown:o,focusFirstCandidate:r,currentTabStopId:e}}globalThis.bitsIdCounter??(globalThis.bitsIdCounter={current:0});function ft(n="bits"){return globalThis.bitsIdCounter.current++,`${n}-${globalThis.bitsIdCounter.current}`}function et(){}function b1(n,e){const t=N(n);function r(i){return e[t.current][i]??t.current}return{state:t,dispatch:i=>{t.current=r(i)}}}function w1(n,e){let t=de(Ft({})),r=de("none");const o=n.current?"mounted":"unmounted";let i=de(null);const s=new Xx(()=>n.current);Ze([()=>e.current,()=>n.current],([f,h])=>{!f||!h||It(()=>{_(i,document.getElementById(f),!0)})});const{state:l,dispatch:a}=b1(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});Ze(()=>n.current,f=>{if(m(i)||_(i,document.getElementById(e.current),!0),!m(i)||!(f!==s.current))return;const p=m(r),g=ca(m(i));f?a("MOUNT"):g==="none"||m(t).display==="none"?a("UNMOUNT"):a(s&&p!==g?"ANIMATION_OUT":"UNMOUNT")});function c(f){if(m(i)||_(i,document.getElementById(e.current),!0),!m(i))return;const h=ca(m(i)),p=h.includes(f.animationName)||h==="none";f.target===m(i)&&p&&a("ANIMATION_END")}function d(f){m(i)||_(i,document.getElementById(e.current),!0),m(i)&&f.target===m(i)&&_(r,ca(m(i)),!0)}Ze(()=>l.current,()=>{if(m(i)||_(i,document.getElementById(e.current),!0),!m(i))return;const f=ca(m(i));_(r,l.current==="mounted"?f:"none",!0)}),Ze(()=>m(i),f=>{if(f)return _(t,getComputedStyle(f),!0),lr(lt(f,"animationstart",d),lt(f,"animationcancel",c),lt(f,"animationend",c))});const u=L(()=>["mounted","unmountSuspended"].includes(l.current));return{get current(){return m(u)}}}function ca(n){return n&&getComputedStyle(n).animationName||"none"}function Of(n,e){J(e,!0);const t=w1(N.with(()=>e.present),N.with(()=>e.id));var r=F(),o=E(r);{var i=s=>{var l=F(),a=E(l);ae(a,()=>e.presence??De,()=>({present:t})),C(s,l)};Ee(o,s=>{(e.forceMount||e.present||t.current)&&s(i)})}C(n,r),Y()}function x1(n){return{content:`data-${n}-content`,trigger:`data-${n}-trigger`,overlay:`data-${n}-overlay`,title:`data-${n}-title`,description:`data-${n}-description`,close:`data-${n}-close`,cancel:`data-${n}-cancel`,action:`data-${n}-action`}}var fs,hs,ps,ms,gs,ys,vs,bs,ws,xs,Ss;class S1{constructor(e){re(this,"opts");V(this,fs,de(null));V(this,hs,de(null));V(this,ps,de(null));V(this,ms,de(null));V(this,gs,de(void 0));V(this,ys,de(void 0));V(this,vs,de(void 0));V(this,bs,de(void 0));V(this,ws,de(null));V(this,xs,L(()=>x1(this.opts.variant.current)));V(this,Ss,L(()=>({"data-state":Kc(this.opts.open.current)})));this.opts=e,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this)}get triggerNode(){return m(O(this,fs))}set triggerNode(e){_(O(this,fs),e,!0)}get titleNode(){return m(O(this,hs))}set titleNode(e){_(O(this,hs),e,!0)}get contentNode(){return m(O(this,ps))}set contentNode(e){_(O(this,ps),e,!0)}get descriptionNode(){return m(O(this,ms))}set descriptionNode(e){_(O(this,ms),e,!0)}get contentId(){return m(O(this,gs))}set contentId(e){_(O(this,gs),e,!0)}get titleId(){return m(O(this,ys))}set titleId(e){_(O(this,ys),e,!0)}get triggerId(){return m(O(this,vs))}set triggerId(e){_(O(this,vs),e,!0)}get descriptionId(){return m(O(this,bs))}set descriptionId(e){_(O(this,bs),e,!0)}get cancelNode(){return m(O(this,ws))}set cancelNode(e){_(O(this,ws),e,!0)}get attrs(){return m(O(this,xs))}set attrs(e){_(O(this,xs),e)}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}get sharedProps(){return m(O(this,Ss))}set sharedProps(e){_(O(this,Ss),e)}}fs=new WeakMap,hs=new WeakMap,ps=new WeakMap,ms=new WeakMap,gs=new WeakMap,ys=new WeakMap,vs=new WeakMap,bs=new WeakMap,ws=new WeakMap,xs=new WeakMap,Ss=new WeakMap;var ks;class k1{constructor(e,t){re(this,"opts");re(this,"root");V(this,ks,L(()=>({id:this.opts.id.current,"aria-haspopup":"dialog","aria-expanded":xf(this.root.opts.open.current),"aria-controls":this.root.contentId,[this.root.attrs.trigger]:"",onkeydown:this.onkeydown,onclick:this.onclick,disabled:this.opts.disabled.current?!0:void 0,...this.root.sharedProps})));this.opts=e,this.root=t,it({...e,onRefChange:r=>{this.root.triggerNode=r,this.root.triggerId=r==null?void 0:r.id}}),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleOpen()}onkeydown(e){this.opts.disabled.current||(e.key===Yl||e.key===Jl)&&(e.preventDefault(),this.root.handleOpen())}get props(){return m(O(this,ks))}set props(e){_(O(this,ks),e)}}ks=new WeakMap;var xc,Ms;class M1{constructor(e,t){re(this,"opts");re(this,"root");V(this,xc,L(()=>this.root.attrs[this.opts.variant.current]));V(this,Ms,L(()=>({id:this.opts.id.current,[m(O(this,xc))]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:this.opts.disabled.current?!0:void 0,tabindex:0,...this.root.sharedProps})));this.opts=e,this.root=t,this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this),it({...e,deps:()=>this.root.opts.open.current})}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||(e.key===Yl||e.key===Jl)&&(e.preventDefault(),this.root.handleClose())}get props(){return m(O(this,Ms))}set props(e){_(O(this,Ms),e)}}xc=new WeakMap,Ms=new WeakMap;var Cs,Os;class C1{constructor(e,t){re(this,"opts");re(this,"root");V(this,Cs,L(()=>({open:this.root.opts.open.current})));V(this,Os,L(()=>({id:this.opts.id.current,role:this.root.opts.variant.current==="alert-dialog"?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.attrs.content]:"",style:{pointerEvents:"auto",outline:this.root.opts.variant.current==="alert-dialog"?"none":void 0},tabindex:this.root.opts.variant.current==="alert-dialog"?-1:void 0,...this.root.sharedProps})));this.opts=e,this.root=t,it({...e,deps:()=>this.root.opts.open.current,onRefChange:r=>{this.root.contentNode=r,this.root.contentId=r==null?void 0:r.id}})}get snippetProps(){return m(O(this,Cs))}set snippetProps(e){_(O(this,Cs),e)}get props(){return m(O(this,Os))}set props(e){_(O(this,Os),e)}}Cs=new WeakMap,Os=new WeakMap;var Ts,As;class O1{constructor(e,t){re(this,"opts");re(this,"root");V(this,Ts,L(()=>({open:this.root.opts.open.current})));V(this,As,L(()=>({id:this.opts.id.current,[this.root.attrs.overlay]:"",style:{pointerEvents:"auto"},...this.root.sharedProps})));this.opts=e,this.root=t,it({...e,deps:()=>this.root.opts.open.current})}get snippetProps(){return m(O(this,Ts))}set snippetProps(e){_(O(this,Ts),e)}get props(){return m(O(this,As))}set props(e){_(O(this,As),e)}}Ts=new WeakMap,As=new WeakMap;const Xl=new vn("Dialog.Root");function T1(n){return Xl.set(new S1(n))}function A1(n){return new k1(n,Xl.get())}function E1(n){return new C1(n,Xl.get())}function P1(n){return new O1(n,Xl.get())}function N1(n){return new M1(n,Xl.get())}function _1(n,e){var t=F(),r=E(t);gf(r,()=>e.children,o=>{var i=F(),s=E(i);ae(s,()=>e.children??De),C(o,i)}),C(n,t)}function Gc(n,e){J(e,!0);let t=y(e,"to",3,"body");const r=Vw();let o=L(i);function i(){if(!$c||e.disabled)return null;let u=null;return typeof t()=="string"?u=document.querySelector(t()):(t()instanceof HTMLElement||t()instanceof DocumentFragment)&&(u=t()),u}let s;function l(){s&&(bw(s),s=null)}Ze([()=>m(o),()=>e.disabled],([u,f])=>{if(!u||f){l();return}return s=vw(_1,{target:u,props:{children:e.children},context:r}),()=>{l()}});var a=F(),c=E(a);{var d=u=>{var f=F(),h=E(f);ae(h,()=>e.children??De),C(u,f)};Ee(c,u=>{e.disabled&&u(d)})}C(n,a),Y()}function vg(n,e,t,r){const o=Array.isArray(e)?e:[e];return o.forEach(i=>n.addEventListener(i,t,r)),()=>{o.forEach(i=>n.removeEventListener(i,t,r))}}class Tf{constructor(e,t={bubbles:!0,cancelable:!0}){re(this,"eventName");re(this,"options");this.eventName=e,this.options=t}createEvent(e){return new CustomEvent(this.eventName,{...this.options,detail:e})}dispatch(e,t){const r=this.createEvent(t);return e.dispatchEvent(r),r}listen(e,t,r){const o=i=>{t(i)};return lt(e,this.eventName,o,r)}}function np(n,e=500){let t=null;const r=(...o)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...o)},e)};return r.destroy=()=>{t!==null&&(clearTimeout(t),t=null)},r}function Af(n,e){return n===e||n.contains(e)}function bg(n){return(n==null?void 0:n.ownerDocument)??document}function wg(n){return(n==null?void 0:n.ownerDocument)??document}function I1(n){if(!n)return null;for(const e of n.childNodes)if(e.nodeType!==Node.COMMENT_NODE)return e;return null}function D1(n,e){const{clientX:t,clientY:r}=n,o=e.getBoundingClientRect();return t<o.left||t>o.right||r<o.top||r>o.bottom}globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);var Jo,so,Er,Yo,Xo,Pr,Es,Ps,rr,Sc,hi,xg,kc,Zo,Mc,Cc,Oc,Tc,Ns,Sg,Ac,Ec;class R1{constructor(e){V(this,hi);re(this,"opts");V(this,Jo);V(this,so);V(this,Er,{pointerdown:!1});V(this,Yo,!1);V(this,Xo,!1);re(this,"node",N(null));V(this,Pr);V(this,Es);V(this,Ps,de(null));V(this,rr,et);V(this,Sc,e=>{e.defaultPrevented||this.currNode&&It(()=>{var t,r;!this.currNode||O(this,Tc).call(this,e.target)||e.target&&!O(this,Xo)&&((r=(t=O(this,Es)).current)==null||r.call(t,e))})});V(this,kc,e=>{let t=e;t.defaultPrevented&&(t=rp(e)),O(this,Jo).current(e)});V(this,Zo,np(e=>{if(!this.currNode){O(this,rr).call(this);return}const t=this.opts.isValidEvent.current(e,this.currNode)||B1(e,this.currNode);if(!O(this,Yo)||Ne(this,hi,Sg).call(this)||!t){O(this,rr).call(this);return}let r=e;if(r.defaultPrevented&&(r=rp(r)),O(this,so).current!=="close"&&O(this,so).current!=="defer-otherwise-close"){O(this,rr).call(this);return}e.pointerType==="touch"?(O(this,rr).call(this),ct(this,rr,vg(O(this,Pr),"click",O(this,kc),{once:!0}))):O(this,Jo).current(r)},10));V(this,Mc,e=>{O(this,Er)[e.type]=!0});V(this,Cc,e=>{O(this,Er)[e.type]=!1});V(this,Oc,()=>{this.node.current&&ct(this,Yo,F1(this.node.current))});V(this,Tc,e=>this.node.current?Af(this.node.current,e):!1);V(this,Ns,np(()=>{for(const e in O(this,Er))O(this,Er)[e]=!1;ct(this,Yo,!1)},20));V(this,Ac,()=>{ct(this,Xo,!0)});V(this,Ec,()=>{ct(this,Xo,!1)});re(this,"props",{onfocuscapture:O(this,Ac),onblurcapture:O(this,Ec)});this.opts=e,it({id:e.id,ref:this.node,deps:()=>e.enabled.current,onRefChange:o=>{this.currNode=o}}),ct(this,so,e.interactOutsideBehavior),ct(this,Jo,e.onInteractOutside),ct(this,Es,e.onFocusOutside),nt(()=>{ct(this,Pr,bg(this.currNode))});let t=et;const r=()=>{O(this,Ns).call(this),globalThis.bitsDismissableLayers.delete(this),O(this,Zo).destroy(),t()};Ze([()=>this.opts.enabled.current,()=>this.currNode],([o,i])=>{if(!(!o||!i))return ql(1,()=>{this.currNode&&(globalThis.bitsDismissableLayers.set(this,O(this,so)),t(),t=Ne(this,hi,xg).call(this))}),r}),wf(()=>{O(this,Ns).destroy(),globalThis.bitsDismissableLayers.delete(this),O(this,Zo).destroy(),O(this,rr).call(this),t()})}get currNode(){return m(O(this,Ps))}set currNode(e){_(O(this,Ps),e,!0)}}Jo=new WeakMap,so=new WeakMap,Er=new WeakMap,Yo=new WeakMap,Xo=new WeakMap,Pr=new WeakMap,Es=new WeakMap,Ps=new WeakMap,rr=new WeakMap,Sc=new WeakMap,hi=new WeakSet,xg=function(){return lr(lt(O(this,Pr),"pointerdown",lr(O(this,Mc),O(this,Oc)),{capture:!0}),lt(O(this,Pr),"pointerdown",lr(O(this,Cc),O(this,Zo))),lt(O(this,Pr),"focusin",O(this,Sc)))},kc=new WeakMap,Zo=new WeakMap,Mc=new WeakMap,Cc=new WeakMap,Oc=new WeakMap,Tc=new WeakMap,Ns=new WeakMap,Sg=function(){return Object.values(O(this,Er)).some(Boolean)},Ac=new WeakMap,Ec=new WeakMap;function z1(n){return new R1(n)}function L1(n){return n.findLast(([e,{current:t}])=>t==="close"||t==="ignore")}function F1(n){const e=[...globalThis.bitsDismissableLayers],t=L1(e);if(t)return t[0].node.current===n;const[r]=e[0];return r.node.current===n}function B1(n,e){if("button"in n&&n.button>0)return!1;const t=n.target;return Ua(t)?bg(t).documentElement.contains(t)&&!Af(e,t)&&D1(n,e):!1}function rp(n){const e=n.currentTarget,t=n.target;let r;n instanceof PointerEvent?r=new PointerEvent(n.type,n):r=new PointerEvent("pointerdown",n);let o=!1;return new Proxy(r,{get:(s,l)=>l==="currentTarget"?e:l==="target"?t:l==="preventDefault"?()=>{o=!0,typeof s.preventDefault=="function"&&s.preventDefault()}:l==="defaultPrevented"?o:l in s?s[l]:n[l]})}function kg(n,e){J(e,!0);let t=y(e,"interactOutsideBehavior",3,"close"),r=y(e,"onInteractOutside",3,et),o=y(e,"onFocusOutside",3,et),i=y(e,"isValidEvent",3,()=>!1);const s=z1({id:N.with(()=>e.id),interactOutsideBehavior:N.with(()=>t()),onInteractOutside:N.with(()=>r()),enabled:N.with(()=>e.enabled),onFocusOutside:N.with(()=>o()),isValidEvent:N.with(()=>i())});var l=F(),a=E(l);ae(a,()=>e.children??De,()=>({props:s.props})),C(n,l),Y()}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);var Pc,Nc;class V1{constructor(e){re(this,"opts");V(this,Pc,()=>lt(document,"keydown",O(this,Nc),{passive:!1}));V(this,Nc,e=>{if(e.key!==n1||!W1(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const r=this.opts.escapeKeydownBehavior.current;r!=="close"&&r!=="defer-otherwise-close"||this.opts.onEscapeKeydown.current(t)});this.opts=e;let t=et;Ze(()=>e.enabled.current,r=>(r&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=O(this,Pc).call(this)),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}}Pc=new WeakMap,Nc=new WeakMap;function H1(n){return new V1(n)}function W1(n){const e=[...globalThis.bitsEscapeLayers],t=e.findLast(([o,{current:i}])=>i==="close"||i==="ignore");if(t)return t[0]===n;const[r]=e[0];return r===n}function Mg(n,e){J(e,!0);let t=y(e,"escapeKeydownBehavior",3,"close"),r=y(e,"onEscapeKeydown",3,et);H1({escapeKeydownBehavior:N.with(()=>t()),onEscapeKeydown:N.with(()=>r()),enabled:N.with(()=>e.enabled)});var o=F(),i=E(o);ae(i,()=>e.children??De),C(n,o),Y()}const vr=N([]);function K1(){return{add(n){const e=vr.current[0];e&&n.id!==e.id&&e.pause(),vr.current=op(vr.current,n),vr.current.unshift(n)},remove(n){var e;vr.current=op(vr.current,n),(e=vr.current[0])==null||e.resume()},get current(){return vr.current}}}function j1(){let n=de(!1),e=de(!1);return{id:ft(),get paused(){return m(n)},get isHandlingFocus(){return m(e)},set isHandlingFocus(t){_(e,t,!0)},pause(){_(n,!0)},resume(){_(n,!1)}}}function op(n,e){return[...n].filter(t=>t.id!==e.id)}function $1(n){return n.filter(e=>e.tagName!=="A")}function xr(n,{select:e=!1}={}){if(!(n&&n.focus)||document.activeElement===n)return;const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&g1(n)&&e&&n.select()}function Cg(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(xr(r,{select:e}),document.activeElement!==t)return!0}function ip(n,e){for(const t of n)if(!y1(t,e))return t}function Og(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function G1(n){const e=Og(n),t=ip(e,n),r=ip(e.reverse(),n);return[t,r]}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Tg=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],qa=Tg.join(","),Ag=typeof Element>"u",mo=Ag?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ja=!Ag&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},Ya=function n(e,t){var r;t===void 0&&(t=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||t&&e&&n(e.parentNode);return s},U1=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},Eg=function(e,t,r){if(Ya(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(qa));return t&&mo.call(e,qa)&&o.unshift(e),o=o.filter(r),o},Pg=function n(e,t,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!Ya(s,!1))if(s.tagName==="SLOT"){var l=s.assignedElements(),a=l.length?l:s.children,c=n(a,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var d=mo.call(s,qa);d&&r.filter(s)&&(t||!e.includes(s))&&o.push(s);var u=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),f=!Ya(u,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(u&&f){var h=n(u===!0?s.children:u.children,!0,r);r.flatten?o.push.apply(o,h):o.push({scopeParent:s,candidates:h})}else i.unshift.apply(i,s.children)}}return o},Ng=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},_g=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||U1(e))&&!Ng(e)?0:e.tabIndex},q1=function(e,t){var r=_g(e);return r<0&&t&&!Ng(e)?0:r},J1=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Ig=function(e){return e.tagName==="INPUT"},Y1=function(e){return Ig(e)&&e.type==="hidden"},X1=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Z1=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Q1=function(e){if(!e.name)return!0;var t=e.form||Ja(e),r=function(l){return t.querySelectorAll('input[type="radio"][name="'+l+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=Z1(o,e.form);return!i||i===e},eS=function(e){return Ig(e)&&e.type==="radio"},tS=function(e){return eS(e)&&!Q1(e)},nS=function(e){var t,r=e&&Ja(e),o=(t=r)===null||t===void 0?void 0:t.host,i=!1;if(r&&r!==e){var s,l,a;for(i=!!((s=o)!==null&&s!==void 0&&(l=s.ownerDocument)!==null&&l!==void 0&&l.contains(o)||e!=null&&(a=e.ownerDocument)!==null&&a!==void 0&&a.contains(e));!i&&o;){var c,d,u;r=Ja(o),o=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=o)!==null&&d!==void 0&&(u=d.ownerDocument)!==null&&u!==void 0&&u.contains(o))}}return i},sp=function(e){var t=e.getBoundingClientRect(),r=t.width,o=t.height;return r===0&&o===0},rS=function(e,t){var r=t.displayCheck,o=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=mo.call(e,"details>summary:first-of-type"),s=i?e.parentElement:e;if(mo.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var l=e;e;){var a=e.parentElement,c=Ja(e);if(a&&!a.shadowRoot&&o(a)===!0)return sp(e);e.assignedSlot?e=e.assignedSlot:!a&&c!==e.ownerDocument?e=c.host:e=a}e=l}if(nS(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return sp(e);return!1},oS=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var o=t.children.item(r);if(o.tagName==="LEGEND")return mo.call(t,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}t=t.parentElement}return!1},Xa=function(e,t){return!(t.disabled||Ya(t)||Y1(t)||rS(t,e)||X1(t)||oS(t))},cu=function(e,t){return!(tS(t)||_g(t)<0||!Xa(e,t))},iS=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},sS=function n(e){var t=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,l=s?o.scopeParent:o,a=q1(l,s),c=s?n(o.candidates):l;a===0?s?t.push.apply(t,c):t.push(l):r.push({documentOrder:i,tabIndex:a,item:o,isScope:s,content:c})}),r.sort(J1).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(t)},lS=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Pg([e],t.includeContainer,{filter:cu.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:iS}):r=Eg(e,t.includeContainer,cu.bind(null,t)),sS(r)},aS=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Pg([e],t.includeContainer,{filter:Xa.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=Eg(e,t.includeContainer,Xa.bind(null,t)),r},Uc=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return mo.call(e,qa)===!1?!1:cu(t,e)},cS=Tg.concat("iframe").join(","),dS=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return mo.call(e,cS)===!1?!1:Xa(t,e)};const uS=new Tf("focusScope.autoFocusOnMount",{bubbles:!1,cancelable:!0}),fS=new Tf("focusScope.autoFocusOnDestroy",{bubbles:!1,cancelable:!0}),Dg=new vn("FocusScope");function hS({id:n,loop:e,enabled:t,onOpenAutoFocus:r,onCloseAutoFocus:o,forceMount:i}){const s=K1(),l=j1(),a=N(null),c=Dg.getOr({ignoreCloseAutoFocus:!1});let d=null;it({id:n,ref:a,deps:()=>t.current});function u(x){if(!(l.paused||!a.current||l.isHandlingFocus)){l.isHandlingFocus=!0;try{const b=x.target;if(!fr(b))return;const w=a.current.contains(b);if(x.type==="focusin")if(w)d=b;else{if(c.ignoreCloseAutoFocus)return;xr(d,{select:!0})}else x.type==="focusout"&&!w&&!c.ignoreCloseAutoFocus&&xr(d,{select:!0})}finally{l.isHandlingFocus=!1}}}function f(x){var w;!((w=a.current)==null?void 0:w.contains(d))&&a.current&&xr(a.current)}Ze([()=>a.current,()=>t.current],([x,b])=>{if(!x||!b)return;const w=lr(lt(document,"focusin",u),lt(document,"focusout",u)),M=new MutationObserver(f);return M.observe(x,{childList:!0,subtree:!0}),()=>{w(),M.disconnect()}}),Ze([()=>i.current,()=>a.current],([x,b])=>{if(x)return;const w=document.activeElement;return h(b,w),()=>{b&&p(w)}}),Ze([()=>i.current,()=>a.current,()=>t.current],([x,b])=>{if(!x)return;const w=document.activeElement;return h(b,w),()=>{b&&p(w)}});function h(x,b){if(x||(x=document.getElementById(n.current)),!x||!t.current)return;if(s.add(l),!x.contains(b)){const M=uS.createEvent();r.current(M),M.defaultPrevented||It(()=>{x&&(Cg($1(Og(x)),{select:!0}),document.activeElement===b&&xr(x))})}}function p(x){const b=fS.createEvent();o.current(b);const w=c.ignoreCloseAutoFocus;ql(0,()=>{!b.defaultPrevented&&x&&!w&&xr(Uc(x)?x:document.body,{select:!0}),s.remove(l)})}function g(x){if(!t.current||!e.current&&!t.current||l.paused)return;const b=x.key===yg&&!x.ctrlKey&&!x.altKey&&!x.metaKey,w=document.activeElement;if(!(b&&w))return;const M=a.current;if(!M)return;const[k,S]=G1(M);k&&S?!x.shiftKey&&w===S?(x.preventDefault(),e.current&&xr(k,{select:!0})):x.shiftKey&&w===k&&(x.preventDefault(),e.current&&xr(S,{select:!0})):w===M&&x.preventDefault()}const v=L(()=>({id:n.current,tabindex:-1,onkeydown:g}));return{get props(){return m(v)}}}function Rg(n,e){J(e,!0);let t=y(e,"trapFocus",3,!1),r=y(e,"loop",3,!1),o=y(e,"onCloseAutoFocus",3,et),i=y(e,"onOpenAutoFocus",3,et),s=y(e,"forceMount",3,!1);const l=hS({enabled:N.with(()=>t()),loop:N.with(()=>r()),onCloseAutoFocus:N.with(()=>o()),onOpenAutoFocus:N.with(()=>i()),id:N.with(()=>e.id),forceMount:N.with(()=>s())});var a=F(),c=E(a);ae(c,()=>e.focusScope??De,()=>({props:l.props})),C(n,a),Y()}globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);var Qo,_s,_c,zg,Ic,Is;class pS{constructor(e){V(this,_c);re(this,"opts");V(this,Qo,et);V(this,_s,N(null));V(this,Ic,e=>{const t=O(this,_s).current,r=e.target;!fr(t)||!fr(r)||!this.opts.enabled.current||!yS(this)||!Af(t,r)||(this.opts.onPointerDown.current(e),!e.defaultPrevented&&ct(this,Qo,gS(t)))});V(this,Is,()=>{O(this,Qo).call(this),ct(this,Qo,et)});this.opts=e,it({id:e.id,ref:O(this,_s),deps:()=>this.opts.enabled.current});let t=et;Ze(()=>this.opts.enabled.current,r=>(r&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=Ne(this,_c,zg).call(this)),()=>{t(),O(this,Is).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}}Qo=new WeakMap,_s=new WeakMap,_c=new WeakSet,zg=function(){return lr(lt(document,"pointerdown",O(this,Ic)),lt(document,"pointerup",ug(O(this,Is),this.opts.onPointerUp.current)))},Ic=new WeakMap,Is=new WeakMap;function mS(n){return new pS(n)}const lp=n=>n.style.userSelect||n.style.webkitUserSelect;function gS(n){const e=document.body,t=lp(e),r=lp(n);return da(e,"none"),da(n,"text"),()=>{da(e,t),da(n,r)}}function da(n,e){n.style.userSelect=e,n.style.webkitUserSelect=e}function yS(n){const e=[...globalThis.bitsTextSelectionLayers];if(!e.length)return!1;const t=e.at(-1);return t?t[0]===n:!1}function Lg(n,e){J(e,!0);let t=y(e,"preventOverflowTextSelection",3,!0),r=y(e,"onPointerDown",3,et),o=y(e,"onPointerUp",3,et);mS({id:N.with(()=>e.id),preventOverflowTextSelection:N.with(()=>t()),onPointerDown:N.with(()=>r()),onPointerUp:N.with(()=>o()),enabled:N.with(()=>e.enabled)});var i=F(),s=E(i);ae(s,()=>e.children??De),C(n,i),Y()}function vS(n){let e=0,t=de(void 0),r;function o(){e-=1,r&&e<=0&&(r(),_(t,void 0),r=void 0)}return(...i)=>(e+=1,m(t)===void 0&&(r=lg(()=>{_(t,n(...i),!0)})),nt(()=>()=>{o()}),m(t))}const bS=vS(()=>{const n=new au,e=L(()=>{for(const i of n.values())if(i)return!0;return!1});let t=de(null),r=null;function o(){$c&&(document.body.setAttribute("style",m(t)??""),document.body.style.removeProperty("--scrollbar-width"),tp&&(r==null||r()))}return nt(()=>{const i=m(e);return dr(()=>{if(!i)return;_(t,document.body.getAttribute("style"),!0);const s=getComputedStyle(document.body),l=window.innerWidth-document.documentElement.clientWidth,c={padding:Number.parseInt(s.paddingRight??"0",10)+l,margin:Number.parseInt(s.marginRight??"0",10)};l>0&&(document.body.style.paddingRight=`${c.padding}px`,document.body.style.marginRight=`${c.margin}px`,document.body.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),tp&&(r=vg(document,"touchmove",d=>{d.target===document.documentElement&&(d.touches.length>1||d.preventDefault())},{passive:!1})),It(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})})}),nt(()=>()=>{r==null||r()}),{get map(){return n},resetBodyStyle:o}});function wS(n,e=()=>null){const t=ft(),r=bS();if(!r)return;const o=L(e);r.map.set(t,n??!1);const i=N.with(()=>r.map.get(t)??!1,s=>r.map.set(t,s));return nt(()=>()=>{r.map.delete(t),!xS(r.map)&&(m(o)===null?requestAnimationFrame(()=>r.resetBodyStyle()):ql(m(o),()=>r.resetBodyStyle()))}),i}function xS(n){for(const[e,t]of n)if(t)return!0;return!1}function Za(n,e){J(e,!0);let t=y(e,"preventScroll",3,!0),r=y(e,"restoreScrollDelay",3,null);wS(t(),()=>r()),Y()}function SS({forceMount:n,present:e,trapFocus:t,open:r}){return n?r&&t:e&&t&&r}var kS=G("<div><!></div>");function Fg(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"forceMount",3,!1),o=y(e,"ref",15,null),i=Te(e,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const s=P1({id:N.with(()=>t()),ref:N.with(()=>o(),c=>o(c))}),l=L(()=>Ye(i,s.props)),a=L(()=>s.root.opts.open.current||r());Of(n,{get id(){return t()},get present(){return m(a)},presence:d=>{var u=F(),f=E(u);{var h=g=>{var v=F(),x=E(v),b=Ie(()=>({props:Ye(m(l)),...s.snippetProps}));ae(x,()=>e.child,()=>m(b)),C(g,v)},p=g=>{var v=kS();let x;var b=be(v);ae(b,()=>e.children??De,()=>s.snippetProps),ge(v),Oe(w=>x=Ve(v,x,{...w}),[()=>Ye(m(l))]),C(g,v)};Ee(f,g=>{e.child?g(h):g(p,!1)})}C(d,u)},$$slots:{presence:!0}}),Y()}var MS=G("<button><!></button>");function CS(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"disabled",3,!1),i=Te(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const s=A1({id:N.with(()=>t()),ref:N.with(()=>r(),f=>r(f)),disabled:N.with(()=>!!o())}),l=L(()=>Ye(i,s.props));var a=F(),c=E(a);{var d=f=>{var h=F(),p=E(h);ae(p,()=>e.child,()=>({props:m(l)})),C(f,h)},u=f=>{var h=MS();let p;var g=be(h);ae(g,()=>e.children??De),ge(h),Oe(()=>p=Ve(h,p,{...m(l)})),C(f,h)};Ee(c,f=>{e.child?f(d):f(u,!1)})}C(n,a),Y()}const OS="data-avatar-root",TS="data-avatar-image";var Ds;class AS{constructor(e){re(this,"opts");V(this,Ds,L(()=>({id:this.opts.id.current,[OS]:"","data-status":this.opts.loadingStatus.current})));this.opts=e,this.loadImage=this.loadImage.bind(this),it(e)}loadImage(e,t,r){if(this.opts.loadingStatus.current==="loaded")return;let o;const i=new Image;return i.src=e,t!==void 0&&(i.crossOrigin=t),r&&(i.referrerPolicy=r),this.opts.loadingStatus.current="loading",i.onload=()=>{o=window.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},i.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{window.clearTimeout(o)}}get props(){return m(O(this,Ds))}set props(e){_(O(this,Ds),e)}}Ds=new WeakMap;var Rs;class ES{constructor(e,t){re(this,"opts");re(this,"root");V(this,Rs,L(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[TS]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current})));this.opts=e,this.root=t,it(e),pf(()=>{if(!this.opts.src.current){this.root.opts.loadingStatus.current="error";return}this.opts.crossOrigin.current,dr(()=>this.root.loadImage(this.opts.src.current??"",this.opts.crossOrigin.current,this.opts.referrerPolicy.current))})}get props(){return m(O(this,Rs))}set props(e){_(O(this,Rs),e)}}Rs=new WeakMap;const Bg=new vn("Avatar.Root");function PS(n){return Bg.set(new AS(n))}function NS(n){return new ES(n,Bg.get())}var _S=G("<div><!></div>");function IS(n,e){J(e,!0);let t=y(e,"delayMs",3,0),r=y(e,"loadingStatus",15,"loading"),o=y(e,"id",19,ft),i=y(e,"ref",15,null),s=Te(e,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const l=PS({delayMs:N.with(()=>t()),loadingStatus:N.with(()=>r(),h=>{var p;r()!==h&&(r(h),(p=e.onLoadingStatusChange)==null||p.call(e,h))}),id:N.with(()=>o()),ref:N.with(()=>i(),h=>i(h))}),a=L(()=>Ye(s,l.props));var c=F(),d=E(c);{var u=h=>{var p=F(),g=E(p);ae(g,()=>e.child,()=>({props:m(a)})),C(h,p)},f=h=>{var p=_S();let g;var v=be(p);ae(v,()=>e.children??De),ge(p),Oe(()=>g=Ve(p,g,{...m(a)})),C(h,p)};Ee(d,h=>{e.child?h(u):h(f,!1)})}C(n,c),Y()}var DS=G("<img>");function RS(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"crossorigin",3,void 0),i=y(e,"referrerpolicy",3,void 0),s=Te(e,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const l=NS({src:N.with(()=>e.src),id:N.with(()=>t()),ref:N.with(()=>r(),h=>r(h)),crossOrigin:N.with(()=>o()),referrerPolicy:N.with(()=>i())}),a=L(()=>Ye(s,l.props));var c=F(),d=E(c);{var u=h=>{var p=F(),g=E(p);ae(g,()=>e.child,()=>({props:m(a)})),C(h,p)},f=h=>{var p=DS();let g;Oe(()=>g=Ve(p,g,{...m(a),src:e.src})),ww(p),C(h,p)};Ee(d,h=>{e.child?h(u):h(f,!1)})}C(n,c),Y()}function Vg(n,e,t){const r=e.toLowerCase();if(r.endsWith(" ")){const u=r.slice(0,-1);if(n.filter(g=>g.toLowerCase().startsWith(u)).length<=1)return Vg(n,u,t);const h=t==null?void 0:t.toLowerCase();if(h&&h.startsWith(u)&&h.charAt(u.length)===" "&&e.trim()===u)return t;const p=n.filter(g=>g.toLowerCase().startsWith(r));if(p.length>0){const g=t?n.indexOf(t):-1;return ap(p,Math.max(g,0)).find(b=>b!==t)||t}}const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=i.toLowerCase(),l=t?n.indexOf(t):-1;let a=ap(n,Math.max(l,0));i.length===1&&(a=a.filter(u=>u!==t));const d=a.find(u=>u==null?void 0:u.toLowerCase().startsWith(s));return d!==t?d:void 0}function ap(n,e){return n.map((t,r)=>n[(e+r)%n.length])}const zS=["top","right","bottom","left"],Vr=Math.min,hn=Math.max,Qa=Math.round,ua=Math.floor,Vn=n=>({x:n,y:n}),LS={left:"right",right:"left",bottom:"top",top:"bottom"},FS={start:"end",end:"start"};function du(n,e,t){return hn(n,Vr(e,t))}function hr(n,e){return typeof n=="function"?n(e):n}function pr(n){return n.split("-")[0]}function mi(n){return n.split("-")[1]}function Ef(n){return n==="x"?"y":"x"}function Pf(n){return n==="y"?"height":"width"}function Hr(n){return["top","bottom"].includes(pr(n))?"y":"x"}function Nf(n){return Ef(Hr(n))}function BS(n,e,t){t===void 0&&(t=!1);const r=mi(n),o=Nf(n),i=Pf(o);let s=o==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=ec(s)),[s,ec(s)]}function VS(n){const e=ec(n);return[uu(n),e,uu(e)]}function uu(n){return n.replace(/start|end/g,e=>FS[e])}function HS(n,e,t){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(n){case"top":case"bottom":return t?e?o:r:e?r:o;case"left":case"right":return e?i:s;default:return[]}}function WS(n,e,t,r){const o=mi(n);let i=HS(pr(n),t==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(uu)))),i}function ec(n){return n.replace(/left|right|bottom|top/g,e=>LS[e])}function KS(n){return{top:0,right:0,bottom:0,left:0,...n}}function Hg(n){return typeof n!="number"?KS(n):{top:n,right:n,bottom:n,left:n}}function tc(n){const{x:e,y:t,width:r,height:o}=n;return{width:r,height:o,top:t,left:e,right:e+r,bottom:t+o,x:e,y:t}}function cp(n,e,t){let{reference:r,floating:o}=n;const i=Hr(e),s=Nf(e),l=Pf(s),a=pr(e),c=i==="y",d=r.x+r.width/2-o.width/2,u=r.y+r.height/2-o.height/2,f=r[l]/2-o[l]/2;let h;switch(a){case"top":h={x:d,y:r.y-o.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:u};break;case"left":h={x:r.x-o.width,y:u};break;default:h={x:r.x,y:r.y}}switch(mi(e)){case"start":h[s]-=f*(t&&c?-1:1);break;case"end":h[s]+=f*(t&&c?-1:1);break}return h}const jS=async(n,e,t)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=t,l=i.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:n,floating:e,strategy:o}),{x:d,y:u}=cp(c,r,a),f=r,h={},p=0;for(let g=0;g<l.length;g++){const{name:v,fn:x}=l[g],{x:b,y:w,data:M,reset:k}=await x({x:d,y:u,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:c,platform:s,elements:{reference:n,floating:e}});d=b??d,u=w??u,h={...h,[v]:{...h[v],...M}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:o}):k.rects),{x:d,y:u}=cp(c,f,a)),g=-1)}return{x:d,y:u,placement:f,strategy:o,middlewareData:h}};async function Ji(n,e){var t;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:l,strategy:a}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:f=!1,padding:h=0}=hr(e,n),p=Hg(h),v=l[f?u==="floating"?"reference":"floating":u],x=tc(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(v)))==null||t?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:a})),b=u==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),M=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=tc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:a}):b);return{top:(x.top-k.top+p.top)/M.y,bottom:(k.bottom-x.bottom+p.bottom)/M.y,left:(x.left-k.left+p.left)/M.x,right:(k.right-x.right+p.right)/M.x}}const $S=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:o,rects:i,platform:s,elements:l,middlewareData:a}=e,{element:c,padding:d=0}=hr(n,e)||{};if(c==null)return{};const u=Hg(d),f={x:t,y:r},h=Nf(o),p=Pf(h),g=await s.getDimensions(c),v=h==="y",x=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",M=i.reference[p]+i.reference[h]-f[h]-i.floating[p],k=f[h]-i.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let A=S?S[w]:0;(!A||!await(s.isElement==null?void 0:s.isElement(S)))&&(A=l.floating[w]||i.floating[p]);const T=M/2-k/2,P=A/2-g[p]/2-1,z=Vr(u[x],P),W=Vr(u[b],P),R=z,B=A-g[p]-W,I=A/2-g[p]/2+T,j=du(R,I,B),H=!a.arrow&&mi(o)!=null&&I!==j&&i.reference[p]/2-(I<R?z:W)-g[p]/2<0,$=H?I<R?I-R:I-B:0;return{[h]:f[h]+$,data:{[h]:j,centerOffset:I-j-$,...H&&{alignmentOffset:$}},reset:H}}}),GS=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...v}=hr(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const x=pr(o),b=Hr(l),w=pr(l)===l,M=await(a.isRTL==null?void 0:a.isRTL(c.floating)),k=f||(w||!g?[ec(l)]:VS(l)),S=p!=="none";!f&&S&&k.push(...WS(l,g,p,M));const A=[l,...k],T=await Ji(e,v),P=[];let z=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(T[x]),u){const I=BS(o,s,M);P.push(T[I[0]],T[I[1]])}if(z=[...z,{placement:o,overflows:P}],!P.every(I=>I<=0)){var W,R;const I=(((W=i.flip)==null?void 0:W.index)||0)+1,j=A[I];if(j)return{data:{index:I,overflows:z},reset:{placement:j}};let H=(R=z.filter($=>$.overflows[0]<=0).sort(($,D)=>$.overflows[1]-D.overflows[1])[0])==null?void 0:R.placement;if(!H)switch(h){case"bestFit":{var B;const $=(B=z.filter(D=>{if(S){const q=Hr(D.placement);return q===b||q==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(q=>q>0).reduce((q,U)=>q+U,0)]).sort((D,q)=>D[1]-q[1])[0])==null?void 0:B[0];$&&(H=$);break}case"initialPlacement":H=l;break}if(o!==H)return{reset:{placement:H}}}return{}}}};function dp(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function up(n){return zS.some(e=>n[e]>=0)}const US=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...o}=hr(n,e);switch(r){case"referenceHidden":{const i=await Ji(e,{...o,elementContext:"reference"}),s=dp(i,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:up(s)}}}case"escaped":{const i=await Ji(e,{...o,altBoundary:!0}),s=dp(i,t.floating);return{data:{escapedOffsets:s,escaped:up(s)}}}default:return{}}}}};async function qS(n,e){const{placement:t,platform:r,elements:o}=n,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=pr(t),l=mi(t),a=Hr(t)==="y",c=["left","top"].includes(s)?-1:1,d=i&&a?-1:1,u=hr(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof p=="number"&&(h=l==="end"?p*-1:p),a?{x:h*d,y:f*c}:{x:f*c,y:h*d}}const JS=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:o,y:i,placement:s,middlewareData:l}=e,a=await qS(e,n);return s===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:o+a.x,y:i+a.y,data:{...a,placement:s}}}}},YS=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:l={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...a}=hr(n,e),c={x:t,y:r},d=await Ji(e,a),u=Hr(pr(o)),f=Ef(u);let h=c[f],p=c[u];if(i){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=h+d[v],w=h-d[x];h=du(b,h,w)}if(s){const v=u==="y"?"top":"left",x=u==="y"?"bottom":"right",b=p+d[v],w=p-d[x];p=du(b,p,w)}const g=l.fn({...e,[f]:h,[u]:p});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[f]:i,[u]:s}}}}}},XS=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:l=0,mainAxis:a=!0,crossAxis:c=!0}=hr(n,e),d={x:t,y:r},u=Hr(o),f=Ef(u);let h=d[f],p=d[u];const g=hr(l,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(a){const w=f==="y"?"height":"width",M=i.reference[f]-i.floating[w]+v.mainAxis,k=i.reference[f]+i.reference[w]-v.mainAxis;h<M?h=M:h>k&&(h=k)}if(c){var x,b;const w=f==="y"?"width":"height",M=["top","left"].includes(pr(o)),k=i.reference[u]-i.floating[w]+(M&&((x=s.offset)==null?void 0:x[u])||0)+(M?0:v.crossAxis),S=i.reference[u]+i.reference[w]+(M?0:((b=s.offset)==null?void 0:b[u])||0)-(M?v.crossAxis:0);p<k?p=k:p>S&&(p=S)}return{[f]:h,[u]:p}}}},ZS=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:o,rects:i,platform:s,elements:l}=e,{apply:a=()=>{},...c}=hr(n,e),d=await Ji(e,c),u=pr(o),f=mi(o),h=Hr(o)==="y",{width:p,height:g}=i.floating;let v,x;u==="top"||u==="bottom"?(v=u,x=f===(await(s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(x=u,v=f==="end"?"top":"bottom");const b=g-d.top-d.bottom,w=p-d.left-d.right,M=Vr(g-d[v],b),k=Vr(p-d[x],w),S=!e.middlewareData.shift;let A=M,T=k;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(T=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=b),S&&!f){const z=hn(d.left,0),W=hn(d.right,0),R=hn(d.top,0),B=hn(d.bottom,0);h?T=p-2*(z!==0||W!==0?z+W:hn(d.left,d.right)):A=g-2*(R!==0||B!==0?R+B:hn(d.top,d.bottom))}await a({...e,availableWidth:T,availableHeight:A});const P=await s.getDimensions(l.floating);return p!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function qc(){return typeof window<"u"}function gi(n){return Wg(n)?(n.nodeName||"").toLowerCase():"#document"}function mn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Gn(n){var e;return(e=(Wg(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Wg(n){return qc()?n instanceof Node||n instanceof mn(n).Node:!1}function Pn(n){return qc()?n instanceof Element||n instanceof mn(n).Element:!1}function Wn(n){return qc()?n instanceof HTMLElement||n instanceof mn(n).HTMLElement:!1}function fp(n){return!qc()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof mn(n).ShadowRoot}function Zl(n){const{overflow:e,overflowX:t,overflowY:r,display:o}=Nn(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(o)}function QS(n){return["table","td","th"].includes(gi(n))}function Jc(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function _f(n){const e=If(),t=Pn(n)?Nn(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function ek(n){let e=Wr(n);for(;Wn(e)&&!si(e);){if(_f(e))return e;if(Jc(e))return null;e=Wr(e)}return null}function If(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function si(n){return["html","body","#document"].includes(gi(n))}function Nn(n){return mn(n).getComputedStyle(n)}function Yc(n){return Pn(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Wr(n){if(gi(n)==="html")return n;const e=n.assignedSlot||n.parentNode||fp(n)&&n.host||Gn(n);return fp(e)?e.host:e}function Kg(n){const e=Wr(n);return si(e)?n.ownerDocument?n.ownerDocument.body:n.body:Wn(e)&&Zl(e)?e:Kg(e)}function Yi(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const o=Kg(n),i=o===((r=n.ownerDocument)==null?void 0:r.body),s=mn(o);if(i){const l=fu(s);return e.concat(s,s.visualViewport||[],Zl(o)?o:[],l&&t?Yi(l):[])}return e.concat(o,Yi(o,[],t))}function fu(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function jg(n){const e=Nn(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Wn(n),i=o?n.offsetWidth:t,s=o?n.offsetHeight:r,l=Qa(t)!==i||Qa(r)!==s;return l&&(t=i,r=s),{width:t,height:r,$:l}}function Df(n){return Pn(n)?n:n.contextElement}function Ko(n){const e=Df(n);if(!Wn(e))return Vn(1);const t=e.getBoundingClientRect(),{width:r,height:o,$:i}=jg(e);let s=(i?Qa(t.width):t.width)/r,l=(i?Qa(t.height):t.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const tk=Vn(0);function $g(n){const e=mn(n);return!If()||!e.visualViewport?tk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function nk(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==mn(n)?!1:e}function go(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect(),i=Df(n);let s=Vn(1);e&&(r?Pn(r)&&(s=Ko(r)):s=Ko(n));const l=nk(i,t,r)?$g(i):Vn(0);let a=(o.left+l.x)/s.x,c=(o.top+l.y)/s.y,d=o.width/s.x,u=o.height/s.y;if(i){const f=mn(i),h=r&&Pn(r)?mn(r):r;let p=f,g=fu(p);for(;g&&r&&h!==p;){const v=Ko(g),x=g.getBoundingClientRect(),b=Nn(g),w=x.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,M=x.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;a*=v.x,c*=v.y,d*=v.x,u*=v.y,a+=w,c+=M,p=mn(g),g=fu(p)}}return tc({width:d,height:u,x:a,y:c})}function Rf(n,e){const t=Yc(n).scrollLeft;return e?e.left+t:go(Gn(n)).left+t}function Gg(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),o=r.left+e.scrollLeft-(t?0:Rf(n,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function rk(n){let{elements:e,rect:t,offsetParent:r,strategy:o}=n;const i=o==="fixed",s=Gn(r),l=e?Jc(e.floating):!1;if(r===s||l&&i)return t;let a={scrollLeft:0,scrollTop:0},c=Vn(1);const d=Vn(0),u=Wn(r);if((u||!u&&!i)&&((gi(r)!=="body"||Zl(s))&&(a=Yc(r)),Wn(r))){const h=go(r);c=Ko(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const f=s&&!u&&!i?Gg(s,a,!0):Vn(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-a.scrollLeft*c.x+d.x+f.x,y:t.y*c.y-a.scrollTop*c.y+d.y+f.y}}function ok(n){return Array.from(n.getClientRects())}function ik(n){const e=Gn(n),t=Yc(n),r=n.ownerDocument.body,o=hn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=hn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+Rf(n);const l=-t.scrollTop;return Nn(r).direction==="rtl"&&(s+=hn(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:l}}function sk(n,e){const t=mn(n),r=Gn(n),o=t.visualViewport;let i=r.clientWidth,s=r.clientHeight,l=0,a=0;if(o){i=o.width,s=o.height;const c=If();(!c||c&&e==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:i,height:s,x:l,y:a}}function lk(n,e){const t=go(n,!0,e==="fixed"),r=t.top+n.clientTop,o=t.left+n.clientLeft,i=Wn(n)?Ko(n):Vn(1),s=n.clientWidth*i.x,l=n.clientHeight*i.y,a=o*i.x,c=r*i.y;return{width:s,height:l,x:a,y:c}}function hp(n,e,t){let r;if(e==="viewport")r=sk(n,t);else if(e==="document")r=ik(Gn(n));else if(Pn(e))r=lk(e,t);else{const o=$g(n);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return tc(r)}function Ug(n,e){const t=Wr(n);return t===e||!Pn(t)||si(t)?!1:Nn(t).position==="fixed"||Ug(t,e)}function ak(n,e){const t=e.get(n);if(t)return t;let r=Yi(n,[],!1).filter(l=>Pn(l)&&gi(l)!=="body"),o=null;const i=Nn(n).position==="fixed";let s=i?Wr(n):n;for(;Pn(s)&&!si(s);){const l=Nn(s),a=_f(s);!a&&l.position==="fixed"&&(o=null),(i?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Zl(s)&&!a&&Ug(n,s))?r=r.filter(d=>d!==s):o=l,s=Wr(s)}return e.set(n,r),r}function ck(n){let{element:e,boundary:t,rootBoundary:r,strategy:o}=n;const s=[...t==="clippingAncestors"?Jc(e)?[]:ak(e,this._c):[].concat(t),r],l=s[0],a=s.reduce((c,d)=>{const u=hp(e,d,o);return c.top=hn(u.top,c.top),c.right=Vr(u.right,c.right),c.bottom=Vr(u.bottom,c.bottom),c.left=hn(u.left,c.left),c},hp(e,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function dk(n){const{width:e,height:t}=jg(n);return{width:e,height:t}}function uk(n,e,t){const r=Wn(e),o=Gn(e),i=t==="fixed",s=go(n,!0,i,e);let l={scrollLeft:0,scrollTop:0};const a=Vn(0);if(r||!r&&!i)if((gi(e)!=="body"||Zl(o))&&(l=Yc(e)),r){const f=go(e,!0,i,e);a.x=f.x+e.clientLeft,a.y=f.y+e.clientTop}else o&&(a.x=Rf(o));const c=o&&!r&&!i?Gg(o,l):Vn(0),d=s.left+l.scrollLeft-a.x-c.x,u=s.top+l.scrollTop-a.y-c.y;return{x:d,y:u,width:s.width,height:s.height}}function wd(n){return Nn(n).position==="static"}function pp(n,e){if(!Wn(n)||Nn(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Gn(n)===t&&(t=t.ownerDocument.body),t}function qg(n,e){const t=mn(n);if(Jc(n))return t;if(!Wn(n)){let o=Wr(n);for(;o&&!si(o);){if(Pn(o)&&!wd(o))return o;o=Wr(o)}return t}let r=pp(n,e);for(;r&&QS(r)&&wd(r);)r=pp(r,e);return r&&si(r)&&wd(r)&&!_f(r)?t:r||ek(n)||t}const fk=async function(n){const e=this.getOffsetParent||qg,t=this.getDimensions,r=await t(n.floating);return{reference:uk(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hk(n){return Nn(n).direction==="rtl"}const pk={convertOffsetParentRelativeRectToViewportRelativeRect:rk,getDocumentElement:Gn,getClippingRect:ck,getOffsetParent:qg,getElementRects:fk,getClientRects:ok,getDimensions:dk,getScale:Ko,isElement:Pn,isRTL:hk};function Jg(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function mk(n,e){let t=null,r;const o=Gn(n);function i(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),i();const c=n.getBoundingClientRect(),{left:d,top:u,width:f,height:h}=c;if(l||e(),!f||!h)return;const p=ua(u),g=ua(o.clientWidth-(d+f)),v=ua(o.clientHeight-(u+h)),x=ua(d),w={rootMargin:-p+"px "+-g+"px "+-v+"px "+-x+"px",threshold:hn(0,Vr(1,a))||1};let M=!0;function k(S){const A=S[0].intersectionRatio;if(A!==a){if(!M)return s();A?s(!1,A):r=setTimeout(()=>{s(!1,1e-7)},1e3)}A===1&&!Jg(c,n.getBoundingClientRect())&&s(),M=!1}try{t=new IntersectionObserver(k,{...w,root:o.ownerDocument})}catch{t=new IntersectionObserver(k,w)}t.observe(n)}return s(!0),i}function gk(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,c=Df(n),d=o||i?[...c?Yi(c):[],...Yi(e)]:[];d.forEach(x=>{o&&x.addEventListener("scroll",t,{passive:!0}),i&&x.addEventListener("resize",t)});const u=c&&l?mk(c,t):null;let f=-1,h=null;s&&(h=new ResizeObserver(x=>{let[b]=x;b&&b.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),t()}),c&&!a&&h.observe(c),h.observe(e));let p,g=a?go(n):null;a&&v();function v(){const x=go(n);g&&!Jg(g,x)&&t(),g=x,p=requestAnimationFrame(v)}return t(),()=>{var x;d.forEach(b=>{o&&b.removeEventListener("scroll",t),i&&b.removeEventListener("resize",t)}),u==null||u(),(x=h)==null||x.disconnect(),h=null,a&&cancelAnimationFrame(p)}}const yk=JS,vk=YS,bk=GS,wk=ZS,xk=US,Sk=$S,kk=XS,Mk=(n,e,t)=>{const r=new Map,o={platform:pk,...t},i={...o.platform,_c:r};return jS(n,e,{...o,platform:i})};function Oi(n){return typeof n=="function"?n():n}function Yg(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function mp(n,e){const t=Yg(n);return Math.round(e*t)/t}function nc(n){return{[`--bits-${n}-content-transform-origin`]:"var(--bits-floating-transform-origin)",[`--bits-${n}-content-available-width`]:"var(--bits-floating-available-width)",[`--bits-${n}-content-available-height`]:"var(--bits-floating-available-height)",[`--bits-${n}-anchor-width`]:"var(--bits-floating-anchor-width)",[`--bits-${n}-anchor-height`]:"var(--bits-floating-anchor-height)"}}function Ck(n){const e=n.whileElementsMounted,t=L(()=>Oi(n.open)??!0),r=L(()=>Oi(n.middleware)),o=L(()=>Oi(n.transform)??!0),i=L(()=>Oi(n.placement)??"bottom"),s=L(()=>Oi(n.strategy)??"absolute"),l=n.reference;let a=de(0),c=de(0);const d=N(null);let u=de(Ft(m(s))),f=de(Ft(m(i))),h=de(Ft({})),p=de(!1);const g=L(()=>{const k={position:m(u),left:"0",top:"0"};if(!d.current)return k;const S=mp(d.current,m(a)),A=mp(d.current,m(c));return m(o)?{...k,transform:`translate(${S}px, ${A}px)`,...Yg(d.current)>=1.5&&{willChange:"transform"}}:{position:m(u),left:`${S}px`,top:`${A}px`}});let v;function x(){l.current===null||d.current===null||Mk(l.current,d.current,{middleware:m(r),placement:m(i),strategy:m(s)}).then(k=>{_(a,k.x,!0),_(c,k.y,!0),_(u,k.strategy,!0),_(f,k.placement,!0),_(h,k.middlewareData,!0),_(p,!0)})}function b(){typeof v=="function"&&(v(),v=void 0)}function w(){if(b(),e===void 0){x();return}l.current===null||d.current===null||(v=e(l.current,d.current,x))}function M(){m(t)||_(p,!1)}return nt(x),nt(w),nt(M),nt(()=>b),{floating:d,reference:l,get strategy(){return m(u)},get placement(){return m(f)},get middlewareData(){return m(h)},get isPositioned(){return m(p)},get floatingStyles(){return m(g)},get update(){return x}}}const Ok={top:"bottom",right:"left",bottom:"top",left:"right"};class Tk{constructor(){re(this,"anchorNode",N(null));re(this,"customAnchorNode",N(null));re(this,"triggerNode",N(null));nt(()=>{this.customAnchorNode.current?typeof this.customAnchorNode.current=="string"?this.anchorNode.current=document.querySelector(this.customAnchorNode.current):this.anchorNode.current=this.customAnchorNode.current:this.anchorNode.current=this.triggerNode.current})}}var zs,Dc,Ls,Rc,Fs,zc,Bs,Vs,Hs,Ws,Ks,js,$s,Gs,Us,qs,Js,Ys,Xs,Zs,Qs,el,tl,nl;class Ak{constructor(e,t){re(this,"opts");re(this,"root");re(this,"contentRef",N(null));re(this,"wrapperRef",N(null));re(this,"arrowRef",N(null));re(this,"arrowId",N(ft()));V(this,zs,L(()=>{if(typeof this.opts.style=="string")return Di(this.opts.style);if(!this.opts.style)return{}}));V(this,Dc);V(this,Ls,new Yx(()=>this.arrowRef.current??void 0));V(this,Rc,L(()=>{var e;return((e=O(this,Ls))==null?void 0:e.width)??0}));V(this,Fs,L(()=>{var e;return((e=O(this,Ls))==null?void 0:e.height)??0}));V(this,zc,L(()=>{var e;return((e=this.opts.side)==null?void 0:e.current)+(this.opts.align.current!=="center"?`-${this.opts.align.current}`:"")}));V(this,Bs,L(()=>Array.isArray(this.opts.collisionBoundary.current)?this.opts.collisionBoundary.current:[this.opts.collisionBoundary.current]));V(this,Vs,L(()=>m(O(this,Bs)).length>0));V(this,Hs,L(()=>({padding:this.opts.collisionPadding.current,boundary:m(O(this,Bs)).filter(m1),altBoundary:this.hasExplicitBoundaries})));V(this,Ws,de(void 0));V(this,Ks,de(void 0));V(this,js,de(void 0));V(this,$s,de(void 0));V(this,Gs,L(()=>[yk({mainAxis:this.opts.sideOffset.current+m(O(this,Fs)),alignmentAxis:this.opts.alignOffset.current}),this.opts.avoidCollisions.current&&vk({mainAxis:!0,crossAxis:!1,limiter:this.opts.sticky.current==="partial"?kk():void 0,...this.detectOverflowOptions}),this.opts.avoidCollisions.current&&bk({...this.detectOverflowOptions}),wk({...this.detectOverflowOptions,apply:({rects:e,availableWidth:t,availableHeight:r})=>{const{width:o,height:i}=e.reference;_(O(this,Ws),t,!0),_(O(this,Ks),r,!0),_(O(this,js),o,!0),_(O(this,$s),i,!0)}}),this.arrowRef.current&&Sk({element:this.arrowRef.current,padding:this.opts.arrowPadding.current}),Dk({arrowWidth:m(O(this,Rc)),arrowHeight:m(O(this,Fs))}),this.opts.hideWhenDetached.current&&xk({strategy:"referenceHidden",...this.detectOverflowOptions})].filter(Boolean)));re(this,"floating");V(this,Us,L(()=>Rk(this.floating.placement)));V(this,qs,L(()=>zk(this.floating.placement)));V(this,Js,L(()=>{var e;return((e=this.floating.middlewareData.arrow)==null?void 0:e.x)??0}));V(this,Ys,L(()=>{var e;return((e=this.floating.middlewareData.arrow)==null?void 0:e.y)??0}));V(this,Xs,L(()=>{var e;return((e=this.floating.middlewareData.arrow)==null?void 0:e.centerOffset)!==0}));V(this,Zs,de());V(this,Qs,L(()=>Ok[this.placedSide]));V(this,el,L(()=>{var e,t,r;return{id:this.opts.wrapperId.current,"data-bits-floating-content-wrapper":"",style:{...this.floating.floatingStyles,transform:this.floating.isPositioned?this.floating.floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:this.contentZIndex,"--bits-floating-transform-origin":`${(e=this.floating.middlewareData.transformOrigin)==null?void 0:e.x} ${(t=this.floating.middlewareData.transformOrigin)==null?void 0:t.y}`,"--bits-floating-available-width":`${m(O(this,Ws))}px`,"--bits-floating-available-height":`${m(O(this,Ks))}px`,"--bits-floating-anchor-width":`${m(O(this,js))}px`,"--bits-floating-anchor-height":`${m(O(this,$s))}px`,...((r=this.floating.middlewareData.hide)==null?void 0:r.referenceHidden)&&{visibility:"hidden","pointer-events":"none"},...m(O(this,zs))},dir:this.opts.dir.current}}));V(this,tl,L(()=>({"data-side":this.placedSide,"data-align":this.placedAlign,style:bf({...m(O(this,zs))})})));V(this,nl,L(()=>({position:"absolute",left:this.arrowX?`${this.arrowX}px`:void 0,top:this.arrowY?`${this.arrowY}px`:void 0,[this.arrowBaseSide]:0,"transform-origin":{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[this.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[this.placedSide],visibility:this.cannotCenterArrow?"hidden":void 0})));this.opts=e,this.root=t,e.customAnchor&&(this.root.customAnchorNode.current=e.customAnchor.current),Ze(()=>e.customAnchor.current,r=>{this.root.customAnchorNode.current=r}),it({id:this.opts.wrapperId,ref:this.wrapperRef,deps:()=>this.opts.enabled.current}),it({id:this.opts.id,ref:this.contentRef,deps:()=>this.opts.enabled.current}),this.floating=Ck({strategy:()=>this.opts.strategy.current,placement:()=>m(O(this,zc)),middleware:()=>this.middleware,reference:this.root.anchorNode,whileElementsMounted:(...r)=>{var i;return gk(...r,{animationFrame:((i=O(this,Dc))==null?void 0:i.current)==="always"})},open:()=>this.opts.enabled.current}),nt(()=>{var r;this.floating.isPositioned&&((r=this.opts.onPlaced)==null||r.current())}),Ze(()=>this.contentRef.current,r=>{r&&(this.contentZIndex=window.getComputedStyle(r).zIndex)}),nt(()=>{this.floating.floating.current=this.wrapperRef.current})}get hasExplicitBoundaries(){return m(O(this,Vs))}set hasExplicitBoundaries(e){_(O(this,Vs),e)}get detectOverflowOptions(){return m(O(this,Hs))}set detectOverflowOptions(e){_(O(this,Hs),e)}get middleware(){return m(O(this,Gs))}set middleware(e){_(O(this,Gs),e)}get placedSide(){return m(O(this,Us))}set placedSide(e){_(O(this,Us),e)}get placedAlign(){return m(O(this,qs))}set placedAlign(e){_(O(this,qs),e)}get arrowX(){return m(O(this,Js))}set arrowX(e){_(O(this,Js),e)}get arrowY(){return m(O(this,Ys))}set arrowY(e){_(O(this,Ys),e)}get cannotCenterArrow(){return m(O(this,Xs))}set cannotCenterArrow(e){_(O(this,Xs),e)}get contentZIndex(){return m(O(this,Zs))}set contentZIndex(e){_(O(this,Zs),e,!0)}get arrowBaseSide(){return m(O(this,Qs))}set arrowBaseSide(e){_(O(this,Qs),e)}get wrapperProps(){return m(O(this,el))}set wrapperProps(e){_(O(this,el),e)}get props(){return m(O(this,tl))}set props(e){_(O(this,tl),e)}get arrowStyle(){return m(O(this,nl))}set arrowStyle(e){_(O(this,nl),e)}}zs=new WeakMap,Dc=new WeakMap,Ls=new WeakMap,Rc=new WeakMap,Fs=new WeakMap,zc=new WeakMap,Bs=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,Ws=new WeakMap,Ks=new WeakMap,js=new WeakMap,$s=new WeakMap,Gs=new WeakMap,Us=new WeakMap,qs=new WeakMap,Js=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Zs=new WeakMap,Qs=new WeakMap,el=new WeakMap,tl=new WeakMap,nl=new WeakMap;class Ek{constructor(e,t){re(this,"opts");re(this,"root");re(this,"ref",N(null));this.opts=e,this.root=t,e.virtualEl&&e.virtualEl.current?t.triggerNode=N.from(e.virtualEl.current):it({id:e.id,ref:this.ref,onRefChange:r=>{t.triggerNode.current=r}})}}const zf=new vn("Floating.Root"),Pk=new vn("Floating.Content");function Nk(){return zf.set(new Tk)}function _k(n){return Pk.set(new Ak(n,zf.get()))}function Ik(n){return new Ek(n,zf.get())}function Dk(n){return{name:"transformOrigin",options:n,fn(e){var v,x,b;const{placement:t,rects:r,middlewareData:o}=e,s=((v=o.arrow)==null?void 0:v.centerOffset)!==0,l=s?0:n.arrowWidth,a=s?0:n.arrowHeight,[c,d]=Lf(t),u={start:"0%",center:"50%",end:"100%"}[d],f=(((x=o.arrow)==null?void 0:x.x)??0)+l/2,h=(((b=o.arrow)==null?void 0:b.y)??0)+a/2;let p="",g="";return c==="bottom"?(p=s?u:`${f}px`,g=`${-a}px`):c==="top"?(p=s?u:`${f}px`,g=`${r.floating.height+a}px`):c==="right"?(p=`${-a}px`,g=s?u:`${h}px`):c==="left"&&(p=`${r.floating.width+a}px`,g=s?u:`${h}px`),{data:{x:p,y:g}}}}}function Lf(n){const[e,t="center"]=n.split("-");return[e,t]}function Rk(n){return Lf(n)[0]}function zk(n){return Lf(n)[1]}function Xg(n,e){J(e,!0),Nk();var t=F(),r=E(t);ae(r,()=>e.children??De),C(n,t),Y()}function Zg(n,e=1e4,t=et){let r=null,o=de(Ft(n));function i(){return window.setTimeout(()=>{_(o,n,!0),t(n)},e)}return nt(()=>()=>{r&&clearTimeout(r)}),N.with(()=>m(o),s=>{_(o,s,!0),t(s),r&&clearTimeout(r),r=i()})}function Lk(n){const e=Zg("",1e3),t=s=>s.focus(),r=()=>document.activeElement;function o(s,l){var h;if(!l.length)return;e.current=e.current+s;const a=r(),c=((h=l.find(p=>p===a))==null?void 0:h.textContent)??"",d=l.map(p=>p.textContent??""),u=Vg(d,e.current,c),f=l.find(p=>p.textContent===u);return f&&t(f),f}function i(){e.current=""}return{search:e,handleTypeaheadSearch:o,resetTypeahead:i}}function Qg(n,e){J(e,!0),Ik({id:N.with(()=>e.id),virtualEl:N.with(()=>e.virtualEl)});var t=F(),r=E(t);ae(r,()=>e.children??De),C(n,t),Y()}function Fk(n,e){J(e,!0);let t=y(e,"side",3,"bottom"),r=y(e,"sideOffset",3,0),o=y(e,"align",3,"center"),i=y(e,"alignOffset",3,0),s=y(e,"arrowPadding",3,0),l=y(e,"avoidCollisions",3,!0),a=y(e,"collisionBoundary",19,()=>[]),c=y(e,"collisionPadding",3,0),d=y(e,"hideWhenDetached",3,!1),u=y(e,"onPlaced",3,()=>{}),f=y(e,"sticky",3,"partial"),h=y(e,"updatePositionStrategy",3,"optimized"),p=y(e,"strategy",3,"fixed"),g=y(e,"dir",3,"ltr"),v=y(e,"style",19,()=>({})),x=y(e,"wrapperId",19,ft),b=y(e,"customAnchor",3,null);const w=_k({side:N.with(()=>t()),sideOffset:N.with(()=>r()),align:N.with(()=>o()),alignOffset:N.with(()=>i()),id:N.with(()=>e.id),arrowPadding:N.with(()=>s()),avoidCollisions:N.with(()=>l()),collisionBoundary:N.with(()=>a()),collisionPadding:N.with(()=>c()),hideWhenDetached:N.with(()=>d()),onPlaced:N.with(()=>u()),sticky:N.with(()=>f()),updatePositionStrategy:N.with(()=>h()),strategy:N.with(()=>p()),dir:N.with(()=>g()),style:N.with(()=>v()),enabled:N.with(()=>e.enabled),wrapperId:N.with(()=>x()),customAnchor:N.with(()=>b())}),M=L(()=>Ye(w.wrapperProps,{style:{pointerEvents:"auto"}}));var k=F(),S=E(k);ae(S,()=>e.content??De,()=>({props:w.props,wrapperProps:m(M)})),C(n,k),Y()}function Bk(n,e){J(e,!0),Dn(()=>{var o;(o=e.onPlaced)==null||o.call(e)});var t=F(),r=E(t);ae(r,()=>e.content??De,()=>({props:{},wrapperProps:{}})),C(n,t),Y()}const Vk="data-separator-root";var rl;class Hk{constructor(e){re(this,"opts");V(this,rl,L(()=>({id:this.opts.id.current,role:this.opts.decorative.current?"none":"separator","aria-orientation":this.opts.orientation.current,"aria-hidden":e1(this.opts.decorative.current),"data-orientation":this.opts.orientation.current,[Vk]:""})));this.opts=e,it(e)}get props(){return m(O(this,rl))}set props(e){_(O(this,rl),e)}}rl=new WeakMap;function Wk(n){return new Hk(n)}var Kk=G("<div><!></div>");function jk(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"decorative",3,!1),i=y(e,"orientation",3,"horizontal"),s=Te(e,["$$slots","$$events","$$legacy","id","ref","child","children","decorative","orientation"]);const l=Wk({ref:N.with(()=>r(),h=>r(h)),id:N.with(()=>t()),decorative:N.with(()=>o()),orientation:N.with(()=>i())}),a=L(()=>Ye(s,l.props));var c=F(),d=E(c);{var u=h=>{var p=F(),g=E(p);ae(g,()=>e.child,()=>({props:m(a)})),C(h,p)},f=h=>{var p=Kk();let g;var v=be(p);ae(v,()=>e.children??De),ge(p),Oe(()=>g=Ve(p,g,{...m(a)})),C(h,p)};Ee(d,h=>{e.child?h(u):h(f,!1)})}C(n,c),Y()}function $k(n,e){let t=y(e,"isStatic",3,!1),r=Te(e,["$$slots","$$events","$$legacy","content","isStatic","onPlaced"]);var o=F(),i=E(o);{var s=a=>{Bk(a,{get content(){return e.content},get onPlaced(){return e.onPlaced}})},l=a=>{Fk(a,le({get content(){return e.content},get onPlaced(){return e.onPlaced}},()=>r))};Ee(i,a=>{t()?a(s):a(l,!1)})}C(n,o)}var Gk=G("<!> <!>",1);function ey(n,e){J(e,!0);let t=y(e,"interactOutsideBehavior",3,"close"),r=y(e,"trapFocus",3,!0),o=y(e,"isValidEvent",3,()=>!1),i=y(e,"customAnchor",3,null),s=y(e,"isStatic",3,!1),l=Te(e,["$$slots","$$events","$$legacy","popper","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","enabled"]);$k(n,{get isStatic(){return s()},get id(){return e.id},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return i()},get enabled(){return e.enabled},content:(c,d)=>{let u=()=>d==null?void 0:d().props,f=()=>d==null?void 0:d().wrapperProps;var h=Gk(),p=E(h);{var g=w=>{Za(w,{get preventScroll(){return e.preventScroll}})},v=(w,M)=>{{var k=S=>{Za(S,{get preventScroll(){return e.preventScroll}})};Ee(w,S=>{e.forceMount||S(k)},M)}};Ee(p,w=>{e.forceMount&&e.enabled?w(g):w(v,!1)})}var x=te(p,2);const b=L(()=>e.enabled&&r());Rg(x,{get id(){return e.id},get onOpenAutoFocus(){return e.onOpenAutoFocus},get onCloseAutoFocus(){return e.onCloseAutoFocus},get loop(){return e.loop},get trapFocus(){return m(b)},get forceMount(){return e.forceMount},focusScope:(M,k)=>{let S=()=>k==null?void 0:k().props;Mg(M,{get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get enabled(){return e.enabled},children:(A,T)=>{kg(A,{get id(){return e.id},get onInteractOutside(){return e.onInteractOutside},get onFocusOutside(){return e.onFocusOutside},get interactOutsideBehavior(){return t()},get isValidEvent(){return o()},get enabled(){return e.enabled},children:(z,W)=>{let R=()=>W==null?void 0:W().props;Lg(z,{get id(){return e.id},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get enabled(){return e.enabled},children:(B,I)=>{var j=F(),H=E(j),$=Ie(()=>({props:Ye(l,u(),R(),S(),{style:{pointerEvents:"auto"}}),wrapperProps:f()}));ae(H,()=>e.popper??De,()=>m($)),C(B,j)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{focusScope:!0}}),C(c,h)},$$slots:{content:!0}}),Y()}function ty(n,e){let t=y(e,"interactOutsideBehavior",3,"close"),r=y(e,"trapFocus",3,!0),o=y(e,"isValidEvent",3,()=>!1),i=y(e,"customAnchor",3,null),s=y(e,"isStatic",3,!1),l=Te(e,["$$slots","$$events","$$legacy","popper","present","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic"]);Of(n,le({get id(){return e.id},get present(){return e.present}},()=>l,{presence:c=>{ey(c,le({get popper(){return e.popper},get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get id(){return e.id},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get preventScroll(){return e.preventScroll},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return i()},get isStatic(){return s()},get enabled(){return e.present},get onInteractOutside(){return e.onInteractOutside},get onCloseAutoFocus(){return e.onCloseAutoFocus},get onOpenAutoFocus(){return e.onOpenAutoFocus},get interactOutsideBehavior(){return t()},get loop(){return e.loop},get trapFocus(){return r()},get isValidEvent(){return o()},get onFocusOutside(){return e.onFocusOutside},forceMount:!1},()=>l))},$$slots:{presence:!0}}))}function ny(n,e){let t=y(e,"interactOutsideBehavior",3,"close"),r=y(e,"trapFocus",3,!0),o=y(e,"isValidEvent",3,()=>!1),i=y(e,"customAnchor",3,null),s=y(e,"isStatic",3,!1),l=Te(e,["$$slots","$$events","$$legacy","popper","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","enabled"]);ey(n,le({get popper(){return e.popper},get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get id(){return e.id},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get preventScroll(){return e.preventScroll},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return i()},get isStatic(){return s()},get enabled(){return e.enabled},get onInteractOutside(){return e.onInteractOutside},get onCloseAutoFocus(){return e.onCloseAutoFocus},get onOpenAutoFocus(){return e.onOpenAutoFocus},get interactOutsideBehavior(){return t()},get loop(){return e.loop},get trapFocus(){return r()},get isValidEvent(){return o()},get onFocusOutside(){return e.onFocusOutside}},()=>l,{forceMount:!0}))}function rc(n,e){J(e,!0);let t=y(e,"mounted",15,!1),r=y(e,"onMountedChange",3,et);Zx(()=>(t(!0),r()(!0),()=>{t(!1),r()(!1)})),Y()}function Uk(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function qk(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}const Jk="data-command-root",Yk="data-command-list",Xk="data-command-input",Zk="data-command-empty",ry="data-command-group",oy="data-command-group-items",iy="data-command-group-heading",sy="data-command-item",Qk="data-command-input-label",eo="data-value",Ti=`[${ry}]`,xd=`[${oy}]`,eM=`[${iy}]`,ly=`[${sy}]`,Sd=`${ly}:not([aria-disabled="true"])`,Mo=new vn("Command.Root"),tM=new vn("Command.List"),Ql=new vn("Command.Group"),gp={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};var ei,ol,il,sl,ll,al,cl,dl,Ke,ay,Da,hu,Ra,Ri,za,Io,cy,pu,mu,gu,ul;class nM{constructor(e){V(this,Ke);re(this,"opts");V(this,ei,!1);re(this,"sortAfterTick",!1);re(this,"sortAndFilterAfterTick",!1);re(this,"allItems",new Set);re(this,"allGroups",new Map);re(this,"allIds",new Map);V(this,ol,de(0));V(this,il,de(null));V(this,sl,de(null));V(this,ll,de(null));V(this,al,de(gp));V(this,cl,de(Ft(gp)));V(this,dl,de(!1));V(this,ul,L(()=>({id:this.opts.id.current,role:"application",[Jk]:"",tabindex:-1,onkeydown:this.onkeydown})));this.opts=e;const t={...this._commandState,value:this.opts.value.current??""};this._commandState=t,this.commandState=t,it(e),this.onkeydown=this.onkeydown.bind(this),nt(()=>{this._commandState.search!==""&&(this.searchHasHadValue=!0)})}get key(){return m(O(this,ol))}set key(e){_(O(this,ol),e,!0)}get viewportNode(){return m(O(this,il))}set viewportNode(e){_(O(this,il),e,!0)}get inputNode(){return m(O(this,sl))}set inputNode(e){_(O(this,sl),e,!0)}get labelNode(){return m(O(this,ll))}set labelNode(e){_(O(this,ll),e,!0)}get commandState(){return m(O(this,al))}set commandState(e){_(O(this,al),e)}get _commandState(){return m(O(this,cl))}set _commandState(e){_(O(this,cl),e,!0)}get searchHasHadValue(){return m(O(this,dl))}set searchHasHadValue(e){_(O(this,dl),e,!0)}setState(e,t,r){Object.is(this._commandState[e],t)||(this._commandState[e]=t,e==="search"?(Ne(this,Ke,za).call(this),Ne(this,Ke,Ra).call(this),Ne(this,Ke,Ri).call(this),It(()=>{Ne(this,Ke,Ri).call(this)})):e==="value"&&(r||Ne(this,Ke,cy).call(this)),Ne(this,Ke,Da).call(this))}setValue(e,t){e!==this.opts.value.current&&e===""&&It(()=>{this.key++}),this.setState("value",e,t),this.opts.value.current=e}getValidItems(){const e=this.opts.ref.current;return e?Array.from(e.querySelectorAll(Sd)).filter(r=>!!r):[]}updateSelectedToIndex(e){const r=this.getValidItems()[e];r&&this.setValue(r.getAttribute(eo)??"")}updateSelectedByItem(e){const t=Ne(this,Ke,Io).call(this),r=this.getValidItems(),o=r.findIndex(s=>s===t);let i=r[o+e];this.opts.loop.current&&(i=o+e<0?r[r.length-1]:o+e===r.length?r[0]:r[o+e]),i&&this.setValue(i.getAttribute(eo)??"")}updateSelectedByGroup(e){const t=Ne(this,Ke,Io).call(this);let r=t==null?void 0:t.closest(Ti),o;for(;r&&!o;)r=e>0?Uk(r,Ti):qk(r,Ti),o=r==null?void 0:r.querySelector(Sd);o?this.setValue(o.getAttribute(eo)??""):this.updateSelectedByItem(e)}registerValue(e,t,r){var o;return t===((o=this.allIds.get(e))==null?void 0:o.value)?et:(this.allIds.set(e,{value:t,keywords:r}),this._commandState.filtered.items.set(e,Ne(this,Ke,hu).call(this,t,r)),this.sortAfterTick||(this.sortAfterTick=!0,It(()=>{Ne(this,Ke,Ra).call(this),this.sortAfterTick=!1})),()=>{this.allIds.delete(e)})}registerItem(e,t){return this.allItems.add(e),t&&(this.allGroups.has(t)?this.allGroups.get(t).add(e):this.allGroups.set(t,new Set([e]))),this.sortAndFilterAfterTick||(this.sortAndFilterAfterTick=!0,It(()=>{Ne(this,Ke,za).call(this),Ne(this,Ke,Ra).call(this),this.sortAndFilterAfterTick=!1})),Ne(this,Ke,Da).call(this),()=>{const r=Ne(this,Ke,Io).call(this);this.allIds.delete(e),this.allItems.delete(e),this.commandState.filtered.items.delete(e),Ne(this,Ke,za).call(this),(r==null?void 0:r.getAttribute("id"))===e&&Ne(this,Ke,Ri).call(this),Ne(this,Ke,Da).call(this)}}registerGroup(e){return this.allGroups.has(e)||this.allGroups.set(e,new Set),()=>{this.allIds.delete(e),this.allGroups.delete(e)}}onkeydown(e){switch(e.key){case s1:case l1:{this.opts.vimBindings.current&&e.ctrlKey&&Ne(this,Ke,mu).call(this,e);break}case ii:Ne(this,Ke,mu).call(this,e);break;case i1:case a1:{this.opts.vimBindings.current&&e.ctrlKey&&Ne(this,Ke,gu).call(this,e);break}case qi:Ne(this,Ke,gu).call(this,e);break;case Cf:e.preventDefault(),this.updateSelectedToIndex(0);break;case Mf:e.preventDefault(),Ne(this,Ke,pu).call(this);break;case Jl:if(!e.isComposing&&e.keyCode!==229){e.preventDefault();const t=Ne(this,Ke,Io).call(this);t&&(t==null||t.click())}}}get props(){return m(O(this,ul))}set props(e){_(O(this,ul),e)}}ei=new WeakMap,ol=new WeakMap,il=new WeakMap,sl=new WeakMap,ll=new WeakMap,al=new WeakMap,cl=new WeakMap,dl=new WeakMap,Ke=new WeakSet,ay=function(){return mf(this._commandState)},Da=function(){O(this,ei)||(ct(this,ei,!0),It(()=>{var r,o;ct(this,ei,!1);const e=Ne(this,Ke,ay).call(this);!Object.is(this.commandState,e)&&(this.commandState=e,(o=(r=this.opts.onStateChange)==null?void 0:r.current)==null||o.call(r,e))}))},hu=function(e,t){const r=this.opts.filter.current??fy;return e?r(e,this._commandState.search,t):0},Ra=function(){var s;if(!this._commandState.search||this.opts.shouldFilter.current===!1){this.commandState.value||Ne(this,Ke,Ri).call(this);return}const e=this._commandState.filtered.items,t=[];for(const l of this._commandState.filtered.groups){const a=this.allGroups.get(l);let c=0;if(!a){t.push([l,c]);continue}for(const d of a){const u=e.get(d);c=Math.max(u??0,c)}t.push([l,c])}const r=this.viewportNode,o=this.getValidItems().sort((l,a)=>{const c=l.getAttribute("id"),d=a.getAttribute("id"),u=e.get(c)??0;return(e.get(d)??0)-u});for(const l of o){const a=l.closest(xd);if(a){const c=l.parentElement===a?l:l.closest(`${xd} > *`);c&&a.appendChild(c)}else{const c=l.parentElement===r?l:l.closest(`${xd} > *`);c&&(r==null||r.appendChild(c))}}const i=t.sort((l,a)=>a[1]-l[1]);for(const l of i){const a=r==null?void 0:r.querySelector(`${Ti}[${eo}="${encodeURIComponent(l[0])}"]`);(s=a==null?void 0:a.parentElement)==null||s.appendChild(a)}},Ri=function(){It(()=>{const e=this.getValidItems().find(r=>r.getAttribute("aria-disabled")!=="true"),t=e==null?void 0:e.getAttribute(eo);this.setValue(t||"")})},za=function(){var t,r;if(!this._commandState.search||this.opts.shouldFilter.current===!1){this._commandState.filtered.count=this.allItems.size;return}this._commandState.filtered.groups=new Set;let e=0;for(const o of this.allItems){const i=((t=this.allIds.get(o))==null?void 0:t.value)??"",s=((r=this.allIds.get(o))==null?void 0:r.keywords)??[],l=Ne(this,Ke,hu).call(this,i,s);this._commandState.filtered.items.set(o,l),l>0&&e++}for(const[o,i]of this.allGroups)for(const s of i){const l=this._commandState.filtered.items.get(s);if(l&&l>0){this._commandState.filtered.groups.add(o);break}}this._commandState.filtered.count=e},Io=function(){const e=this.opts.ref.current;if(!e)return;const t=e.querySelector(`${Sd}[data-selected]`);if(t)return t},cy=function(){It(()=>{var o,i,s,l;const e=Ne(this,Ke,Io).call(this);if(!e)return;const t=(o=e.parentElement)==null?void 0:o.parentElement;if(!t)return;const r=I1(t);if(r&&((i=r.dataset)==null?void 0:i.value)===((s=e.dataset)==null?void 0:s.value)){const a=(l=e==null?void 0:e.closest(Ti))==null?void 0:l.querySelector(eM);a==null||a.scrollIntoView({block:"nearest"});return}e.scrollIntoView({block:"nearest"})})},pu=function(){return this.updateSelectedToIndex(this.getValidItems().length-1)},mu=function(e){e.preventDefault(),e.metaKey?Ne(this,Ke,pu).call(this):e.altKey?this.updateSelectedByGroup(1):this.updateSelectedByItem(1)},gu=function(e){e.preventDefault(),e.metaKey?this.updateSelectedToIndex(0):e.altKey?this.updateSelectedByGroup(-1):this.updateSelectedByItem(-1)},ul=new WeakMap;var fl,hl,pl;class rM{constructor(e,t){re(this,"opts");re(this,"root");V(this,fl,!0);V(this,hl,L(()=>this.root._commandState.filtered.count===0&&O(this,fl)===!1&&this.root.searchHasHadValue||this.opts.forceMount.current));V(this,pl,L(()=>({id:this.opts.id.current,role:"presentation",[Zk]:""})));this.opts=e,this.root=t,pf(()=>{ct(this,fl,!1)}),it({...e,deps:()=>this.shouldRender})}get shouldRender(){return m(O(this,hl))}set shouldRender(e){_(O(this,hl),e)}get props(){return m(O(this,pl))}set props(e){_(O(this,pl),e)}}fl=new WeakMap,hl=new WeakMap,pl=new WeakMap;var ml,gl,yl,vl;class oM{constructor(e,t){re(this,"opts");re(this,"root");V(this,ml,de(null));V(this,gl,L(()=>this.opts.forceMount.current||this.root.opts.shouldFilter.current===!1||!this.root.commandState.search?!0:this.root.commandState.filtered.groups.has(this.opts.id.current)));V(this,yl,de(""));V(this,vl,L(()=>({id:this.opts.id.current,role:"presentation",hidden:this.shouldRender?void 0:!0,"data-value":this.trueValue,[ry]:""})));this.opts=e,this.root=t,this.trueValue=e.value.current,it({...e,deps:()=>this.shouldRender}),Ze(()=>this.opts.id.current,()=>this.root.registerGroup(this.opts.id.current)),nt(()=>{var r;if(this.opts.value.current)return this.trueValue=this.opts.value.current,this.root.registerValue(this.opts.id.current,this.opts.value.current);if(this.headingNode&&this.headingNode.textContent)return this.trueValue=this.headingNode.textContent.trim().toLowerCase(),this.root.registerValue(this.opts.id.current,this.trueValue);if((r=this.opts.ref.current)!=null&&r.textContent)return this.trueValue=this.opts.ref.current.textContent.trim().toLowerCase(),this.root.registerValue(this.opts.id.current,this.trueValue)})}get headingNode(){return m(O(this,ml))}set headingNode(e){_(O(this,ml),e,!0)}get shouldRender(){return m(O(this,gl))}set shouldRender(e){_(O(this,gl),e)}get trueValue(){return m(O(this,yl))}set trueValue(e){_(O(this,yl),e,!0)}get props(){return m(O(this,vl))}set props(e){_(O(this,vl),e)}}ml=new WeakMap,gl=new WeakMap,yl=new WeakMap,vl=new WeakMap;var bl;class iM{constructor(e,t){re(this,"opts");re(this,"group");V(this,bl,L(()=>({id:this.opts.id.current,[iy]:""})));this.opts=e,this.group=t,it({...e,onRefChange:r=>{this.group.headingNode=r}})}get props(){return m(O(this,bl))}set props(e){_(O(this,bl),e)}}bl=new WeakMap;var wl;class sM{constructor(e,t){re(this,"opts");re(this,"group");V(this,wl,L(()=>{var e;return{id:this.opts.id.current,role:"group",[oy]:"","aria-labelledby":((e=this.group.headingNode)==null?void 0:e.id)??void 0}}));this.opts=e,this.group=t,it(e)}get props(){return m(O(this,wl))}set props(e){_(O(this,wl),e)}}wl=new WeakMap;var Lc,xl;class lM{constructor(e,t){re(this,"opts");re(this,"root");V(this,Lc,L(()=>{var t;const e=(t=this.root.viewportNode)==null?void 0:t.querySelector(`${ly}[${eo}="${encodeURIComponent(this.root.opts.value.current)}"]`);if(e)return(e==null?void 0:e.getAttribute("id"))??void 0}));V(this,xl,L(()=>{var e,t;return{id:this.opts.id.current,type:"text",[Xk]:"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":xf(!0),"aria-controls":((e=this.root.viewportNode)==null?void 0:e.id)??void 0,"aria-labelledby":((t=this.root.labelNode)==null?void 0:t.id)??void 0,"aria-activedescendant":m(O(this,Lc))}}));this.opts=e,this.root=t,it({...e,onRefChange:r=>{this.root.inputNode=r}}),Ze(()=>this.opts.ref.current,()=>{const r=this.opts.ref.current;r&&this.opts.autofocus.current&&ql(10,()=>r.focus())}),Ze(()=>this.opts.value.current,()=>{this.root.commandState.search!==this.opts.value.current&&this.root.setState("search",this.opts.value.current)})}get props(){return m(O(this,xl))}set props(e){_(O(this,xl),e)}}Lc=new WeakMap,xl=new WeakMap;var lo,Fc,Sl,kl,Ml,So,dy,yu,Cl;class aM{constructor(e,t){V(this,So);re(this,"opts");re(this,"root");V(this,lo,null);V(this,Fc,L(()=>{var e;return this.opts.forceMount.current||((e=O(this,lo))==null?void 0:e.opts.forceMount.current)===!0}));V(this,Sl,de(""));V(this,kl,L(()=>{if(this.opts.ref.current,m(O(this,Fc))||this.root.opts.shouldFilter.current===!1||!this.root.commandState.search)return!0;const e=this.root.commandState.filtered.items.get(this.opts.id.current);return e===void 0?!1:e>0}));V(this,Ml,L(()=>this.root.opts.value.current===this.trueValue&&this.trueValue!==""));V(this,Cl,L(()=>({id:this.opts.id.current,"aria-disabled":gg(this.opts.disabled.current),"aria-selected":Qx(this.isSelected),"data-disabled":jc(this.opts.disabled.current),"data-selected":t1(this.isSelected),"data-value":this.trueValue,[sy]:"",role:"option",onpointermove:this.onpointermove,onclick:this.onclick})));this.opts=e,this.root=t,ct(this,lo,Ql.getOr(null)),this.trueValue=e.value.current,it({...e,deps:()=>!!this.root.commandState.search}),Ze([()=>this.opts.id.current,()=>{var r;return(r=O(this,lo))==null?void 0:r.opts.id.current},()=>this.opts.forceMount.current,()=>this.opts.ref.current],()=>{var r;if(!this.opts.forceMount.current)return this.root.registerItem(this.opts.id.current,(r=O(this,lo))==null?void 0:r.opts.id.current)}),Ze([()=>this.opts.value.current,()=>this.opts.ref.current],()=>{this.opts.ref.current&&(!this.opts.value.current&&this.opts.ref.current.textContent&&(this.trueValue=this.opts.ref.current.textContent.trim()),this.root.registerValue(this.opts.id.current,this.trueValue,e.keywords.current.map(r=>r.trim())),this.opts.ref.current.setAttribute(eo,this.trueValue))}),this.onclick=this.onclick.bind(this),this.onpointermove=this.onpointermove.bind(this)}get trueValue(){return m(O(this,Sl))}set trueValue(e){_(O(this,Sl),e,!0)}get shouldRender(){return m(O(this,kl))}set shouldRender(e){_(O(this,kl),e)}get isSelected(){return m(O(this,Ml))}set isSelected(e){_(O(this,Ml),e)}onpointermove(e){this.opts.disabled.current||this.root.opts.disablePointerSelection.current||Ne(this,So,yu).call(this)}onclick(e){this.opts.disabled.current||Ne(this,So,dy).call(this)}get props(){return m(O(this,Cl))}set props(e){_(O(this,Cl),e)}}lo=new WeakMap,Fc=new WeakMap,Sl=new WeakMap,kl=new WeakMap,Ml=new WeakMap,So=new WeakSet,dy=function(){var e;this.opts.disabled.current||(Ne(this,So,yu).call(this),(e=this.opts.onSelect)==null||e.current())},yu=function(){this.opts.disabled.current||this.root.setValue(this.trueValue,!0)},Cl=new WeakMap;var Ol;class cM{constructor(e,t){re(this,"opts");re(this,"root");V(this,Ol,L(()=>({id:this.opts.id.current,role:"listbox","aria-label":this.opts.ariaLabel.current,[Yk]:""})));this.opts=e,this.root=t,it(e)}get props(){return m(O(this,Ol))}set props(e){_(O(this,Ol),e)}}Ol=new WeakMap;var Tl;class dM{constructor(e,t){re(this,"opts");re(this,"root");V(this,Tl,L(()=>{var e;return{id:this.opts.id.current,[Qk]:"",for:(e=this.opts.for)==null?void 0:e.current,style:hg}}));this.opts=e,this.root=t,it({...e,onRefChange:r=>{this.root.labelNode=r}})}get props(){return m(O(this,Tl))}set props(e){_(O(this,Tl),e)}}Tl=new WeakMap;function uM(n){return Mo.set(new nM(n))}function fM(n){return new rM(n,Mo.get())}function hM(n){const e=Ql.getOr(null);return new aM({...n,group:e},Mo.get())}function pM(n){return Ql.set(new oM(n,Mo.get()))}function mM(n){return new iM(n,Ql.get())}function gM(n){return new sM(n,Ql.get())}function yM(n){return new lM(n,Mo.get())}function vM(n){return tM.set(new cM(n,Mo.get()))}function bM(n){return new dM(n,Mo.get())}var wM=G("<label><!></label>");function xM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=Te(e,["$$slots","$$events","$$legacy","id","ref","children"]);const i=bM({id:N.with(()=>t()),ref:N.with(()=>r(),d=>r(d))}),s=L(()=>Ye(o,i.props));var l=wM();let a;var c=be(l);ae(c,()=>e.children??De),ge(l),Oe(()=>a=Ve(l,a,{...m(s)})),C(n,l),Y()}var SM=G("<!> <!>",1),kM=G("<div><!> <!></div>");function MM(n,e){J(e,!0);const t=P=>{xM(P,{children:(z,W)=>{vt();var R=tf();Oe(()=>nf(R,u())),C(z,R)},$$slots:{default:!0}})};let r=y(e,"id",19,ft),o=y(e,"ref",15,null),i=y(e,"value",15,""),s=y(e,"onValueChange",3,et),l=y(e,"onStateChange",3,et),a=y(e,"loop",3,!1),c=y(e,"shouldFilter",3,!0),d=y(e,"filter",3,fy),u=y(e,"label",3,""),f=y(e,"vimBindings",3,!0),h=y(e,"disablePointerSelection",3,!1),p=Te(e,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","onStateChange","loop","shouldFilter","filter","label","vimBindings","disablePointerSelection","children","child"]);const g=uM({id:N.with(()=>r()),ref:N.with(()=>o(),P=>o(P)),filter:N.with(()=>d()),shouldFilter:N.with(()=>c()),loop:N.with(()=>a()),value:N.with(()=>i(),P=>{i(P),s()(P)}),vimBindings:N.with(()=>f()),disablePointerSelection:N.with(()=>h()),onStateChange:N.with(()=>l())}),v=P=>g.updateSelectedToIndex(P),x=P=>g.updateSelectedByGroup(P),b=P=>g.updateSelectedByItem(P),w=()=>g.getValidItems(),M=L(()=>Ye(p,g.props));var k=F(),S=E(k);{var A=P=>{var z=SM(),W=E(z);t(W);var R=te(W,2);ae(R,()=>e.child,()=>({props:m(M)})),C(P,z)},T=P=>{var z=kM();let W;var R=be(z);t(R);var B=te(R,2);ae(B,()=>e.children??De),ge(z),Oe(()=>W=Ve(z,W,{...m(M)})),C(P,z)};Ee(S,P=>{e.child?P(A):P(T,!1)})}return C(n,k),Y({updateSelectedToIndex:v,updateSelectedByGroup:x,updateSelectedByItem:b,getValidItems:w})}var CM=G("<div><!></div>");function OM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"forceMount",3,!1),i=Te(e,["$$slots","$$events","$$legacy","id","ref","children","child","forceMount"]);const s=fM({id:N.with(()=>t()),ref:N.with(()=>r(),u=>r(u)),forceMount:N.with(()=>o())}),l=L(()=>Ye(s.props,i));var a=F(),c=E(a);{var d=u=>{var f=F(),h=E(f);{var p=v=>{var x=F(),b=E(x);ae(b,()=>e.child,()=>({props:m(l)})),C(v,x)},g=v=>{var x=CM();let b;var w=be(x);ae(w,()=>e.children??De),ge(x),Oe(()=>b=Ve(x,b,{...m(l)})),C(v,x)};Ee(h,v=>{e.child?v(p):v(g,!1)})}C(u,f)};Ee(c,u=>{s.shouldRender&&u(d)})}C(n,a),Y()}var TM=G("<div><!></div>");function AM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"value",3,""),i=y(e,"forceMount",3,!1),s=Te(e,["$$slots","$$events","$$legacy","id","ref","value","forceMount","children","child"]);const l=pM({id:N.with(()=>t()),ref:N.with(()=>r(),h=>r(h)),forceMount:N.with(()=>i()),value:N.with(()=>o())}),a=L(()=>Ye(s,l.props));var c=F(),d=E(c);{var u=h=>{var p=F(),g=E(p);ae(g,()=>e.child,()=>({props:m(a)})),C(h,p)},f=h=>{var p=TM();let g;var v=be(p);ae(v,()=>e.children??De),ge(p),Oe(()=>g=Ve(p,g,{...m(a)})),C(h,p)};Ee(d,h=>{e.child?h(u):h(f,!1)})}C(n,c),Y()}var EM=G("<div><!></div>");function PM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=Te(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const i=mM({id:N.with(()=>t()),ref:N.with(()=>r(),u=>r(u))}),s=L(()=>Ye(o,i.props));var l=F(),a=E(l);{var c=u=>{var f=F(),h=E(f);ae(h,()=>e.child,()=>({props:m(s)})),C(u,f)},d=u=>{var f=EM();let h;var p=be(f);ae(p,()=>e.children??De),ge(f),Oe(()=>h=Ve(f,h,{...m(s)})),C(u,f)};Ee(a,u=>{e.child?u(c):u(d,!1)})}C(n,l),Y()}var NM=G("<div><!></div>"),_M=G('<div style="display: contents;"><!></div>');function IM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=Te(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const i=gM({id:N.with(()=>t()),ref:N.with(()=>r(),u=>r(u))}),s=L(()=>Ye(o,i.props));var l=_M(),a=be(l);{var c=u=>{var f=F(),h=E(f);ae(h,()=>e.child,()=>({props:m(s)})),C(u,f)},d=u=>{var f=NM();let h;var p=be(f);ae(p,()=>e.children??De),ge(f),Oe(()=>h=Ve(f,h,{...m(s)})),C(u,f)};Ee(a,u=>{e.child?u(c):u(d,!1)})}ge(l),C(n,l),Y()}var DM=G("<input>");function RM(n,e){J(e,!0);let t=y(e,"value",15,""),r=y(e,"autofocus",3,!1),o=y(e,"id",19,ft),i=y(e,"ref",15,null),s=Te(e,["$$slots","$$events","$$legacy","value","autofocus","id","ref","child"]);const l=yM({id:N.with(()=>o()),ref:N.with(()=>i(),h=>i(h)),value:N.with(()=>t(),h=>{t(h)}),autofocus:N.with(()=>r()??!1)}),a=L(()=>Ye(s,l.props));var c=F(),d=E(c);{var u=h=>{var p=F(),g=E(p);ae(g,()=>e.child,()=>({props:m(a)})),C(h,p)},f=h=>{var p=DM();ru(p);let g;Oe(()=>g=Ve(p,g,{...m(a)})),ou(p,t),C(h,p)};Ee(d,h=>{e.child?h(u):h(f,!1)})}C(n,c),Y()}var zM=G("<div><!></div>"),LM=G('<div style="display: contents;" data-item-wrapper=""><!></div>');function FM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"value",3,""),i=y(e,"disabled",3,!1),s=y(e,"onSelect",3,et),l=y(e,"forceMount",3,!1),a=y(e,"keywords",19,()=>[]),c=Te(e,["$$slots","$$events","$$legacy","id","ref","value","disabled","children","child","onSelect","forceMount","keywords"]);const d=hM({id:N.with(()=>t()),ref:N.with(()=>r(),p=>r(p)),value:N.with(()=>o()),disabled:N.with(()=>i()),onSelect:N.with(()=>s()),forceMount:N.with(()=>l()),keywords:N.with(()=>a())}),u=L(()=>Ye(c,d.props));var f=F(),h=E(f);gf(h,()=>d.root.key,p=>{var g=LM(),v=be(g);{var x=b=>{var w=F(),M=E(w);{var k=A=>{var T=F(),P=E(T);ae(P,()=>e.child,()=>({props:m(u)})),C(A,T)},S=A=>{var T=zM();let P;var z=be(T);ae(z,()=>e.children??De),ge(T),Oe(()=>P=Ve(T,P,{...m(u)})),C(A,T)};Ee(M,A=>{e.child?A(k):A(S,!1)})}C(b,w)};Ee(v,b=>{d.shouldRender&&b(x)})}ge(g),Oe(()=>st(g,"data-value",d.trueValue)),C(p,g)}),C(n,f),Y()}var BM=G("<div><!></div>");function VM(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=Te(e,["$$slots","$$events","$$legacy","id","ref","child","children","aria-label"]);const i=vM({id:N.with(()=>t()),ref:N.with(()=>r(),c=>r(c)),ariaLabel:N.with(()=>e["aria-label"]??"Suggestions...")}),s=L(()=>Ye(o,i.props));var l=F(),a=E(l);gf(a,()=>i.root._commandState.search==="",c=>{var d=F(),u=E(d);{var f=p=>{var g=F(),v=E(g);ae(v,()=>e.child,()=>({props:m(s)})),C(p,g)},h=p=>{var g=BM();let v;var x=be(g);ae(x,()=>e.children??De),ge(g),Oe(()=>v=Ve(g,v,{...m(s)})),C(p,g)};Ee(u,p=>{e.child?p(f):p(h,!1)})}C(c,d)}),C(n,l),Y()}const yp=1,HM=.9,WM=.8,KM=.17,kd=.1,Md=.999,jM=.9999,$M=.99,GM=/[\\/_+.#"@[({&]/,UM=/[\\/_+.#"@[({&]/g,qM=/[\s-]/,uy=/[\s-]/g;function vu(n,e,t,r,o,i,s){if(i===e.length)return o===n.length?yp:$M;const l=`${o},${i}`;if(s[l]!==void 0)return s[l];const a=r.charAt(i);let c=t.indexOf(a,o),d=0,u,f,h,p;for(;c>=0;)u=vu(n,e,t,r,c+1,i+1,s),u>d&&(c===o?u*=yp:GM.test(n.charAt(c-1))?(u*=WM,h=n.slice(o,c-1).match(UM),h&&o>0&&(u*=Md**h.length)):qM.test(n.charAt(c-1))?(u*=HM,p=n.slice(o,c-1).match(uy),p&&o>0&&(u*=Md**p.length)):(u*=KM,o>0&&(u*=Md**(c-o))),n.charAt(c)!==e.charAt(i)&&(u*=jM)),(u<kd&&t.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&t.charAt(c-1)!==r.charAt(i))&&(f=vu(n,e,t,r,c+1,i+2,s),f*kd>u&&(u=f*kd)),u>d&&(d=u),c=t.indexOf(a,c+1);return s[l]=d,d}function vp(n){return n.toLowerCase().replace(uy," ")}function fy(n,e,t){return n=t&&t.length>0?`${`${n} ${t==null?void 0:t.join(" ")}`}`:n,vu(n,e,vp(n),vp(e),0,0,{})}const JM=[Jl,Yl],YM=[ii,o1,Cf],hy=[qi,r1,Mf],XM=[...YM,...hy];function Lo(n){return n.pointerType==="mouse"}function ZM(n){const e=L(()=>n.enabled()),t=Zg(!1,300,s=>{var l;m(e)&&((l=n.setIsPointerInTransit)==null||l.call(n,s))});let r=de(null);function o(){_(r,null),t.current=!1}function i(s,l){const a=s.currentTarget;if(!fr(a))return;const c={x:s.clientX,y:s.clientY},d=QM(c,a.getBoundingClientRect()),u=eC(c,d),f=tC(l.getBoundingClientRect()),h=rC([...u,...f]);_(r,h,!0),t.current=!0}return Ze([n.triggerNode,n.contentNode,n.enabled],([s,l,a])=>{if(!s||!l||!a)return;const c=u=>{i(u,l)},d=u=>{i(u,s)};return lr(lt(s,"pointerleave",c),lt(l,"pointerleave",d))}),Ze(()=>m(r),()=>lt(document,"pointermove",l=>{var f,h;if(!m(r))return;const a=l.target;if(!Ua(a))return;const c={x:l.clientX,y:l.clientY},d=((f=n.triggerNode())==null?void 0:f.contains(a))||((h=n.contentNode())==null?void 0:h.contains(a)),u=!nC(c,m(r));d?o():u&&(o(),n.onPointerExit())})),{isPointerInTransit:t}}function QM(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),o=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,o,i)){case i:return"left";case o:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function eC(n,e,t=5){const r=t*1.5;switch(e){case"top":return[{x:n.x-t,y:n.y+t},{x:n.x,y:n.y-r},{x:n.x+t,y:n.y+t}];case"bottom":return[{x:n.x-t,y:n.y-t},{x:n.x,y:n.y+r},{x:n.x+t,y:n.y-t}];case"left":return[{x:n.x+t,y:n.y-t},{x:n.x-r,y:n.y},{x:n.x+t,y:n.y+t}];case"right":return[{x:n.x-t,y:n.y-t},{x:n.x+r,y:n.y},{x:n.x-t,y:n.y+t}]}}function tC(n){const{top:e,right:t,bottom:r,left:o}=n;return[{x:o,y:e},{x:t,y:e},{x:t,y:r},{x:o,y:r}]}function nC(n,e){const{x:t,y:r}=n;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const l=e[i].x,a=e[i].y,c=e[s].x,d=e[s].y;a>r!=d>r&&t<(c-l)*(r-a)/(d-a)+l&&(o=!o)}return o}function rC(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),oC(e)}function oC(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const o=n[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const o=n[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))t.pop();else break}t.push(o)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}function Wi(){return{getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"}}function iC(n,e){if(!Uc(n,Wi()))return sC(n,e);const t=lS(wg(n).body,Wi());e==="prev"&&t.reverse();const r=t.indexOf(n);return r===-1?document.body:t.slice(r+1)[0]}function sC(n,e){if(!dS(n,Wi()))return document.body;const t=aS(wg(n).body,Wi());e==="prev"&&t.reverse();const r=t.indexOf(n);return r===-1?document.body:t.slice(r+1).find(i=>Uc(i,Wi()))??document.body}const py="data-context-menu-trigger",Ff=new vn("Menu.Root"),Xc=new vn("Menu.Root | Menu.Sub"),my=new vn("Menu.Content"),lC=new vn("Menu.Group | Menu.RadioGroup"),aC=new Tf("bitsmenuopen",{bubbles:!1,cancelable:!0});var Al,El;class cC{constructor(e){re(this,"opts");re(this,"isUsingKeyboard",new wu);V(this,Al,de(!1));V(this,El,de(!1));this.opts=e}get ignoreCloseAutoFocus(){return m(O(this,Al))}set ignoreCloseAutoFocus(e){_(O(this,Al),e,!0)}get isPointerInTransit(){return m(O(this,El))}set isPointerInTransit(e){_(O(this,El),e,!0)}getAttr(e){return`data-${this.opts.variant.current}-${e}`}}Al=new WeakMap,El=new WeakMap;var Pl,Nl;class dC{constructor(e,t,r){re(this,"opts");re(this,"root");re(this,"parentMenu");re(this,"contentId",N.with(()=>""));V(this,Pl,de(null));V(this,Nl,de(null));this.opts=e,this.root=t,this.parentMenu=r,r&&Ze(()=>r.opts.open.current,()=>{r.opts.open.current||(this.opts.open.current=!1)})}get contentNode(){return m(O(this,Pl))}set contentNode(e){_(O(this,Pl),e,!0)}get triggerNode(){return m(O(this,Nl))}set triggerNode(e){_(O(this,Nl),e,!0)}toggleOpen(){this.opts.open.current=!this.opts.open.current}onOpen(){this.opts.open.current=!0}onClose(){this.opts.open.current=!1}}Pl=new WeakMap,Nl=new WeakMap;var _l,Il,Dl,Rl,zl,Br,gy,La,Ll,Fl;class uC{constructor(e,t){V(this,Br);re(this,"opts");re(this,"parentMenu");V(this,_l,de(""));V(this,Il,0);V(this,Dl);re(this,"rovingFocusGroup");V(this,Rl,de(!1));V(this,zl);re(this,"onCloseAutoFocus",e=>{this.opts.onCloseAutoFocus.current(e),!(e.defaultPrevented||O(this,zl))&&this.parentMenu.triggerNode&&Uc(this.parentMenu.triggerNode)&&this.parentMenu.triggerNode.focus()});re(this,"onOpenAutoFocus",e=>{if(e.defaultPrevented)return;e.preventDefault();const t=this.parentMenu.contentNode;t==null||t.focus()});V(this,Ll,L(()=>({open:this.parentMenu.opts.open.current})));V(this,Fl,L(()=>({id:this.opts.id.current,role:"menu","aria-orientation":"vertical",[this.parentMenu.root.getAttr("content")]:"","data-state":Kc(this.parentMenu.opts.open.current),onkeydown:this.onkeydown,onblur:this.onblur,onfocus:this.onfocus,dir:this.parentMenu.root.opts.dir.current,style:{pointerEvents:"auto"}})));re(this,"popperProps",{onCloseAutoFocus:e=>this.onCloseAutoFocus(e)});this.opts=e,this.parentMenu=t,t.contentId=e.id,ct(this,zl,e.isSub??!1),this.onkeydown=this.onkeydown.bind(this),this.onblur=this.onblur.bind(this),this.onfocus=this.onfocus.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this),it({...e,deps:()=>this.parentMenu.opts.open.current,onRefChange:r=>{this.parentMenu.contentNode!==r&&(this.parentMenu.contentNode=r)}}),ZM({contentNode:()=>this.parentMenu.contentNode,triggerNode:()=>this.parentMenu.triggerNode,enabled:()=>{var r;return this.parentMenu.opts.open.current&&!!((r=this.parentMenu.triggerNode)!=null&&r.hasAttribute(this.parentMenu.root.getAttr("sub-trigger")))},onPointerExit:()=>{this.parentMenu.opts.open.current=!1},setIsPointerInTransit:r=>{this.parentMenu.root.isPointerInTransit=r}}),ct(this,Dl,Lk().handleTypeaheadSearch),this.rovingFocusGroup=v1({rootNodeId:this.parentMenu.contentId,candidateAttr:this.parentMenu.root.getAttr("item"),loop:this.opts.loop,orientation:N.with(()=>"vertical")}),Ze(()=>this.parentMenu.contentNode,r=>{if(!r)return;const o=()=>{It(()=>{this.parentMenu.root.isUsingKeyboard.current&&this.rovingFocusGroup.focusFirstCandidate()})};return aC.listen(r,o)}),nt(()=>{this.parentMenu.opts.open.current||window.clearTimeout(O(this,Il))})}get search(){return m(O(this,_l))}set search(e){_(O(this,_l),e,!0)}get mounted(){return m(O(this,Rl))}set mounted(e){_(O(this,Rl),e,!0)}handleTabKeyDown(e){let t=this.parentMenu;for(;t.parentMenu!==null;)t=t.parentMenu;if(!t.triggerNode)return;e.preventDefault();const r=iC(t.triggerNode,e.shiftKey?"prev":"next");r?(this.parentMenu.root.ignoreCloseAutoFocus=!0,t.onClose(),It(()=>{r.focus(),It(()=>{this.parentMenu.root.ignoreCloseAutoFocus=!1})})):document.body.focus()}onkeydown(e){var c,d;if(e.defaultPrevented)return;if(e.key===yg){this.handleTabKeyDown(e);return}const t=e.target,r=e.currentTarget;if(!fr(t)||!fr(r))return;const o=((c=t.closest(`[${this.parentMenu.root.getAttr("content")}]`))==null?void 0:c.id)===this.parentMenu.contentId.current,i=e.ctrlKey||e.altKey||e.metaKey,s=e.key.length===1;if(this.rovingFocusGroup.handleKeydown(t,e)||e.code==="Space")return;const a=Ne(this,Br,gy).call(this);o&&!i&&s&&O(this,Dl).call(this,e.key,a),((d=e.target)==null?void 0:d.id)===this.parentMenu.contentId.current&&XM.includes(e.key)&&(e.preventDefault(),hy.includes(e.key)&&a.reverse(),Cg(a))}onblur(e){var t,r;Ua(e.currentTarget)&&Ua(e.target)&&((r=(t=e.currentTarget).contains)!=null&&r.call(t,e.target)||(window.clearTimeout(O(this,Il)),this.search=""))}onfocus(e){this.parentMenu.root.isUsingKeyboard.current&&It(()=>this.rovingFocusGroup.focusFirstCandidate())}onItemEnter(){return Ne(this,Br,La).call(this)}onItemLeave(e){if(e.currentTarget.hasAttribute(this.parentMenu.root.getAttr("sub-trigger"))||Ne(this,Br,La).call(this)||this.parentMenu.root.isUsingKeyboard.current)return;const t=this.parentMenu.contentNode;t==null||t.focus(),this.rovingFocusGroup.setCurrentTabStopId("")}onTriggerLeave(){return!!Ne(this,Br,La).call(this)}handleInteractOutside(e){var r;if(!p1(e.target))return;const t=(r=this.parentMenu.triggerNode)==null?void 0:r.id;if(e.target.id===t){e.preventDefault();return}e.target.closest(`#${t}`)&&e.preventDefault()}get snippetProps(){return m(O(this,Ll))}set snippetProps(e){_(O(this,Ll),e)}get props(){return m(O(this,Fl))}set props(e){_(O(this,Fl),e)}}_l=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Rl=new WeakMap,zl=new WeakMap,Br=new WeakSet,gy=function(){const e=this.parentMenu.contentNode;return e?Array.from(e.querySelectorAll(`[${this.parentMenu.root.getAttr("item")}]:not([data-disabled])`)):[]},La=function(){return this.parentMenu.root.isPointerInTransit},Ll=new WeakMap,Fl=new WeakMap;var ti,Bl;class fC{constructor(e,t){re(this,"opts");re(this,"content");V(this,ti,de(!1));V(this,Bl,L(()=>({id:this.opts.id.current,tabindex:-1,role:"menuitem","aria-disabled":gg(this.opts.disabled.current),"data-disabled":jc(this.opts.disabled.current),"data-highlighted":m(O(this,ti))?"":void 0,[this.content.parentMenu.root.getAttr("item")]:"",onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,onfocus:this.onfocus,onblur:this.onblur})));this.opts=e,this.content=t,this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this),it({...e,deps:()=>this.content.mounted})}onpointermove(e){if(!e.defaultPrevented&&Lo(e))if(this.opts.disabled.current)this.content.onItemLeave(e);else{if(this.content.onItemEnter())return;const r=e.currentTarget;if(!fr(r))return;r.focus()}}onpointerleave(e){e.defaultPrevented||Lo(e)&&this.content.onItemLeave(e)}onfocus(e){It(()=>{e.defaultPrevented||this.opts.disabled.current||_(O(this,ti),!0)})}onblur(e){It(()=>{e.defaultPrevented||_(O(this,ti),!1)})}get props(){return m(O(this,Bl))}set props(e){_(O(this,Bl),e)}}ti=new WeakMap,Bl=new WeakMap;var Vl,Bc,yy,Hl;class hC{constructor(e,t){V(this,Bc);re(this,"opts");re(this,"item");V(this,Vl,!1);re(this,"root");V(this,Hl,L(()=>Ye(this.item.props,{onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown})));this.opts=e,this.item=t,this.root=t.content.parentMenu.root,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this)}onkeydown(e){const t=this.item.content.search!=="";if(!(this.item.opts.disabled.current||t&&e.key===Yl)&&JM.includes(e.key)){if(!fr(e.currentTarget))return;e.currentTarget.click(),e.preventDefault()}}onclick(e){this.item.opts.disabled.current||Ne(this,Bc,yy).call(this)}onpointerup(e){var t;if(!e.defaultPrevented&&!O(this,Vl)){if(!fr(e.currentTarget))return;(t=e.currentTarget)==null||t.click()}}onpointerdown(e){ct(this,Vl,!0)}get props(){return m(O(this,Hl))}set props(e){_(O(this,Hl),e)}}Vl=new WeakMap,Bc=new WeakSet,yy=function(){if(this.item.opts.disabled.current)return;const e=new CustomEvent("menuitemselect",{bubbles:!0,cancelable:!0});this.opts.onSelect.current(e),It(()=>{if(e.defaultPrevented){this.item.content.parentMenu.root.isUsingKeyboard.current=!1;return}this.opts.closeOnSelect.current&&this.item.content.parentMenu.root.opts.onClose()})},Hl=new WeakMap;var Wl,Kl;class pC{constructor(e,t){re(this,"opts");re(this,"root");V(this,Wl,de(void 0));V(this,Kl,L(()=>({id:this.opts.id.current,role:"group","aria-labelledby":this.groupHeadingId,[this.root.getAttr("group")]:""})));this.opts=e,this.root=t,it(this.opts)}get groupHeadingId(){return m(O(this,Wl))}set groupHeadingId(e){_(O(this,Wl),e,!0)}get props(){return m(O(this,Kl))}set props(e){_(O(this,Kl),e)}}Wl=new WeakMap,Kl=new WeakMap;var jl;class mC{constructor(e,t){re(this,"opts");re(this,"root");V(this,jl,L(()=>({id:this.opts.id.current,role:"group",[this.root.getAttr("separator")]:""})));this.opts=e,this.root=t,it(e)}get props(){return m(O(this,jl))}set props(e){_(O(this,jl),e)}}jl=new WeakMap;var Vc,$l;class gC{constructor(e,t){re(this,"opts");re(this,"parentMenu");V(this,Vc,L(()=>{if(this.parentMenu.opts.open.current&&this.parentMenu.contentId.current)return this.parentMenu.contentId.current}));V(this,$l,L(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"aria-haspopup":"menu","aria-expanded":xf(this.parentMenu.opts.open.current),"aria-controls":m(O(this,Vc)),"data-disabled":jc(this.opts.disabled.current),"data-state":Kc(this.parentMenu.opts.open.current),[this.parentMenu.root.getAttr("trigger")]:"",onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown})));this.opts=e,this.parentMenu=t,this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onkeydown=this.onkeydown.bind(this),it({...e,onRefChange:r=>{this.parentMenu.triggerNode=r}})}onpointerdown(e){if(!this.opts.disabled.current){if(e.pointerType==="touch")return e.preventDefault();e.button===0&&e.ctrlKey===!1&&(this.parentMenu.toggleOpen(),this.parentMenu.opts.open.current||e.preventDefault())}}onpointerup(e){this.opts.disabled.current||e.pointerType==="touch"&&(e.preventDefault(),this.parentMenu.toggleOpen())}onkeydown(e){if(!this.opts.disabled.current){if(e.key===Yl||e.key===Jl){this.parentMenu.toggleOpen(),e.preventDefault();return}e.key===ii&&(this.parentMenu.onOpen(),e.preventDefault())}}get props(){return m(O(this,$l))}set props(e){_(O(this,$l),e)}}Vc=new WeakMap,$l=new WeakMap;var ni,ri,fn,Sr,bu,Gl;class yC{constructor(e,t){V(this,fn);re(this,"opts");re(this,"parentMenu");V(this,ni,de(Ft({x:0,y:0})));re(this,"virtualElement",N({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...m(O(this,ni))})}));V(this,ri,null);V(this,Gl,L(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"data-disabled":jc(this.opts.disabled.current),"data-state":Kc(this.parentMenu.opts.open.current),[py]:"",tabindex:-1,onpointerdown:this.onpointerdown,onpointermove:this.onpointermove,onpointercancel:this.onpointercancel,onpointerup:this.onpointerup,oncontextmenu:this.oncontextmenu})));this.opts=e,this.parentMenu=t,this.oncontextmenu=this.oncontextmenu.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointermove=this.onpointermove.bind(this),this.onpointercancel=this.onpointercancel.bind(this),this.onpointerup=this.onpointerup.bind(this),it({...e,onRefChange:r=>{this.parentMenu.triggerNode=r},deps:()=>this.parentMenu.opts.open.current}),Ze(()=>m(O(this,ni)),r=>{this.virtualElement.current={getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...r})}}),nt(()=>{this.opts.disabled.current&&Ne(this,fn,Sr).call(this)}),wf(()=>Ne(this,fn,Sr).call(this))}oncontextmenu(e){var t;this.opts.disabled.current||(Ne(this,fn,Sr).call(this),Ne(this,fn,bu).call(this,e),e.preventDefault(),(t=this.parentMenu.contentNode)==null||t.focus())}onpointerdown(e){this.opts.disabled.current||Lo(e)||(Ne(this,fn,Sr).call(this),ct(this,ri,window.setTimeout(()=>Ne(this,fn,bu).call(this,e),700)))}onpointermove(e){this.opts.disabled.current||Lo(e)||Ne(this,fn,Sr).call(this)}onpointercancel(e){this.opts.disabled.current||Lo(e)||Ne(this,fn,Sr).call(this)}onpointerup(e){this.opts.disabled.current||Lo(e)||Ne(this,fn,Sr).call(this)}get props(){return m(O(this,Gl))}set props(e){_(O(this,Gl),e)}}ni=new WeakMap,ri=new WeakMap,fn=new WeakSet,Sr=function(){O(this,ri)!==null&&window.clearTimeout(O(this,ri))},bu=function(e){_(O(this,ni),{x:e.clientX,y:e.clientY},!0),this.parentMenu.onOpen()},Gl=new WeakMap;function vy(n){const e=new cC(n);return Dg.set({get ignoreCloseAutoFocus(){return e.ignoreCloseAutoFocus}}),Ff.set(e)}function by(n,e){return Xc.set(new dC(e,n,null))}function vC(n){return new gC(n,Xc.get())}function bC(n){return new yC(n,Xc.get())}function wy(n){return my.set(new uC(n,Xc.get()))}function wC(n){const e=new fC(n,my.get());return new hC(n,e)}function xC(n){return lC.set(new pC(n,Ff.get()))}function SC(n){return new mC(n,Ff.get())}function kC(n,e){J(e,!0);let t=y(e,"open",15,!1),r=y(e,"dir",3,"ltr"),o=y(e,"onOpenChange",3,et);const i=vy({variant:N.with(()=>"context-menu"),dir:N.with(()=>r()),onClose:()=>{var s;t(!1),(s=o())==null||s(!1)}});by(i,{open:N.with(()=>t(),s=>{t(s),o()(s)})}),Xg(n,{children:(s,l)=>{var a=F(),c=E(a);ae(c,()=>e.children??De),C(s,a)},$$slots:{default:!0}}),Y()}var MC=G("<div><!></div>");function xy(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"id",19,ft),o=y(e,"disabled",3,!1),i=y(e,"onSelect",3,et),s=y(e,"closeOnSelect",3,!0),l=Te(e,["$$slots","$$events","$$legacy","child","children","ref","id","disabled","onSelect","closeOnSelect"]);const a=wC({id:N.with(()=>r()),disabled:N.with(()=>o()),onSelect:N.with(()=>i()),ref:N.with(()=>t(),p=>t(p)),closeOnSelect:N.with(()=>s())}),c=L(()=>Ye(l,a.props));var d=F(),u=E(d);{var f=p=>{var g=F(),v=E(g);ae(v,()=>e.child,()=>({props:m(c)})),C(p,g)},h=p=>{var g=MC();let v;var x=be(g);ae(x,()=>e.children??De),ge(g),Oe(()=>v=Ve(g,v,{...m(c)})),C(p,g)};Ee(u,p=>{e.child?p(f):p(h,!1)})}C(n,d),Y()}var CC=G("<div><!></div>");function OC(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"id",19,ft),o=Te(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const i=xC({id:N.with(()=>r()),ref:N.with(()=>t(),u=>t(u))}),s=L(()=>Ye(o,i.props));var l=F(),a=E(l);{var c=u=>{var f=F(),h=E(f);ae(h,()=>e.child,()=>({props:m(s)})),C(u,f)},d=u=>{var f=CC();let h;var p=be(f);ae(p,()=>e.children??De),ge(f),Oe(()=>h=Ve(f,h,{...m(s)})),C(u,f)};Ee(a,u=>{e.child?u(c):u(d,!1)})}C(n,l),Y()}var TC=G("<div><div><!></div></div>"),AC=G("<!> <!>",1),EC=G("<div><div><!></div></div>"),PC=G("<!> <!>",1);function NC(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"loop",3,!0),i=y(e,"onInteractOutside",3,et),s=y(e,"onCloseAutoFocus",3,et),l=y(e,"onOpenAutoFocus",3,et),a=y(e,"preventScroll",3,!0),c=y(e,"onEscapeKeydown",3,et),d=y(e,"forceMount",3,!1),u=y(e,"trapFocus",3,!0),f=Te(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","preventScroll","onEscapeKeydown","forceMount","trapFocus"]);const h=wy({id:N.with(()=>t()),loop:N.with(()=>o()),ref:N.with(()=>r(),S=>r(S)),onCloseAutoFocus:N.with(()=>s())}),p=L(()=>Ye(f,h.props));function g(S){i()(S),!S.defaultPrevented&&h.parentMenu.onClose()}function v(S){c()(S),!S.defaultPrevented&&h.parentMenu.onClose()}function x(S){if("button"in S&&S.button===2){const A=S.target;return A?A.closest(`[${py}]`)!==h.parentMenu.triggerNode:!1}return!1}var b=F(),w=E(b);{var M=S=>{ny(S,le(()=>m(p),()=>h.popperProps,{side:"right",sideOffset:2,align:"start",get enabled(){return h.parentMenu.opts.open.current},get preventScroll(){return a()},onInteractOutside:g,onEscapeKeydown:v,get onOpenAutoFocus(){return l()},isValidEvent:x,get trapFocus(){return u()},get loop(){return o()},get id(){return t()},popper:(T,P)=>{let z=()=>P==null?void 0:P().props,W=()=>P==null?void 0:P().wrapperProps;var R=AC();const B=L(()=>Ye(z(),{style:nc("context-menu")}));var I=E(R);{var j=D=>{var q=F(),U=E(q),ie=Ie(()=>({props:m(B),wrapperProps:W(),...h.snippetProps}));ae(U,()=>e.child,()=>m(ie)),C(D,q)},H=D=>{var q=TC();let U;var ie=be(q);let oe;var ke=be(ie);ae(ke,()=>e.children??De),ge(ie),ge(q),Oe(()=>{U=Ve(q,U,{...W()}),oe=Ve(ie,oe,{...m(B)})}),C(D,q)};Ee(I,D=>{e.child?D(j):D(H,!1)})}var $=te(I,2);rc($,{get mounted(){return h.mounted},set mounted(D){h.mounted=D}}),C(T,R)},$$slots:{popper:!0}}))},k=(S,A)=>{{var T=P=>{ty(P,le(()=>m(p),()=>h.popperProps,{side:"right",sideOffset:2,align:"start",get present(){return h.parentMenu.opts.open.current},get preventScroll(){return a()},onInteractOutside:g,onEscapeKeydown:v,get onOpenAutoFocus(){return l()},isValidEvent:x,get trapFocus(){return u()},get loop(){return o()},get id(){return t()},popper:(W,R)=>{let B=()=>R==null?void 0:R().props,I=()=>R==null?void 0:R().wrapperProps;var j=PC();const H=L(()=>Ye(B(),{style:nc("context-menu")}));var $=E(j);{var D=ie=>{var oe=F(),ke=E(oe),K=Ie(()=>({props:m(H),wrapperProps:I(),...h.snippetProps}));ae(ke,()=>e.child,()=>m(K)),C(ie,oe)},q=ie=>{var oe=EC();let ke;var K=be(oe);let ee;var se=be(K);ae(se,()=>e.children??De),ge(K),ge(oe),Oe(()=>{ke=Ve(oe,ke,{...I()}),ee=Ve(K,ee,{...m(H)})}),C(ie,oe)};Ee($,ie=>{e.child?ie(D):ie(q,!1)})}var U=te($,2);rc(U,{get mounted(){return h.mounted},set mounted(ie){h.mounted=ie}}),C(W,j)},$$slots:{popper:!0}}))};Ee(S,P=>{d()||P(T)},A)}};Ee(w,S=>{d()?S(M):S(k,!1)})}C(n,b),Y()}var _C=G("<div><!></div>");function IC(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"disabled",3,!1),i=Te(e,["$$slots","$$events","$$legacy","id","ref","child","children","disabled"]);const s=bC({id:N.with(()=>t()),disabled:N.with(()=>o()),ref:N.with(()=>r(),d=>r(d))}),l=L(()=>Ye(i,s.props,{style:{pointerEvents:"auto"}}));var a=F(),c=E(a);X(c,()=>Qg,(d,u)=>{u(d,{get id(){return t()},get virtualEl(){return s.virtualElement},children:(f,h)=>{var p=F(),g=E(p);{var v=b=>{var w=F(),M=E(w);ae(M,()=>e.child,()=>({props:m(l)})),C(b,w)},x=b=>{var w=_C();let M;var k=be(w);ae(k,()=>e.children??De),ge(w),Oe(()=>M=Ve(w,M,{...m(l)})),C(b,w)};Ee(g,b=>{e.child?b(v):b(x,!1)})}C(f,p)},$$slots:{default:!0}})}),C(n,a),Y()}var DC=G("<div><!></div>");function RC(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"id",19,ft),o=Te(e,["$$slots","$$events","$$legacy","ref","id","child","children"]);const i=SC({id:N.with(()=>r()),ref:N.with(()=>t(),u=>t(u))}),s=L(()=>Ye(o,i.props));var l=F(),a=E(l);{var c=u=>{var f=F(),h=E(f);ae(h,()=>e.child,()=>({props:m(s)})),C(u,f)},d=u=>{var f=DC();let h;var p=be(f);ae(p,()=>e.children??De),ge(f),Oe(()=>h=Ve(f,h,{...m(s)})),C(u,f)};Ee(a,u=>{e.child?u(c):u(d,!1)})}C(n,l),Y()}function Sy(n,e){J(e,!0);let t=y(e,"open",15,!1),r=y(e,"onOpenChange",3,et);T1({variant:N.with(()=>"dialog"),open:N.with(()=>t(),s=>{t(s),r()(s)})});var o=F(),i=E(o);ae(i,()=>e.children??De),C(n,o),Y()}var zC=G("<button><!></button>");function LC(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"disabled",3,!1),i=Te(e,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const s=N1({variant:N.with(()=>"close"),id:N.with(()=>t()),ref:N.with(()=>r(),f=>r(f)),disabled:N.with(()=>!!o())}),l=L(()=>Ye(i,s.props));var a=F(),c=E(a);{var d=f=>{var h=F(),p=E(h);ae(p,()=>e.child,()=>({props:m(l)})),C(f,h)},u=f=>{var h=zC();let p;var g=be(h);ae(g,()=>e.children??De),ge(h),Oe(()=>p=Ve(h,p,{...m(l)})),C(f,h)};Ee(c,f=>{e.child?f(d):f(u,!1)})}C(n,a),Y()}var FC=G("<!> <!>",1),BC=G("<!> <div><!></div>",1);function ky(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"forceMount",3,!1),i=y(e,"onCloseAutoFocus",3,et),s=y(e,"onEscapeKeydown",3,et),l=y(e,"onInteractOutside",3,et),a=y(e,"trapFocus",3,!0),c=y(e,"preventScroll",3,!0),d=y(e,"restoreScrollDelay",3,null),u=Te(e,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const f=E1({id:N.with(()=>t()),ref:N.with(()=>r(),g=>r(g))}),h=L(()=>Ye(u,f.props)),p=L(()=>f.root.opts.open.current||o());Of(n,le(()=>m(h),{get forceMount(){return o()},get present(){return m(p)},presence:v=>{const x=L(()=>SS({forceMount:o(),present:f.root.opts.open.current,trapFocus:a(),open:f.root.opts.open.current}));Rg(v,le({loop:!0,get trapFocus(){return m(x)}},()=>m(h),{onCloseAutoFocus:w=>{var M;i()(w),!w.defaultPrevented&&((M=f.root.triggerNode)==null||M.focus())},focusScope:(w,M)=>{let k=()=>M==null?void 0:M().props;Mg(w,le(()=>m(h),{get enabled(){return f.root.opts.open.current},onEscapeKeydown:S=>{s()(S),!S.defaultPrevented&&f.root.handleClose()},children:(S,A)=>{kg(S,le(()=>m(h),{get enabled(){return f.root.opts.open.current},onInteractOutside:T=>{l()(T),!T.defaultPrevented&&f.root.handleClose()},children:(T,P)=>{Lg(T,le(()=>m(h),{get enabled(){return f.root.opts.open.current},children:(z,W)=>{var R=F(),B=E(R);{var I=H=>{var $=FC(),D=E($);{var q=oe=>{Za(oe,{get preventScroll(){return c()},get restoreScrollDelay(){return d()}})};Ee(D,oe=>{f.root.opts.open.current&&oe(q)})}var U=te(D,2),ie=Ie(()=>({props:Ye(m(h),k()),...f.snippetProps}));ae(U,()=>e.child,()=>m(ie)),C(H,$)},j=H=>{var $=BC(),D=E($);Za(D,{get preventScroll(){return c()}});var q=te(D,2);let U;var ie=be(q);ae(ie,()=>e.children??De),ge(q),Oe(oe=>U=Ve(q,U,{...oe}),[()=>Ye(m(h),k())]),C(H,$)};Ee(B,H=>{e.child?H(I):H(j,!1)})}C(z,R)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{focusScope:!0}}))},$$slots:{presence:!0}})),Y()}function VC(n,e){J(e,!0);let t=y(e,"open",15,!1),r=y(e,"dir",3,"ltr"),o=y(e,"onOpenChange",3,et),i=y(e,"_internal_variant",3,"dropdown-menu");const s=vy({variant:N.with(()=>i()),dir:N.with(()=>r()),onClose:()=>{t(!1),o()(!1)}});by(s,{open:N.with(()=>t(),l=>{t(l),o()(l)})}),Xg(n,{children:(l,a)=>{var c=F(),d=E(c);ae(d,()=>e.children??De),C(l,c)},$$slots:{default:!0}}),Y()}var HC=G("<div><div><!></div></div>"),WC=G("<!> <!>",1),KC=G("<div><div><!></div></div>"),jC=G("<!> <!>",1);function $C(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"loop",3,!0),i=y(e,"onInteractOutside",3,et),s=y(e,"onEscapeKeydown",3,et),l=y(e,"onCloseAutoFocus",3,et),a=y(e,"forceMount",3,!1),c=Te(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onEscapeKeydown","onCloseAutoFocus","forceMount"]);const d=wy({id:N.with(()=>t()),loop:N.with(()=>o()),ref:N.with(()=>r(),b=>r(b)),onCloseAutoFocus:N.with(()=>l())}),u=L(()=>Ye(c,d.props));function f(b){d.handleInteractOutside(b),!b.defaultPrevented&&(i()(b),!b.defaultPrevented&&d.parentMenu.onClose())}function h(b){s()(b),!b.defaultPrevented&&d.parentMenu.onClose()}var p=F(),g=E(p);{var v=b=>{ny(b,le(()=>m(u),()=>d.popperProps,{get enabled(){return d.parentMenu.opts.open.current},onInteractOutside:f,onEscapeKeydown:h,trapFocus:!0,get loop(){return o()},forceMount:!0,get id(){return t()},popper:(M,k)=>{let S=()=>k==null?void 0:k().props,A=()=>k==null?void 0:k().wrapperProps;var T=WC();const P=L(()=>Ye(S(),{style:nc("dropdown-menu")}));var z=E(T);{var W=I=>{var j=F(),H=E(j),$=Ie(()=>({props:m(P),wrapperProps:A(),...d.snippetProps}));ae(H,()=>e.child,()=>m($)),C(I,j)},R=I=>{var j=HC();let H;var $=be(j);let D;var q=be($);ae(q,()=>e.children??De),ge($),ge(j),Oe(()=>{H=Ve(j,H,{...A()}),D=Ve($,D,{...m(P)})}),C(I,j)};Ee(z,I=>{e.child?I(W):I(R,!1)})}var B=te(z,2);rc(B,{get mounted(){return d.mounted},set mounted(I){d.mounted=I}}),C(M,T)},$$slots:{popper:!0}}))},x=(b,w)=>{{var M=k=>{ty(k,le(()=>m(u),()=>d.popperProps,{get present(){return d.parentMenu.opts.open.current},onInteractOutside:f,onEscapeKeydown:h,trapFocus:!0,get loop(){return o()},forceMount:!1,get id(){return t()},popper:(A,T)=>{let P=()=>T==null?void 0:T().props,z=()=>T==null?void 0:T().wrapperProps;var W=jC();const R=L(()=>Ye(P(),{style:nc("dropdown-menu")}));var B=E(W);{var I=$=>{var D=F(),q=E(D),U=Ie(()=>({props:m(R),wrapperProps:z(),...d.snippetProps}));ae(q,()=>e.child,()=>m(U)),C($,D)},j=$=>{var D=KC();let q;var U=be(D);let ie;var oe=be(U);ae(oe,()=>e.children??De),ge(U),ge(D),Oe(()=>{q=Ve(D,q,{...z()}),ie=Ve(U,ie,{...m(R)})}),C($,D)};Ee(B,$=>{e.child?$(I):$(j,!1)})}var H=te(B,2);rc(H,{get mounted(){return d.mounted},set mounted($){d.mounted=$}}),C(A,W)},$$slots:{popper:!0}}))};Ee(b,k=>{a()||k(M)},w)}};Ee(g,b=>{a()?b(v):b(x,!1)})}C(n,p),Y()}var GC=G("<button><!></button>");function UC(n,e){J(e,!0);let t=y(e,"id",19,ft),r=y(e,"ref",15,null),o=y(e,"disabled",3,!1),i=y(e,"type",3,"button"),s=Te(e,["$$slots","$$events","$$legacy","id","ref","child","children","disabled","type"]);const l=vC({id:N.with(()=>t()),disabled:N.with(()=>o()??!1),ref:N.with(()=>r(),c=>r(c))}),a=L(()=>Ye(s,l.props,{type:i()}));Qg(n,{get id(){return t()},children:(c,d)=>{var u=F(),f=E(u);{var h=g=>{var v=F(),x=E(v);ae(x,()=>e.child,()=>({props:m(a)})),C(g,v)},p=g=>{var v=GC();let x;var b=be(v);ae(b,()=>e.children??De),ge(v),Oe(()=>x=Ve(v,x,{...m(a)})),C(g,v)};Ee(f,g=>{e.child?g(h):g(p,!1)})}C(c,u)},$$slots:{default:!0}}),Y()}let Ai=de(!1);const Sn=class Sn{constructor(){nt(()=>(Sn._refs===0&&(Sn._cleanup=lg(()=>{const e=[],t=o=>{_(Ai,!1)},r=o=>{_(Ai,!0)};return e.push(lt(document,"pointerdown",t,{capture:!0}),lt(document,"pointermove",t,{capture:!0}),lt(document,"keydown",r,{capture:!0})),lr(...e)})),Sn._refs++,()=>{var e;Sn._refs--,Sn._refs===0&&(_(Ai,!1),(e=Sn._cleanup)==null||e.call(Sn))}))}get current(){return m(Ai)}set current(e){_(Ai,e,!0)}};re(Sn,"_refs",0),re(Sn,"_cleanup");let wu=Sn;const Bf="-",qC=n=>{const e=YC(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const l=s.split(Bf);return l[0]===""&&l.length!==1&&l.shift(),My(l,e)||JC(s)},getConflictingClassGroupIds:(s,l)=>{const a=t[s]||[];return l&&r[s]?[...a,...r[s]]:a}}},My=(n,e)=>{var s;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),o=r?My(n.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=n.join(Bf);return(s=e.validators.find(({validator:l})=>l(i)))==null?void 0:s.classGroupId},bp=/^\[(.+)\]$/,JC=n=>{if(bp.test(n)){const e=bp.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},YC=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const o in t)xu(t[o],r,o,e);return r},xu=(n,e,t,r)=>{n.forEach(o=>{if(typeof o=="string"){const i=o===""?e:wp(e,o);i.classGroupId=t;return}if(typeof o=="function"){if(XC(o)){xu(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([i,s])=>{xu(s,wp(e,i),t,r)})})},wp=(n,e)=>{let t=n;return e.split(Bf).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},XC=n=>n.isThemeGetter,ZC=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(i,s)=>{t.set(i,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let s=t.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){t.has(i)?t.set(i,s):o(i,s)}}},Su="!",ku=":",QC=ku.length,eO=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=o=>{const i=[];let s=0,l=0,a=0,c;for(let p=0;p<o.length;p++){let g=o[p];if(s===0&&l===0){if(g===ku){i.push(o.slice(a,p)),a=p+QC;continue}if(g==="/"){c=p;continue}}g==="["?s++:g==="]"?s--:g==="("?l++:g===")"&&l--}const d=i.length===0?o:o.substring(a),u=tO(d),f=u!==d,h=c&&c>a?c-a:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:u,maybePostfixModifierPosition:h}};if(e){const o=e+ku,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const o=r;r=i=>t({className:i,parseClassName:o})}return r},tO=n=>n.endsWith(Su)?n.substring(0,n.length-1):n.startsWith(Su)?n.substring(1):n,nO=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||e[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},rO=n=>({cache:ZC(n.cacheSize),parseClassName:eO(n),sortModifiers:nO(n),...qC(n)}),oO=/\s+/,iO=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=e,s=[],l=n.trim().split(oO);let a="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{isExternal:u,modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:g}=t(d);if(u){a=d+(a.length>0?" "+a:a);continue}let v=!!g,x=r(v?p.substring(0,g):p);if(!x){if(!v){a=d+(a.length>0?" "+a:a);continue}if(x=r(p),!x){a=d+(a.length>0?" "+a:a);continue}v=!1}const b=i(f).join(":"),w=h?b+Su:b,M=w+x;if(s.includes(M))continue;s.push(M);const k=o(x,v);for(let S=0;S<k.length;++S){const A=k[S];s.push(w+A)}a=d+(a.length>0?" "+a:a)}return a};function sO(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Cy(e))&&(r&&(r+=" "),r+=t);return r}const Cy=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Cy(n[r]))&&(t&&(t+=" "),t+=e);return t};function lO(n,...e){let t,r,o,i=s;function s(a){const c=e.reduce((d,u)=>u(d),n());return t=rO(c),r=t.cache.get,o=t.cache.set,i=l,l(a)}function l(a){const c=r(a);if(c)return c;const d=iO(a,t);return o(a,d),d}return function(){return i(sO.apply(null,arguments))}}const Nt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Oy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ty=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aO=/^\d+\/\d+$/,cO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,To=n=>aO.test(n),$e=n=>!!n&&!Number.isNaN(Number(n)),br=n=>!!n&&Number.isInteger(Number(n)),Cd=n=>n.endsWith("%")&&$e(n.slice(0,-1)),Jn=n=>cO.test(n),pO=()=>!0,mO=n=>dO.test(n)&&!uO.test(n),Ay=()=>!1,gO=n=>fO.test(n),yO=n=>hO.test(n),vO=n=>!ye(n)&&!ve(n),bO=n=>yi(n,Ny,Ay),ye=n=>Oy.test(n),Yr=n=>yi(n,_y,mO),Od=n=>yi(n,MO,$e),xp=n=>yi(n,Ey,Ay),wO=n=>yi(n,Py,yO),fa=n=>yi(n,Iy,gO),ve=n=>Ty.test(n),Ei=n=>vi(n,_y),xO=n=>vi(n,CO),Sp=n=>vi(n,Ey),SO=n=>vi(n,Ny),kO=n=>vi(n,Py),ha=n=>vi(n,Iy,!0),yi=(n,e,t)=>{const r=Oy.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},vi=(n,e,t=!1)=>{const r=Ty.exec(n);return r?r[1]?e(r[1]):t:!1},Ey=n=>n==="position"||n==="percentage",Py=n=>n==="image"||n==="url",Ny=n=>n==="length"||n==="size"||n==="bg-size",_y=n=>n==="length",MO=n=>n==="number",CO=n=>n==="family-name",Iy=n=>n==="shadow",OO=()=>{const n=Nt("color"),e=Nt("font"),t=Nt("text"),r=Nt("font-weight"),o=Nt("tracking"),i=Nt("leading"),s=Nt("breakpoint"),l=Nt("container"),a=Nt("spacing"),c=Nt("radius"),d=Nt("shadow"),u=Nt("inset-shadow"),f=Nt("text-shadow"),h=Nt("drop-shadow"),p=Nt("blur"),g=Nt("perspective"),v=Nt("aspect"),x=Nt("ease"),b=Nt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...M(),ve,ye],S=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],T=()=>[ve,ye,a],P=()=>[To,"full","auto",...T()],z=()=>[br,"none","subgrid",ve,ye],W=()=>["auto",{span:["full",br,ve,ye]},br,ve,ye],R=()=>[br,"auto",ve,ye],B=()=>["auto","min","max","fr",ve,ye],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],j=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...T()],$=()=>[To,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],D=()=>[n,ve,ye],q=()=>[...M(),Sp,xp,{position:[ve,ye]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ie=()=>["auto","cover","contain",SO,bO,{size:[ve,ye]}],oe=()=>[Cd,Ei,Yr],ke=()=>["","none","full",c,ve,ye],K=()=>["",$e,Ei,Yr],ee=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>[$e,Cd,Sp,xp],ce=()=>["","none",p,ve,ye],pe=()=>["none",$e,ve,ye],Re=()=>["none",$e,ve,ye],Me=()=>[$e,ve,ye],ne=()=>[To,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Jn],breakpoint:[Jn],color:[pO],container:[Jn],"drop-shadow":[Jn],ease:["in","out","in-out"],font:[vO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Jn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Jn],shadow:[Jn],spacing:["px",$e],text:[Jn],"text-shadow":[Jn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",To,ye,ve,v]}],container:["container"],columns:[{columns:[$e,ye,ve,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[br,"auto",ve,ye]}],basis:[{basis:[To,"full","auto",l,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$e,To,"auto","initial","none",ye]}],grow:[{grow:["",$e,ve,ye]}],shrink:[{shrink:["",$e,ve,ye]}],order:[{order:[br,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...j(),"normal"]}],"justify-self":[{"justify-self":["auto",...j()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...j(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...j(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...j(),"baseline"]}],"place-self":[{"place-self":["auto",...j()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[l,"screen",...$()]}],"min-w":[{"min-w":[l,"screen","none",...$()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[s]},...$()]}],h:[{h:["screen",...$()]}],"min-h":[{"min-h":["screen","none",...$()]}],"max-h":[{"max-h":["screen",...$()]}],"font-size":[{text:["base",t,Ei,Yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,Od]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cd,ye]}],"font-family":[{font:[xO,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ve,ye]}],"line-clamp":[{"line-clamp":[$e,"none",ve,Od]}],leading:[{leading:[i,...T()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:D()}],"text-color":[{text:D()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[$e,"from-font","auto",ve,Yr]}],"text-decoration-color":[{decoration:D()}],"underline-offset":[{"underline-offset":[$e,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:ie()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},br,ve,ye],radial:["",ve,ye],conic:[br,ve,ye]},kO,wO]}],"bg-color":[{bg:D()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:D()}],"gradient-via":[{via:D()}],"gradient-to":[{to:D()}],rounded:[{rounded:ke()}],"rounded-s":[{"rounded-s":ke()}],"rounded-e":[{"rounded-e":ke()}],"rounded-t":[{"rounded-t":ke()}],"rounded-r":[{"rounded-r":ke()}],"rounded-b":[{"rounded-b":ke()}],"rounded-l":[{"rounded-l":ke()}],"rounded-ss":[{"rounded-ss":ke()}],"rounded-se":[{"rounded-se":ke()}],"rounded-ee":[{"rounded-ee":ke()}],"rounded-es":[{"rounded-es":ke()}],"rounded-tl":[{"rounded-tl":ke()}],"rounded-tr":[{"rounded-tr":ke()}],"rounded-br":[{"rounded-br":ke()}],"rounded-bl":[{"rounded-bl":ke()}],"border-w":[{border:K()}],"border-w-x":[{"border-x":K()}],"border-w-y":[{"border-y":K()}],"border-w-s":[{"border-s":K()}],"border-w-e":[{"border-e":K()}],"border-w-t":[{"border-t":K()}],"border-w-r":[{"border-r":K()}],"border-w-b":[{"border-b":K()}],"border-w-l":[{"border-l":K()}],"divide-x":[{"divide-x":K()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":K()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:D()}],"border-color-x":[{"border-x":D()}],"border-color-y":[{"border-y":D()}],"border-color-s":[{"border-s":D()}],"border-color-e":[{"border-e":D()}],"border-color-t":[{"border-t":D()}],"border-color-r":[{"border-r":D()}],"border-color-b":[{"border-b":D()}],"border-color-l":[{"border-l":D()}],"divide-color":[{divide:D()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$e,ve,ye]}],"outline-w":[{outline:["",$e,Ei,Yr]}],"outline-color":[{outline:D()}],shadow:[{shadow:["","none",d,ha,fa]}],"shadow-color":[{shadow:D()}],"inset-shadow":[{"inset-shadow":["none",u,ha,fa]}],"inset-shadow-color":[{"inset-shadow":D()}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:D()}],"ring-offset-w":[{"ring-offset":[$e,Yr]}],"ring-offset-color":[{"ring-offset":D()}],"inset-ring-w":[{"inset-ring":K()}],"inset-ring-color":[{"inset-ring":D()}],"text-shadow":[{"text-shadow":["none",f,ha,fa]}],"text-shadow-color":[{"text-shadow":D()}],opacity:[{opacity:[$e,ve,ye]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$e]}],"mask-image-linear-from-pos":[{"mask-linear-from":Q()}],"mask-image-linear-to-pos":[{"mask-linear-to":Q()}],"mask-image-linear-from-color":[{"mask-linear-from":D()}],"mask-image-linear-to-color":[{"mask-linear-to":D()}],"mask-image-t-from-pos":[{"mask-t-from":Q()}],"mask-image-t-to-pos":[{"mask-t-to":Q()}],"mask-image-t-from-color":[{"mask-t-from":D()}],"mask-image-t-to-color":[{"mask-t-to":D()}],"mask-image-r-from-pos":[{"mask-r-from":Q()}],"mask-image-r-to-pos":[{"mask-r-to":Q()}],"mask-image-r-from-color":[{"mask-r-from":D()}],"mask-image-r-to-color":[{"mask-r-to":D()}],"mask-image-b-from-pos":[{"mask-b-from":Q()}],"mask-image-b-to-pos":[{"mask-b-to":Q()}],"mask-image-b-from-color":[{"mask-b-from":D()}],"mask-image-b-to-color":[{"mask-b-to":D()}],"mask-image-l-from-pos":[{"mask-l-from":Q()}],"mask-image-l-to-pos":[{"mask-l-to":Q()}],"mask-image-l-from-color":[{"mask-l-from":D()}],"mask-image-l-to-color":[{"mask-l-to":D()}],"mask-image-x-from-pos":[{"mask-x-from":Q()}],"mask-image-x-to-pos":[{"mask-x-to":Q()}],"mask-image-x-from-color":[{"mask-x-from":D()}],"mask-image-x-to-color":[{"mask-x-to":D()}],"mask-image-y-from-pos":[{"mask-y-from":Q()}],"mask-image-y-to-pos":[{"mask-y-to":Q()}],"mask-image-y-from-color":[{"mask-y-from":D()}],"mask-image-y-to-color":[{"mask-y-to":D()}],"mask-image-radial":[{"mask-radial":[ve,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Q()}],"mask-image-radial-to-pos":[{"mask-radial-to":Q()}],"mask-image-radial-from-color":[{"mask-radial-from":D()}],"mask-image-radial-to-color":[{"mask-radial-to":D()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[$e]}],"mask-image-conic-from-pos":[{"mask-conic-from":Q()}],"mask-image-conic-to-pos":[{"mask-conic-to":Q()}],"mask-image-conic-from-color":[{"mask-conic-from":D()}],"mask-image-conic-to-color":[{"mask-conic-to":D()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:ie()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ve,ye]}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:ce()}],brightness:[{brightness:[$e,ve,ye]}],contrast:[{contrast:[$e,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",h,ha,fa]}],"drop-shadow-color":[{"drop-shadow":D()}],grayscale:[{grayscale:["",$e,ve,ye]}],"hue-rotate":[{"hue-rotate":[$e,ve,ye]}],invert:[{invert:["",$e,ve,ye]}],saturate:[{saturate:[$e,ve,ye]}],sepia:[{sepia:["",$e,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[$e,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[$e,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$e,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$e,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",$e,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[$e,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[$e,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",$e,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$e,"initial",ve,ye]}],ease:[{ease:["linear","initial",x,ve,ye]}],delay:[{delay:[$e,ve,ye]}],animate:[{animate:["none",b,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,ve,ye]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:Re()}],"scale-x":[{"scale-x":Re()}],"scale-y":[{"scale-y":Re()}],"scale-z":[{"scale-z":Re()}],"scale-3d":["scale-3d"],skew:[{skew:Me()}],"skew-x":[{"skew-x":Me()}],"skew-y":[{"skew-y":Me()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ne()}],"translate-x":[{"translate-x":ne()}],"translate-y":[{"translate-y":ne()}],"translate-z":[{"translate-z":ne()}],"translate-none":["translate-none"],accent:[{accent:D()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:D()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...D()]}],"stroke-w":[{stroke:[$e,Ei,Yr,Od]}],stroke:[{stroke:["none",...D()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TO=lO(OO);function pt(...n){return TO(Na(n))}function AO(n,e){J(e,!0);let t=y(e,"value",15,""),r=y(e,"ref",15,null),o=Te(e,["$$slots","$$events","$$legacy","value","ref","class"]);var i=F(),s=E(i);const l=L(()=>pt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e.class));X(s,()=>MM,(a,c)=>{c(a,le({get class(){return m(l)}},()=>o,{get ref(){return r()},set ref(d){r(d)},get value(){return t()},set value(d){t(d)}}))}),C(n,i),Y()}function EO(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var o=F(),i=E(o);const s=L(()=>pt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",e.class));X(i,()=>Fg,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}/**
 * @license @lucide/svelte v0.501.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const PO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var NO=Tn("<svg><!><!></svg>");function Dy(n,e){J(e,!0);const t=y(e,"color",3,"currentColor"),r=y(e,"size",3,24),o=y(e,"strokeWidth",3,2),i=y(e,"absoluteStrokeWidth",3,!1),s=y(e,"iconNode",19,()=>[]),l=Te(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var a=NO();let c;var d=be(a);Hn(d,17,s,Gi,(f,h)=>{let p=()=>m(h)[0],g=()=>m(h)[1];var v=F(),x=E(v);yf(x,p,!0,(b,w)=>{let M;Oe(()=>M=Ve(b,M,{...g()}))}),C(f,v)});var u=te(d);ae(u,()=>e.children??De),ge(a),Oe(f=>c=Ve(a,c,{...PO,...l,width:r(),height:r(),stroke:t(),"stroke-width":f,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>i()?Number(o())*24/Number(r()):o()]),C(n,a),Y()}function _O(n,e){J(e,!0);let t=Te(e,["$$slots","$$events","$$legacy"]);Dy(n,le({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(o,i)=>{var s=F(),l=E(s);ae(l,()=>e.children??De),C(o,s)},$$slots:{default:!0}})),Y()}var IO=G('<!> <span class="sr-only">Close</span>',1),DO=G("<!> <!>",1),RO=G("<!> <!>",1);function zO(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var o=F(),i=E(o);X(i,()=>FO,(s,l)=>{l(s,le(()=>e.portalProps,{children:(a,c)=>{var d=RO(),u=E(d);X(u,()=>EO,(p,g)=>{g(p,{})});var f=te(u,2);const h=L(()=>pt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e.class));X(f,()=>ky,(p,g)=>{g(p,le({get class(){return m(h)}},()=>r,{get ref(){return t()},set ref(v){t(v)},children:(v,x)=>{var b=DO(),w=E(b);ae(w,()=>e.children??De);var M=te(w,2);X(M,()=>LC,(k,S)=>{S(k,{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(A,T)=>{var P=IO(),z=E(P);_O(z,{class:"size-4"}),vt(2),C(A,P)},$$slots:{default:!0}})}),C(v,b)},$$slots:{default:!0}}))}),C(a,d)},$$slots:{default:!0}}))}),C(n,o),Y()}const LO=Sy,FO=Gc;function BO(n,e){J(e,!0);let t=y(e,"open",15,!1),r=y(e,"ref",15,null),o=y(e,"value",15,""),i=Te(e,["$$slots","$$events","$$legacy","open","ref","value","portalProps","children"]);var s=F(),l=E(s);X(l,()=>LO,(a,c)=>{c(a,le(()=>i,{get open(){return t()},set open(d){t(d)},children:(d,u)=>{var f=F(),h=E(f);X(h,()=>zO,(p,g)=>{g(p,{class:"overflow-hidden p-0",get portalProps(){return e.portalProps},children:(v,x)=>{AO(v,le({class:"[&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group]:not([hidden])_~[data-cmdk-group]]:pt-0 [&_[data-cmdk-group]]:px-2 [&_[data-cmdk-input-wrapper]_svg]:h-5 [&_[data-cmdk-input-wrapper]_svg]:w-5 [&_[data-cmdk-input]]:h-12 [&_[data-cmdk-item]]:px-2 [&_[data-cmdk-item]]:py-3 [&_[data-cmdk-item]_svg]:h-5 [&_[data-cmdk-item]_svg]:w-5"},()=>i,{get children(){return e.children},get value(){return o()},set value(b){o(b)},get ref(){return r()},set ref(b){r(b)}}))},$$slots:{default:!0}})}),C(d,f)},$$slots:{default:!0}}))}),C(n,s),Y()}function VO(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var o=F(),i=E(o);const s=L(()=>pt("py-6 text-center text-sm",e.class));X(i,()=>OM,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}var HO=G("<!> <!>",1);function kp(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","children","heading"]);var o=F(),i=E(o);const s=L(()=>pt("text-foreground overflow-hidden p-1",e.class));X(i,()=>AM,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)},children:(c,d)=>{var u=HO(),f=E(u);{var h=g=>{var v=F(),x=E(v);X(x,()=>PM,(b,w)=>{w(b,{class:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:(M,k)=>{vt();var S=tf();Oe(()=>nf(S,e.heading)),C(M,S)},$$slots:{default:!0}})}),C(g,v)};Ee(f,g=>{e.heading&&g(h)})}var p=te(f,2);X(p,()=>IM,(g,v)=>{v(g,{get children(){return e.children}})}),C(c,u)},$$slots:{default:!0}}))}),C(n,o),Y()}function Pi(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var o=F(),i=E(o);const s=L(()=>pt("aria-selected:bg-accent aria-selected:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e.class));X(i,()=>FM,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}function WO(n,e){J(e,!0);let t=Te(e,["$$slots","$$events","$$legacy"]);Dy(n,le({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,i)=>{var s=F(),l=E(s);ae(l,()=>e.children??De),C(o,s)},$$slots:{default:!0}})),Y()}var KO=G('<div class="flex items-center border-b px-3" data-command-input-wrapper=""><!> <!></div>');function jO(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"value",15,""),o=Te(e,["$$slots","$$events","$$legacy","ref","class","value"]);var i=KO(),s=be(i);WO(s,{class:"mr-2 size-4 shrink-0 opacity-50"});var l=te(s,2);const a=L(()=>pt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-base outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class));X(l,()=>RM,(c,d)=>{d(c,le({get class(){return m(a)}},()=>o,{get ref(){return t()},set ref(u){t(u)},get value(){return r()},set value(u){r(u)}}))}),ge(i),C(n,i),Y()}function $O(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var o=F(),i=E(o);const s=L(()=>pt("max-h-[300px] overflow-y-auto overflow-x-hidden",e.class));X(i,()=>VM,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}const zi=pi(!1);function Ry(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"loadingStatus",15,"loading"),o=Te(e,["$$slots","$$events","$$legacy","class","ref","loadingStatus"]);var i=F(),s=E(i);const l=L(()=>pt("relative flex size-10 shrink-0 overflow-hidden rounded-full",e.class));X(s,()=>IS,(a,c)=>{c(a,le({get class(){return m(l)}},()=>o,{get loadingStatus(){return r()},set loadingStatus(d){r(d)},get ref(){return t()},set ref(d){t(d)}}))}),C(n,i),Y()}function zy(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","class","src","alt","ref"]);var o=F(),i=E(o);const s=L(()=>pt("aspect-square size-full",e.class));X(i,()=>RS,(l,a)=>{a(l,le({get src(){return e.src},get alt(){return e.alt},get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}var GO=G("<div><!></div>");function ea(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=GO();let i;var s=be(o);ae(s,()=>e.children??De),ge(o),tn(o,l=>t(l),()=>t()),Oe(l=>i=Ve(o,i,{class:l,...r}),[()=>pt("bg-card text-card-foreground rounded-xl border shadow",e.class)]),C(n,o),Y()}var UO=G("<div><!></div>");function ta(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","children"]);var o=UO();let i;var s=be(o);ae(s,()=>e.children??De),ge(o),tn(o,l=>t(l),()=>t()),Oe(l=>i=Ve(o,i,{class:l,...r}),[()=>pt("p-6",e.class)]),C(n,o),Y()}function oc(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var o=F(),i=E(o);const s=L(()=>pt("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.inset&&"pl-8",e.class));X(i,()=>xy,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}function qO(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","portalProps"]);var o=F(),i=E(o);X(i,()=>Gc,(s,l)=>{l(s,le(()=>e.portalProps,{children:(a,c)=>{var d=F(),u=E(d);const f=L(()=>pt("bg-popover text-popover-foreground z-50 min-w-[8rem] rounded-md border p-1 shadow-md focus:outline-none",e.class));X(u,()=>NC,(h,p)=>{p(h,le({get class(){return m(f)}},()=>r,{get ref(){return t()},set ref(g){t(g)}}))}),C(a,d)},$$slots:{default:!0}}))}),C(n,o),Y()}function JO(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var o=F(),i=E(o);const s=L(()=>pt("bg-border -mx-1 my-1 h-px",e.class));X(i,()=>RC,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}const na=kC,ra=IC;/**
 * @license lucide-svelte v0.501.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const YO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var XO=Tn("<svg><!><!></svg>");function rt(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),r=Ue(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);J(e,!1);let o=y(e,"name",8,void 0),i=y(e,"color",8,"currentColor"),s=y(e,"size",8,24),l=y(e,"strokeWidth",8,2),a=y(e,"absoluteStrokeWidth",8,!1),c=y(e,"iconNode",24,()=>[]);const d=(...g)=>g.filter((v,x,b)=>!!v&&b.indexOf(v)===x).join(" ");yt();var u=XO();let f;var h=be(u);Hn(h,1,c,Gi,(g,v)=>{let x=()=>m(v)[0],b=()=>m(v)[1];var w=F(),M=E(w);yf(M,x,!0,(k,S)=>{let A;Oe(()=>A=Ve(k,A,{...b()}))}),C(g,w)});var p=te(h);je(p,e,"default",{}),ge(u),Oe((g,v)=>f=Ve(u,f,{...YO,...r,width:s(),height:s(),stroke:i(),"stroke-width":g,class:v}),[()=>a()?Number(l())*24/Number(s()):l(),()=>d("lucide-icon","lucide",o()?`lucide-${o()}`:"",t.class)],Ie),C(n,u),Y()}function ZO(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"align-center"},()=>t,{iconNode:[["path",{d:"M17 12H7"}],["path",{d:"M19 18H5"}],["path",{d:"M21 6H3"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function QO(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"align-justify"},()=>t,{iconNode:[["path",{d:"M3 12h18"}],["path",{d:"M3 18h18"}],["path",{d:"M3 6h18"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function eT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"align-left"},()=>t,{iconNode:[["path",{d:"M15 12H3"}],["path",{d:"M17 18H3"}],["path",{d:"M21 6H3"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function tT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"align-right"},()=>t,{iconNode:[["path",{d:"M21 12H9"}],["path",{d:"M21 18H7"}],["path",{d:"M21 6H3"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function Mp(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"ban"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m4.9 4.9 14.2 14.2"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function nT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"bold"},()=>t,{iconNode:[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function rT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"command"},()=>t,{iconNode:[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function oT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"cuboid"},()=>t,{iconNode:[["path",{d:"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z"}],["path",{d:"M10 22v-8L2.25 9.15"}],["path",{d:"m10 14 11.77-6.87"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function iT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"download"},()=>t,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function sT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"feather"},()=>t,{iconNode:[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z"}],["path",{d:"M16 8 2 22"}],["path",{d:"M17.5 15H9"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function lT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"heading-1"},()=>t,{iconNode:[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"m17 12 3-2v8"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function aT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"heading-2"},()=>t,{iconNode:[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function cT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"heading-3"},()=>t,{iconNode:[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function dT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"heading-4"},()=>t,{iconNode:[["path",{d:"M12 18V6"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3"}],["path",{d:"M21 10v8"}],["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function uT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"heading"},()=>t,{iconNode:[["path",{d:"M6 12h12"}],["path",{d:"M6 20V4"}],["path",{d:"M18 20V4"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function fT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"highlighter"},()=>t,{iconNode:[["path",{d:"m9 11-6 6v3h9l3-3"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function Ly(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"image"},()=>t,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function hT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"italic"},()=>t,{iconNode:[["line",{x1:"19",x2:"10",y1:"4",y2:"4"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function pT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"list-ordered"},()=>t,{iconNode:[["path",{d:"M10 12h11"}],["path",{d:"M10 18h11"}],["path",{d:"M10 6h11"}],["path",{d:"M4 10h2"}],["path",{d:"M4 6h1v4"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function mT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"list-todo"},()=>t,{iconNode:[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1"}],["path",{d:"m3 17 2 2 4-4"}],["path",{d:"M13 6h8"}],["path",{d:"M13 12h8"}],["path",{d:"M13 18h8"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function Cp(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"list"},()=>t,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function gT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"lock-open"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function Fy(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function yT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"palette"},()=>t,{iconNode:[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function By(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"pin"},()=>t,{iconNode:[["path",{d:"M12 17v5"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function vT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"quote"},()=>t,{iconNode:[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function bT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"ruler"},()=>t,{iconNode:[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"}],["path",{d:"m14.5 12.5 2-2"}],["path",{d:"m11.5 9.5 2-2"}],["path",{d:"m8.5 6.5 2-2"}],["path",{d:"m17.5 15.5 2-2"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function wT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function xT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function ST(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"strikethrough"},()=>t,{iconNode:[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}function kT(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]);rt(n,le({name:"underline"},()=>t,{iconNode:[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20"}]],children:(o,i)=>{var s=F(),l=E(s);je(l,e,"default",{}),C(o,s)},$$slots:{default:!0}}))}var MT=G("<!> <!>",1),CT=G("<!> Snap Size",1),OT=G("<!> Snap Position",1),TT=G("<!> <!> <!>",1);function oa(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(po,"$nodes",t);let i=y(e,"id",3,""),{updateNode:s}=ko();var l=F(),a=E(l);X(a,()=>qO,(c,d)=>{d(c,{class:"backdrop-blur-md backdrop-filter bg-clip-padding bg-black/80",children:(u,f)=>{var h=TT(),p=E(h);{var g=b=>{var w=MT(),M=E(w);ae(M,()=>e.children??De);var k=te(M,2);X(k,()=>JO,(S,A)=>{A(S,{})}),C(b,w)};Ee(p,b=>{e.children&&b(g)})}var v=te(p,2);X(v,()=>oc,(b,w)=>{w(b,{onclick:()=>{let M=o().find(k=>k.id==i());s(i(),{width:Math.round(M.width/25)*25,height:Math.round(M.height/25)*25})},children:(M,k)=>{var S=CT(),A=E(S);bT(A,{class:"mr-2 size-4"}),vt(),C(M,S)},$$slots:{default:!0}})});var x=te(v,2);X(x,()=>oc,(b,w)=>{w(b,{onclick:()=>{let M=o().find(k=>k.id==i());s(i(),{position:{x:Math.round(M.position.x/25)*25,y:Math.round(M.position.y/25)*25}})},children:(M,k)=>{var S=OT(),A=E(S);By(A,{class:"mr-2 size-4"}),vt(),C(M,S)},$$slots:{default:!0}})}),C(u,h)},$$slots:{default:!0}})}),C(n,l),Y(),r()}function AT(n,e,t){if(!m(e).files||!m(e).files[0])return;const r=new FileReader;r.addEventListener("load",o=>_(t,o.target.result,!0)),r.readAsDataURL(m(e).files[0])}var ET=G('<div class="p-0.5 w-full h-full flex"><!></div>'),PT=G("<!> Change Image",1),NT=G("<!> <!>",1),_T=G('<!> <!> <input type="file" class="hidden" accept="image/*">',1);function IT(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(yn,"$lock",t);let i=de(void 0),{updateNodeData:s}=ko(),l=de(Ft(e.data.img||"https://github.com/shadcn.png"));nt(()=>{s(e.id,{img:m(l)})});var a=_T(),c=E(a);const d=L(()=>e.selected&&!o());Ul(c,{get isVisible(){return m(d)},keepAspectRatio:!0,minHeight:50,minWidth:50});var u=te(c,2);X(u,()=>na,(h,p)=>{p(h,{children:(g,v)=>{var x=NT(),b=E(x);X(b,()=>ra,(M,k)=>{k(M,{class:"size-full",children:(S,A)=>{var T=ET(),P=be(T);X(P,()=>ea,(z,W)=>{W(z,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(R,B)=>{var I=F(),j=E(I);X(j,()=>ta,(H,$)=>{$(H,{class:"p-0.5 h-full",children:(D,q)=>{var U=F(),ie=E(U);X(ie,()=>Ry,(oe,ke)=>{ke(oe,{class:"size-full",children:(K,ee)=>{var se=F(),Q=E(se);X(Q,()=>zy,(ce,pe)=>{pe(ce,{get src(){return m(l)}})}),C(K,se)},$$slots:{default:!0}})}),C(D,U)},$$slots:{default:!0}})}),C(R,I)},$$slots:{default:!0}})}),ge(T),C(S,T)},$$slots:{default:!0}})});var w=te(b,2);oa(w,{get id(){return e.id},children:(M,k)=>{var S=F(),A=E(S);X(A,()=>oc,(T,P)=>{P(T,{onclick:()=>{o()||m(i).click()},children:(z,W)=>{var R=PT(),B=E(R);Ly(B,{class:"mr-2 size-4"}),vt(),C(z,R)},$$slots:{default:!0}})}),C(M,S)},$$slots:{default:!0}}),C(g,x)},$$slots:{default:!0}})});var f=te(u,2);f.__change=[AT,i,l],tn(f,h=>_(i,h),()=>m(i)),C(n,a),Y(),r()}rf(["change"]);function DT(n,e,t){if(!m(e).files||!m(e).files[0])return;const r=new FileReader;r.addEventListener("load",o=>_(t,o.target.result,!0)),r.readAsDataURL(m(e).files[0])}var RT=G('<div class="p-0.5 w-full h-full flex"><!></div>'),zT=G("<!> Change Image",1),LT=G("<!> <!>",1),FT=G('<!> <!> <input type="file" class="hidden" accept="image/*">',1);function BT(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(yn,"$lock",t);let i=de(void 0),{updateNodeData:s}=ko(),l=de(Ft(e.data.img||"https://github.com/shadcn.png"));nt(()=>{s(e.id,{img:m(l)})});var a=FT(),c=E(a);const d=L(()=>e.selected&&!o());Ul(c,{get isVisible(){return m(d)},minHeight:50,minWidth:50});var u=te(c,2);X(u,()=>na,(h,p)=>{p(h,{children:(g,v)=>{var x=LT(),b=E(x);X(b,()=>ra,(M,k)=>{k(M,{class:"size-full",children:(S,A)=>{var T=RT(),P=be(T);X(P,()=>ea,(z,W)=>{W(z,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(R,B)=>{var I=F(),j=E(I);X(j,()=>ta,(H,$)=>{$(H,{class:"p-0.5 h-full",children:(D,q)=>{var U=F(),ie=E(U);X(ie,()=>Ry,(oe,ke)=>{ke(oe,{class:"size-full rounded-md",children:(K,ee)=>{var se=F(),Q=E(se);X(Q,()=>zy,(ce,pe)=>{pe(ce,{get src(){return m(l)}})}),C(K,se)},$$slots:{default:!0}})}),C(D,U)},$$slots:{default:!0}})}),C(R,I)},$$slots:{default:!0}})}),ge(T),C(S,T)},$$slots:{default:!0}})});var w=te(b,2);oa(w,{get id(){return e.id},children:(M,k)=>{var S=F(),A=E(S);X(A,()=>oc,(T,P)=>{P(T,{onclick:()=>{o()||m(i).click()},children:(z,W)=>{var R=zT(),B=E(R);Ly(B,{class:"mr-2 size-4"}),vt(),C(z,R)},$$slots:{default:!0}})}),C(M,S)},$$slots:{default:!0}}),C(g,x)},$$slots:{default:!0}})});var f=te(u,2);f.__change=[DT,i,l],tn(f,h=>_(i,h),()=>m(i)),C(n,a),Y(),r()}rf(["change"]);function Mu(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"orientation",3,"horizontal"),o=Te(e,["$$slots","$$events","$$legacy","ref","class","orientation"]);var i=F(),s=E(i);const l=L(()=>pt("bg-border shrink-0",r()==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",e.class));X(s,()=>jk,(a,c)=>{c(a,le({get class(){return m(l)},get orientation(){return r()}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),C(n,i),Y()}var VT=G("<input>"),HT=G("<input>");function Fa(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"value",15),o=y(e,"files",15),i=Te(e,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var s=F(),l=E(s);{var a=d=>{var u=VT();ru(u);let f;tn(u,h=>t(h),()=>t()),Oe(h=>f=Ve(u,f,{class:h,type:"file",...i}),[()=>pt("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),x0(u,o),ou(u,r),C(d,u)},c=d=>{var u=HT();ru(u);let f;tn(u,h=>t(h),()=>t()),Oe(h=>f=Ve(u,f,{class:h,type:e.type,...i}),[()=>pt("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),ou(u,r),C(d,u)};Ee(l,d=>{e.type==="file"?d(a):d(c,!1)})}C(n,s),Y()}var WT=G("<!> <!> <!> <!>",1),KT=G('<div class="p-0.5 w-full h-full flex"><!></div>'),jT=G("<!> <!>",1),$T=G("<!> <!>",1);function GT(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(yn,"$lock",t);let{updateNodeData:i}=ko(),s=de(Ft(e.data.name||"STR")),l=de(Ft(e.data.stat||0)),a=de(Ft(e.data.mod||0));nt(()=>{i(e.id,{name:m(s),stat:m(l),mod:m(a)})});var c=$T(),d=E(c);const u=L(()=>e.selected&&!o());Ul(d,{get isVisible(){return m(u)},minHeight:150,minWidth:100});var f=te(d,2);X(f,()=>na,(h,p)=>{p(h,{children:(g,v)=>{var x=jT(),b=E(x);X(b,()=>ra,(M,k)=>{k(M,{class:"size-full",children:(S,A)=>{var T=KT(),P=be(T);X(P,()=>ea,(z,W)=>{W(z,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(R,B)=>{var I=F(),j=E(I);X(j,()=>ta,(H,$)=>{$(H,{class:"p-0.5 h-full flex flex-col",children:(D,q)=>{var U=WT(),ie=E(U);Fa(ie,{class:"border-0 text-center !p-0 my-1 disabled:opacity-100",get disabled(){return o()},get value(){return m(s)},set value(ee){_(s,ee,!0)}});var oe=te(ie,2);Mu(oe,{class:"w-[calc(100%_-_10px)] mx-auto"});var ke=te(oe,2);Fa(ke,{class:"border-0 text-center !text-2xl h-10 my-auto font-bold p-0 disabled:opacity-100",get disabled(){return o()},get value(){return m(l)},set value(ee){_(l,ee,!0)}});var K=te(ke,2);Fa(K,{class:"border-0 text-center font-thin p-0 disabled:opacity-100",get disabled(){return o()},get value(){return m(a)},set value(ee){_(a,ee,!0)}}),C(D,U)},$$slots:{default:!0}})}),C(R,I)},$$slots:{default:!0}})}),ge(T),C(S,T)},$$slots:{default:!0}})});var w=te(b,2);oa(w,{get id(){return e.id}}),C(g,x)},$$slots:{default:!0}})}),C(n,c),Y(),r()}function Ct(){}const mt={DURATION:.5,EASE:[.32,.72,0,1]},Vy=.4,UT=.25,qT=100,Hy=8,pa=16,Cu=26,Td="vaul-dragging",Wy=new WeakMap;function _t(n,e,t=!1){if(!n||!(n instanceof HTMLElement))return;let r={};Object.entries(e).forEach(([o,i])=>{if(o.startsWith("--")){n.style.setProperty(o,i);return}r[o]=n.style[o],n.style[o]=i}),!t&&Wy.set(n,r)}function JT(n,e){if(!n||!(n instanceof HTMLElement))return;let t=Wy.get(n);t&&(n.style[e]=t[e])}const Ot=n=>{switch(n){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return n}};function ma(n,e){if(!n)return null;const t=window.getComputedStyle(n),r=t.transform||t.webkitTransform||t.mozTransform;let o=r.match(/^matrix3d\((.+)\)$/);return o?parseFloat(o[1].split(", ")[Ot(e)?13:12]):(o=r.match(/^matrix\((.+)\)$/),o?parseFloat(o[1].split(", ")[Ot(e)?5:4]):null)}function YT(n){return 8*(Math.log(n+1)-2)}function Ad(n,e){if(!n)return()=>{};const t=n.style.cssText;return Object.assign(n.style,e),()=>{n.style.cssText=t}}function XT(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function ZT({snapPoints:n,drawerNode:e,overlayNode:t,fadeFromIndex:r,setOpenTime:o,direction:i,container:s,snapToSequentialPoint:l,activeSnapPoint:a,open:c,isReleasing:d}){let u=de(Ft(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0));Dn(()=>{function S(){_(u,{innerWidth:window.innerWidth,innerHeight:window.innerHeight},!0)}return lt(window,"resize",S)});const f=L(()=>{var S;return a.current===((S=n.current)==null?void 0:S[n.current.length-1])||null}),h=L(()=>{var S;return(S=n.current)==null?void 0:S.findIndex(A=>A===a.current)}),p=L(()=>n.current&&n.current.length>0&&(r.current||r.current===0)&&!Number.isNaN(r.current)&&n.current[r.current]===a.current||!n.current),g=L(()=>{var A;c.current;const S=s.current?{width:s.current.getBoundingClientRect().width,height:s.current.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};return((A=n.current)==null?void 0:A.map(T=>{const P=typeof T=="string";let z=0;if(P&&(z=parseInt(T,10)),Ot(i.current)){const R=P?z:m(u)?T*S.height:0;return m(u)?i.current==="bottom"?S.height-R:-S.height+R:R}const W=P?z:m(u)?T*S.width:0;return m(u)?i.current==="right"?S.width-W:-S.width+W:W}))??[]}),v=L(()=>m(h)!==null&&m(h)!==void 0?m(g)[m(h)]:null);function x(S){n.current&&S===m(g).length-1&&o(new Date)}function b(S){var T,P;const A=((T=m(g))==null?void 0:T.findIndex(z=>z===S))??null;x(A),_t(e(),{transition:`transform ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`,transform:Ot(i.current)?`translate3d(0, ${S}px, 0)`:`translate3d(${S}px, 0, 0)`}),m(g)&&A!==m(g).length-1&&r.current!==void 0&&A!==r.current&&A<r.current?_t(t(),{transition:`opacity ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`,opacity:"0"}):_t(t(),{transition:`opacity ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`,opacity:"1"}),a.current=(P=n.current)==null?void 0:P[Math.max(A,0)]}Ze([()=>a.current,()=>c.current],()=>{var T;const S=d();if(!a.current||S)return;const A=((T=n.current)==null?void 0:T.findIndex(P=>P===a.current))??-1;if(m(g)&&A!==-1&&typeof m(g)[A]=="number"){if(m(g)[A]===a.current)return;b(m(g)[A])}});function w({draggedDistance:S,closeDrawer:A,velocity:T,dismissible:P}){var $;if(r.current===void 0)return;const z=i.current,W=z==="bottom"||z==="right"?(m(v)??0)-S:(m(v)??0)+S,R=m(h)===r.current-1,B=m(h)===0,I=S>0;if(R&&_t(t(),{transition:`opacity ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`}),!l.current&&T>2&&!I){P?A():b(m(g)[0]);return}if(!l.current&&T>2&&I&&m(g)&&n.current){b(m(g)[n.current.length-1]);return}const j=($=m(g))==null?void 0:$.reduce((D,q)=>typeof D!="number"||typeof q!="number"?D:Math.abs(q-W)<Math.abs(D-W)?q:D),H=Ot(z)?window.innerHeight:window.innerWidth;if(T>Vy&&Math.abs(S)<H*.4){const D=I?1:-1;if(D>0&&m(f)&&n.current){b(m(g)[n.current.length-1]);return}if(B&&D<0&&P&&A(),m(h)===null)return;b(m(g)[m(h)+D]);return}b(j)}function M({draggedDistance:S}){if(m(v)===null)return;const A=i.current,T=Ed(A)?m(v)-S:m(v)+S,P=m(g)[m(g).length-1];Ed(A)&&T<P||!Ed(A)&&T>P||_t(e(),{transform:Ot(A)?`translate3d(0, ${T}px, 0)`:`translate3d(${T}px, 0, 0)`})}function k(S,A){if(!n.current||typeof m(h)!="number"||!m(g)||r.current===void 0)return null;const T=m(h)===r.current-1;if(m(h)>=r.current&&A)return 0;if(T&&!A)return 1;if(!m(p)&&!T)return null;const z=T?m(h)+1:m(h)-1,W=T?m(g)[z]-m(g)[z-1]:m(g)[z+1]-m(g)[z],R=S/Math.abs(W);return T?1-R:R}return{get isLastSnapPoint(){return m(f)},get shouldFade(){return m(p)},get activeSnapPointIndex(){return m(h)},get snapPointsOffset(){return mf(m(g))},getPercentageDragged:k,onRelease:w,onDrag:M}}function Ed(n){return n==="bottom"||n==="right"}const QT=typeof document<"u";function eA(){const n=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(n)&&/Mobile/.test(n)||/FxiOS/.test(n))}function tA(){return Vf(/^Mac/)}function nA(){return Vf(/^iPhone/)}function Op(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function rA(){return Vf(/^iPad/)||tA()&&navigator.maxTouchPoints>1}function Ky(){return nA()||rA()}function Vf(n){return typeof window<"u"&&window.navigator!=null?n.test(window.navigator.platform):void 0}const oA=24;function Tp(...n){return(...e)=>{for(let t of n)typeof t=="function"&&t(...e)}}const Pd=QT&&window.visualViewport;function Ap(n){let e=window.getComputedStyle(n);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function jy(n){for(Ap(n)&&(n=n.parentElement);n&&!Ap(n);)n=n.parentElement;return n||document.scrollingElement||document.documentElement}const iA=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let ga=0,ya;function sA(n){Ze(n.isDisabled,()=>{if(!n.isDisabled())return ga++,ga===1&&Ky()&&(ya=lA()),()=>{ga--,ga===0&&(ya==null||ya())}})}function lA(){let n,e=0;const t=u=>{n=jy(u.target),!(n===document.documentElement&&n===document.body)&&(e=u.changedTouches[0].pageY)};let r=u=>{if(!n||n===document.documentElement||n===document.body){u.preventDefault();return}let f=u.changedTouches[0].pageY,h=n.scrollTop,p=n.scrollHeight-n.clientHeight;p!==0&&((h<=0&&f>e||h>=p&&f<e)&&u.preventDefault(),e=f)},o=u=>{let f=u.target;Ou(f)&&f!==document.activeElement&&(u.preventDefault(),f.style.transform="translateY(-2000px)",f.focus(),requestAnimationFrame(()=>{f.style.transform=""}))};const i=u=>{let f=u.target;Ou(f)&&(f.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{f.style.transform="",Pd&&(Pd.height<window.innerHeight?requestAnimationFrame(()=>{Ep(f)}):Pd.addEventListener("resize",()=>Ep(f),{once:!0}))}))};let s=()=>{window.scrollTo(0,0)},l=window.pageXOffset,a=window.pageYOffset,c=Tp(aA(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let d=Tp(lt(document,"touchstart",t,{passive:!1,capture:!0}),lt(document,"touchmove",r,{passive:!1,capture:!0}),lt(document,"touchend",o,{passive:!1,capture:!0}),lt(document,"focus",i,{capture:!0}),lt(window,"scroll",s));return()=>{c(),d(),window.scrollTo(l,a)}}function aA(n,e,t){let r=n.style[e];return n.style[e]=t,()=>{n.style[e]=r}}function Ep(n){let e=document.scrollingElement||document.documentElement;for(;n&&n!==e;){let t=jy(n);if(t!==document.documentElement&&t!==document.body&&t!==n){let r=t.getBoundingClientRect().top,o=n.getBoundingClientRect().top,i=n.getBoundingClientRect().bottom;const s=t.getBoundingClientRect().bottom+oA;i>s&&(t.scrollTop+=o-r)}n=t.parentElement}}function Ou(n){return n instanceof HTMLInputElement&&!iA.has(n.type)||n instanceof HTMLTextAreaElement||n instanceof HTMLElement&&n.isContentEditable}let Ni=null;function cA({open:n,modal:e,nested:t,hasBeenOpened:r,preventScrollRestoration:o,noBodyStyles:i}){let s=de(Ft(typeof window<"u"?window.location.href:"")),l=0;function a(){if(Op()&&Ni===null&&n.current&&!i.current){Ni={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:d,innerHeight:u}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-l}px`,left:`${-d}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const f=u-window.innerHeight;f&&l>=u&&(document.body.style.top=`${-(l+f)}px`)}),300)}}function c(){if(Op()&&Ni!==null&&!i.current){const d=-parseInt(document.body.style.top,10),u=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Ni),window.requestAnimationFrame(()=>{if(o.current&&m(s)!==window.location.href){_(s,window.location.href,!0);return}window.scrollTo(u,d)}),Ni=null}}return Dn(()=>{function d(){l=window.scrollY}return d(),lt(window,"scroll",d)}),Ze([()=>e.current,()=>m(s)],()=>{if(e.current)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||c()}}),Ze([()=>n.current,()=>r(),()=>m(s),()=>e.current,()=>t.current],()=>{t.current||!r()||(n.current?(!window.matchMedia("(display-mode: standalone)").matches&&a(),e.current||window.setTimeout(()=>{c()},500)):c())}),{restorePositionSetting:c}}const ia=new vn("Drawer.Root");function dA(n){let e=de(!1),t=de(!1),r=de(!1),o=de(null),i=de(null),s=null,l=null,a=null,c=null,d=!1,u=null,f=0,h=N(!1),p=de(!n.open.current),g=0,v=0,x=0,b=0,w=!1;const M=ZT({snapPoints:n.snapPoints,drawerNode:()=>m(i),activeSnapPoint:n.activeSnapPoint,container:n.container,direction:n.direction,fadeFromIndex:n.fadeFromIndex,overlayNode:()=>m(o),setOpenTime:K=>{s=K},snapToSequentialPoint:n.snapToSequentialPoint,open:n.open,isReleasing:()=>w});sA({isDisabled:()=>!n.open.current||m(t)||!n.modal.current||m(r)||!m(e)||!n.repositionInputs.current||!n.disablePreventScroll.current});const{restorePositionSetting:k}=cA({...n,hasBeenOpened:()=>m(e)});function S(){return(window.innerWidth-Cu)/window.innerWidth}function A(K){var ee,se;!n.dismissible.current&&!n.snapPoints.current||m(i)&&!m(i).contains(K.target)||(v=((ee=m(i))==null?void 0:ee.getBoundingClientRect().height)||0,x=((se=m(i))==null?void 0:se.getBoundingClientRect().width)||0,_(t,!0),l=new Date,Ky()&&lt(window,"touchend",()=>d=!1,{once:!0}),K.target.setPointerCapture(K.pointerId),f=Ot(n.direction.current)?K.pageY:K.pageX)}function T(K,ee){var Re;let se=K;const Q=(Re=window.getSelection())==null?void 0:Re.toString(),ce=m(i)?ma(m(i),n.direction.current):null,pe=new Date;if(se.tagName==="SELECT"||se.hasAttribute("data-vaul-no-drag")||se.closest("[data-vaul-no-drag]"))return!1;if(n.direction.current==="right"||n.direction.current==="left")return!0;if(s&&pe.getTime()-s.getTime()<500)return!1;if(ce!==null&&(n.direction.current==="bottom"?ce>0:ce<0))return!0;if(Q&&Q.length>0)return!1;if(c&&pe.getTime()-c.getTime()<n.scrollLockTimeout.current&&ce===0||ee)return c=pe,!1;for(;se;){if(se.scrollHeight>se.clientHeight){if(se.scrollTop!==0)return c=new Date,!1;if(se.getAttribute("role")==="dialog")return!0}se=se.parentNode}return!0}function P(K){var Ce,Pe;if(!m(i)||!m(t))return;const ee=n.direction.current==="bottom"||n.direction.current==="right"?1:-1,se=(f-(Ot(n.direction.current)?K.pageY:K.pageX))*ee,Q=se>0,ce=n.snapPoints.current&&!n.dismissible.current&&!Q;if(ce&&M.activeSnapPointIndex===0)return;const pe=Math.abs(se),Re=document.querySelector("[data-vaul-drawer-wrapper]"),Me=n.direction.current==="bottom"||n.direction.current==="top"?v:x;let ne=pe/Me;const me=M.getPercentageDragged(pe,Q);if(me!==null&&(ne=me),ce&&ne>=1||!d&&!T(K.target,Q))return;if(m(i).classList.add(Td),d=!0,_t(m(i),{transition:"none"}),_t(m(o),{transition:"none"}),n.snapPoints.current&&M.onDrag({draggedDistance:se}),Q&&!n.snapPoints.current){const He=YT(se),qe=Math.min(He*-1,0)*ee;_t(m(i),{transform:Ot(n.direction.current)?`translate3d(0, ${qe}px, 0)`:`translate3d(${qe}px, 0, 0)`});return}const Le=1-ne;if((M.shouldFade||n.fadeFromIndex.current&&M.activeSnapPointIndex===n.fadeFromIndex.current-1)&&((Pe=(Ce=n.onDrag).current)==null||Pe.call(Ce,K,ne),_t(m(o),{opacity:`${Le}`,transition:"none"},!0)),Re&&m(o)&&n.shouldScaleBackground.current){const He=Math.min(S()+ne*(1-S()),1),qe=8-ne*8,ht=Math.max(0,14-ne*14);_t(Re,{borderRadius:`${qe}px`,transform:Ot(n.direction.current)?`scale(${He}) translate3d(0, ${ht}px, 0)`:`scale(${He}) translate3d(${ht}px, 0, 0)`,transition:"none"},!0)}if(!n.snapPoints.current){const He=pe*ee;_t(m(i),{transform:Ot(n.direction.current)?`translate3d(0, ${He}px, 0)`:`translate3d(${He}px, 0, 0)`})}}nt(()=>{window.requestAnimationFrame(()=>{_(p,!0)})});function z(K){!n.dismissible.current&&!K||(K?_(e,!0):B(!0),n.open.current=K)}function W(){var ee;if(!m(i)||!n.repositionInputs.current)return;const K=document.activeElement;if(Ou(K)||h.current){const se=((ee=window.visualViewport)==null?void 0:ee.height)||0,Q=window.innerHeight;let ce=Q-se;const pe=m(i).getBoundingClientRect().height||0,Re=pe>Q*.8;b||(b=pe);const Me=m(i).getBoundingClientRect().top;if(Math.abs(g-ce)>60&&(h.current=!h.current),n.snapPoints.current&&n.snapPoints.current.length>0&&M.snapPointsOffset&&M.activeSnapPointIndex){const ne=M.snapPointsOffset[M.activeSnapPointIndex]||0;ce+=ne}if(g=ce,pe>se||h.current){const ne=m(i).getBoundingClientRect().height;let me=ne;ne>se&&(me=se-(Re?Me:Cu)),n.fixed.current?m(i).style.height=`${ne-Math.max(ce,0)}px`:m(i).style.height=`${Math.max(me,se-Me)}px`}else eA()||(m(i).style.height=`${b}px`);n.snapPoints.current&&n.snapPoints.current.length>0&&!h.current?m(i).style.bottom="0px":m(i).style.bottom=`${Math.max(ce,0)}px`}}Ze([()=>M.activeSnapPointIndex,()=>n.snapPoints.current,()=>M.snapPointsOffset,()=>m(i)],()=>{if(window.visualViewport)return lt(window.visualViewport,"resize",W)});function R(){!m(t)||!m(i)||(m(i).classList.remove(Td),d=!1,_(t,!1),a=new Date)}function B(K){var ee;R(),(ee=n.onClose)==null||ee.current(),K||(ie(!1),n.open.current=!1),window.setTimeout(()=>{n.snapPoints.current&&n.snapPoints.current.length>0&&(n.activeSnapPoint.current=n.snapPoints.current[0])},mt.DURATION*1e3)}function I(){if(!m(i))return;const K=document.querySelector("[data-vaul-drawer-wrapper]"),ee=ma(m(i),n.direction.current);_t(m(i),{transform:"translate3d(0, 0, 0)",transition:`transform ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`}),_t(m(o),{transition:`opacity ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`,opacity:"1"}),n.shouldScaleBackground.current&&ee&&ee>0&&n.open.current&&_t(K,{borderRadius:`${Hy}px`,overflow:"hidden",...Ot(n.direction.current)?{transform:`scale(${S()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${S()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${mt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${mt.EASE.join(",")})`},!0)}function j(K){w=!0,H(K),It(()=>{w=!1})}function H(K){var ne,me,Le,Ce,Pe,He,qe,ht,kt,tt;if(!m(t)||!m(i))return;m(i).classList.remove(Td),d=!1,_(t,!1),a=new Date;const ee=ma(m(i),n.direction.current);if(!K||K.target&&!T(K.target,!1)||!ee||Number.isNaN(ee)||l===null)return;const se=a.getTime()-l.getTime(),Q=f-(Ot(n.direction.current)?K.pageY:K.pageX),ce=Math.abs(Q)/se;if(ce>.05&&(_(r,!0),setTimeout(()=>{_(r,!1)},200)),n.snapPoints.current){const Mt=n.direction.current==="bottom"||n.direction.current==="right"?1:-1;M.onRelease({draggedDistance:Q*Mt,closeDrawer:B,velocity:ce,dismissible:n.dismissible.current}),(me=(ne=n.onRelease).current)==null||me.call(ne,K,!0);return}if(n.direction.current==="bottom"||n.direction.current==="right"?Q>0:Q<0){I(),(Ce=(Le=n.onRelease).current)==null||Ce.call(Le,K,!0);return}if(ce>Vy){B(),(He=(Pe=n.onRelease).current)==null||He.call(Pe,K,!1);return}const pe=Math.min(m(i).getBoundingClientRect().height??0,window.innerHeight),Re=Math.min(m(i).getBoundingClientRect().width??0,window.innerWidth),Me=n.direction.current==="left"||n.direction.current==="right";if(Math.abs(ee)>=(Me?Re:pe)*n.closeThreshold.current){B(),(ht=(qe=n.onRelease).current)==null||ht.call(qe,K,!1);return}(tt=(kt=n.onRelease).current)==null||tt.call(kt,K,!0),I()}Ze(()=>n.open.current,()=>(n.open.current&&(_t(document.documentElement,{scrollBehavior:"auto"}),s=new Date),()=>{JT(document.documentElement,"scrollBehavior")}));function $(K){const ee=K?(window.innerWidth-pa)/window.innerWidth:1,se=K?-16:0;u&&window.clearTimeout(u),_t(m(i),{transition:`transform ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`,transform:Ot(n.direction.current)?`scale(${ee}) translate3d(0, ${se}px, 0)`:`scale(${ee}) translate3d(${se}px, 0, 0)`}),!K&&m(i)&&(u=window.setTimeout(()=>{const Q=ma(m(i),n.direction.current);_t(m(i),{transition:"none",transform:Ot(n.direction.current)?`translate3d(0, ${Q}px, 0)`:`translate3d(${Q}px, 0, 0)`})},500))}function D(K,ee){if(ee<0)return;const se=(window.innerWidth-pa)/window.innerWidth,Q=se+ee*(1-se),ce=-16+ee*pa;_t(m(i),{transform:Ot(n.direction.current)?`scale(${Q}) translate3d(0, ${ce}px, 0)`:`scale(${Q}) translate3d(${ce}px, 0, 0)`,transition:"none"})}function q(K,ee){const se=Ot(n.direction.current)?window.innerHeight:window.innerWidth,Q=ee?(se-pa)/se:1,ce=ee?-16:0;ee&&_t(m(i),{transition:`transform ${mt.DURATION}s cubic-bezier(${mt.EASE.join(",")})`,transform:Ot(n.direction.current)?`scale(${Q}) translate3d(0, ${ce}px, 0)`:`scale(${Q}) translate3d(${ce}px, 0, 0)`})}let U;function ie(K){var ee,se;(se=(ee=n.onOpenChange).current)==null||se.call(ee,K),K&&!n.nested.current?U=document.body.style.cssText:!K&&!n.nested.current&&ql(mt.DURATION*1e3,()=>{document.body.style.cssText=U}),!K&&!n.nested.current&&k(),setTimeout(()=>{var Q,ce;(ce=(Q=n.onAnimationEnd).current)==null||ce.call(Q,K)},mt.DURATION*1e3),K&&!n.modal.current&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),K||(document.body.style.pointerEvents="auto")}Ze(()=>n.modal.current,()=>{n.modal.current||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})});function oe(K){_(o,K,!0)}function ke(K){_(i,K,!0)}return ia.set({...n,keyboardIsOpen:h,closeDrawer:B,setDrawerNode:ke,setOverlayNode:oe,onDrag:P,onNestedDrag:D,onNestedOpenChange:$,onNestedRelease:q,onRelease:j,onPress:A,onDialogOpenChange:z,get shouldAnimate(){return m(p)},get isDragging(){return m(t)},get overlayNode(){return m(o)},get drawerNode(){return m(i)},get snapPointsOffset(){return M.snapPointsOffset},get shouldFade(){return M.shouldFade},restorePositionSetting:k,handleOpenChange:ie})}function uA(n,e){J(e,!0);let t=y(e,"open",15,!1),r=y(e,"onOpenChange",3,Ct),o=y(e,"onDrag",3,Ct),i=y(e,"onRelease",3,Ct),s=y(e,"shouldScaleBackground",3,!1),l=y(e,"setBackgroundColorOnScale",3,!0),a=y(e,"closeThreshold",3,UT),c=y(e,"scrollLockTimeout",3,qT),d=y(e,"dismissible",3,!0),u=y(e,"handleOnly",3,!1),f=y(e,"fadeFromIndex",19,()=>e.snapPoints&&e.snapPoints.length-1),h=y(e,"activeSnapPoint",15,null),p=y(e,"onActiveSnapPointChange",3,Ct),g=y(e,"fixed",3,!1),v=y(e,"modal",3,!0),x=y(e,"onClose",3,Ct),b=y(e,"nested",3,!1),w=y(e,"noBodyStyles",3,!1),M=y(e,"direction",3,"bottom"),k=y(e,"snapToSequentialPoint",3,!1),S=y(e,"preventScrollRestoration",3,!1),A=y(e,"repositionInputs",3,!0),T=y(e,"onAnimationEnd",3,Ct),P=y(e,"container",3,null),z=y(e,"autoFocus",3,!1),W=y(e,"disablePreventScroll",3,!0),R=Te(e,["$$slots","$$events","$$legacy","open","onOpenChange","onDrag","onRelease","snapPoints","shouldScaleBackground","setBackgroundColorOnScale","closeThreshold","scrollLockTimeout","dismissible","handleOnly","fadeFromIndex","activeSnapPoint","onActiveSnapPointChange","fixed","modal","onClose","nested","noBodyStyles","direction","snapToSequentialPoint","preventScrollRestoration","repositionInputs","onAnimationEnd","container","autoFocus","disablePreventScroll"]);const B=dA({open:N.with(()=>t(),D=>{t(D),B.handleOpenChange(D)}),closeThreshold:N.with(()=>a()),scrollLockTimeout:N.with(()=>c()),snapPoints:N.with(()=>e.snapPoints),fadeFromIndex:N.with(()=>f()),nested:N.with(()=>b()),shouldScaleBackground:N.with(()=>s()),activeSnapPoint:N.with(()=>h(),D=>{h(D),p()(D)}),onRelease:N.with(()=>i()),onDrag:N.with(()=>o()),onClose:N.with(()=>x()),dismissible:N.with(()=>d()),direction:N.with(()=>M()),fixed:N.with(()=>g()),modal:N.with(()=>v()),handleOnly:N.with(()=>u()),noBodyStyles:N.with(()=>w()),preventScrollRestoration:N.with(()=>S()),setBackgroundColorOnScale:N.with(()=>l()),repositionInputs:N.with(()=>A()),autoFocus:N.with(()=>z()),snapToSequentialPoint:N.with(()=>k()),container:N.with(()=>P()),disablePreventScroll:N.with(()=>W()),onOpenChange:N.with(()=>r()),onAnimationEnd:N.with(()=>T())});var I=F(),j=E(I),H=()=>B.open.current,$=D=>{B.onDialogOpenChange(D)};X(j,()=>Sy,(D,q)=>{q(D,le({get open(){return H()},set open(U){$(U)}},()=>R))}),C(n,I),Y()}globalThis.vaulIdCounter??(globalThis.vaulIdCounter={current:0});function $y(n="vaul-svelte"){return globalThis.vaulIdCounter.current++,`${n}-${globalThis.vaulIdCounter.current}`}function fA(){const n=ia.get();let e=null;const t=typeof document<"u"?document.body.style.backgroundColor:"";function r(){return(window.innerWidth-Cu)/window.innerWidth}Ze([()=>n.open.current,()=>n.shouldScaleBackground.current,()=>n.setBackgroundColorOnScale.current],()=>{if(n.open.current&&n.shouldScaleBackground.current){e&&clearTimeout(e);const o=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[data-vaul-drawer-wrapper]");if(!o)return;XT(n.setBackgroundColorOnScale.current&&!n.noBodyStyles.current?Ad(document.body,{background:"black"}):Ct,Ad(o,{transformOrigin:Ot(n.direction.current)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${mt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${mt.EASE.join(",")})`}));const i=Ad(o,{borderRadius:`${Hy}px`,overflow:"hidden",...Ot(n.direction.current)?{transform:`scale(${r()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${r()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{i(),e=window.setTimeout(()=>{t?document.body.style.background=t:document.body.style.removeProperty("background")},mt.DURATION*1e3)}}})}function hA(n){const e=ia.get();let t=de(!1);it({id:n.id,ref:n.ref,deps:()=>[m(t),e.open.current],onRefChange:w=>{m(t)?e.setDrawerNode(w):e.setDrawerNode(null)}});let r=de(!1),o=null,i=null,s=!1;const l=L(()=>e.snapPoints.current&&e.snapPoints.current.length>0);fA();function a(w,M,k=0){if(s)return!0;const S=Math.abs(w.y),A=Math.abs(w.x),T=A>S,P=["bottom","right"].includes(M)?1:-1;if(M==="left"||M==="right"){if(!(w.x*P<0)&&A>=0&&A<=k)return T}else if(!(w.y*P<0)&&S>=0&&S<=k)return!T;return s=!0,!0}Ze([()=>m(l),()=>e.open.current],()=>{m(l)&&e.open.current?window.requestAnimationFrame(()=>{_(r,!0)}):_(r,!1)});function c(w){o=null,s=!1,e.onRelease(w)}function d(w){var M,k;e.handleOnly.current||((k=(M=n.onpointerdown).current)==null||k.call(M,w),o={x:w.pageX,y:w.pageY},e.onPress(w))}function u(w){var M,k;(k=(M=n.onOpenAutoFocus).current)==null||k.call(M,w),e.autoFocus.current||w.preventDefault()}function f(w){var M,k;if((k=(M=n.onInteractOutside).current)==null||k.call(M,w),!e.modal.current||w.defaultPrevented){w.preventDefault();return}e.keyboardIsOpen.current&&(e.keyboardIsOpen.current=!1)}function h(w){if(!e.modal.current){w.preventDefault();return}}function p(w){var P,z;if(i=w,e.handleOnly.current||((z=(P=n.onpointermove).current)==null||z.call(P,w),!o))return;const M=w.pageY-o.y,k=w.pageX-o.x,S=w.pointerType==="touch"?10:2;a({x:k,y:M},e.direction.current,S)?e.onDrag(w):(Math.abs(k)>S||Math.abs(M)>S)&&(o=null)}function g(w){var M,k;(k=(M=n.onpointerup).current)==null||k.call(M,w),o=null,s=!1,e.onRelease(w)}function v(w){var M,k;(k=(M=n.onpointerout).current)==null||k.call(M,w),c(i)}function x(w){var M,k;(k=(M=n.oncontextmenu).current)==null||k.call(M,w),i&&c(i)}const b=L(()=>({id:n.id.current,"data-vaul-drawer-direction":e.direction.current,"data-vaul-drawer":"","data-vaul-delayed-snap-points":m(r)?"true":"false","data-vaul-snap-points":e.open.current&&m(l)?"true":"false","data-vaul-custom-container":e.container.current?"true":"false","data-vaul-animate":e.shouldAnimate?"true":"false",onpointerdown:d,onOpenAutoFocus:u,onInteractOutside:f,onFocusOutside:h,onpointerup:g,onpointermove:p,onpointerout:v,oncontextmenu:x,preventScroll:e.modal.current}));return{get props(){return m(b)},ctx:e,setMounted:w=>{_(t,w,!0)}}}function Gy(n,e){J(e,!0),Dn(()=>(e.onMounted(!0),()=>{e.onMounted(!1)})),Y()}var pA=G("<!> <!>",1);function mA(n,e){J(e,!0);let t=y(e,"id",19,$y),r=y(e,"ref",15,null),o=y(e,"onOpenAutoFocus",3,Ct),i=y(e,"onInteractOutside",3,Ct),s=y(e,"onFocusOutside",3,Ct),l=y(e,"oncontextmenu",3,Ct),a=y(e,"onpointerdown",3,Ct),c=y(e,"onpointerup",3,Ct),d=y(e,"onpointerout",3,Ct),u=y(e,"onpointermove",3,Ct),f=Te(e,["$$slots","$$events","$$legacy","id","ref","onOpenAutoFocus","onInteractOutside","onFocusOutside","oncontextmenu","onpointerdown","onpointerup","onpointerout","onpointermove","children"]);const h=hA({id:N.with(()=>t()),ref:N.with(()=>r(),w=>r(w)),oncontextmenu:N.with(()=>l()??Ct),onInteractOutside:N.with(()=>i()),onpointerdown:N.with(()=>a()??Ct),onpointermove:N.with(()=>u()??Ct),onpointerout:N.with(()=>d()??Ct),onpointerup:N.with(()=>c()??Ct),onOpenAutoFocus:N.with(()=>o()),onFocusOutside:N.with(()=>s())}),p=mf(h.ctx.snapPointsOffset),g=L(()=>p&&p.length>0?{"--snap-point-height":`${p[h.ctx.activeSnapPointIndex??0]}px`}:{}),v=L(()=>Ye(f,h.props,{style:m(g)}));var x=F(),b=E(x);X(b,()=>ky,(w,M)=>{M(w,le(()=>m(v),{children:(k,S)=>{var A=pA(),T=E(A);ae(T,()=>e.children??De);var P=te(T,2);Gy(P,{get onMounted(){return h.setMounted}}),C(k,A)},$$slots:{default:!0}}))}),C(n,x),Y()}function gA(n){const e=ia.get();let t=de(!1);it({id:n.id,ref:n.ref,deps:()=>m(t),onRefChange:s=>{m(t)?e.setOverlayNode(s):e.setOverlayNode(null)}});const r=L(()=>e.snapPoints.current&&e.snapPoints.current.length>0),o=L(()=>e.modal.current),i=L(()=>({id:n.id.current,onmouseup:e.onRelease,"data-vaul-overlay":"","data-vaul-snap-points":e.open.current&&m(r)?"true":"false","data-vaul-snap-points-overlay":e.open.current&&e.shouldFade?"true":"false","data-vaul-animate":e.shouldAnimate?"true":"false"}));return{get props(){return m(i)},get shouldRender(){return m(o)},setMounted:s=>{_(t,s,!0)}}}var yA=G("<!> <!>",1);function vA(n,e){J(e,!0);let t=y(e,"id",19,$y),r=y(e,"ref",15,null),o=Te(e,["$$slots","$$events","$$legacy","id","ref","children"]);const i=gA({id:N.with(()=>t()),ref:N.with(()=>r(),d=>r(d))}),s=L(()=>Ye(o,i.props));var l=F(),a=E(l);{var c=d=>{var u=F(),f=E(u);X(f,()=>Fg,(h,p)=>{p(h,le(()=>m(s),{children:(g,v)=>{var x=yA(),b=E(x);Gy(b,{get onMounted(){return i.setMounted}});var w=te(b,2);ae(w,()=>e.children??De),C(g,x)},$$slots:{default:!0}}))}),C(d,u)};Ee(a,d=>{i.shouldRender&&d(c)})}C(n,l),Y()}function bA(n,e){J(e,!0);const t=ia.get();let r=y(e,"to",19,()=>t.container.current??void 0),o=Te(e,["$$slots","$$events","$$legacy","to"]);var i=F(),s=E(i);X(s,()=>Gc,(l,a)=>{a(l,le({get to(){return r()}},()=>o))}),C(n,i),Y()}const wA=CS;function xA(n,e){J(e,!0);let t=y(e,"shouldScaleBackground",3,!0),r=y(e,"open",15,!1),o=y(e,"activeSnapPoint",15,null),i=Te(e,["$$slots","$$events","$$legacy","shouldScaleBackground","open","activeSnapPoint"]);var s=F(),l=E(s);X(l,()=>uA,(a,c)=>{c(a,le({get shouldScaleBackground(){return t()}},()=>i,{get open(){return r()},set open(d){r(d)},get activeSnapPoint(){return o()},set activeSnapPoint(d){o(d)}}))}),C(n,s),Y()}function SA(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class"]);var o=F(),i=E(o);const s=L(()=>pt("fixed inset-0 z-50 bg-black/80",e.class));X(i,()=>vA,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}var kA=G('<div class="bg-muted mx-auto mt-4 h-2 w-[100px] rounded-full"></div> <!>',1),MA=G("<!> <!>",1);function CA(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var o=F(),i=E(o);X(i,()=>bA,(s,l)=>{l(s,le(()=>e.portalProps,{children:(a,c)=>{var d=MA(),u=E(d);SA(u,{});var f=te(u,2);const h=L(()=>pt("bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border",e.class));X(f,()=>mA,(p,g)=>{g(p,le({get class(){return m(h)}},()=>r,{get ref(){return t()},set ref(v){t(v)},children:(v,x)=>{var b=kA(),w=te(E(b),2);ae(w,()=>e.children??De),C(v,b)},$$slots:{default:!0}}))}),C(a,d)},$$slots:{default:!0}}))}),C(n,o),Y()}const OA=wA;function Wt(n){this.content=n}Wt.prototype={constructor:Wt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,o=r.find(n),i=r.content.slice();return o==-1?i.push(t||n,e):(i[o+1]=e,t&&(i[o]=t)),new Wt(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Wt(t)},addToStart:function(n,e){return new Wt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Wt(t)},addBefore:function(n,e,t){var r=this.remove(e),o=r.content.slice(),i=r.find(n);return o.splice(i==-1?o.length:i,0,e,t),new Wt(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Wt.from(n),n.size?new Wt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Wt.from(n),n.size?new Wt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Wt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Wt.from=function(n){if(n instanceof Wt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Wt(e)};function Uy(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),i=e.child(r);if(o==i){t+=o.nodeSize;continue}if(!o.sameMarkup(i))return t;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)t++;return t}if(o.content.size||i.content.size){let s=Uy(o.content,i.content,t+1);if(s!=null)return s}t+=o.nodeSize}}function qy(n,e,t,r){for(let o=n.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:t,b:r};let s=n.child(--o),l=e.child(--i),a=s.nodeSize;if(s==l){t-=a,r-=a;continue}if(!s.sameMarkup(l))return{a:t,b:r};if(s.isText&&s.text!=l.text){let c=0,d=Math.min(s.text.length,l.text.length);for(;c<d&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(s.content.size||l.content.size){let c=qy(s.content,l.content,t-1,r-1);if(c)return c}t-=a,r-=a}}class Z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,i){for(let s=0,l=0;l<t;s++){let a=this.content[s],c=l+a.nodeSize;if(c>e&&r(a,o+l,i||null,s)!==!1&&a.content.size){let d=l+1;a.nodesBetween(Math.max(0,e-d),Math.min(a.content.size,t-d),r,o+d)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let i="",s=!0;return this.nodesBetween(e,t,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,t-a):l.isLeaf?o?typeof o=="function"?o(l):o:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new Z(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let i=0,s=0;s<t;i++){let l=this.content[i],a=s+l.nodeSize;a>e&&((s<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,t-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,t-s-1))),r.push(l),o+=l.nodeSize),s=a}return new Z(r,o)}cutByIndex(e,t){return e==t?Z.empty:e==0&&t==this.content.length?this:new Z(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new Z(o,i)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return Uy(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return qy(this,e,t,r)}findIndex(e,t=-1){if(e==0)return va(0,e);if(e==this.size)return va(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||t>0?va(r+1,s):va(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let t,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(t||(t=e.slice(0,o)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new Z(t||e,r)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const Nd={index:0,offset:0};function va(n,e){return Nd.index=n,Nd.offset=e,Nd}function ic(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!ic(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!ic(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let dt=class Tu{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ic(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Tu.none;if(e instanceof Tu)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};dt.none=[];class sc extends Error{}class he{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Yy(this.content,e+this.openStart,t);return r&&new he(r,this.openStart,this.openEnd)}removeBetween(e,t){return new he(Jy(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return he.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new he(Z.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)o++;return new he(e,r,o)}}he.empty=new he(Z.empty,0,0);function Jy(n,e,t){let{index:r,offset:o}=n.findIndex(e),i=n.maybeChild(r),{index:s,offset:l}=n.findIndex(t);if(o==e||i.isText){if(l!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(Jy(i.content,e-o-1,t-o-1)))}function Yy(n,e,t,r){let{index:o,offset:i}=n.findIndex(e),s=n.maybeChild(o);if(i==e||s.isText)return n.cut(0,e).append(t).append(n.cut(e));let l=Yy(s.content,e-i-1,t);return l&&n.replaceChild(o,s.copy(l))}function TA(n,e,t){if(t.openStart>n.depth)throw new sc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new sc("Inconsistent open depths");return Xy(n,e,t,0)}function Xy(n,e,t,r){let o=n.index(r),i=n.node(r);if(o==e.index(r)&&r<n.depth-t.openStart){let s=Xy(n,e,t,r+1);return i.copy(i.content.replaceChild(o,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,l=s.content;return co(s,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:s,end:l}=AA(t,n);return co(i,Qy(n,s,l,e,r))}else return co(i,lc(n,e,r))}function Zy(n,e){if(!e.type.compatibleContent(n.type))throw new sc("Cannot join "+e.type.name+" onto "+n.type.name)}function Au(n,e,t){let r=n.node(t);return Zy(r,e.node(t)),r}function ao(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ki(n,e,t,r){let o=(e||n).node(t),i=0,s=e?e.index(t):o.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(ao(n.nodeAfter,r),i++));for(let l=i;l<s;l++)ao(o.child(l),r);e&&e.depth==t&&e.textOffset&&ao(e.nodeBefore,r)}function co(n,e){return n.type.checkContent(e),n.copy(e)}function Qy(n,e,t,r,o){let i=n.depth>o&&Au(n,e,o+1),s=r.depth>o&&Au(t,r,o+1),l=[];return Ki(null,n,o,l),i&&s&&e.index(o)==t.index(o)?(Zy(i,s),ao(co(i,Qy(n,e,t,r,o+1)),l)):(i&&ao(co(i,lc(n,e,o+1)),l),Ki(e,t,o,l),s&&ao(co(s,lc(t,r,o+1)),l)),Ki(r,null,o,l),new Z(l)}function lc(n,e,t){let r=[];if(Ki(null,n,t,r),n.depth>t){let o=Au(n,e,t+1);ao(co(o,lc(n,e,t+1)),r)}return Ki(e,null,t,r),new Z(r)}function AA(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)o=e.node(i).copy(Z.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class Xi{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return dt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let l=r;r=o,o=l}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new ac(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,i=t;for(let s=e;;){let{index:l,offset:a}=s.content.findIndex(i),c=i-a;if(r.push(s,l,o+a),!c||(s=s.child(l),s.isText))break;i=c-1,o+=a+1}return new Xi(t,r,i)}static resolveCached(e,t){let r=Pp.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==t)return s}else Pp.set(e,r=new EA);let o=r.elts[r.i]=Xi.resolve(e,t);return r.i=(r.i+1)%PA,o}}class EA{constructor(){this.elts=[],this.i=0}}const PA=12,Pp=new WeakMap;class ac{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const NA=Object.create(null);let Dr=class Eu{constructor(e,t,r,o=dt.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&ic(this.attrs,t||e.defaultAttrs||NA)&&dt.sameSet(this.marks,r||dt.none)}copy(e=null){return e==this.content?this:new Eu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Eu(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return he.empty;let o=this.resolve(e),i=this.resolve(t),s=r?0:o.sharedDepth(t),l=o.start(s),c=o.node(s).content.cut(o.pos-l,i.pos-l);return new he(c,o.depth-s,i.depth-s)}replace(e,t,r){return TA(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return Xi.resolveCached(this,e)}resolveNoCache(e){return Xi.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ev(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Z.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let a=o;a<i;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=dt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!dt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=Z.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};Dr.prototype.text=void 0;class cc extends Dr{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ev(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new cc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new cc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ev(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class yo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new _A(e,t);if(r.next==null)return yo.empty;let o=tv(r);r.next&&r.err("Unexpected trailing text");let i=BA(FA(o));return VA(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let i=t;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function i(s,l){let a=s.matchFragment(e,r);if(a&&(!t||a.validEnd))return Z.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:u}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(u)==-1){o.push(u);let f=i(u,l.concat(d));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let l=o;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:l,next:a}=i.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!o.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:o}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}yo.empty=new yo(!0);class _A{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function tv(n){let e=[];do e.push(IA(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function IA(n){let e=[];do e.push(DA(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function DA(n){let e=LA(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=RA(n,e);else break;return e}function Np(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function RA(n,e){let t=Np(n),r=t;return n.eat(",")&&(n.next!="}"?r=Np(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function zA(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let i in t){let s=t[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function LA(n){if(n.eat("(")){let e=tv(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=zA(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function FA(n){let e=[[]];return o(i(n,0),t()),e;function t(){return e.push([])-1}function r(s,l,a){let c={term:a,to:l};return e[s].push(c),c}function o(s,l){s.forEach(a=>a.to=l)}function i(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(i(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=i(s.exprs[a],l);if(a==s.exprs.length-1)return c;o(c,l=t())}else if(s.type=="star"){let a=t();return r(l,a),o(i(s.expr,a),a),[r(a)]}else if(s.type=="plus"){let a=t();return o(i(s.expr,l),a),o(i(s.expr,a),a),[r(a)]}else{if(s.type=="opt")return[r(l)].concat(i(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let d=t();o(i(s.expr,a),d),a=d}if(s.max==-1)o(i(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let d=t();r(a,d),o(i(s.expr,a),d),a=d}return[r(a)]}else{if(s.type=="name")return[r(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function nv(n,e){return e-n}function _p(n,e){let t=[];return r(e),t.sort(nv);function r(o){let i=n[o];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(o);for(let s=0;s<i.length;s++){let{term:l,to:a}=i[s];!l&&t.indexOf(a)==-1&&r(a)}}}function BA(n){let e=Object.create(null);return t(_p(n,0));function t(r){let o=[];r.forEach(s=>{n[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let d=0;d<o.length;d++)o[d][0]==l&&(c=o[d][1]);_p(n,a).forEach(d=>{c||o.push([l,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let i=e[r.join(",")]=new yo(r.indexOf(n.length-1)>-1);for(let s=0;s<o.length;s++){let l=o[s][1].sort(nv);i.next.push({type:o[s][0],next:e[l.join(",")]||t(l)})}return i}}function VA(n,e){for(let t=0,r=[n];t<r.length;t++){let o=r[t],i=!o.validEnd,s=[];for(let l=0;l<o.next.length;l++){let{type:a,next:c}=o.next[l];s.push(a.name),i&&!(a.isText||a.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rv(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function ov(n,e){let t=Object.create(null);for(let r in n){let o=e&&e[r];if(o===void 0){let i=n[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function iv(n,e,t,r){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let i=n[o];i.validate&&i.validate(e[o])}}function sv(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new WA(n,r,e[r]);return t}let Ip=class lv{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=sv(e,r.attrs),this.defaultAttrs=rv(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==yo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ov(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Dr(this,this.computeAttrs(e),Z.from(t),dt.setFrom(r))}createChecked(e=null,t,r){return t=Z.from(t),this.checkContent(t),new Dr(this,this.computeAttrs(e),t,dt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=Z.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(Z.empty,!0);return i?new Dr(this,e,t.append(i),dt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){iv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:dt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,s)=>r[i]=new lv(i,t,s));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function HA(n,e,t){let r=t.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class WA{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?HA(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Zc{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=sv(e,o.attrs),this.excluded=null;let i=rv(this.attrs);this.instance=i?new dt(this,i):null}create(e=null){return!e&&this.instance?this.instance:new dt(this,ov(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new Zc(i,o++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){iv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class av{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=Wt.from(e.nodes),t.marks=Wt.from(e.marks||{}),this.nodes=Ip.compile(this.spec.nodes,this),this.marks=Zc.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=yo.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?Dp(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Dp(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Ip){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new cc(r,r.defaultAttrs,e,dt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Dr.fromJSON(this,e)}markFromJSON(e){return dt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Dp(n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],i=n.marks[o],s=i;if(i)t.push(i);else for(let l in n.marks){let a=n.marks[l];(o=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(o)>-1)&&t.push(s=a)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function KA(n){return n.tag!=null}function jA(n){return n.style!=null}class Rr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(KA(o))this.tags.push(o);else if(jA(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new zp(this,t,!1);return r.addAll(e,dt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new zp(this,t,!0);return r.addAll(e,dt.none,t.from,t.to),he.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(UA(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,t,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(s.getAttrs){let a=s.getAttrs(t);if(a===!1)continue;s.attrs=a||void 0}return s}}}static schemaRules(e){let t=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<t.length;s++){let l=t[s];if((l.priority==null?50:l.priority)<i)break}t.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=Lp(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=Lp(s)),s.node||s.ignore||s.mark||(s.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Rr(e,Rr.schemaRules(e)))}}const cv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},$A={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},dv={ol:!0,ul:!0},Zi=1,Pu=2,Ba=4;function Rp(n,e,t){return e!=null?(e?Zi:0)|(e==="full"?Pu:0):n&&n.whitespace=="pre"?Zi|Pu:t&-5}class ba{constructor(e,t,r,o,i,s){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=dt.none,this.match=i||(s&Ba?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Zi)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let t=Z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!cv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class zp{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=t.topNode,i,s=Rp(null,t.preserveWhitespace,0)|(r?Ba:0);o?i=new ba(o.type,o.attrs,dt.none,!0,t.topMatch||o.type.contentMatch,s):r?i=new ba(null,null,dt.none,!0,null,s):i=new ba(e.schema.topNodeType,null,dt.none,!0,null,s),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top,i=o.options&Pu?"full":this.localPreserveWS||(o.options&Zi)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],l=e.previousSibling;(!s||l&&l.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),l;dv.hasOwnProperty(s)&&this.parser.normalizeLists&&GA(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:$A.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,d=this.needsBlock;if(cv.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let u=a&&a.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),c&&this.sync(i),this.needsBlock=d}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let l=void 0;;){let a=this.parser.matchStyle(i,s,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?t=t.filter(c=>!a.clearMark(c)):t=t.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return t}addElementByRule(e,t,r,o){let i,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let a=this.enter(s,t.attrs||null,r,t.preserveWhitespace);a&&(i=!0,r=a)}else{let a=this.parser.schema.marks[t.mark];r=r.concat(a.create(t.attrs))}let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r));else{let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}i&&this.sync(l)&&this.open--}addAll(e,t,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,l=o==null?null:e.childNodes[o];s!=l;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,t);this.findAtPoint(e,i)}findPlace(e,t){let r,o;for(let i=this.open;i>=0;i--){let s=this.nodes[i],l=s.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,o=s,!l.length)||s.solid)break}if(!r)return null;this.sync(o);for(let i=0;i<r.length;i++)t=this.enterInner(r[i],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=dt.none;for(let s of r.concat(e.marks))(o.type?o.type.allowsMarkType(s.type):Fp(s.type,e.type))&&(i=s.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,t,r,o){let i=this.findPlace(e.create(t),r);return i&&(i=this.enterInner(e,t,r,!0,o)),i}enterInner(e,t,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let l=Rp(e,i,s.options);s.options&Ba&&s.content.length==0&&(l|=Ba);let a=dt.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Fp(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new ba(e,t,a,o,null,l)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Zi)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(l,a)=>{for(;l>=0;l--){let c=t[l];if(c==""){if(l==t.length-1||l==0)continue;for(;a>=i;a--)if(s(l-1,a))return!0;return!1}else{let d=a>0||a==0&&o?this.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;a--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function GA(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&dv.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function UA(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Lp(n){let e={};for(let t in n)e[t]=n[t];return e}function Fp(n,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(n))continue;let i=[],s=l=>{i.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:d}=l.edge(a);if(c==e||i.indexOf(d)<0&&s(d))return!0}};if(s(o.contentMatch))return!0}}class Co{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=_d(t).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let l=0,a=0;for(;l<i.length&&a<s.marks.length;){let c=s.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(i[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<i.length;)o=i.pop()[1];for(;a<s.marks.length;){let c=s.marks[a++],d=this.serializeMark(c,s.isInline,t);d&&(i.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=Va(_d(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&Va(_d(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return Va(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Co(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Bp(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Bp(e.marks)}}function Bp(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function _d(n){return n.document||window.document}const Vp=new WeakMap;function qA(n){let e=Vp.get(n);return e===void 0&&Vp.set(n,e=JA(n)),e}function JA(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(n),e}function Va(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=qA(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(t=o.slice(0,s),o=o.slice(s+1));let l,a=t?n.createElementNS(t,o):n.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let u in c)if(c[u]!=null){let f=u.indexOf(" ");f>0?a.setAttributeNS(u.slice(0,f),u.slice(f+1),c[u]):a.setAttribute(u,c[u])}}for(let u=d;u<e.length;u++){let f=e[u];if(f===0){if(u<e.length-1||u>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=Va(n,f,t,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const uv=65535,fv=Math.pow(2,16);function YA(n,e){return n+e*fv}function Hp(n){return n&uv}function XA(n){return(n-(n&uv))/fv}const hv=1,pv=2,Ha=4,mv=8;class Nu{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&mv)>0}get deletedBefore(){return(this.delInfo&(hv|Ha))>0}get deletedAfter(){return(this.delInfo&(pv|Ha))>0}get deletedAcross(){return(this.delInfo&Ha)>0}}class pn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&pn.empty)return pn.empty}recover(e){let t=0,r=Hp(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+XA(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?o:0);if(a>e)break;let c=this.ranges[l+i],d=this.ranges[l+s],u=a+c;if(e<=u){let f=c?e==a?-1:e==u?1:t:t,h=a+o+(f<0?0:d);if(r)return h;let p=e==(t<0?a:u)?null:YA(l/3,e-a),g=e==a?pv:e==u?hv:Ha;return(t<0?e!=a:e!=u)&&(g|=mv),new Nu(h,g,p)}o+=d-c}return r?e+o:new Nu(e+o,0,null)}touches(e,t){let r=0,o=Hp(t),i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+i],d=a+c;if(e<=d&&l==o*3)return!0;r+=this.ranges[l+s]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],l=s-(this.inverted?i:0),a=s+(this.inverted?0:i),c=this.ranges[o+t],d=this.ranges[o+r];e(l,l+c,a,a+d),i+=d-c}}invert(){return new pn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pn.empty:new pn(e<0?[0,-e,0]:[0,0,e])}}pn.empty=new pn([]);class Qi{constructor(e,t,r=0,o=e?e.length:0){this.mirror=t,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Qi(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new Qi;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],l=s.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(i);if(a!=null&&a>i&&a<this.to){i=a,e=this._maps[a].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return r?e:new Nu(e,o,null)}}const Id=Object.create(null);class Zt{getMap(){return pn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Id[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Id)throw new RangeError("Duplicate use of step JSON ID "+e);return Id[e]=t,t.prototype.jsonID=e,t}}class Tt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Tt(e,null)}static fail(e){return new Tt(null,e)}static fromReplace(e,t,r,o){try{return Tt.ok(e.replace(t,r,o))}catch(i){if(i instanceof sc)return Tt.fail(i.message);throw i}}}function Hf(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let i=n.child(o);i.content.size&&(i=i.copy(Hf(i.content,e,i))),i.isInline&&(i=e(i,t,o)),r.push(i)}return Z.fromArray(r)}class Nr extends Zt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new he(Hf(t.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),t.openStart,t.openEnd);return Tt.fromReplace(e,this.from,this.to,i)}invert(){return new Bn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Nr(t.pos,r.pos,this.mark)}merge(e){return e instanceof Nr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Nr(t.from,t.to,e.markFromJSON(t.mark))}}Zt.jsonID("addMark",Nr);class Bn extends Zt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new he(Hf(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return Tt.fromReplace(e,this.from,this.to,r)}invert(){return new Nr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Bn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Bn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bn(t.from,t.to,e.markFromJSON(t.mark))}}Zt.jsonID("removeMark",Bn);class _r extends Zt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Tt.fromReplace(e,this.pos,this.pos+1,new he(Z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new _r(this.pos,t.marks[o]);return new _r(this.pos,this.mark)}}return new li(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _r(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new _r(t.pos,e.markFromJSON(t.mark))}}Zt.jsonID("addNodeMark",_r);class li extends Zt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Tt.fromReplace(e,this.pos,this.pos+1,new he(Z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new _r(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new li(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new li(t.pos,e.markFromJSON(t.mark))}}Zt.jsonID("removeNodeMark",li);class Lt extends Zt{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&_u(e,this.from,this.to)?Tt.fail("Structure replace would overwrite content"):Tt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Lt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Lt(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Lt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?he.empty:new he(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Lt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?he.empty:new he(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Lt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Lt(t.from,t.to,he.fromJSON(e,t.slice),!!t.structure)}}Zt.jsonID("replace",Lt);class Bt extends Zt{constructor(e,t,r,o,i,s,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=l}apply(e){if(this.structure&&(_u(e,this.from,this.gapFrom)||_u(e,this.gapTo,this.to)))return Tt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Tt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Tt.fromReplace(e,this.from,this.to,r):Tt.fail("Content does not fit in gap")}getMap(){return new pn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Bt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||i>r.pos?null:new Bt(t.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Bt(t.from,t.to,t.gapFrom,t.gapTo,he.fromJSON(e,t.slice),t.insert,!!t.structure)}}Zt.jsonID("replaceAround",Bt);function _u(n,e,t){let r=n.resolve(e),o=t-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function ZA(n,e,t,r){let o=[],i=[],s,l;n.doc.nodesBetween(e,t,(a,c,d)=>{if(!a.isInline)return;let u=a.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+a.nodeSize,t),p=r.addToSet(u);for(let g=0;g<u.length;g++)u[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(u[g])?s.to=h:o.push(s=new Bn(f,h,u[g])));l&&l.to==f?l.to=h:i.push(l=new Nr(f,h,r))}}),o.forEach(a=>n.step(a)),i.forEach(a=>n.step(a))}function QA(n,e,t,r){let o=[],i=0;n.doc.nodesBetween(e,t,(s,l)=>{if(!s.isInline)return;i++;let a=null;if(r instanceof Zc){let c=s.marks,d;for(;d=r.isInSet(c);)(a||(a=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(s.marks)&&(a=[r]):a=s.marks;if(a&&a.length){let c=Math.min(l+s.nodeSize,t);for(let d=0;d<a.length;d++){let u=a[d],f;for(let h=0;h<o.length;h++){let p=o[h];p.step==i-1&&u.eq(o[h].style)&&(f=p)}f?(f.to=c,f.step=i):o.push({style:u,from:Math.max(l,e),to:c,step:i})}}}),o.forEach(s=>n.step(new Bn(s.from,s.to,s.style)))}function Wf(n,e,t,r=t.contentMatch,o=!0){let i=n.doc.nodeAt(e),s=[],l=e+1;for(let a=0;a<i.childCount;a++){let c=i.child(a),d=l+c.nodeSize,u=r.matchType(c.type);if(!u)s.push(new Lt(l,d,he.empty));else{r=u;for(let f=0;f<c.marks.length;f++)t.allowsMarkType(c.marks[f].type)||n.step(new Bn(l,d,c.marks[f]));if(o&&c.isText&&t.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new he(Z.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),s.push(new Lt(l+f.index,l+f.index+f[0].length,p))}}l=d}if(!r.validEnd){let a=r.fillBefore(Z.empty,!0);n.replace(l,l,new he(a,0,0))}for(let a=s.length-1;a>=0;a--)n.step(s[a])}function eE(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function bi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let o=n.$from.node(r),i=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&o.canReplace(i,s,t))return r;if(r==0||o.type.spec.isolating||!eE(o,i,s))break}return null}function tE(n,e,t){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),l=o.after(i+1),a=s,c=l,d=Z.empty,u=0;for(let p=i,g=!1;p>t;p--)g||r.index(p)>0?(g=!0,d=Z.from(r.node(p).copy(d)),u++):a--;let f=Z.empty,h=0;for(let p=i,g=!1;p>t;p--)g||o.after(p+1)<o.end(p)?(g=!0,f=Z.from(o.node(p).copy(f)),h++):c++;n.step(new Bt(a,c,s,l,new he(d.append(f),u,h),d.size-u,!0))}function Kf(n,e,t=null,r=n){let o=nE(n,e),i=o&&rE(r,e);return i?o.map(Wp).concat({type:e,attrs:t}).concat(i.map(Wp)):null}function Wp(n){return{type:n,attrs:null}}function nE(n,e){let{parent:t,startIndex:r,endIndex:o}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return t.canReplaceWith(r,o,s)?i:null}function rE(n,e){let{parent:t,startIndex:r,endIndex:o}=n,i=t.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;a&&c<o;c++)a=a.matchType(t.child(c).type);return!a||!a.validEnd?null:s}function oE(n,e,t){let r=Z.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let l=t[s].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Z.from(t[s].type.create(t[s].attrs,r))}let o=e.start,i=e.end;n.step(new Bt(o,i,o,i,new he(r,0,0),t.length,!0))}function iE(n,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(s,l)=>{let a=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,a)&&sE(n.doc,n.mapping.slice(i).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&yv(n,s,l,i),Wf(n,n.mapping.slice(i).map(l,1),r,void 0,c===null);let d=n.mapping.slice(i),u=d.map(l,1),f=d.map(l+s.nodeSize,1);return n.step(new Bt(u,f,u+1,f-1,new he(Z.from(r.create(a,null,s.marks)),0,0),1,!0)),c===!0&&gv(n,s,l,i),!1}})}function gv(n,e,t,r){e.forEach((o,i)=>{if(o.isText){let s,l=/\r?\n|\r/g;for(;s=l.exec(o.text);){let a=n.mapping.slice(r).map(t+1+i+s.index);n.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function yv(n,e,t,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(t+1+i);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function sE(n,e,t){let r=n.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function lE(n,e,t,r,o){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let s=t.create(r,null,o||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Bt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new he(Z.from(s),0,0),1,!0))}function ar(n,e,t=1,r){let o=n.resolve(e),i=o.depth-t,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=t-2;c>i;c--,d--){let u=o.node(c),f=o.index(c);if(u.type.spec.isolating)return!1;let h=u.content.cutByIndex(f,u.childCount),p=r&&r[d+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[d]||u;if(!u.canReplace(f+1,u.childCount)||!g.type.validContent(h))return!1}let l=o.indexAfter(i),a=r&&r[0];return o.node(i).canReplaceWith(l,l,a?a.type:o.node(i+1).type)}function aE(n,e,t=1,r){let o=n.doc.resolve(e),i=Z.empty,s=Z.empty;for(let l=o.depth,a=o.depth-t,c=t-1;l>a;l--,c--){i=Z.from(o.node(l).copy(i));let d=r&&r[c];s=Z.from(d?d.type.create(d.attrs,s):o.node(l).copy(s))}n.step(new Lt(e,e,new he(i.append(s),t,t),!0))}function $r(n,e){let t=n.resolve(e),r=t.index();return vv(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function cE(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function vv(n,e){return!!(n&&e&&!n.isLeaf&&cE(n,e))}function Qc(n,e,t=-1){let r=n.resolve(e);for(let o=r.depth;;o--){let i,s,l=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):t>0?(i=r.node(o+1),l++,s=r.node(o).maybeChild(l)):(i=r.node(o).maybeChild(l-1),s=r.node(o+1)),i&&!i.isTextblock&&vv(i,s)&&r.node(o).canReplace(l,l+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function dE(n,e,t){let r=null,{linebreakReplacement:o}=n.doc.type.schema,i=n.doc.resolve(e-t),s=i.node().type;if(o&&s.inlineContent){let d=s.whitespace=="pre",u=!!s.contentMatch.matchType(o);d&&!u?r=!1:!d&&u&&(r=!0)}let l=n.steps.length;if(r===!1){let d=n.doc.resolve(e+t);yv(n,d.node(),d.before(),l)}s.inlineContent&&Wf(n,e+t-1,s,i.node().contentMatchAt(i.index()),r==null);let a=n.mapping.slice(l),c=a.map(e-t);if(n.step(new Lt(c,a.map(e+t,-1),he.empty,!0)),r===!0){let d=n.doc.resolve(c);gv(n,d.node(),d.before(),n.steps.length)}return n}function uE(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,t))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,t))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function bv(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let i=0;i<t.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let s=r.depth;s>=0;s--){let l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,a=r.index(s)+(l>0?1:0),c=r.node(s),d=!1;if(i==1)d=c.canReplace(a,a,o);else{let u=c.contentMatchAt(a).findWrapping(o.firstChild.type);d=u&&c.canReplaceWith(a,a,u[0])}if(d)return l==0?r.pos:l<0?r.before(s+1):r.after(s+1)}return null}function ed(n,e,t=e,r=he.empty){if(e==t&&!r.size)return null;let o=n.resolve(e),i=n.resolve(t);return wv(o,i,r)?new Lt(e,t,r):new fE(o,i,r).fit()}function wv(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class fE{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Z.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Z.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,l=o.depth;for(;s&&l&&i.childCount==1;)i=i.firstChild.content,s--,l--;let a=new he(i,s,l);return e>-1?new Bt(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new Lt(r.pos,o.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=Dd(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],d,u=null;if(t==1&&(s?c.matchType(s.type)||(u=c.fillBefore(Z.from(s),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:l,parent:i,inject:u};if(t==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:l,parent:i,wrap:d};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Dd(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new he(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Dd(e,t);if(o.childCount<=1&&t>0){let i=e.size-t<=t+o.size;this.unplaced=new he(Li(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new he(Li(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let s=this.unplaced,l=r?r.content:s.content,a=s.openStart-e,c=0,d=[],{match:u,type:f}=this.frontier[t];if(o){for(let g=0;g<o.childCount;g++)d.push(o.child(g));u=u.matchFragment(o)}let h=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let g=l.child(c),v=u.matchType(g.type);if(!v)break;c++,(c>1||a==0||g.content.size)&&(u=v,d.push(xv(g.mark(f.allowedMarks(g.marks)),c==1?a:0,c==l.childCount?h:-1)))}let p=c==l.childCount;p||(h=-1),this.placed=Fi(this.placed,t,Z.from(d)),this.frontier[t].match=u,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,v=l;g<h;g++){let x=v.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),v=x.content}this.unplaced=p?e==0?he.empty:new he(Li(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new he(Li(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Rd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Rd(e,t,o,r,i);if(s){for(let l=t-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],d=Rd(e,l,c,a,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Fi(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Fi(this.placed,this.depth,Z.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Z.empty,!0);t.childCount&&(this.placed=Fi(this.placed,this.frontier.length,t))}}function Li(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Li(n.firstChild.content,e-1,t)))}function Fi(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Fi(n.lastChild.content,e-1,t)))}function Dd(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function xv(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,xv(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Z.empty,!0)))),n.copy(r)}function Rd(n,e,t,r,o){let i=n.node(e),s=o?n.indexAfter(e):n.index(e);if(s==i.childCount&&!t.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,s);return l&&!hE(t,i.content,s)?l:null}function hE(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function pE(n){return n.spec.defining||n.spec.definingForContent}function mE(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),i=n.doc.resolve(t);if(wv(o,i,r))return n.step(new Lt(e,t,r));let s=kv(o,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let l=-(o.depth+1);s.unshift(l);for(let f=o.depth,h=o.pos-1;f>0;f--,h--){let p=o.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?l=f:o.before(f)==h&&s.splice(1,0,-f)}let a=s.indexOf(l),c=[],d=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=d-1;f>=0;f--){let h=c[f],p=pE(h.type);if(p&&!h.sameMarkup(o.node(Math.abs(l)-1)))d=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+d+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<s.length;g++){let v=s[(g+a)%s.length],x=!0;v<0&&(x=!1,v=-v);let b=o.node(v-1),w=o.index(v-1);if(b.canReplaceWith(w,w,p.type,p.marks))return n.replace(o.before(v),x?i.after(v):t,new he(Sv(r.content,0,r.openStart,h),h,r.openEnd))}}let u=n.steps.length;for(let f=s.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>u));f--){let h=s[f];h<0||(e=o.before(h),t=i.after(h))}}function Sv(n,e,t,r,o){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(Sv(i.content,e+1,t,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(n).append(n);n=s.append(i.matchFragment(s).fillBefore(Z.empty,!0))}return n}function gE(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=uE(n.doc,e,r.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new he(Z.from(r),0,0))}function yE(n,e,t){let r=n.doc.resolve(e),o=n.doc.resolve(t),i=kv(r,o);for(let s=0;s<i.length;s++){let l=i[s],a=s==i.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),o.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),o.indexAfter(l-1))))return n.delete(r.before(l),o.after(l))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&o.end(s)-t!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return n.delete(r.before(s),t);n.delete(e,t)}function kv(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let o=r;o>=0;o--){let i=n.start(o);if(i<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&t.push(o)}return t}class jo extends Zt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Tt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return Tt.fromReplace(e,this.pos,this.pos+1,new he(Z.from(o),0,t.isLeaf?0:1))}getMap(){return pn.empty}invert(e){return new jo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new jo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new jo(t.pos,t.attr,t.value)}}Zt.jsonID("attr",jo);class es extends Zt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Tt.ok(r)}getMap(){return pn.empty}invert(e){return new es(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new es(t.attr,t.value)}}Zt.jsonID("docAttr",es);let ai=class extends Error{};ai=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};ai.prototype=Object.create(Error.prototype);ai.prototype.constructor=ai;ai.prototype.name="TransformError";class vE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Qi}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ai(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=he.empty){let o=ed(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new he(Z.from(r),0,0))}delete(e,t){return this.replace(e,t,he.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return mE(this,e,t,r),this}replaceRangeWith(e,t,r){return gE(this,e,t,r),this}deleteRange(e,t){return yE(this,e,t),this}lift(e,t){return tE(this,e,t),this}join(e,t=1){return dE(this,e,t),this}wrap(e,t){return oE(this,e,t),this}setBlockType(e,t=e,r,o=null){return iE(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return lE(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new jo(e,t,r)),this}setDocAttribute(e,t){return this.step(new es(e,t)),this}addNodeMark(e,t){return this.step(new _r(e,t)),this}removeNodeMark(e,t){if(!(t instanceof dt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new li(e,t)),this}split(e,t=1,r){return aE(this,e,t,r),this}addMark(e,t,r){return ZA(this,e,t,r),this}removeMark(e,t,r){return QA(this,e,t,r),this}clearIncompatible(e,t,r){return Wf(this,e,t,r),this}}const zd=Object.create(null);class We{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new bE(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=he.empty){let r=t.content.lastChild,o=null;for(let l=0;l<t.openEnd;l++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],d=e.mapping.slice(i);e.replaceRange(d.map(a.pos),d.map(c.pos),l?he.empty:t),l==0&&$p(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:l}=o[i],a=e.mapping.slice(r),c=a.map(s.pos),d=a.map(l.pos);i?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),$p(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new Fe(e):Do(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=t<0?Do(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):Do(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new gn(e.node(0))}static atStart(e){return Do(e,e,0,0,1)||new gn(e)}static atEnd(e){return Do(e,e,e.content.size,e.childCount,-1)||new gn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=zd[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in zd)throw new RangeError("Duplicate use of selection JSON ID "+e);return zd[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Fe.between(this.$anchor,this.$head).getBookmark()}}We.prototype.visible=!0;class bE{constructor(e,t){this.$from=e,this.$to=t}}let Kp=!1;function jp(n){!Kp&&!n.parent.inlineContent&&(Kp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Fe extends We{constructor(e,t=e){jp(e),jp(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return We.near(r);let o=e.resolve(t.map(this.anchor));return new Fe(o.parent.inlineContent?o:r,r)}replace(e,t=he.empty){if(super.replace(e,t),t==he.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Fe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new td(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Fe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let i=We.findFrom(t,r,!0)||We.findFrom(t,-r,!0);if(i)t=i.$head;else return We.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(We.findFrom(e,-r,!0)||We.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new Fe(e,t)}}We.jsonID("text",Fe);class td{constructor(e,t){this.anchor=e,this.head=t}map(e){return new td(e.map(this.anchor),e.map(this.head))}resolve(e){return Fe.between(e.resolve(this.anchor),e.resolve(this.head))}}class _e extends We{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),i=e.resolve(o);return r?We.near(i):new _e(i)}content(){return new he(Z.from(this.node),0,0)}eq(e){return e instanceof _e&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new jf(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new _e(e.resolve(t.anchor))}static create(e,t){return new _e(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}_e.prototype.visible=!1;We.jsonID("node",_e);class jf{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new td(r,r):new jf(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&_e.isSelectable(r)?new _e(t):We.near(t)}}class gn extends We{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=he.empty){if(t==he.empty){e.delete(0,e.doc.content.size);let r=We.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new gn(e)}map(e){return new gn(e)}eq(e){return e instanceof gn}getBookmark(){return wE}}We.jsonID("all",gn);const wE={map(){return this},resolve(n){return new gn(n)}};function Do(n,e,t,r,o,i=!1){if(e.inlineContent)return Fe.create(n,t);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let l=e.child(s);if(l.isAtom){if(!i&&_e.isSelectable(l))return _e.create(n,t-(o<0?l.nodeSize:0))}else{let a=Do(n,l,t+o,o<0?l.childCount:0,o,i);if(a)return a}t+=l.nodeSize*o}return null}function $p(n,e,t){let r=n.steps.length-1;if(r<e)return;let o=n.steps[r];if(!(o instanceof Lt||o instanceof Bt))return;let i=n.mapping.maps[r],s;i.forEach((l,a,c,d)=>{s==null&&(s=d)}),n.setSelection(We.near(n.doc.resolve(s),t))}const Gp=1,Up=2,qp=4;class xE extends vE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Gp)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Gp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Up,this}ensureMarks(e){return dt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Up)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||dt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(t);i=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,i)),this.selection.empty||this.setSelection(We.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=qp,this}get scrolledIntoView(){return(this.updated&qp)>0}}function Jp(n,e){return!e||!n?n:n.bind(e)}class Bi{constructor(e,t,r){this.name=e,this.init=Jp(t.init,r),this.apply=Jp(t.apply,r)}}const SE=[new Bi("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Bi("selection",{init(n,e){return n.selection||We.atStart(e.doc)},apply(n){return n.selection}}),new Bi("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Bi("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ld{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=SE.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Bi(r.key,r.spec.state,r))})}}class Fo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let l=this.config.plugins[s];if(l.spec.appendTransaction){let a=o?o[s].n:0,c=o?o[s].state:this,d=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let u=0;u<this.config.plugins.length;u++)o.push(u<s?{state:r,n:t.length}:{state:this,n:0})}t.push(d),r=r.applyInner(d),i=!0}o&&(o[s]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Fo(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new xE(this)}static create(e){let t=new Ld(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fo(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new Ld(this.schema,e.plugins),r=t.fields,o=new Fo(t);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Ld(e.schema,e.plugins),i=new Fo(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Dr.fromJSON(e.schema,t.doc);else if(s.name=="selection")i.selection=We.fromJSON(i.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){i[s.name]=c.fromJSON.call(a,e,t[l],i);return}}i[s.name]=s.init(e,i)}}),i}}function Mv(n,e,t){for(let r in n){let o=n[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Mv(o,e,{})),t[r]=o}return t}class cn{constructor(e){this.spec=e,this.props={},e.props&&Mv(e.props,this,this.props),this.key=e.key?e.key.key:Cv("plugin")}getState(e){return e[this.key]}}const Fd=Object.create(null);function Cv(n){return n in Fd?n+"$"+ ++Fd[n]:(Fd[n]=0,n+"$")}class Un{constructor(e="key"){this.key=Cv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const jt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ci=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Iu=null;const Xn=function(n,e,t){let r=Iu||(Iu=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},kE=function(){Iu=null},vo=function(n,e,t,r){return t&&(Yp(n,e,t,r,-1)||Yp(n,e,t,r,1))},ME=/^(img|br|input|textarea|hr)$/i;function Yp(n,e,t,r,o){for(;;){if(n==t&&e==r)return!0;if(e==(o<0?0:Mn(n))){let i=n.parentNode;if(!i||i.nodeType!=1||sa(n)||ME.test(n.nodeName)||n.contentEditable=="false")return!1;e=jt(n)+(o<0?0:1),n=i}else if(n.nodeType==1){if(n=n.childNodes[e+(o<0?-1:0)],n.contentEditable=="false")return!1;e=o<0?Mn(n):0}else return!1}}function Mn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function CE(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Mn(n)}else if(n.parentNode&&!sa(n))e=jt(n),n=n.parentNode;else return null}}function OE(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!sa(n))e=jt(n)+1,n=n.parentNode;else return null}}function TE(n,e,t){for(let r=e==0,o=e==Mn(n);r||o;){if(n==t)return!0;let i=jt(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,o=o&&i==Mn(n)}}function sa(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const nd=function(n){return n.focusNode&&vo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function to(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function AE(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function EE(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Mn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Mn(r.startContainer),r.startOffset)}}}const Kn=typeof navigator<"u"?navigator:null,Xp=typeof document<"u"?document:null,Gr=Kn&&Kn.userAgent||"",Du=/Edge\/(\d+)/.exec(Gr),Ov=/MSIE \d/.exec(Gr),Ru=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Gr),an=!!(Ov||Ru||Du),zr=Ov?document.documentMode:Ru?+Ru[1]:Du?+Du[1]:0,_n=!an&&/gecko\/(\d+)/i.test(Gr);_n&&+(/Firefox\/(\d+)/.exec(Gr)||[0,0])[1];const zu=!an&&/Chrome\/(\d+)/.exec(Gr),Xt=!!zu,Tv=zu?+zu[1]:0,nn=!an&&!!Kn&&/Apple Computer/.test(Kn.vendor),di=nn&&(/Mobile\/\w+/.test(Gr)||!!Kn&&Kn.maxTouchPoints>2),kn=di||(Kn?/Mac/.test(Kn.platform):!1),PE=Kn?/Win/.test(Kn.platform):!1,ir=/Android \d/.test(Gr),la=!!Xp&&"webkitFontSmoothing"in Xp.documentElement.style,NE=la?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function _E(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Yn(n,e){return typeof n=="number"?n:n[e]}function IE(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Zp(n,e,t){let r=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let s=t||n.dom;s;){if(s.nodeType!=1){s=ci(s);continue}let l=s,a=l==i.body,c=a?_E(i):IE(l),d=0,u=0;if(e.top<c.top+Yn(r,"top")?u=-(c.top-e.top+Yn(o,"top")):e.bottom>c.bottom-Yn(r,"bottom")&&(u=e.bottom-e.top>c.bottom-c.top?e.top+Yn(o,"top")-c.top:e.bottom-c.bottom+Yn(o,"bottom")),e.left<c.left+Yn(r,"left")?d=-(c.left-e.left+Yn(o,"left")):e.right>c.right-Yn(r,"right")&&(d=e.right-c.right+Yn(o,"right")),d||u)if(a)i.defaultView.scrollBy(d,u);else{let h=l.scrollLeft,p=l.scrollTop;u&&(l.scrollTop+=u),d&&(l.scrollLeft+=d);let g=l.scrollLeft-h,v=l.scrollTop-p;e={left:e.left-g,top:e.top-v,right:e.right-g,bottom:e.bottom-v}}let f=a?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:ci(s)}}function DE(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let l=n.root.elementFromPoint(i,s);if(!l||l==n.dom||!n.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){r=l,o=a.top;break}}return{refDOM:r,refTop:o,stack:Av(n.dom)}}function Av(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ci(r));return e}function RE({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Ev(t,r==0?0:r-e)}function Ev(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:o,left:i}=n[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Ao=null;function zE(n){if(n.setActive)return n.setActive();if(Ao)return n.focus(Ao);let e=Av(n);n.focus(Ao==null?{get preventScroll(){return Ao={preventScroll:!0},!0}}:void 0),Ao||(Ao=!1,Ev(e,0))}function Pv(n,e){let t,r=2e8,o,i=0,s=e.top,l=e.top,a,c;for(let d=n.firstChild,u=0;d;d=d.nextSibling,u++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=Xn(d).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=l){s=Math.max(p.bottom,s),l=Math.min(p.top,l);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){t=d,r=g,o=g&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&g&&(i=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=u+1)}}return!t&&a&&(t=a,o=c,r=0),t&&t.nodeType==3?LE(t,o):!t||r&&t.nodeType==1?{node:n,offset:i}:Pv(t,o)}function LE(n,e){let t=n.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(n,o+1),r.setStart(n,o);let i=kr(r,1);if(i.top!=i.bottom&&$f(e,i))return{node:n,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function $f(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function FE(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function BE(n,e,t){let{node:r,offset:o}=Pv(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,o,i)}function VE(n,e,t,r){let o=-1;for(let i=e,s=!1;i!=n.dom;){let l=n.docView.nearestDesc(i,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&(!s&&a.left>r.left||a.top>r.top?o=l.posBefore:(!s&&a.right<r.left||a.bottom<r.top)&&(o=l.posAfter),s=!0),!l.contentDOM&&o<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function Nv(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=o;;){let s=n.childNodes[i];if(s.nodeType==1){let l=s.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if($f(e,c))return Nv(s,e,c)}}if((i=(i+1)%r)==o)break}return n}function HE(n,e){let t=n.dom.ownerDocument,r,o=0,i=EE(t,e.left,e.top);i&&({node:r,offset:o}=i);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!$f(e,c)||(s=Nv(n.dom,e,c),!s))return null}if(nn)for(let c=s;r&&c;c=ci(c))c.draggable&&(r=void 0);if(s=FE(s,e),r){if(_n&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],u;d.nodeName=="IMG"&&(u=d.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&o++}let c;la&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==n.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(l=VE(n,r,o,e))}l==null&&(l=BE(n,s,e));let a=n.docView.nearestDesc(s,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Qp(n){return n.top<n.bottom||n.left<n.right}function kr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Qp(r))return r}return Array.prototype.find.call(t,Qp)||n.getBoundingClientRect()}const WE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function _v(n,e,t){let{node:r,offset:o,atom:i}=n.docView.domFromPos(e,t<0?-1:1),s=la||_n;if(r.nodeType==3)if(s&&(WE.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let a=kr(Xn(r,o,o),t);if(_n&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=kr(Xn(r,o-1,o-1),-1);if(c.top==a.top){let d=kr(Xn(r,o,o+1),-1);if(d.top!=a.top)return _i(d,d.left<c.left)}}return a}else{let a=o,c=o,d=t<0?1:-1;return t<0&&!o?(c++,d=-1):t>=0&&o==r.nodeValue.length?(a--,d=1):t<0?a--:c++,_i(kr(Xn(r,a,c),d),d<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(t<0||o==Mn(r))){let a=r.childNodes[o-1];if(a.nodeType==1)return Bd(a.getBoundingClientRect(),!1)}if(i==null&&o<Mn(r)){let a=r.childNodes[o];if(a.nodeType==1)return Bd(a.getBoundingClientRect(),!0)}return Bd(r.getBoundingClientRect(),t>=0)}if(i==null&&o&&(t<0||o==Mn(r))){let a=r.childNodes[o-1],c=a.nodeType==3?Xn(a,Mn(a)-(s?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return _i(kr(c,1),!1)}if(i==null&&o<Mn(r)){let a=r.childNodes[o];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?Xn(a,0,s?0:1):a.nodeType==1?a:null:null;if(c)return _i(kr(c,-1),!0)}return _i(kr(r.nodeType==3?Xn(r):r,-t),t>=0)}function _i(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Bd(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Iv(n,e,t){let r=n.state,o=n.root.activeElement;r!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),o!=n.dom&&o&&o.focus()}}function KE(n,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return Iv(n,e,()=>{let{node:i}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let s=_v(n,o.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Xn(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let d=a[c];if(d.bottom>d.top+1&&(t=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const jE=/[\u0590-\u08ac]/;function $E(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,l=n.domSelection();return l?!jE.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?i:s:Iv(n,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:d,anchorOffset:u}=n.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==g;try{l.collapse(d,u),a&&(a!=d||c!=u)&&l.extend&&l.extend(a,c)}catch{}return f!=null&&(l.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let em=null,tm=null,nm=!1;function GE(n,e,t){return em==e&&tm==t?nm:(em=e,tm=t,nm=t=="up"||t=="down"?KE(n,e,t):$E(n,e,t))}const On=0,rm=1,ro=2,jn=3;class aa{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=On,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>jt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!t||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let l=o.children[s];if(l.size){o=l;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],l=i+s.size;if(l>e||s instanceof Rv){o=e-i;break}i=l}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Dv&&i.side>=0;r--);if(t<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&t&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?jt(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?jt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,l=0;;l++){let a=this.children[l],c=s+a.size;if(o==-1&&e<=c){let d=s+a.border;if(e>=d&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,d);e=s;for(let u=l;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=jt(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>t||l==this.children.length-1)){t=c;for(let d=l+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){i=jt(u.dom);break}t+=u.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let g=this.children[h],v=p+g.size;if(i>p&&s<v)return g.setSelection(e-p-g.border,t-p-g.border,r,o);p=v}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),u=!1;if((_n||nn)&&e==t){let{node:h,offset:p}=l;if(h.nodeType==3){if(u=!!(p&&h.nodeValue[p-1]==`
`),u&&p==h.nodeValue.length)for(let g=h,v;g;g=g.parentNode){if(v=g.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:jt(v)+1});break}let x=g.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let g=h.childNodes[p-1];u=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(_n&&d.focusNode&&d.focusNode!=a.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(o=!0)}if(!(o||u&&nn)&&vo(l.node,l.offset,d.anchorNode,d.anchorOffset)&&vo(a.node,a.offset,d.focusNode,d.focusOffset))return;let f=!1;if((c.extend||e==t)&&!u){c.collapse(l.node,l.offset);try{e!=t&&c.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>t){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let l=r+i.border,a=s-i.border;if(e>=l&&t<=a){this.dirty=e==r||t==s?ro:rm,e==l&&t==a&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=jn:i.markDirty(e-l,t-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?ro:jn}r=s}this.dirty=ro}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?ro:rm;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Dv extends aa{constructor(e,t,r,o){let i,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(s.nodeType!=1){let l=document.createElement("span");l.appendChild(s),s=l}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==On&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class UE extends aa{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class bo extends aa{constructor(e,t,r,o,i){super(e,[],r,o),this.mark=t,this.spec=i}static create(e,t,r,o){let i=o.nodeViews[t.type.name],s=i&&i(t,o,r);return(!s||!s.dom)&&(s=Co.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new bo(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&jn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=jn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=On){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=On}}slice(e,t,r){let o=bo.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;t<s&&(i=Fu(i,t,s,r)),e>0&&(i=Fu(i,0,e,r));for(let l=0;l<i.length;l++)i[l].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Lr extends aa{constructor(e,t,r,o,i,s,l,a,c){super(e,[],i,s),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=l}static create(e,t,r,o,i,s){let l=i.nodeViews[t.type.name],a,c=l&&l(t,i,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)},r,o),d=c&&c.dom,u=c&&c.contentDOM;if(t.isText){if(!d)d=document.createTextNode(t.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=Co.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!u&&!t.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Fv(d,r,t),c?a=new qE(e,t,r,o,d,u||null,f,c,i,s+1):t.isText?new rd(e,t,r,o,d,f,i):new Lr(e,t,r,o,d,u||null,f,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,t,r){return this.dirty==On&&e.eq(this.node)&&dc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new YE(this,s&&s.node,e);QE(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&a.syncToMarks(d==this.node.childCount?dt.none:this.node.child(d).marks,r,e),a.placeWidget(c,e,o)},(c,d,u,f)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,d,u,f)||l&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(c,d,u,h,e)||a.updateNextNode(c,d,u,e,f,o)||a.addNode(c,d,u,e,o),o+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==ro)&&(s&&this.protectLocalComposition(e,s),zv(this.contentDOM,this.children,e),di&&eP(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Fe)||r<t||o>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,l=tP(this.node.content,s,r-t,o-t);return l<0?null:{node:i,pos:l,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new UE(this,i,t,o);e.input.compositionNodes.push(s),this.children=Fu(this.children,r,r+o.length,e,s)}update(e,t,r,o){return this.dirty==jn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=On}updateOuterDeco(e){if(dc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Lv(this.dom,this.nodeDOM,Lu(this.outerDeco,this.node,t),Lu(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function om(n,e,t,r,o){Fv(r,e,n);let i=new Lr(void 0,n,e,t,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class rd extends Lr{constructor(e,t,r,o,i,s,l){super(e,t,r,o,i,null,s,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==jn||this.dirty!=On&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=On||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=On,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),i=document.createTextNode(o.text);return new rd(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=jn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Rv extends aa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==On&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class qE extends Lr{constructor(e,t,r,o,i,s,l,a,c,d){super(e,t,r,o,i,s,l,c,d),this.spec=a}update(e,t,r,o){if(this.dirty==jn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function zv(n,e,t){let r=n.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],l=s.dom;if(l.parentNode==n){for(;l!=r;)r=im(r),o=!0;r=r.nextSibling}else o=!0,n.insertBefore(l,r);if(s instanceof bo){let a=r?r.previousSibling:n.lastChild;zv(s.contentDOM,s.children,t),r=a?a.nextSibling:n.firstChild}}for(;r;)r=im(r),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const ji=function(n){n&&(this.nodeName=n)};ji.prototype=Object.create(null);const oo=[new ji];function Lu(n,e,t){if(n.length==0)return oo;let r=t?oo[0]:new ji,o=[r];for(let i=0;i<n.length;i++){let s=n[i].type.attrs;if(s){s.nodeName&&o.push(r=new ji(s.nodeName));for(let l in s){let a=s[l];a!=null&&(t&&o.length==1&&o.push(r=new ji(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return o}function Lv(n,e,t,r){if(t==oo&&r==oo)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],l=t[i];if(i){let a;l&&l.nodeName==s.nodeName&&o!=n&&(a=o.parentNode)&&a.nodeName.toLowerCase()==s.nodeName||(a=document.createElement(s.nodeName),a.pmIsDeco=!0,a.appendChild(o),l=oo[0]),o=a}JE(o,l||oo[0],s)}return o}function JE(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&n.classList.add(o[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function Fv(n,e,t){return Lv(n,n,oo,Lu(e,t,n.nodeType!=1))}function dc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function im(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class YE{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=XE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=On,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=bo.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))i=this.top.children.indexOf(s,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,o,i){let s=this.top.children[o];return s.dirty==jn&&s.dom==s.contentDOM&&(s.dirty=ro),s.update(e,t,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,i,s){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Lr){let c=this.preMatch.matched.get(a);if(c!=null&&c!=i)return!1;let d=a.dom,u,f=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=jn&&dc(t,a.outerDeco));if(!f&&a.update(e,t,r,o))return this.destroyBetween(this.index,l),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(a,e,t,r,o,s)))return this.destroyBetween(this.index,l),this.top.children[this.index]=u,u.contentDOM&&(u.dirty=ro,u.updateChildren(o,s+1),u.dirty=On),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!dc(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let l=Lr.create(this.top,t,r,o,i,s);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,t,r,o,i){let s=Lr.create(this.top,e,t,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new Dv(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof bo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof rd)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((nn||Xt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new Rv(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function XE(n,e){let t=e,r=t.children.length,o=n.childCount,i=new Map,s=[];e:for(;o>0;){let l;for(;;)if(r){let c=t.children[r-1];if(c instanceof bo)t=c,r=c.children.length;else{l=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let a=l.node;if(a){if(a!=n.child(o-1))break;--o,i.set(l,o),s.push(l)}}return{index:o,matched:i,matches:s.reverse()}}function ZE(n,e){return n.type.side-e.type.side}function QE(n,e,t,r){let o=e.locals(n),i=0;if(o.length==0){for(let c=0;c<n.childCount;c++){let d=n.child(c);r(d,o,e.forChild(i,d),c),i+=d.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){let d,u;for(;s<o.length&&o[s].to==i;){let v=o[s++];v.widget&&(d?(u||(u=[d])).push(v):d=v)}if(d)if(u){u.sort(ZE);for(let v=0;v<u.length;v++)t(u[v],c,!!a)}else t(d,c,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(c<n.childCount)h=c,f=n.child(c++);else break;for(let v=0;v<l.length;v++)l[v].to<=i&&l.splice(v--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)l.push(o[s++]);let p=i+f.nodeSize;if(f.isText){let v=p;s<o.length&&o[s].from<v&&(v=o[s].from);for(let x=0;x<l.length;x++)l[x].to<v&&(v=l[x].to);v<p&&(a=f.cut(v-i),f=f.cut(0,v-i),p=v,h=-1)}else for(;s<o.length&&o[s].to<p;)s++;let g=f.isInline&&!f.isLeaf?l.filter(v=>!v.inline):l.slice();r(f,g,e.forChild(i,f),h),i=p}}function eP(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function tP(n,e,t,r){for(let o=0,i=0;o<n.childCount&&i<=r;){let s=n.child(o++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;o<n.childCount;){let c=n.child(o++);if(i+=c.nodeSize,!c.isText)break;a+=c.text}if(i>=t){if(i>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=t)return l+c;if(t==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Fu(n,e,t,r,o){let i=[];for(let s=0,l=0;s<n.length;s++){let a=n[s],c=l,d=l+=a.size;c>=t||d<=e?i.push(a):(c<e&&i.push(a.slice(0,e-c,r)),o&&(i.push(o),o=void 0),d>t&&i.push(a.slice(t-c,a.size,r)))}return i}function Gf(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),i=o&&o.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let l=r.resolve(s),a,c;if(nd(t)){for(a=s;o&&!o.node;)o=o.parent;let u=o.node;if(o&&u.isAtom&&_e.isSelectable(u)&&o.parent&&!(u.isInline&&TE(t.focusNode,t.focusOffset,o.dom))){let f=o.posBefore;c=new _e(s==f?l:r.resolve(f))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let u=s,f=s;for(let h=0;h<t.rangeCount;h++){let p=t.getRangeAt(h);u=Math.min(u,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(u<0)return null;[a,s]=f==n.state.selection.anchor?[f,u]:[u,f],l=r.resolve(s)}else a=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(a<0)return null}let d=r.resolve(a);if(!c){let u=e=="pointer"||n.state.selection.head<l.pos&&!i?1:-1;c=Uf(n,d,l,u)}return c}function Bv(n){return n.editable?n.hasFocus():Hv(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function cr(n,e=!1){let t=n.state.selection;if(Vv(n,t),!!Bv(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Xt){let r=n.domSelectionRange(),o=n.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&vo(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)rP(n);else{let{anchor:r,head:o}=t,i,s;sm&&!(t instanceof Fe)&&(t.$from.parent.inlineContent||(i=lm(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=lm(n,t.to))),n.docView.setSelection(r,o,n,e),sm&&(i&&am(i),s&&am(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&nP(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const sm=nn||Xt&&Tv<63;function lm(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(nn&&o&&o.contentEditable=="false")return Vd(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return Vd(o);if(i)return Vd(i)}}function Vd(n){return n.contentEditable="true",nn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function am(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function nP(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Bv(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function rP(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setStart(r.parentNode,jt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&an&&zr<=11&&(r.disabled=!0,r.disabled=!1)}function Vv(n,e){if(e instanceof _e){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(cm(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else cm(n)}function cm(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Uf(n,e,t,r){return n.someProp("createSelectionBetween",o=>o(n,e,t))||Fe.between(e,t,r)}function dm(n){return n.editable&&!n.hasFocus()?!1:Hv(n)}function Hv(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function oP(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return vo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Bu(n,e){let{$anchor:t,$head:r}=n.selection,o=e>0?t.max(r):t.min(r),i=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return i&&We.findFrom(i,e)}function Cr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function um(n,e,t){let r=n.state.selection;if(r instanceof Fe)if(t.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=n.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Cr(n,new Fe(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=Bu(n.state,e);return o&&o instanceof _e?Cr(n,o):!1}else if(!(kn&&t.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let l=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=n.docView.descAt(l))&&!s.contentDOM?_e.isSelectable(i)?Cr(n,new _e(e<0?n.state.doc.resolve(o.pos-i.nodeSize):o)):la?Cr(n,new Fe(n.state.doc.resolve(e<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof _e&&r.node.isInline)return Cr(n,new Fe(e>0?r.$to:r.$from));{let o=Bu(n.state,e);return o?Cr(n,o):!1}}}function uc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function $i(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Eo(n,e){return e<0?iP(n):sP(n)}function iP(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,i,s=!1;for(_n&&t.nodeType==1&&r<uc(t)&&$i(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if($i(l,-1))o=t,i=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(Wv(t))break;{let l=t.previousSibling;for(;l&&$i(l,-1);)o=t.parentNode,i=jt(l),l=l.previousSibling;if(l)t=l,r=uc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?Vu(n,t,r):o&&Vu(n,o,i)}function sP(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=uc(t),i,s;for(;;)if(r<o){if(t.nodeType!=1)break;let l=t.childNodes[r];if($i(l,1))i=t,s=++r;else break}else{if(Wv(t))break;{let l=t.nextSibling;for(;l&&$i(l,1);)i=l.parentNode,s=jt(l)+1,l=l.nextSibling;if(l)t=l,r=0,o=uc(t);else{if(t=t.parentNode,t==n.dom)break;r=o=0}}}i&&Vu(n,i,s)}function Wv(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function lP(n,e){for(;n&&e==n.childNodes.length&&!sa(n);)e=jt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function aP(n,e){for(;n&&!e&&!sa(n);)e=jt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Vu(n,e,t){if(e.nodeType!=3){let i,s;(s=lP(e,t))?(e=s,t=0):(i=aP(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(nd(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&cr(n)},50)}function fm(n,e){let t=n.state.doc.resolve(e);if(!(Xt||PE)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function hm(n,e,t){let r=n.state.selection;if(r instanceof Fe&&!r.empty||t.indexOf("s")>-1||kn&&t.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=Bu(n.state,e);if(s&&s instanceof _e)return Cr(n,s)}if(!o.parent.inlineContent){let s=e<0?o:i,l=r instanceof gn?We.near(s,e):We.findFrom(s,e);return l?Cr(n,l):!1}return!1}function pm(n,e){if(!(n.state.selection instanceof Fe))return!0;let{$head:t,$anchor:r,empty:o}=n.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let s=n.state.tr;return e<0?s.delete(t.pos-i.nodeSize,t.pos):s.delete(t.pos,t.pos+i.nodeSize),n.dispatch(s),!0}return!1}function mm(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function cP(n){if(!nn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;mm(n,r,"true"),setTimeout(()=>mm(n,r,"false"),20)}return!1}function dP(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function uP(n,e){let t=e.keyCode,r=dP(e);if(t==8||kn&&t==72&&r=="c")return pm(n,-1)||Eo(n,-1);if(t==46&&!e.shiftKey||kn&&t==68&&r=="c")return pm(n,1)||Eo(n,1);if(t==13||t==27)return!0;if(t==37||kn&&t==66&&r=="c"){let o=t==37?fm(n,n.state.selection.from)=="ltr"?-1:1:-1;return um(n,o,r)||Eo(n,o)}else if(t==39||kn&&t==70&&r=="c"){let o=t==39?fm(n,n.state.selection.from)=="ltr"?1:-1:1;return um(n,o,r)||Eo(n,o)}else{if(t==38||kn&&t==80&&r=="c")return hm(n,-1,r)||Eo(n,-1);if(t==40||kn&&t==78&&r=="c")return cP(n)||hm(n,1,r)||Eo(n,1);if(r==(kn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function qf(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||Co.fromSchema(n.state.schema),l=qv(),a=l.createElement("div");a.appendChild(s.serializeFragment(r,{document:l}));let c=a.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=Uv[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let p=l.createElement(d[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),u++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${u?` -${u}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function Kv(n,e,t,r,o){let i=o.parent.type.spec.code,s,l;if(!t&&!e)return null;let a=e&&(r||i||!t);if(a){if(n.someProp("transformPastedText",f=>{e=f(e,i||r,n)}),i)return e?new he(Z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):he.empty;let u=n.someProp("clipboardTextParser",f=>f(e,o,r,n));if(u)l=u;else{let f=o.marks(),{schema:h}=n.state,p=Co.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let v=s.appendChild(document.createElement("p"));g&&v.appendChild(p.serializeNode(h.text(g,f)))})}}else n.someProp("transformPastedHTML",u=>{t=u(t,n)}),s=mP(t),la&&gP(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Rr.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(a||d),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!fP.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)l=yP(gm(l,+d[1],+d[2]),d[4]);else if(l=he.maxOpen(hP(l.content,o),!0),l.openStart||l.openEnd){let u=0,f=0;for(let h=l.content.firstChild;u<l.openStart&&!h.type.spec.isolating;u++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=gm(l,u,f)}return n.someProp("transformPasted",u=>{l=u(l,n)}),l}const fP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function hP(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),i,s=[];if(n.forEach(l=>{if(!s)return;let a=o.findWrapping(l.type),c;if(!a)return s=null;if(c=s.length&&i.length&&$v(a,i,l,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=Gv(s[s.length-1],i.length));let d=jv(l,a);s.push(d),o=o.matchType(d.type),i=a}}),s)return Z.from(s)}return n}function jv(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,Z.from(n));return n}function $v(n,e,t,r,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let i=$v(n,e,t,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==n.length-1?t.type:n[o+1]))return r.copy(r.content.append(Z.from(jv(t,n,o+1))))}}function Gv(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Gv(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(Z.empty,!0);return n.copy(t.append(r))}function Hu(n,e,t,r,o,i){let s=e<0?n.firstChild:n.lastChild,l=s.content;return n.childCount>1&&(i=0),o<r-1&&(l=Hu(l,e,t,r,o+1,i)),o>=t&&(l=e<0?s.contentMatchAt(0).fillBefore(l,i<=o).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(Z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(l))}function gm(n,e,t){return e<n.openStart&&(n=new he(Hu(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new he(Hu(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Uv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ym=null;function qv(){return ym||(ym=document.implementation.createHTMLDocument("title"))}let Hd=null;function pP(n){let e=window.trustedTypes;return e?(Hd||(Hd=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Hd.createHTML(n)):n}function mP(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=qv().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),o;if((o=r&&Uv[r[1].toLowerCase()])&&(n=o.map(i=>"<"+i+">").join("")+n+o.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=pP(n),o)for(let i=0;i<o.length;i++)t=t.querySelector(o[i])||t;return t}function gP(n){let e=n.querySelectorAll(Xt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function yP(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:o,openStart:i,openEnd:s}=n;for(let l=r.length-2;l>=0;l-=2){let a=t.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;o=Z.from(a.create(r[l+1],o)),i++,s++}return new he(o,i,s)}const rn={},on={},vP={touchstart:!0,touchmove:!0};class bP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function wP(n){for(let e in rn){let t=rn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{SP(n,r)&&!Jf(n,r)&&(n.editable||!(r.type in on))&&t(n,r)},vP[e]?{passive:!0}:void 0)}nn&&n.dom.addEventListener("input",()=>null),Wu(n)}function Ir(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function xP(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Wu(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Jf(n,r))})}function Jf(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function SP(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function kP(n,e){!Jf(n,e)&&rn[e.type]&&(n.editable||!(e.type in on))&&rn[e.type](n,e)}on.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Yv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ir&&Xt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),di&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",o=>o(n,to(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||uP(n,t)?t.preventDefault():Ir(n,"key")};on.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};on.keypress=(n,e)=>{let t=e;if(Yv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||kn&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Fe)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",i=>i(n,r.$from.pos,r.$to.pos,o))&&n.dispatch(n.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function od(n){return{left:n.clientX,top:n.clientY}}function MP(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Yf(n,e,t,r,o){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(n.someProp(e,l=>s>i.depth?l(n,t,i.nodeAfter,i.before(s),o,!0):l(n,t,i.node(s),i.before(s),o,!1)))return!0;return!1}function $o(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function CP(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&_e.isSelectable(r)?($o(n,new _e(t)),!0):!1}function OP(n,e){if(e==-1)return!1;let t=n.state.selection,r,o;t instanceof _e&&(r=t.node);let i=n.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s);if(_e.isSelectable(l)){r&&t.$from.depth>0&&s>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?o=i.before(t.$from.depth):o=i.before(s);break}}return o!=null?($o(n,_e.create(n.state.doc,o)),!0):!1}function TP(n,e,t,r,o){return Yf(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(o?OP(n,t):CP(n,t))}function AP(n,e,t,r){return Yf(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",o=>o(n,e,r))}function EP(n,e,t,r){return Yf(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",o=>o(n,e,r))||PP(n,t,r)}function PP(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?($o(n,Fe.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),l=o.before(i);if(s.inlineContent)$o(n,Fe.create(r,l+1,l+1+s.content.size));else if(_e.isSelectable(s))$o(n,_e.create(r,l));else continue;return!0}}function Xf(n){return fc(n)}const Jv=kn?"metaKey":"ctrlKey";rn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Xf(n),o=Date.now(),i="singleClick";o-n.input.lastClick.time<500&&MP(t,n.input.lastClick)&&!t[Jv]&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:i};let s=n.posAtCoords(od(t));s&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new NP(n,s,t,!!r)):(i=="doubleClick"?AP:EP)(n,s.pos,s.inside,t)?t.preventDefault():Ir(n,"pointer"))};class NP{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Jv],this.allowDefault=r.shiftKey;let i,s;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let d=e.state.doc.resolve(t.pos);i=d.parent,s=d.depth?d.before():0}const l=o?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.dom.nodeType==1?a.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof _e&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_n&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ir(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>cr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(od(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ir(this.view,"pointer"):TP(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||nn&&this.mightDrag&&!this.mightDrag.node.isAtom||Xt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?($o(this.view,We.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ir(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ir(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}rn.touchstart=n=>{n.input.lastTouch=Date.now(),Xf(n),Ir(n,"pointer")};rn.touchmove=n=>{n.input.lastTouch=Date.now(),Ir(n,"pointer")};rn.contextmenu=n=>Xf(n);function Yv(n,e){return n.composing?!0:nn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const _P=ir?5e3:-1;on.compositionstart=on.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Fe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),fc(n,!0),n.markCursor=null;else if(fc(n,!e.selection.empty),_n&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let l=n.domSelection();l&&l.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}n.input.composing=!0}Xv(n,_P)};on.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Xv(n,20))};function Xv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>fc(n),e))}function Zv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=DP());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function IP(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=CE(e.focusNode,e.focusOffset),r=OE(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function DP(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function fc(n,e=!1){if(!(ir&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Zv(n),e||n.docView&&n.docView.dirty){let t=Gf(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function RP(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const ts=an&&zr<15||di&&NE<604;rn.copy=on.cut=(n,e)=>{let t=e,r=n.state.selection,o=t.type=="cut";if(r.empty)return;let i=ts?null:t.clipboardData,s=r.content(),{dom:l,text:a}=qf(n,s);i?(t.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):RP(n,l),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function zP(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function LP(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ns(n,r.value,null,o,e):ns(n,r.textContent,r.innerHTML,o,e)},50)}function ns(n,e,t,r,o){let i=Kv(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,o,i||he.empty)))return!0;if(!i)return!1;let s=zP(i),l=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(i);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Qv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}on.paste=(n,e)=>{let t=e;if(n.composing&&!ir)return;let r=ts?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ns(n,Qv(r),r.getData("text/html"),o,t)?t.preventDefault():LP(n,t)};class eb{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const FP=kn?"altKey":"ctrlKey";function tb(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[FP]}rn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=n.state.selection,i=o.empty?null:n.posAtCoords(od(t)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof _e?o.to-1:o.to))){if(r&&r.mightDrag)s=_e.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let u=n.docView.nearestDesc(t.target,!0);u&&u.node.type.spec.draggable&&u!=n.docView&&(s=_e.create(n.state.doc,u.posBefore))}}let l=(s||n.state.selection).content(),{dom:a,text:c,slice:d}=qf(n,l);(!t.dataTransfer.files.length||!Xt||Tv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ts?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",ts||t.dataTransfer.setData("text/plain",c),n.dragging=new eb(d,tb(n,t),s)};rn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};on.dragover=on.dragenter=(n,e)=>e.preventDefault();on.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(od(t));if(!o)return;let i=n.state.doc.resolve(o.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=Kv(n,Qv(t.dataTransfer),ts?null:t.dataTransfer.getData("text/html"),!1,i);let l=!!(r&&tb(n,t));if(n.someProp("handleDrop",p=>p(n,t,s||he.empty,l))){t.preventDefault();return}if(!s)return;t.preventDefault();let a=s?bv(n.state.doc,i.pos,s):i.pos;a==null&&(a=i.pos);let c=n.state.tr;if(l){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let d=c.mapping.map(a),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(f))return;let h=c.doc.resolve(d);if(u&&_e.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new _e(h));else{let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((g,v,x,b)=>p=b),c.setSelection(Uf(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};rn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&cr(n)},20))};rn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};rn.beforeinput=(n,e)=>{if(Xt&&ir&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,to(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in on)rn[n]=on[n];function rs(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class hc{constructor(e,t){this.toDOM=e,this.spec=t||uo,this.side=this.spec.side||0}map(e,t,r,o){let{pos:i,deleted:s}=e.mapResult(t.from+o,this.side<0?-1:1);return s?null:new Cn(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof hc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Fr{constructor(e,t){this.attrs=e,this.spec=t||uo}map(e,t,r,o){let i=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Cn(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Fr&&rs(this.attrs,e.attrs)&&rs(this.spec,e.spec)}static is(e){return e.type instanceof Fr}destroy(){}}class Zf{constructor(e,t){this.attrs=e,this.spec=t||uo}map(e,t,r,o){let i=e.mapResult(t.from+o,1);if(i.deleted)return null;let s=e.mapResult(t.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Cn(i.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),i;return o==t.from&&!(i=e.child(r)).isText&&o+i.nodeSize==t.to}eq(e){return this==e||e instanceof Zf&&rs(this.attrs,e.attrs)&&rs(this.spec,e.spec)}destroy(){}}class Cn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Cn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Cn(e,e,new hc(t,r))}static inline(e,t,r,o){return new Cn(e,t,new Fr(r,o))}static node(e,t,r,o){return new Cn(e,t,new Zf(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Fr}get widget(){return this.type instanceof hc}}const Ro=[],uo={};class Dt{constructor(e,t){this.local=e.length?e:Ro,this.children=t.length?t:Ro}static create(e,t){return t.length?pc(t,e,0,uo):Yt}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,i){for(let s=0;s<this.local.length;s++){let l=this.local[s];l.from<=t&&l.to>=e&&(!i||i(l.spec))&&r.push(l.copy(l.from+o,l.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,r,o+l,i)}}map(e,t,r){return this==Yt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||uo)}mapInner(e,t,r,o,i){let s;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,o);a&&a.type.valid(t,a)?(s||(s=[])).push(a):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?BP(this.children,s||[],e,t,r,o,i):s?new Dt(s.sort(fo),Ro):Yt}add(e,t){return t.length?this==Yt?Dt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,i=0;e.forEach((l,a)=>{let c=a+r,d;if(d=rb(t,l,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<a;)i+=3;o[i]==a?o[i+2]=o[i+2].addInner(l,d,c+1):o.splice(i,0,a,a+l.nodeSize,pc(d,l,c+1,uo)),i+=3}});let s=nb(i?ob(t):t,-r);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||s.splice(l--,1);return new Dt(s.length?this.local.concat(s).sort(fo):this.local,o||this.children)}remove(e){return e.length==0||this==Yt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,l=r[i]+t,a=r[i+1]+t;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>l&&u.to<a&&(e[d]=null,(s||(s=[])).push(u));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,l+1);c!=Yt?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let l=0;l<o.length;l++)o[l].eq(s,t)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Dt(o,r):Yt}forChild(e,t){if(this==Yt)return this;if(t.isLeaf)return Dt.empty;let r,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let i=e+1,s=i+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<s&&a.to>i&&a.type instanceof Fr){let c=Math.max(i,a.from)-i,d=Math.min(s,a.to)-i;c<d&&(o||(o=[])).push(a.copy(c,d))}}if(o){let l=new Dt(o.sort(fo),Ro);return r?new Tr([l,r]):l}return r||Yt}eq(e){if(this==e)return!0;if(!(e instanceof Dt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Qf(this.localsInner(e))}localsInner(e){if(this==Yt)return Ro;if(e.inlineContent||!this.local.some(Fr.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Fr||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Dt.empty=new Dt([],[]);Dt.removeOverlap=Qf;const Yt=Dt.empty;class Tr{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,uo));return Tr.from(r)}forChild(e,t){if(t.isLeaf)return Dt.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,t);i!=Yt&&(i instanceof Tr?r=r.concat(i.members):r.push(i))}return Tr.from(r)}eq(e){if(!(e instanceof Tr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let s=0;s<i.length;s++)t.push(i[s])}}return t?Qf(r?t:t.sort(fo)):Ro}static from(e){switch(e.length){case 0:return Yt;case 1:return e[0];default:return new Tr(e.every(t=>t instanceof Dt)?e:e.reduce((t,r)=>t.concat(r instanceof Dt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function BP(n,e,t,r,o,i,s){let l=n.slice();for(let c=0,d=i;c<t.maps.length;c++){let u=0;t.maps[c].forEach((f,h,p,g)=>{let v=g-p-(h-f);for(let x=0;x<l.length;x+=3){let b=l[x+1];if(b<0||f>b+d-u)continue;let w=l[x]+d-u;h>=w?l[x+1]=f<=w?-2:-1:f>=d&&v&&(l[x]+=v,l[x+1]+=v)}u+=v}),d=t.maps[c].map(d,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let d=t.map(n[c]+i),u=d-o;if(u<0||u>=r.content.size){a=!0;continue}let f=t.map(n[c+1]+i,-1),h=f-o,{index:p,offset:g}=r.content.findIndex(u),v=r.maybeChild(p);if(v&&g==u&&g+v.nodeSize==h){let x=l[c+2].mapInner(t,v,d+1,n[c]+i+1,s);x!=Yt?(l[c]=u,l[c+1]=h,l[c+2]=x):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=VP(l,n,e,t,o,i,s),d=pc(c,r,0,s);e=d.local;for(let u=0;u<l.length;u+=3)l[u+1]<0&&(l.splice(u,3),u-=3);for(let u=0,f=0;u<d.children.length;u+=3){let h=d.children[u];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,d.children[u],d.children[u+1],d.children[u+2])}}return new Dt(e.sort(fo),l)}function nb(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let o=n[r];t.push(new Cn(o.from+e,o.to+e,o.type))}return t}function VP(n,e,t,r,o,i,s){function l(a,c){for(let d=0;d<a.local.length;d++){let u=a.local[d].map(r,o,c);u?t.push(u):s.onRemove&&s.onRemove(a.local[d].spec)}for(let d=0;d<a.children.length;d+=3)l(a.children[d+2],a.children[d]+c+1)}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+i+1);return t}function rb(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let i=0,s;i<n.length;i++)(s=n[i])&&s.from>t&&s.to<r&&((o||(o=[])).push(s),n[i]=null);return o}function ob(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function pc(n,e,t,r){let o=[],i=!1;e.forEach((l,a)=>{let c=rb(n,l,a+t);if(c){i=!0;let d=pc(c,l,t+a+1,r);d!=Yt&&o.push(a,a+l.nodeSize,d)}});let s=nb(i?ob(n):n,-t).sort(fo);for(let l=0;l<s.length;l++)s[l].type.valid(e,s[l])||(r.onRemove&&r.onRemove(s[l].spec),s.splice(l--,1));return s.length||o.length?new Dt(s,o):Yt}function fo(n,e){return n.from-e.from||n.to-e.to}function Qf(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[o]=i.copy(i.from,r.to),vm(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),vm(e,o,r.copy(i.from,r.to)));break}}}return e}function vm(n,e,t){for(;e<n.length&&fo(t,n[e])>0;)e++;n.splice(e,0,t)}function Wd(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Yt&&e.push(r)}),n.cursorWrapper&&e.push(Dt.create(n.state.doc,[n.cursorWrapper.deco])),Tr.from(e)}const HP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},WP=an&&zr<=11;class KP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class jP{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new KP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);an&&zr<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),WP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,HP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(dm(this.view)){if(this.suppressingSelectionUpdates)return cr(this.view);if(an&&zr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=ci(i))t.add(i);for(let i=e.anchorNode;i;i=ci(i))if(t.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&dm(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,l=!1,a=[];if(e.editable)for(let d=0;d<t.length;d++){let u=this.registerMutation(t[d],a);u&&(i=i<0?u.from:Math.min(u.from,i),s=s<0?u.to:Math.max(u.to,s),u.typeOver&&(l=!0))}if(_n&&a.length){let d=a.filter(u=>u.nodeName=="BR");if(d.length==2){let[u,f]=d;u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove()}else{let{focusNode:u}=this.currentSelection;for(let f of d){let h=f.parentNode;h&&h.nodeName=="LI"&&(!u||UP(e,u)!=h)&&f.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nd(r)&&(c=Gf(e))&&c.eq(We.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,cr(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),$P(e)),this.handleDOMChange(i,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||cr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let u=e.addedNodes[d];t.push(u),u.nodeType==3&&(this.lastChangedTextNode=u)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(an&&zr<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:f}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(o=u),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let s=o&&o.parentNode==e.target?jt(o)+1:0,l=r.localPosFromDOM(e.target,s,-1),a=i&&i.parentNode==e.target?jt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let bm=new WeakMap,wm=!1;function $P(n){if(!bm.has(n)&&(bm.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=_n,wm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),wm=!0}}function xm(n,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return vo(s.node,s.offset,o,i)&&([t,r,o,i]=[o,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:i}}function GP(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return xm(n,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?xm(n,t):null}function UP(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function qP(n,e,t){let{node:r,fromOffset:o,toOffset:i,from:s,to:l}=n.docView.parseRange(e,t),a=n.domSelectionRange(),c,d=a.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:a.anchorOffset}],nd(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Xt&&n.input.lastKeyCode===8)for(let v=i;v>o;v--){let x=r.childNodes[v-1],b=x.pmViewDesc;if(x.nodeName=="BR"&&!b){i=v;break}if(!b||b.size)break}let u=n.state.doc,f=n.someProp("domParser")||Rr.fromSchema(n.state.schema),h=u.resolve(s),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:JP,context:h});if(c&&c[0].pos!=null){let v=c[0].pos,x=c[1]&&c[1].pos;x==null&&(x=v),p={anchor:v+s,head:x+s}}return{doc:g,sel:p,from:s,to:l}}function JP(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(nn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||nn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const YP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function XP(n,e,t,r,o){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let P=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,z=Gf(n,P);if(z&&!n.state.selection.eq(z)){if(Xt&&ir&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",R=>R(n,to(13,"Enter"))))return;let W=n.state.tr.setSelection(z);P=="pointer"?W.setMeta("pointer",!0):P=="key"&&W.scrollIntoView(),i&&W.setMeta("composition",i),n.dispatch(W)}return}let s=n.state.doc.resolve(e),l=s.sharedDepth(t);e=s.before(l+1),t=n.state.doc.resolve(t).after(l+1);let a=n.state.selection,c=qP(n,e,t),d=n.state.doc,u=d.slice(c.from,c.to),f,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,h="end"):(f=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=eN(u.content,c.doc.content,c.from,f,h);if(p&&n.input.domChangeCount++,(di&&n.input.lastIOSEnter>Date.now()-225||ir)&&o.some(P=>P.nodeType==1&&!YP.test(P.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",P=>P(n,to(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof Fe&&!a.empty&&a.$head.sameParent(a.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let P=Sm(n,n.state.doc,c.sel);if(P&&!P.eq(n.state.selection)){let z=n.state.tr.setSelection(P);i&&z.setMeta("composition",i),n.dispatch(z)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof Fe&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),an&&zr<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),v=c.doc.resolveNoCache(p.endB-c.from),x=d.resolve(p.start),b=g.sameParent(v)&&g.parent.inlineContent&&x.end()>=p.endA,w;if((di&&n.input.lastIOSEnter>Date.now()-225&&(!b||o.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!b&&g.pos<c.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&(w=We.findFrom(c.doc.resolve(g.pos+1),1,!0))&&w.head>g.pos)&&n.someProp("handleKeyDown",P=>P(n,to(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&QP(d,p.start,p.endA,g,v)&&n.someProp("handleKeyDown",P=>P(n,to(8,"Backspace")))){ir&&Xt&&n.domObserver.suppressSelectionUpdates();return}Xt&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),ir&&!b&&g.start()!=v.start()&&v.parentOffset==0&&g.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,v=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(P){return P(n,to(13,"Enter"))})},20));let M=p.start,k=p.endA,S,A,T;if(b){if(g.pos==v.pos)an&&zr<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>cr(n),20)),S=n.state.tr.delete(M,k),A=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(T=ZP(g.parent.content.cut(g.parentOffset,v.parentOffset),x.parent.content.cut(x.parentOffset,p.endA-x.start()))))S=n.state.tr,T.type=="add"?S.addMark(M,k,T.mark):S.removeMark(M,k,T.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let P=g.parent.textBetween(g.parentOffset,v.parentOffset);if(n.someProp("handleTextInput",z=>z(n,M,k,P)))return;S=n.state.tr.insertText(P,M,k)}}if(S||(S=n.state.tr.replace(M,k,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let P=Sm(n,S.doc,c.sel);P&&!(Xt&&n.composing&&P.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(P.head==M||P.head==S.mapping.map(k)-1)||an&&P.empty&&P.head==M)&&S.setSelection(P)}A&&S.ensureMarks(A),i&&S.setMeta("composition",i),n.dispatch(S.scrollIntoView())}function Sm(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Uf(n,e.resolve(t.anchor),e.resolve(t.head))}function ZP(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,o=t,i=r,s,l,a;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<t.length;d++)i=t[d].removeFromSet(i);if(o.length==1&&i.length==0)l=o[0],s="add",a=d=>d.mark(l.addToSet(d.marks));else if(o.length==0&&i.length==1)l=i[0],s="remove",a=d=>d.mark(l.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(a(e.child(d)));if(Z.from(c).eq(n))return{mark:l,type:s}}function QP(n,e,t,r,o){if(t-e<=o.pos-r.pos||Kd(r,!0,!1)<o.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let l=i.nodeAfter;return l!=null&&t==e+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=n.resolve(Kd(i,!0,!0));return!s.parent.isTextblock||s.pos>t||Kd(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Kd(n,e,t){let r=n.depth,o=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,o++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function eN(n,e,t,r,o){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:s,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let a=Math.max(0,i-Math.min(s,l));r-=s+a-i}if(s<i&&n.size<e.size){let a=r<=i&&r>=s?i-r:0;i-=a,i&&i<e.size&&km(e.textBetween(i-1,i+1))&&(i+=a?1:-1),l=i+(l-s),s=i}else if(l<i){let a=r<=i&&r>=l?i-r:0;i-=a,i&&i<n.size&&km(n.textBetween(i-1,i+1))&&(i+=a?1:-1),s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}function km(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class tN{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new bP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Am),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Om(this),Cm(this),this.nodeViews=Tm(this),this.docView=om(this.state.doc,Mm(this),Wd(this),this.dom,this),this.domObserver=new jP(this,(r,o,i,s)=>XP(this,r,o,i,s)),this.domObserver.start(),wP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Wu(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Am),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Zv(this),s=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Tm(this);rN(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&Wu(this),this.editable=Om(this),Cm(this);let a=Wd(this),c=Mm(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(e.doc,c,a);(u||!e.selection.eq(o.selection))&&(s=!0);let f=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&DE(this);if(s){this.domObserver.stop();let h=u&&(an||Xt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&nN(o.selection,e.selection);if(u){let p=Xt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=IP(this)),(i||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=om(e.doc,c,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&oP(this))?cr(this,h):(Vv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():f&&RE(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof _e){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Zp(this,t.getBoundingClientRect(),e)}else Zp(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new eb(e.slice,e.move,o<0?void 0:_e.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let l=this.directPlugins[s].props[e];if(l!=null&&(o=t?t(l):l))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let l=i[s].props[e];if(l!=null&&(o=t?t(l):l))return o}}hasFocus(){if(an){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&zE(this.dom),cr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return HE(this,e)}coordsAtPos(e,t=1){return _v(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return GE(this,t||this.state,e)}pasteHTML(e,t){return ns(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ns(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return qf(this,e)}destroy(){this.docView&&(xP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,kE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return kP(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?nn&&this.root.nodeType===11&&AE(this.dom.ownerDocument)==this.dom&&GP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Mm(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Cn.node(0,n.state.doc.content.size,e)]}function Cm(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Cn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Om(n){return!n.someProp("editable",e=>e(n.state)===!1)}function nN(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Tm(n){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function rN(n,e){let t=0,r=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function Am(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Kr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},mc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},oN=typeof navigator<"u"&&/Mac/.test(navigator.platform),iN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $t=0;$t<10;$t++)Kr[48+$t]=Kr[96+$t]=String($t);for(var $t=1;$t<=24;$t++)Kr[$t+111]="F"+$t;for(var $t=65;$t<=90;$t++)Kr[$t]=String.fromCharCode($t+32),mc[$t]=String.fromCharCode($t);for(var jd in Kr)mc.hasOwnProperty(jd)||(mc[jd]=Kr[jd]);function sN(n){var e=oN&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||iN&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?mc:Kr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const lN=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function aN(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,i,s;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))lN?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),s&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function cN(n){let e=Object.create(null);for(let t in n)e[aN(t)]=n[t];return e}function $d(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function dN(n){return new cn({props:{handleKeyDown:ib(n)}})}function ib(n){let e=cN(n);return function(t,r){let o=sN(r),i,s=e[$d(o,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let l=e[$d(o,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(i=Kr[r.keyCode])&&i!=o){let l=e[$d(i,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}const eh=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function sb(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const lb=(n,e,t)=>{let r=sb(n,t);if(!r)return!1;let o=th(r);if(!o){let s=r.blockRange(),l=s&&bi(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)}let i=o.nodeBefore;if(gb(n,o,e,-1))return!0;if(r.parent.content.size==0&&(ui(i,"end")||_e.isSelectable(i)))for(let s=r.depth;;s--){let l=ed(n.doc,r.before(s),r.after(s),he.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=n.tr.step(l);a.setSelection(ui(i,"end")?We.findFrom(a.doc.resolve(a.mapping.map(o.pos,-1)),-1):_e.create(a.doc,o.pos-i.nodeSize)),e(a.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},uN=(n,e,t)=>{let r=sb(n,t);if(!r)return!1;let o=th(r);return o?ab(n,o,e):!1},fN=(n,e,t)=>{let r=db(n,t);if(!r)return!1;let o=nh(r);return o?ab(n,o,e):!1};function ab(n,e,t){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let s=e.nodeAfter,l=s,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let d=l.firstChild;if(!d)return!1;l=d}let c=ed(n.doc,i,a,he.empty);if(!c||c.from!=i||c instanceof Lt&&c.slice.size>=a-i)return!1;if(t){let d=n.tr.step(c);d.setSelection(Fe.create(d.doc,i)),t(d.scrollIntoView())}return!0}function ui(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const cb=(n,e,t)=>{let{$head:r,empty:o}=n.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=th(r)}let s=i&&i.nodeBefore;return!s||!_e.isSelectable(s)?!1:(e&&e(n.tr.setSelection(_e.create(n.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function th(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function db(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const ub=(n,e,t)=>{let r=db(n,t);if(!r)return!1;let o=nh(r);if(!o)return!1;let i=o.nodeAfter;if(gb(n,o,e,1))return!0;if(r.parent.content.size==0&&(ui(i,"start")||_e.isSelectable(i))){let s=ed(n.doc,r.before(),r.after(),he.empty);if(s&&s.slice.size<s.to-s.from){if(e){let l=n.tr.step(s);l.setSelection(ui(i,"start")?We.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):_e.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},fb=(n,e,t)=>{let{$head:r,empty:o}=n.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=nh(r)}let s=i&&i.nodeAfter;return!s||!_e.isSelectable(s)?!1:(e&&e(n.tr.setSelection(_e.create(n.doc,i.pos)).scrollIntoView()),!0)};function nh(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const hN=(n,e)=>{let t=n.selection,r=t instanceof _e,o;if(r){if(t.node.isTextblock||!$r(n.doc,t.from))return!1;o=t.from}else if(o=Qc(n.doc,t.from,-1),o==null)return!1;if(e){let i=n.tr.join(o);r&&i.setSelection(_e.create(i.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},pN=(n,e)=>{let t=n.selection,r;if(t instanceof _e){if(t.node.isTextblock||!$r(n.doc,t.to))return!1;r=t.to}else if(r=Qc(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},mN=(n,e)=>{let{$from:t,$to:r}=n.selection,o=t.blockRange(r),i=o&&bi(o);return i==null?!1:(e&&e(n.tr.lift(o,i).scrollIntoView()),!0)},hb=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function rh(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const gN=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),i=t.indexAfter(-1),s=rh(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,s.createAndFill());a.setSelection(We.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},pb=(n,e)=>{let t=n.selection,{$from:r,$to:o}=t;if(t instanceof gn||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=rh(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=n.tr.insert(s,i.createAndFill());l.setSelection(Fe.create(l.doc,s+1)),e(l.scrollIntoView())}return!0},mb=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(ar(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),o=r&&bi(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)};function yN(n){return(e,t)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof _e&&e.selection.node.isBlock)return!r.parentOffset||!ar(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=rh(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),i.unshift(a&&l?{type:l}:null),s=h;break}else{if(h==1)return!1;i.unshift(null)}let d=e.tr;(e.selection instanceof Fe||e.selection instanceof gn)&&d.deleteSelection();let u=d.mapping.map(r.pos),f=ar(d.doc,u,i.length,i);if(f||(i[0]=l?{type:l}:null,f=ar(d.doc,u,i.length,i)),!f)return!1;if(d.split(u,i.length,i),!a&&c&&r.node(s).type!=l){let h=d.mapping.map(r.before(s)),p=d.doc.resolve(h);l&&r.node(s-1).canReplaceWith(p.index(),p.index()+1,l)&&d.setNodeMarkup(d.mapping.map(r.before(s)),l)}return t&&t(d.scrollIntoView()),!0}}const vN=yN(),bN=(n,e)=>{let{$from:t,to:r}=n.selection,o,i=t.sharedDepth(r);return i==0?!1:(o=t.before(i),e&&e(n.tr.setSelection(_e.create(n.doc,o))),!0)};function wN(n,e,t){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||$r(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function gb(n,e,t,r){let o=e.nodeBefore,i=e.nodeAfter,s,l,a=o.type.spec.isolating||i.type.spec.isolating;if(!a&&wN(n,e,t))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(l=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&l.matchType(s[0]||i.type).validEnd){if(t){let h=e.pos+i.nodeSize,p=Z.empty;for(let x=s.length-1;x>=0;x--)p=Z.from(s[x].create(null,p));p=Z.from(o.copy(p));let g=n.tr.step(new Bt(e.pos-1,h,e.pos,h,new he(p,1,0),s.length,!0)),v=g.doc.resolve(h+2*s.length);v.nodeAfter&&v.nodeAfter.type==o.type&&$r(g.doc,v.pos)&&g.join(v.pos),t(g.scrollIntoView())}return!0}let d=i.type.spec.isolating||r>0&&a?null:We.findFrom(e,1),u=d&&d.$from.blockRange(d.$to),f=u&&bi(u);if(f!=null&&f>=e.depth)return t&&t(n.tr.lift(u,f).scrollIntoView()),!0;if(c&&ui(i,"start",!0)&&ui(o,"end")){let h=o,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let g=i,v=1;for(;!g.isTextblock;g=g.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(t){let x=Z.empty;for(let w=p.length-1;w>=0;w--)x=Z.from(p[w].copy(x));let b=n.tr.step(new Bt(e.pos-p.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new he(x,p.length,0),0,!0));t(b.scrollIntoView())}return!0}}return!1}function yb(n){return function(e,t){let r=e.selection,o=n<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(t&&t(e.tr.setSelection(Fe.create(e.doc,n<0?o.start(i):o.end(i)))),!0):!1}}const xN=yb(-1),SN=yb(1);function kN(n,e=null){return function(t,r){let{$from:o,$to:i}=t.selection,s=o.blockRange(i),l=s&&Kf(s,n,e);return l?(r&&r(t.tr.wrap(s,l).scrollIntoView()),!0):!1}}function Em(n,e=null){return function(t,r){let o=!1;for(let i=0;i<t.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:l}}=t.selection.ranges[i];t.doc.nodesBetween(s,l,(a,c)=>{if(o)return!1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)o=!0;else{let d=t.doc.resolve(c),u=d.index();o=d.parent.canReplaceWith(u,u+1,n)}})}if(!o)return!1;if(r){let i=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[s];i.setBlockType(l,a,n,e)}r(i.scrollIntoView())}return!0}}function oh(...n){return function(e,t,r){for(let o=0;o<n.length;o++)if(n[o](e,t,r))return!0;return!1}}oh(eh,lb,cb);oh(eh,ub,fb);oh(hb,pb,mb,vN);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function MN(n,e=null){return function(t,r){let{$from:o,$to:i}=t.selection,s=o.blockRange(i);if(!s)return!1;let l=r?t.tr:null;return CN(l,s,n,e)?(r&&r(l.scrollIntoView()),!0):!1}}function CN(n,e,t,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=s.resolve(e.start-2);i=new ac(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new ac(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let l=Kf(i,t,r,e);return l?(n&&ON(n,e,l,o,t),!0):!1}function ON(n,e,t,r,o){let i=Z.empty;for(let d=t.length-1;d>=0;d--)i=Z.from(t[d].type.create(t[d].attrs,i));n.step(new Bt(e.start-(r?2:0),e.end,e.start,e.end,new he(i,0,0),t.length,!0));let s=0;for(let d=0;d<t.length;d++)t[d].type==o&&(s=d+1);let l=t.length-s,a=e.start+t.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,f=!0;d<u;d++,f=!1)!f&&ar(n.doc,a,l)&&(n.split(a,l),a+=2*l),a+=c.child(d).nodeSize;return n}function TN(n){return function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?AN(e,t,n,i):EN(e,t,i):!0:!1}}function AN(n,e,t,r){let o=n.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Bt(i-1,s,i,s,new he(Z.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new ac(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const l=bi(r);if(l==null)return!1;o.lift(r,l);let a=o.doc.resolve(o.mapping.map(i,-1)-1);return $r(o.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&o.join(a.pos),e(o.scrollIntoView()),!0}function EN(n,e,t){let r=n.tr,o=t.parent;for(let h=t.end,p=t.endIndex-1,g=t.startIndex;p>g;p--)h-=o.child(p).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(t.start),s=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let l=t.startIndex==0,a=t.endIndex==o.childCount,c=i.node(-1),d=i.index(-1);if(!c.canReplace(d+(l?0:1),d+1,s.content.append(a?Z.empty:Z.from(o))))return!1;let u=i.pos,f=u+s.nodeSize;return r.step(new Bt(u-(l?1:0),f+(a?1:0),u+1,f-1,new he((l?Z.empty:Z.from(o.copy(Z.empty))).append(a?Z.empty:Z.from(o.copy(Z.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function PN(n){return function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==n);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let l=i.parent,a=l.child(s-1);if(a.type!=n)return!1;if(t){let c=a.lastChild&&a.lastChild.type==l.type,d=Z.from(c?n.create():null),u=new he(Z.from(n.create(null,Z.from(l.type.create(null,d)))),c?3:1,0),f=i.start,h=i.end;t(e.tr.step(new Bt(f-(c?3:1),h,f,h,u,1,!0)).scrollIntoView())}return!0}}function id(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:o}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,i=t.storedMarks,t}}}class sd{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...d)=>{const u=a(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,l=[],a=!!e,c=e||i.tr,d=()=>(!a&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>{const v=this.buildProps(c,t),x=h(...g)(v);return l.push(x),u}])),run:d};return u}createCan(e){const{rawCommands:t,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,t=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,l={tr:e,editor:o,view:s,state:id({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...d)=>c(...d)(l)]))}};return l}}class NN{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const r=(...o)=>{this.off(e,r),t.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Se(n,e,t){return n.config[e]===void 0&&n.parent?Se(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Se(n.parent,e,t):null}):n.config[e]}function ld(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),r=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function vb(n){const e=[],{nodeExtensions:t,markExtensions:r}=ld(n),o=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage,extensions:o},a=Se(s,"addGlobalAttributes",l);if(!a)return;a().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([f,h])=>{e.push({type:u,name:f,attribute:{...i,...h}})})})})}),o.forEach(s=>{const l={name:s.name,options:s.options,storage:s.storage},a=Se(s,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([d,u])=>{const f={...i,...u};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:d,attribute:f})})}),e}function Ht(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function At(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const l=i?String(i).split(" "):[],a=r[o]?r[o].split(" "):[],c=l.filter(d=>!a.includes(d));r[o]=[...a,...c].join(" ")}else if(o==="style"){const l=i?i.split(";").map(d=>d.trim()).filter(Boolean):[],a=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;a.forEach(d=>{const[u,f]=d.split(":").map(h=>h.trim());c.set(u,f)}),l.forEach(d=>{const[u,f]=d.split(":").map(h=>h.trim());c.set(u,f)}),r[o]=Array.from(c.entries()).map(([d,u])=>`${d}: ${u}`).join("; ")}else r[o]=i}),r},{})}function Ku(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>At(t,r),{})}function bb(n){return typeof n=="function"}function Ge(n,e=void 0,...t){return bb(n)?e?n.bind(e)(...t):n(...t):n}function _N(n={}){return Object.keys(n).length===0&&n.constructor===Object}function IN(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Pm(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const l=s.attribute.parseHTML?s.attribute.parseHTML(t):IN(t.getAttribute(s.name));return l==null?i:{...i,[s.name]:l}},{});return{...r,...o}}}}function Nm(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&_N(t)?!1:t!=null))}function DN(n,e){var t;const r=vb(n),{nodeExtensions:o,markExtensions:i}=ld(n),s=(t=o.find(c=>Se(c,"topNode")))===null||t===void 0?void 0:t.name,l=Object.fromEntries(o.map(c=>{const d=r.filter(x=>x.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((x,b)=>{const w=Se(b,"extendNodeSchema",u);return{...x,...w?w(c):{}}},{}),h=Nm({...f,content:Ge(Se(c,"content",u)),marks:Ge(Se(c,"marks",u)),group:Ge(Se(c,"group",u)),inline:Ge(Se(c,"inline",u)),atom:Ge(Se(c,"atom",u)),selectable:Ge(Se(c,"selectable",u)),draggable:Ge(Se(c,"draggable",u)),code:Ge(Se(c,"code",u)),whitespace:Ge(Se(c,"whitespace",u)),linebreakReplacement:Ge(Se(c,"linebreakReplacement",u)),defining:Ge(Se(c,"defining",u)),isolating:Ge(Se(c,"isolating",u)),attrs:Object.fromEntries(d.map(x=>{var b;return[x.name,{default:(b=x==null?void 0:x.attribute)===null||b===void 0?void 0:b.default}]}))}),p=Ge(Se(c,"parseHTML",u));p&&(h.parseDOM=p.map(x=>Pm(x,d)));const g=Se(c,"renderHTML",u);g&&(h.toDOM=x=>g({node:x,HTMLAttributes:Ku(x,d)}));const v=Se(c,"renderText",u);return v&&(h.toText=v),[c.name,h]})),a=Object.fromEntries(i.map(c=>{const d=r.filter(v=>v.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((v,x)=>{const b=Se(x,"extendMarkSchema",u);return{...v,...b?b(c):{}}},{}),h=Nm({...f,inclusive:Ge(Se(c,"inclusive",u)),excludes:Ge(Se(c,"excludes",u)),group:Ge(Se(c,"group",u)),spanning:Ge(Se(c,"spanning",u)),code:Ge(Se(c,"code",u)),attrs:Object.fromEntries(d.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),p=Ge(Se(c,"parseHTML",u));p&&(h.parseDOM=p.map(v=>Pm(v,d)));const g=Se(c,"renderHTML",u);return g&&(h.toDOM=v=>g({mark:v,HTMLAttributes:Ku(v,d)})),[c.name,h]}));return new av({topNode:s,nodes:l,marks:a})}function Gd(n,e){return e.nodes[n]||e.marks[n]||null}function _m(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function ih(n,e){const t=Co.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const RN=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,l)=>{var a,c;const d=((c=(a=o.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:o,pos:i,parent:s,index:l}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-i))}),t};function sh(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class ad{constructor(e){this.find=e.find,this.handler=e.handler}}const zN=(n,e)=>{if(sh(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function wa(n){var e;const{editor:t,from:r,to:o,text:i,rules:s,plugin:l}=n,{view:a}=t;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let d=!1;const u=RN(c)+i;return s.forEach(f=>{if(d)return;const h=zN(u,f.find);if(!h)return;const p=a.state.tr,g=id({state:a.state,transaction:p}),v={from:r-(h[0].length-i.length),to:o},{commands:x,chain:b,can:w}=new sd({editor:t,state:g});f.handler({state:g,range:v,match:h,commands:x,chain:b,can:w})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:o,text:i}),a.dispatch(p),d=!0)}),d}function LN(n){const{editor:e,rules:t}=n,r=new cn({state:{init(){return null},apply(o,i,s){const l=o.getMeta(r);if(l)return l;const a=o.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:d}=a;typeof d=="string"?d=d:d=ih(Z.from(d),s.schema);const{from:u}=a,f=u+d.length;wa({editor:e,from:u,to:f,text:d,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,l){return wa({editor:e,from:i,to:s,text:l,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&wa({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?wa({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function FN(n){return Object.prototype.toString.call(n).slice(8,-1)}function xa(n){return FN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function cd(n,e){const t={...n};return xa(n)&&xa(e)&&Object.keys(e).forEach(r=>{xa(e[r])&&xa(n[r])?t[r]=cd(n[r],e[r]):t[r]=e[r]}),t}class In{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ge(Se(this,"addOptions",{name:this.name}))),this.storage=Ge(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new In(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>cd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new In(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ge(Se(t,"addOptions",{name:t.name})),t.storage=Ge(Se(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const a=s.find(c=>(c==null?void 0:c.type.name)===t.name);return a&&r.removeStoredMark(a),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function BN(n){return typeof n=="number"}class VN{constructor(e){this.find=e.find,this.handler=e.handler}}const HN=(n,e,t)=>{if(sh(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=n,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function WN(n){const{editor:e,state:t,from:r,to:o,rule:i,pasteEvent:s,dropEvent:l}=n,{commands:a,chain:c,can:d}=new sd({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,o,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,p),v=Math.min(o,p+h.content.size),x=h.textBetween(g-p,v-p,void 0,"￼");HN(x,i.find,s).forEach(w=>{if(w.index===void 0)return;const M=g+w.index+1,k=M+w[0].length,S={from:t.tr.mapping.map(M),to:t.tr.mapping.map(k)},A=i.handler({state:t,range:S,match:w,commands:a,chain:c,can:d,pasteEvent:s,dropEvent:l});u.push(A)})}),u.every(h=>h!==null)}let Sa=null;const KN=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function jN(n){const{editor:e,rules:t}=n;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:d,from:u,to:f,rule:h,pasteEvt:p})=>{const g=d.tr,v=id({state:d,transaction:g});if(!(!WN({editor:e,state:v,from:Math.max(u-1,0),to:f.b-1,rule:h,pasteEvent:p,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return t.map(d=>new cn({view(u){const f=p=>{var g;r=!((g=u.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?u.dom.parentElement:null,r&&(Sa=e)},h=()=>{Sa&&(Sa=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(u,f)=>{if(i=r===u.dom.parentElement,l=f,!i){const h=Sa;h&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(u,f)=>{var h;const p=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=f,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(u,f,h)=>{const p=u[0],g=p.getMeta("uiEvent")==="paste"&&!o,v=p.getMeta("uiEvent")==="drop"&&!i,x=p.getMeta("applyPasteRules"),b=!!x;if(!g&&!v&&!b)return;if(b){let{text:k}=x;typeof k=="string"?k=k:k=ih(Z.from(k),h.schema);const{from:S}=x,A=S+k.length,T=KN(k);return a({rule:d,state:h,from:S,to:{b:A},pasteEvt:T})}const w=f.doc.content.findDiffStart(h.doc.content),M=f.doc.content.findDiffEnd(h.doc.content);if(!(!BN(w)||!M||w===M.b))return a({rule:d,state:h,from:w,to:M,pasteEvt:s})}}))}function $N(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Bo{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Bo.resolve(e),this.schema=DN(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Bo.sort(Bo.flatten(e)),r=$N(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},o=Se(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=Se(r,"priority")||100,s=Se(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Gd(t.name,this.schema)},o=Se(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=Bo.sort([...this.extensions].reverse()),r=[],o=[],i=t.map(s=>{const l={name:s.name,options:s.options,storage:s.storage,editor:e,type:Gd(s.name,this.schema)},a=[],c=Se(s,"addKeyboardShortcuts",l);let d={};if(s.type==="mark"&&Se(s,"exitable",l)&&(d.ArrowRight=()=>In.handleExit({editor:e,mark:s})),c){const g=Object.fromEntries(Object.entries(c()).map(([v,x])=>[v,()=>x({editor:e})]));d={...d,...g}}const u=dN(d);a.push(u);const f=Se(s,"addInputRules",l);_m(s,e.options.enableInputRules)&&f&&r.push(...f());const h=Se(s,"addPasteRules",l);_m(s,e.options.enablePasteRules)&&h&&o.push(...h());const p=Se(s,"addProseMirrorPlugins",l);if(p){const g=p();a.push(...g)}return a}).flat();return[LN({editor:e,rules:r}),...jN({editor:e,rules:o}),...i]}get attributes(){return vb(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ld(this.extensions);return Object.fromEntries(t.filter(r=>!!Se(r,"addNodeView")).map(r=>{const o=this.attributes.filter(a=>a.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ht(r.name,this.schema)},s=Se(r,"addNodeView",i);if(!s)return[];const l=(a,c,d,u,f)=>{const h=Ku(a,o);return s()({node:a,view:c,getPos:d,decorations:u,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Gd(e.name,this.schema)};e.type==="mark"&&(!((t=Ge(Se(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=Se(e,"onBeforeCreate",r),i=Se(e,"onCreate",r),s=Se(e,"onUpdate",r),l=Se(e,"onSelectionUpdate",r),a=Se(e,"onTransaction",r),c=Se(e,"onFocus",r),d=Se(e,"onBlur",r),u=Se(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),u&&this.editor.on("destroy",u)})}}class Gt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ge(Se(this,"addOptions",{name:this.name}))),this.storage=Ge(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Gt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>cd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Gt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ge(Se(t,"addOptions",{name:t.name})),t.storage=Ge(Se(t,"addStorage",{name:t.name,options:t.options})),t}}function wb(n,e,t){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=t||{};let l="";return n.nodesBetween(r,o,(a,c,d,u)=>{var f;a.isBlock&&c>r&&(l+=i);const h=s==null?void 0:s[a.type.name];if(h)return d&&(l+=h({node:a,pos:c,parent:d,index:u,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,o-c))}),l}function xb(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const GN=Gt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new cn({key:new Un("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(d=>d.$from.pos)),l=Math.max(...i.map(d=>d.$to.pos)),a=xb(t);return wb(r,{from:s,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),UN=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),qN=(n=!1)=>({commands:e})=>e.setContent("",n),JN=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:i,$to:s})=>{n.doc.nodesBetween(i.pos,s.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:d}=e,u=c.resolve(d.map(a)),f=c.resolve(d.map(a+l.nodeSize)),h=u.blockRange(f);if(!h)return;const p=bi(h);if(l.type.isTextblock){const{defaultType:g}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,g)}(p||p===0)&&e.lift(h,p)})}),!0},YN=n=>e=>n(e),XN=()=>({state:n,dispatch:e})=>pb(n,e),ZN=(n,e)=>({editor:t,tr:r})=>{const{state:o}=t,i=o.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new Fe(r.doc.resolve(s-1))),!0},QN=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const o=n.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const l=o.before(i),a=o.after(i);n.delete(l,a).scrollIntoView()}return!0}return!1},e_=n=>({tr:e,state:t,dispatch:r})=>{const o=Ht(n,t.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const a=i.before(s),c=i.after(s);e.delete(a,c).scrollIntoView()}return!0}return!1},t_=n=>({tr:e,dispatch:t})=>{const{from:r,to:o}=n;return t&&e.delete(r,o),!0},n_=()=>({state:n,dispatch:e})=>eh(n,e),r_=()=>({commands:n})=>n.keyboardShortcut("Enter"),o_=()=>({state:n,dispatch:e})=>gN(n,e);function gc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===n[o]:sh(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function Sb(n,e,t={}){return n.find(r=>r.type===e&&gc(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function Im(n,e,t={}){return!!Sb(n,e,t)}function lh(n,e,t){var r;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(t=t||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!Sb([...o.node.marks],e,t)))return;let s=o.index,l=n.start()+o.offset,a=s+1,c=l+o.node.nodeSize;for(;s>0&&Im([...n.parent.child(s-1).marks],e,t);)s-=1,l-=n.parent.child(s).nodeSize;for(;a<n.parent.childCount&&Im([...n.parent.child(a).marks],e,t);)c+=n.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Ur(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const i_=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const i=Ur(n,r.schema),{doc:s,selection:l}=t,{$from:a,from:c,to:d}=l;if(o){const u=lh(a,i,e);if(u&&u.from<=c&&u.to>=d){const f=Fe.create(s,u.from,u.to);t.setSelection(f)}}return!0},s_=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function kb(n){return n instanceof Fe}function io(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Mb(n,e=null){if(!e)return null;const t=We.atStart(n),r=We.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,i=r.to;return e==="all"?Fe.create(n,io(0,o,i),io(n.content.size,o,i)):Fe.create(n,io(e,o,i),io(e,o,i))}function l_(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ah(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const a_=(n=null,e={})=>({editor:t,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(ah()||l_())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!kb(t.state.selection))return s(),!0;const l=Mb(o.doc,n)||t.state.selection,a=t.state.selection.eq(l);return i&&(a||o.setSelection(l),a&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},c_=(n,e)=>t=>n.every((r,o)=>e(r,{...t,index:o})),d_=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Cb=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Cb(r)}return n};function ka(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Cb(t)}function yc(n,e,t){if(n instanceof Dr||n instanceof Z)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,o=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return Z.fromArray(n.map(l=>e.nodeFromJSON(l)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),yc("",e,t)}if(o){if(t.errorOnInvalidContent){let s=!1,l="";const a=new av({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?Rr.fromSchema(a).parseSlice(ka(n),t.parseOptions):Rr.fromSchema(a).parse(ka(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=Rr.fromSchema(e);return t.slice?i.parseSlice(ka(n),t.parseOptions).content:i.parse(ka(n),t.parseOptions)}return yc("",e,t)}function u_(n,e,t){const r=n.steps.length-1;if(r<e)return;const o=n.steps[r];if(!(o instanceof Lt||o instanceof Bt))return;const i=n.mapping.maps[r];let s=0;i.forEach((l,a,c,d)=>{s===0&&(s=d)}),n.setSelection(We.near(n.doc.resolve(s),t))}const f_=n=>!("type"in n),h_=(n,e,t)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let l;try{l=yc(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(s=t.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(p){return i.emit("contentError",{editor:i,error:p,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:a,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},d=!0,u=!0;if((f_(l)?l:[l]).forEach(p=>{p.check(),d=d?p.isText&&p.marks.length===0:!1,u=u?p.isBlock:!1}),a===c&&u){const{parent:p}=r.doc.resolve(a);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(a-=1,c+=1)}let h;if(d){if(Array.isArray(e))h=e.map(p=>p.text||"").join("");else if(e instanceof Z){let p="";e.forEach(g=>{g.text&&(p+=g.text)}),h=p}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,a,c)}else h=l,r.replaceWith(a,c,h);t.updateSelection&&u_(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:h}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:h})}return!0},p_=()=>({state:n,dispatch:e})=>hN(n,e),m_=()=>({state:n,dispatch:e})=>pN(n,e),g_=()=>({state:n,dispatch:e})=>lb(n,e),y_=()=>({state:n,dispatch:e})=>ub(n,e),v_=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Qc(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},b_=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Qc(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},w_=()=>({state:n,dispatch:e})=>uN(n,e),x_=()=>({state:n,dispatch:e})=>fN(n,e);function Ob(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function S_(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,i,s;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else if(/^mod$/i.test(a))ah()||Ob()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const k_=n=>({editor:e,view:t,tr:r,dispatch:o})=>{const i=S_(n).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,l))});return a==null||a.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function is(n,e,t={}){const{from:r,to:o,empty:i}=n.selection,s=e?Ht(e,n.schema):null,l=[];n.doc.nodesBetween(r,o,(u,f)=>{if(u.isText)return;const h=Math.max(r,f),p=Math.min(o,f+u.nodeSize);l.push({node:u,from:h,to:p})});const a=o-r,c=l.filter(u=>s?s.name===u.node.type.name:!0).filter(u=>gc(u.node.attrs,t,{strict:!1}));return i?!!c.length:c.reduce((u,f)=>u+f.to-f.from,0)>=a}const M_=(n,e={})=>({state:t,dispatch:r})=>{const o=Ht(n,t.schema);return is(t,o,e)?mN(t,r):!1},C_=()=>({state:n,dispatch:e})=>mb(n,e),O_=n=>({state:e,dispatch:t})=>{const r=Ht(n,e.schema);return TN(r)(e,t)},T_=()=>({state:n,dispatch:e})=>hb(n,e);function dd(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Dm(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,o)=>(t.includes(o)||(r[o]=n[o]),r),{})}const A_=(n,e)=>({tr:t,state:r,dispatch:o})=>{let i=null,s=null;const l=dd(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(i=Ht(n,r.schema)),l==="mark"&&(s=Ur(n,r.schema)),o&&t.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,d)=>{i&&i===c.type&&t.setNodeMarkup(d,void 0,Dm(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(u=>{s===u.type&&t.addMark(d,d+c.nodeSize,s.create(Dm(u.attrs,e)))})})}),!0):!1},E_=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),P_=()=>({tr:n,dispatch:e})=>{if(e){const t=new gn(n.doc);n.setSelection(t)}return!0},N_=()=>({state:n,dispatch:e})=>cb(n,e),__=()=>({state:n,dispatch:e})=>fb(n,e),I_=()=>({state:n,dispatch:e})=>bN(n,e),D_=()=>({state:n,dispatch:e})=>SN(n,e),R_=()=>({state:n,dispatch:e})=>xN(n,e);function ju(n,e,t={},r={}){return yc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const z_=(n,e=!1,t={},r={})=>({editor:o,tr:i,dispatch:s,commands:l})=>{var a,c;const{doc:d}=i;if(t.preserveWhitespace!=="full"){const u=ju(n,o.schema,t,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:o.options.enableContentCheck});return s&&i.replaceWith(0,d.content.size,u).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:d.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function Tb(n,e){const t=Ur(e,n.schema),{from:r,to:o,empty:i}=n.selection,s=[];i?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,a=>{s.push(...a.marks)});const l=s.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function L_(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function F_(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function ch(n){return e=>F_(e.$from,n)}function B_(n,e){const t={from:0,to:n.content.size};return wb(n,t,e)}function V_(n,e){const t=Ht(e,n.schema),{from:r,to:o}=n.selection,i=[];n.doc.nodesBetween(r,o,l=>{i.push(l)});const s=i.reverse().find(l=>l.type.name===t.name);return s?{...s.attrs}:{}}function H_(n,e){const t=dd(typeof e=="string"?e:e.name,n.schema);return t==="node"?V_(n,e):t==="mark"?Tb(n,e):{}}function Ab(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(o=>{const i=t.resolve(n),s=lh(i,o.type);s&&r.push({mark:o,...s})}):t.nodesBetween(n,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function Wa(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=n.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function $u(n,e,t={}){const{empty:r,ranges:o}=n.selection,i=e?Ur(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(u=>i?i.name===u.type.name:!0).find(u=>gc(u.attrs,t,{strict:!1}));let s=0;const l=[];if(o.forEach(({$from:u,$to:f})=>{const h=u.pos,p=f.pos;n.doc.nodesBetween(h,p,(g,v)=>{if(!g.isText&&!g.marks.length)return;const x=Math.max(h,v),b=Math.min(p,v+g.nodeSize),w=b-x;s+=w,l.push(...g.marks.map(M=>({mark:M,from:x,to:b})))})}),s===0)return!1;const a=l.filter(u=>i?i.name===u.mark.type.name:!0).filter(u=>gc(u.mark.attrs,t,{strict:!1})).reduce((u,f)=>u+f.to-f.from,0),c=l.filter(u=>i?u.mark.type!==i&&u.mark.type.excludes(i):!0).reduce((u,f)=>u+f.to-f.from,0);return(a>0?a+c:a)>=s}function W_(n,e,t={}){if(!e)return is(n,null,t)||$u(n,null,t);const r=dd(e,n.schema);return r==="node"?is(n,e,t):r==="mark"?$u(n,e,t):!1}function Rm(n,e){const{nodeExtensions:t}=ld(e),r=t.find(s=>s.name===n);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Ge(Se(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function dh(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(i=>{o!==!1&&(dh(i,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function K_(n){return n instanceof _e}function j_(n,e,t){var r;const{selection:o}=e;let i=null;if(kb(o)&&(i=o.$cursor),i){const l=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}const{ranges:s}=o;return s.some(({$from:l,$to:a})=>{let c=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,a.pos,(d,u,f)=>{if(c)return!1;if(d.isInline){const h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(t));c=h&&p}return!c}),c})}const $_=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:i}=t,{empty:s,ranges:l}=i,a=Ur(n,r.schema);if(o)if(s){const c=Tb(r,a);t.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(f,h)=>{const p=Math.max(h,d),g=Math.min(h+f.nodeSize,u);f.marks.find(x=>x.type===a)?f.marks.forEach(x=>{a===x.type&&t.addMark(p,g,a.create({...x.attrs,...e}))}):t.addMark(p,g,a.create(e))})});return j_(r,t,a)},G_=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),U_=(n,e={})=>({state:t,dispatch:r,chain:o})=>{const i=Ht(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:l})=>Em(i,{...s,...e})(t)?!0:l.clearNodes()).command(({state:l})=>Em(i,{...s,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},q_=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=io(n,0,r.content.size),i=_e.create(r,o);e.setSelection(i)}return!0},J_=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:i}=typeof n=="number"?{from:n,to:n}:n,s=Fe.atStart(r).from,l=Fe.atEnd(r).to,a=io(o,s,l),c=io(i,s,l),d=Fe.create(r,a,c);e.setSelection(d)}return!0},Y_=n=>({state:e,dispatch:t})=>{const r=Ht(n,e.schema);return PN(r)(e,t)};function zm(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(o=>e==null?void 0:e.includes(o.type.name));n.tr.ensureMarks(r)}}const X_=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:l,$to:a}=i,c=o.extensionManager.attributes,d=Wa(c,l.node().type.name,l.node().attrs);if(i instanceof _e&&i.node.isBlock)return!l.parentOffset||!ar(s,l.pos)?!1:(r&&(n&&zm(t,o.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const u=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:L_(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=u&&f?[{type:f,attrs:d}]:void 0,p=ar(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&ar(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:d}]:void 0),r){if(p&&(i instanceof Fe&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!u&&!l.parentOffset&&l.parent.type!==f)){const g=e.mapping.map(l.before()),v=e.doc.resolve(g);l.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}n&&zm(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},Z_=(n,e={})=>({tr:t,state:r,dispatch:o,editor:i})=>{var s;const l=Ht(n,r.schema),{$from:a,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||a.depth<2||!a.sameParent(c))return!1;const u=a.node(-1);if(u.type!==l)return!1;const f=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(o){let x=Z.empty;const b=a.index(-1)?1:a.index(-2)?2:3;for(let T=a.depth-b;T>=a.depth-3;T-=1)x=Z.from(a.node(T).copy(x));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,M={...Wa(f,a.node().type.name,a.node().attrs),...e},k=((s=l.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(M))||void 0;x=x.append(Z.from(l.createAndFill(null,k)||void 0));const S=a.before(a.depth-(b-1));t.replace(S,a.after(-w),new he(x,4-b,0));let A=-1;t.doc.nodesBetween(S,t.doc.content.size,(T,P)=>{if(A>-1)return!1;T.isTextblock&&T.content.size===0&&(A=P+1)}),A>-1&&t.setSelection(Fe.near(t.doc.resolve(A))),t.scrollIntoView()}return!0}const h=c.pos===a.end()?u.contentMatchAt(0).defaultType:null,p={...Wa(f,u.type.name,u.attrs),...e},g={...Wa(f,a.node().type.name,a.node().attrs),...e};t.delete(a.pos,c.pos);const v=h?[{type:l,attrs:p},{type:h,attrs:g}]:[{type:l,attrs:p}];if(!ar(t.doc,a.pos,2))return!1;if(o){const{selection:x,storedMarks:b}=r,{splittableMarks:w}=i.extensionManager,M=b||x.$to.parentOffset&&x.$from.marks();if(t.split(a.pos,2,v).scrollIntoView(),!M||!o)return!0;const k=M.filter(S=>w.includes(S.type.name));t.ensureMarks(k)}return!0},Ud=(n,e)=>{const t=ch(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&$r(n.doc,t.pos)&&n.join(t.pos),!0},qd=(n,e)=>{const t=ch(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&$r(n.doc,r)&&n.join(r),!0},Q_=(n,e,t,r={})=>({editor:o,tr:i,state:s,dispatch:l,chain:a,commands:c,can:d})=>{const{extensions:u,splittableMarks:f}=o.extensionManager,h=Ht(n,s.schema),p=Ht(e,s.schema),{selection:g,storedMarks:v}=s,{$from:x,$to:b}=g,w=x.blockRange(b),M=v||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const k=ch(S=>Rm(S.type.name,u))(g);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===h)return c.liftListItem(p);if(Rm(k.node.type.name,u)&&h.validContent(k.node.content)&&l)return a().command(()=>(i.setNodeMarkup(k.pos,h),!0)).command(()=>Ud(i,h)).command(()=>qd(i,h)).run()}return!t||!M||!l?a().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Ud(i,h)).command(()=>qd(i,h)).run():a().command(()=>{const S=d().wrapInList(h,r),A=M.filter(T=>f.includes(T.type.name));return i.ensureMarks(A),S?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Ud(i,h)).command(()=>qd(i,h)).run()},eI=(n,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=t,s=Ur(n,r.schema);return $u(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},tI=(n,e,t={})=>({state:r,commands:o})=>{const i=Ht(n,r.schema),s=Ht(e,r.schema),l=is(r,i,t);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?o.setNode(s,a):o.setNode(i,{...a,...t})},nI=(n,e={})=>({state:t,commands:r})=>{const o=Ht(n,t.schema);return is(t,o,e)?r.lift(o):r.wrapIn(o,e)},rI=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let i;if(o.spec.isInputRules&&(i=o.getState(n))){if(e){const s=n.tr,l=i.transform;for(let a=l.steps.length-1;a>=0;a-=1)s.step(l.steps[a].invert(l.docs[a]));if(i.text){const a=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,n.schema.text(i.text,a))}else s.delete(i.from,i.to)}return!0}}return!1},oI=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:o}=t;return r||e&&o.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},iI=(n,e={})=>({tr:t,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:l}=t,a=Ur(n,r.schema),{$from:c,empty:d,ranges:u}=l;if(!o)return!0;if(d&&s){let{from:f,to:h}=l;const p=(i=c.marks().find(v=>v.type===a))===null||i===void 0?void 0:i.attrs,g=lh(c,a,p);g&&(f=g.from,h=g.to),t.removeMark(f,h,a)}else u.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,a)});return t.removeStoredMark(a),!0},sI=(n,e={})=>({tr:t,state:r,dispatch:o})=>{let i=null,s=null;const l=dd(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(i=Ht(n,r.schema)),l==="mark"&&(s=Ur(n,r.schema)),o&&t.selection.ranges.forEach(a=>{const c=a.$from.pos,d=a.$to.pos;let u,f,h,p;t.selection.empty?r.doc.nodesBetween(c,d,(g,v)=>{i&&i===g.type&&(h=Math.max(v,c),p=Math.min(v+g.nodeSize,d),u=v,f=g)}):r.doc.nodesBetween(c,d,(g,v)=>{v<c&&i&&i===g.type&&(h=Math.max(v,c),p=Math.min(v+g.nodeSize,d),u=v,f=g),v>=c&&v<=d&&(i&&i===g.type&&t.setNodeMarkup(v,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(x=>{if(s===x.type){const b=Math.max(v,c),w=Math.min(v+g.nodeSize,d);t.addMark(b,w,s.create({...x.attrs,...e}))}}))}),f&&(u!==void 0&&t.setNodeMarkup(u,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(g=>{s===g.type&&t.addMark(h,p,s.create({...g.attrs,...e}))}))}),!0):!1},lI=(n,e={})=>({state:t,dispatch:r})=>{const o=Ht(n,t.schema);return kN(o,e)(t,r)},aI=(n,e={})=>({state:t,dispatch:r})=>{const o=Ht(n,t.schema);return MN(o,e)(t,r)};var cI=Object.freeze({__proto__:null,blur:UN,clearContent:qN,clearNodes:JN,command:YN,createParagraphNear:XN,cut:ZN,deleteCurrentNode:QN,deleteNode:e_,deleteRange:t_,deleteSelection:n_,enter:r_,exitCode:o_,extendMarkRange:i_,first:s_,focus:a_,forEach:c_,insertContent:d_,insertContentAt:h_,joinBackward:g_,joinDown:m_,joinForward:y_,joinItemBackward:v_,joinItemForward:b_,joinTextblockBackward:w_,joinTextblockForward:x_,joinUp:p_,keyboardShortcut:k_,lift:M_,liftEmptyBlock:C_,liftListItem:O_,newlineInCode:T_,resetAttributes:A_,scrollIntoView:E_,selectAll:P_,selectNodeBackward:N_,selectNodeForward:__,selectParentNode:I_,selectTextblockEnd:D_,selectTextblockStart:R_,setContent:z_,setMark:$_,setMeta:G_,setNode:U_,setNodeSelection:q_,setTextSelection:J_,sinkListItem:Y_,splitBlock:X_,splitListItem:Z_,toggleList:Q_,toggleMark:eI,toggleNode:tI,toggleWrap:nI,undoInputRule:rI,unsetAllMarks:oI,unsetMark:iI,updateAttributes:sI,wrapIn:lI,wrapInList:aI});const dI=Gt.create({name:"commands",addCommands(){return{...cI}}}),uI=Gt.create({name:"drop",addProseMirrorPlugins(){return[new cn({key:new Un("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),fI=Gt.create({name:"editable",addProseMirrorPlugins(){return[new cn({key:new Un("editable"),props:{editable:()=>this.editor.options.editable}})]}}),hI=new Un("focusEvents"),pI=Gt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new cn({key:hI,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),mI=Gt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:d,$anchor:u}=a,{pos:f,parent:h}=u,p=u.parent.isTextblock&&f>0?l.doc.resolve(f-1):u,g=p.parent.type.spec.isolating,v=u.pos-u.parentOffset,x=g&&p.parent.childCount===1?v===u.pos:We.atStart(c).from===f;return!d||!h.type.isTextblock||h.textContent.length||!x||x&&u.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ah()||Ob()?i:o},addProseMirrorPlugins(){return[new cn({key:new Un("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(g=>g.getMeta("composition")))return;const r=n.some(g=>g.docChanged)&&!e.doc.eq(t.doc),o=n.some(g=>g.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:l}=e.selection,a=We.atStart(e.doc).from,c=We.atEnd(e.doc).to;if(i||!(s===a&&l===c)||!dh(t.doc))return;const f=t.tr,h=id({state:t,transaction:f}),{commands:p}=new sd({editor:this.editor,state:h});if(p.clearNodes(),!!f.steps.length)return f}})]}}),gI=Gt.create({name:"paste",addProseMirrorPlugins(){return[new cn({key:new Un("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),yI=Gt.create({name:"tabindex",addProseMirrorPlugins(){return[new cn({key:new Un("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class no{get name(){return this.node.type.name}constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new no(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new no(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new no(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const o=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,s=this.pos+r+(i?0:1),l=this.resolvedPos.doc.resolve(s);if(!o&&l.depth<=this.depth)return;const a=new no(l,this.editor,o,o?t:null);o&&(a.actualDepth=this.depth+1),e.push(new no(l,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){const i=o.node.attrs,s=Object.keys(t);for(let l=0;l<s.length;l+=1){const a=s[l];if(i[a]!==t[a])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(t);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(a=>t[a]===s.node.attrs[a])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,t,r))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const vI=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function bI(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}let wI=class extends NN{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:o})=>this.options.onDrop(t,r,o)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=bI(vI,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=bb(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=t.filter(l=>!l.key.startsWith(s))}),t.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[fI,GN.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),dI,pI,mI,yI,uI,gI].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Bo(o,this)}createCommandManager(){this.commandManager=new sd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=ju(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),t=ju(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Mb(t,this.options.autofocus);this.view=new tN(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Fo.create({doc:t,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(s)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return H_(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return W_(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ih(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return B_(this.state.doc,{blockSeparator:t,textSerializers:{...xb(this.schema),...r}})}get isEmpty(){return dh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new no(t,this)}get $doc(){return this.$pos(0)}};function wo(n){return new ad({find:n.find,handler:({state:e,range:t,match:r})=>{const o=Ge(n.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],l=r[0];if(s){const a=l.search(/\S/),c=t.from+l.indexOf(s),d=c+s.length;if(Ab(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===n.type&&g!==h.mark.type)).filter(h=>h.to>c).length)return null;d<t.to&&i.delete(d,t.to),c>t.from&&i.delete(t.from+a,c);const f=t.from+a+s.length;i.addMark(t.from+a,f,n.type.create(o||{})),i.removeStoredMark(n.type)}}})}function xI(n){return new ad({find:n.find,handler:({state:e,range:t,match:r})=>{const o=Ge(n.getAttributes,void 0,r)||{},{tr:i}=e,s=t.from;let l=t.to;const a=n.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let d=s+c;d>l?d=l:l=d+r[1].length;const u=r[0][r[0].length-1];i.insertText(u,s+r[0].length-1),i.replaceWith(d,l,a)}else if(r[0]){const c=n.type.isInline?s:s-1;i.insert(c,n.type.create(o)).delete(i.mapping.map(s),i.mapping.map(l))}i.scrollIntoView()}})}function Gu(n){return new ad({find:n.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),i=Ge(n.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function fi(n){return new ad({find:n.find,handler:({state:e,range:t,match:r,chain:o})=>{const i=Ge(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),a=s.doc.resolve(t.from).blockRange(),c=a&&Kf(a,n.type,i);if(!c)return null;if(s.wrap(a,c),n.keepMarks&&n.editor){const{selection:u,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||u.$to.parentOffset&&u.$from.marks();if(p){const g=p.filter(v=>h.includes(v.type.name));s.ensureMarks(g)}}if(n.keepAttributes){const u=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(u,i).run()}const d=s.doc.resolve(t.from-1).nodeBefore;d&&d.type===n.type&&$r(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,d))&&s.join(t.from-1)}})}let bn=class Uu{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ge(Se(this,"addOptions",{name:this.name}))),this.storage=Ge(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Uu(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>cd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Uu(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ge(Se(t,"addOptions",{name:t.name})),t.storage=Ge(Se(t,"addStorage",{name:t.name,options:t.options})),t}};function xo(n){return new VN({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const i=Ge(n.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,l=r[r.length-1],a=r[0];let c=t.to;if(l){const d=a.search(/\S/),u=t.from+a.indexOf(l),f=u+l.length;if(Ab(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===n.type&&v!==p.mark.type)).filter(p=>p.to>u).length)return null;f<t.to&&s.delete(f,t.to),u>t.from&&s.delete(t.from+d,u),c=t.from+d+l.length,s.addMark(t.from+d,c,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}const SI=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,o;const i=t.getAttribute("style"),s=(o=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||o===void 0?void 0:o.getAttribute("style");t.setAttribute("style",`${s};${i}`)})},Lm=In.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&SI(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",At(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(i=>!!i))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),kI=Gt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),qu=bn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",At(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),MI=/^\s*(\[([( |x])?\])\s$/,Jd=bn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",At(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const o=document.createElement("li"),i=document.createElement("label"),s=document.createElement("span"),l=document.createElement("input"),a=document.createElement("div");return i.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",c=>c.preventDefault()),l.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:d}=c.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:u})=>{const f=t();if(typeof f!="number")return!1;const h=u.doc.nodeAt(f);return u.setNodeMarkup(f,void 0,{...h==null?void 0:h.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,d)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{o.setAttribute(c,d)}),o.dataset.checked=n.attrs.checked,l.checked=n.attrs.checked,i.append(l,s),o.append(i,a),Object.entries(e).forEach(([c,d])=>{o.setAttribute(c,d)}),{dom:o,contentDOM:a,update:c=>c.type!==this.type?!1:(o.dataset.checked=c.attrs.checked,l.checked=c.attrs.checked,!0)}}},addInputRules(){return[fi({find:MI,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),CI=bn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",At(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),OI=Gt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),TI=In.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),AI=/^\s*>\s$/,EI=bn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[fi({find:AI,type:this.type})]}}),PI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,NI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,_I=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,II=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,DI=In.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[wo({find:PI,type:this.type}),wo({find:_I,type:this.type})]},addPasteRules(){return[xo({find:NI,type:this.type}),xo({find:II,type:this.type})]}}),RI="listItem",Fm="textStyle",Bm=/^\s*([-+*])\s$/,zI=bn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",At(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RI,this.editor.getAttributes(Fm)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=fi({find:Bm,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=fi({find:Bm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Fm),editor:this.editor})),[n]}}),LI=/(^|[^`])`([^`]+)`(?!`)/,FI=/(^|[^`])`([^`]+)`(?!`)/g,BI=In.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[wo({find:LI,type:this.type})]},addPasteRules(){return[xo({find:FI,type:this.type})]}}),VI=/^```([a-z]+)?[\s\n]$/,HI=/^~~~([a-z]+)?[\s\n]$/,WI=bn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",At(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:n.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:o,empty:i}=t;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const l=o.after();return l===void 0?!1:r.nodeAt(l)?n.commands.command(({tr:c})=>(c.setSelection(We.near(r.resolve(l))),!0)):n.commands.exitCode()}}},addInputRules(){return[Gu({find:VI,type:this.type,getAttributes:n=>({language:n[1]})}),Gu({find:HI,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new cn({key:new Un("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!t||!i)return!1;const{tr:s,schema:l}=n.state,a=l.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},a)),s.selection.$from.parent.type!==this.type&&s.setSelection(Fe.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),KI=bn.create({name:"doc",topNode:!0,content:"block+"});function jI(n={}){return new cn({view(e){return new $I(e,n)}})}class $I{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let d=c.getBoundingClientRect(),u=l?d.bottom:d.top;l&&a&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:d.left,right:d.right,top:u-this.width/2,bottom:u+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let i,s;if(!o||o==document.body&&getComputedStyle(o).position=="static")i=-pageXOffset,s=-pageYOffset;else{let l=o.getBoundingClientRect();i=l.left-o.scrollLeft,s=l.top-o.scrollTop}this.element.style.left=r.left-i+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!i){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=bv(this.editorView.state.doc,s,this.editorView.dragging.slice);l!=null&&(s=l)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const GI=Gt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[jI(this.options)]}});class bt extends We{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return bt.valid(r)?new bt(r):We.near(r)}content(){return he.empty}eq(e){return e instanceof bt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new bt(e.resolve(t.pos))}getBookmark(){return new uh(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!UI(e)||!qI(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&bt.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let l=e.node(s);if(t>0?e.indexAfter(s)<l.childCount:e.index(s)>0){i=l.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=t;let a=e.doc.resolve(o);if(bt.valid(a))return a}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!_e.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*t),r=!1;continue e}break}i=s,o+=t;let l=e.doc.resolve(o);if(bt.valid(l))return l}return null}}}bt.prototype.visible=!1;bt.findFrom=bt.findGapCursorFrom;We.jsonID("gapcursor",bt);class uh{constructor(e){this.pos=e}map(e){return new uh(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return bt.valid(t)?new bt(t):We.near(t)}}function UI(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function qI(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function JI(){return new cn({props:{decorations:QI,createSelectionBetween(n,e,t){return e.pos==t.pos&&bt.valid(t)?new bt(t):null},handleClick:XI,handleKeyDown:YI,handleDOMEvents:{beforeinput:ZI}}})}const YI=ib({ArrowLeft:Ma("horiz",-1),ArrowRight:Ma("horiz",1),ArrowUp:Ma("vert",-1),ArrowDown:Ma("vert",1)});function Ma(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,l=e>0?s.$to:s.$from,a=s.empty;if(s instanceof Fe){if(!i.endOfTextblock(t)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=bt.findGapCursorFrom(l,e,a);return c?(o&&o(r.tr.setSelection(new bt(c))),!0):!1}}function XI(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!bt.valid(r))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&_e.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new bt(r))),!0)}function ZI(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof bt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let o=Z.empty;for(let s=r.length-1;s>=0;s--)o=Z.from(r[s].createAndFill(null,o));let i=n.state.tr.replace(t.pos,t.pos,new he(o,0,0));return i.setSelection(Fe.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function QI(n){if(!(n.selection instanceof bt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Dt.create(n.doc,[Cn.widget(n.selection.head,e,{key:"gapcursor"})])}const eD=Gt.create({name:"gapCursor",addProseMirrorPlugins(){return[JI()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Ge(Se(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),tD=bn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",At(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:i}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:l}=r.extensionManager,a=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&a&&s){const u=a.filter(f=>l.includes(f.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),nD=bn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,At(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Gu({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var vc=200,Vt=function(){};Vt.prototype.append=function(e){return e.length?(e=Vt.from(e),!this.length&&e||e.length<vc&&this.leafAppend(e)||this.length<vc&&e.leafPrepend(this)||this.appendInner(e)):this};Vt.prototype.prepend=function(e){return e.length?Vt.from(e).append(this):this};Vt.prototype.appendInner=function(e){return new rD(this,e)};Vt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Vt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Vt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Vt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Vt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},t,r),o};Vt.from=function(e){return e instanceof Vt?e:e&&e.length?new Eb(e):Vt.empty};var Eb=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,l){for(var a=i;a<s;a++)if(o(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,l){for(var a=i-1;a>=s;a--)if(o(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=vc)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=vc)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Vt);Vt.empty=new Eb([]);var rD=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var l=this.left.length;if(o<l&&this.left.forEachInner(r,o,Math.min(i,l),s)===!1||i>l&&this.right.forEachInner(r,Math.max(o-l,0),Math.min(this.length,i)-l,s+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var l=this.left.length;if(o>l&&this.right.forEachInvertedInner(r,o-l,Math.max(i,l)-l,s+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(o,l),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Vt);const oD=500;class En{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;t&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,l,a,c=[],d=[];return this.items.forEach((u,f)=>{if(!u.step){o||(o=this.remapping(r,f+1),i=o.maps.length),i--,d.push(u);return}if(o){d.push(new zn(u.map));let h=u.step.map(o.slice(i)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new zn(p,void 0,void 0,c.length+d.length))),i--,p&&o.appendMap(p,i)}else s.maybeStep(u.step);if(u.selection)return l=o?u.selection.map(o.slice(i)):u.selection,a=new En(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(e,t,r,o){let i=[],s=this.eventCount,l=this.items,a=!o&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),f=new zn(e.mapping.maps[d],u,t),h;(h=a&&a.merge(f))&&(f=h,d?i.pop():l=l.slice(0,l.length-1)),i.push(f),t&&(s++,t=void 0),o||(a=f)}let c=s-r.depth;return c>sD&&(l=iD(l,c),s-=c),new En(l.append(i),s)}remapping(e,t){let r=new Qi;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new En(this.items.append(e.map(t=>new zn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},o);let a=t;this.items.forEach(f=>{let h=i.getMirror(--a);if(h==null)return;s=Math.min(s,h);let p=i.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),v=f.selection&&f.selection.map(i.slice(a+1,h));v&&l++,r.push(new zn(p,g,v))}else r.push(new zn(p))},o);let c=[];for(let f=t;f<s;f++)c.push(new zn(i.maps[f]));let d=this.items.slice(0,o).append(c).append(r),u=new En(d,l);return u.emptyItemCount()>oD&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],i=0;return this.items.forEach((s,l)=>{if(l>=e)o.push(s),s.selection&&i++;else if(s.step){let a=s.step.map(t.slice(r)),c=a&&a.getMap();if(r--,c&&t.appendMap(c,r),a){let d=s.selection&&s.selection.map(t.slice(r));d&&i++;let u=new zn(c.invert(),a,d),f,h=o.length-1;(f=o.length&&o[h].merge(u))?o[h]=f:o.push(u)}}else s.map&&r--},this.items.length,0),new En(Vt.from(o.reverse()),i)}}En.empty=new En(Vt.empty,0);function iD(n,e){let t;return n.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),n.slice(t)}class zn{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new zn(t.getMap().invert(),t,this.selection)}}}class Or{constructor(e,t,r,o,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const sD=20;function lD(n,e,t,r){let o=t.getMeta(ho),i;if(o)return o.historyState;t.getMeta(dD)&&(n=new Or(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(ho))return s.getMeta(ho).redo?new Or(n.done.addTransform(t,void 0,r,Ka(e)),n.undone,Vm(t.mapping.maps),n.prevTime,n.prevComposition):new Or(n.done,n.undone.addTransform(t,void 0,r,Ka(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),a=n.prevTime==0||!s&&n.prevComposition!=l&&(n.prevTime<(t.time||0)-r.newGroupDelay||!aD(t,n.prevRanges)),c=s?Yd(n.prevRanges,t.mapping):Vm(t.mapping.maps);return new Or(n.done.addTransform(t,a?e.selection.getBookmark():void 0,r,Ka(e)),En.empty,c,t.time,l??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Or(n.done.rebased(t,i),n.undone.rebased(t,i),Yd(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Or(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Yd(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function aD(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(t=!0)}),t}function Vm(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,o,i,s)=>e.push(i,s));return e}function Yd(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let o=e.map(n[r],1),i=e.map(n[r+1],-1);o<=i&&t.push(o,i)}return t}function cD(n,e,t){let r=Ka(e),o=ho.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),l=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),a=new Or(t?l:i.remaining,t?i.remaining:l,null,0,-1);return i.transform.setSelection(s).setMeta(ho,{redo:t,historyState:a})}let Xd=!1,Hm=null;function Ka(n){let e=n.plugins;if(Hm!=e){Xd=!1,Hm=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Xd=!0;break}}return Xd}const ho=new Un("history"),dD=new Un("closeHistory");function uD(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new cn({key:ho,state:{init(){return new Or(En.empty,En.empty,null,0,-1)},apply(e,t,r){return lD(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?Nb:r=="historyRedo"?_b:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function Pb(n,e){return(t,r)=>{let o=ho.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(r){let i=cD(o,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const Nb=Pb(!1,!0),_b=Pb(!0,!0),fD=Gt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Nb(n,e),redo:()=>({state:n,dispatch:e})=>_b(n,e)}},addProseMirrorPlugins(){return[uD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),hD=bn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",At(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:o}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):K_(t)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:l})=>{var a;if(l){const{$to:c}=s.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(Fe.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(_e.create(s.doc,c.pos)):s.setSelection(Fe.create(s.doc,c.pos));else{const u=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();u&&(s.insert(d,u),s.setSelection(Fe.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xI({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),pD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,mD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,gD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,yD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,vD=In.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[wo({find:pD,type:this.type}),wo({find:gD,type:this.type})]},addPasteRules(){return[xo({find:mD,type:this.type}),xo({find:yD,type:this.type})]}}),bD="listItem",Wm="textStyle",Km=/^(\d+)\.\s$/,wD=bn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",At(this.options.HTMLAttributes,t),0]:["ol",At(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bD,this.editor.getAttributes(Wm)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=fi({find:Km,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=fi({find:Km,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Wm)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),xD=bn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),SD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,kD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,MD=In.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[wo({find:SD,type:this.type})]},addPasteRules(){return[xo({find:kD,type:this.type})]}}),CD=bn.create({name:"text",group:"inline"}),OD=Gt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(DI.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(EI.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(zI.configure(this.options.bulletList)),this.options.code!==!1&&n.push(BI.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(WI.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(KI.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(GI.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(eD.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(tD.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(nD.configure(this.options.heading)),this.options.history!==!1&&n.push(fD.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(hD.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(vD.configure(this.options.italic)),this.options.listItem!==!1&&n.push(qu.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(wD.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(xD.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(MD.configure(this.options.strike)),this.options.text!==!1&&n.push(CD.configure(this.options.text)),n}});class TD extends wI{constructor(){super(...arguments);re(this,"contentElement",null)}}const AD=n=>{const e=new TD(n);return ig(e,t=>(e.on("transaction",()=>{t(e)}),()=>{e.destroy()}))};var ED=G("<div></div> <!>",1);function PD(n,e){J(e,!0);const t=y(e,"editor",7);let r;Dn(async()=>{var c;await ff(),r&&(c=t())!=null&&c.options.element&&(t().contentElement||(r.append(...Array.from(t().options.element.childNodes)),t().setOptions({element:r}),t().contentElement=r))}),hf(()=>{if(!t()||(t().contentElement=null,!t().options.element.firstChild))return;const c=document.createElement("div");c.append(...Array.from(t().options.element.childNodes)),t().setOptions({element:c})});var i=ED(),s=E(i);tn(s,c=>r=c,()=>r);var l=te(s,2);{var a=c=>{var d=F(),u=E(d);ae(u,()=>e.children),C(c,d)};Ee(l,c=>{e.children&&c(a)})}Oe(()=>mr(s,1,jr(e.class))),C(n,i),Y()}const jm=["#fb2c36","#ff6900","#fe9a00","#f0b100","#7ccf00","#00c951","#00bc7d","#00bba7","#00b8db","#00a6f4","#2b7fff","#615fff","#8e51ff","#ad46ff","#e12afb","#f6339a","#ff2056"];function ND(n="",e=1){let t=n.replace(/^#/,"");if(t.length===3&&(t=t.split("").map(l=>l+l).join("")),t.length!==6||Number.isNaN(Number.parseInt(t,16)))throw new Error(`Invalid hex color: "${n}"`);const r=Number.parseInt(t.substr(0,2),16),o=Number.parseInt(t.substr(2,2),16),i=Number.parseInt(t.substr(4,2),16),s=Math.max(0,Math.min(1,e));return`rgba(${r}, ${o}, ${i}, ${s})`}var $m=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,ln=n=>!n||typeof n!="object"||Object.keys(n).length===0,_D=(n,e)=>JSON.stringify(n)===JSON.stringify(e);function Ib(n,e){n.forEach(function(t){Array.isArray(t)?Ib(t,e):e.push(t)})}function Db(n){let e=[];return Ib(n,e),e}var Rb=(...n)=>Db(n).filter(Boolean),zb=(n,e)=>{let t={},r=Object.keys(n),o=Object.keys(e);for(let i of r)if(o.includes(i)){let s=n[i],l=e[i];Array.isArray(s)||Array.isArray(l)?t[i]=Rb(l,s):typeof s=="object"&&typeof l=="object"?t[i]=zb(s,l):t[i]=l+" "+s}else t[i]=n[i];for(let i of o)r.includes(i)||(t[i]=e[i]);return t},Gm=n=>!n||typeof n!="string"?n:n.replace(/\s+/g," ").trim();const fh="-",ID=n=>{const e=RD(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{const l=s.split(fh);return l[0]===""&&l.length!==1&&l.shift(),Lb(l,e)||DD(s)},getConflictingClassGroupIds:(s,l)=>{const a=t[s]||[];return l&&r[s]?[...a,...r[s]]:a}}},Lb=(n,e)=>{var s;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),o=r?Lb(n.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=n.join(fh);return(s=e.validators.find(({validator:l})=>l(i)))==null?void 0:s.classGroupId},Um=/^\[(.+)\]$/,DD=n=>{if(Um.test(n)){const e=Um.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},RD=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const o in t)Ju(t[o],r,o,e);return r},Ju=(n,e,t,r)=>{n.forEach(o=>{if(typeof o=="string"){const i=o===""?e:qm(e,o);i.classGroupId=t;return}if(typeof o=="function"){if(zD(o)){Ju(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([i,s])=>{Ju(s,qm(e,i),t,r)})})},qm=(n,e)=>{let t=n;return e.split(fh).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},zD=n=>n.isThemeGetter,LD=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(i,s)=>{t.set(i,s),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let s=t.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){t.has(i)?t.set(i,s):o(i,s)}}},Yu="!",Xu=":",FD=Xu.length,BD=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=o=>{const i=[];let s=0,l=0,a=0,c;for(let p=0;p<o.length;p++){let g=o[p];if(s===0&&l===0){if(g===Xu){i.push(o.slice(a,p)),a=p+FD;continue}if(g==="/"){c=p;continue}}g==="["?s++:g==="]"?s--:g==="("?l++:g===")"&&l--}const d=i.length===0?o:o.substring(a),u=VD(d),f=u!==d,h=c&&c>a?c-a:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:u,maybePostfixModifierPosition:h}};if(e){const o=e+Xu,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const o=r;r=i=>t({className:i,parseClassName:o})}return r},VD=n=>n.endsWith(Yu)?n.substring(0,n.length-1):n.startsWith(Yu)?n.substring(1):n,HD=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||e[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},WD=n=>({cache:LD(n.cacheSize),parseClassName:BD(n),sortModifiers:HD(n),...ID(n)}),KD=/\s+/,jD=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=e,s=[],l=n.trim().split(KD);let a="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{isExternal:u,modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:g}=t(d);if(u){a=d+(a.length>0?" "+a:a);continue}let v=!!g,x=r(v?p.substring(0,g):p);if(!x){if(!v){a=d+(a.length>0?" "+a:a);continue}if(x=r(p),!x){a=d+(a.length>0?" "+a:a);continue}v=!1}const b=i(f).join(":"),w=h?b+Yu:b,M=w+x;if(s.includes(M))continue;s.push(M);const k=o(x,v);for(let S=0;S<k.length;++S){const A=k[S];s.push(w+A)}a=d+(a.length>0?" "+a:a)}return a};function $D(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Fb(e))&&(r&&(r+=" "),r+=t);return r}const Fb=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Fb(n[r]))&&(t&&(t+=" "),t+=e);return t};function Zu(n,...e){let t,r,o,i=s;function s(a){const c=e.reduce((d,u)=>u(d),n());return t=WD(c),r=t.cache.get,o=t.cache.set,i=l,l(a)}function l(a){const c=r(a);if(c)return c;const d=jD(a,t);return o(a,d),d}return function(){return i($D.apply(null,arguments))}}const zt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Bb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Vb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,GD=/^\d+\/\d+$/,UD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,XD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Po=n=>GD.test(n),Je=n=>!!n&&!Number.isNaN(Number(n)),Xr=n=>!!n&&Number.isInteger(Number(n)),Jm=n=>n.endsWith("%")&&Je(n.slice(0,-1)),wr=n=>UD.test(n),ZD=()=>!0,QD=n=>qD.test(n)&&!JD.test(n),hh=()=>!1,eR=n=>YD.test(n),tR=n=>XD.test(n),nR=n=>!we(n)&&!xe(n),rR=n=>wi(n,Kb,hh),we=n=>Bb.test(n),Zr=n=>wi(n,jb,QD),Zd=n=>wi(n,pR,Je),oR=n=>wi(n,Hb,hh),iR=n=>wi(n,Wb,tR),sR=n=>wi(n,hh,eR),xe=n=>Vb.test(n),Ca=n=>xi(n,jb),lR=n=>xi(n,mR),aR=n=>xi(n,Hb),cR=n=>xi(n,Kb),dR=n=>xi(n,Wb),uR=n=>xi(n,gR,!0),wi=(n,e,t)=>{const r=Bb.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},xi=(n,e,t=!1)=>{const r=Vb.exec(n);return r?r[1]?e(r[1]):t:!1},Hb=n=>n==="position",fR=new Set(["image","url"]),Wb=n=>fR.has(n),hR=new Set(["length","size","percentage"]),Kb=n=>hR.has(n),jb=n=>n==="length",pR=n=>n==="number",mR=n=>n==="family-name",gR=n=>n==="shadow",Qu=()=>{const n=zt("color"),e=zt("font"),t=zt("text"),r=zt("font-weight"),o=zt("tracking"),i=zt("leading"),s=zt("breakpoint"),l=zt("container"),a=zt("spacing"),c=zt("radius"),d=zt("shadow"),u=zt("inset-shadow"),f=zt("drop-shadow"),h=zt("blur"),p=zt("perspective"),g=zt("aspect"),v=zt("ease"),x=zt("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],S=()=>[xe,we,a],A=()=>[Po,"full","auto",...S()],T=()=>[Xr,"none","subgrid",xe,we],P=()=>["auto",{span:["full",Xr,xe,we]},xe,we],z=()=>[Xr,"auto",xe,we],W=()=>["auto","min","max","fr",xe,we],R=()=>["start","end","center","between","around","evenly","stretch","baseline"],B=()=>["start","end","center","stretch"],I=()=>["auto",...S()],j=()=>[Po,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],H=()=>[n,xe,we],$=()=>[Jm,Zr],D=()=>["","none","full",c,xe,we],q=()=>["",Je,Ca,Zr],U=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>["","none",h,xe,we],ke=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe,we],K=()=>["none",Je,xe,we],ee=()=>["none",Je,xe,we],se=()=>[Je,xe,we],Q=()=>[Po,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wr],breakpoint:[wr],color:[ZD],container:[wr],"drop-shadow":[wr],ease:["in","out","in-out"],font:[nR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wr],shadow:[wr],spacing:["px",Je],text:[wr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Po,we,xe,g]}],container:["container"],columns:[{columns:[Je,we,xe,l]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...w(),we,xe]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Xr,"auto",xe,we]}],basis:[{basis:[Po,"full","auto",l,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Je,Po,"auto","initial","none",we]}],grow:[{grow:["",Je,xe,we]}],shrink:[{shrink:["",Je,xe,we]}],order:[{order:[Xr,"first","last","none",xe,we]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...R(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...R()]}],"align-items":[{items:[...B(),"baseline"]}],"align-self":[{self:["auto",...B(),"baseline"]}],"place-content":[{"place-content":R()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[l,"screen",...j()]}],"min-w":[{"min-w":[l,"screen","none",...j()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[s]},...j()]}],h:[{h:["screen",...j()]}],"min-h":[{"min-h":["screen","none",...j()]}],"max-h":[{"max-h":["screen",...j()]}],"font-size":[{text:["base",t,Ca,Zr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,xe,Zd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jm,we]}],"font-family":[{font:[lR,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,xe,we]}],"line-clamp":[{"line-clamp":[Je,"none",xe,Zd]}],leading:[{leading:[i,...S()]}],"list-image":[{"list-image":["none",xe,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xe,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:[Je,"from-font","auto",xe,Zr]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Je,"auto",xe,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...w(),aR,oR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",cR,rR]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xr,xe,we],radial:["",xe,we],conic:[Xr,xe,we]},dR,iR]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...U(),"hidden","none"]}],"divide-style":[{divide:[...U(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...U(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Je,xe,we]}],"outline-w":[{outline:["",Je,Ca,Zr]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",d,uR,sR]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",xe,we,u]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Je,Zr]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":H()}],opacity:[{opacity:[Je,xe,we]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none",xe,we]}],blur:[{blur:oe()}],brightness:[{brightness:[Je,xe,we]}],contrast:[{contrast:[Je,xe,we]}],"drop-shadow":[{"drop-shadow":["","none",f,xe,we]}],grayscale:[{grayscale:["",Je,xe,we]}],"hue-rotate":[{"hue-rotate":[Je,xe,we]}],invert:[{invert:["",Je,xe,we]}],saturate:[{saturate:[Je,xe,we]}],sepia:[{sepia:["",Je,xe,we]}],"backdrop-filter":[{"backdrop-filter":["","none",xe,we]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[Je,xe,we]}],"backdrop-contrast":[{"backdrop-contrast":[Je,xe,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Je,xe,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Je,xe,we]}],"backdrop-invert":[{"backdrop-invert":["",Je,xe,we]}],"backdrop-opacity":[{"backdrop-opacity":[Je,xe,we]}],"backdrop-saturate":[{"backdrop-saturate":[Je,xe,we]}],"backdrop-sepia":[{"backdrop-sepia":["",Je,xe,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xe,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Je,"initial",xe,we]}],ease:[{ease:["linear","initial",v,xe,we]}],delay:[{delay:[Je,xe,we]}],animate:[{animate:["none",x,xe,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,xe,we]}],"perspective-origin":[{"perspective-origin":ke()}],rotate:[{rotate:K()}],"rotate-x":[{"rotate-x":K()}],"rotate-y":[{"rotate-y":K()}],"rotate-z":[{"rotate-z":K()}],scale:[{scale:ee()}],"scale-x":[{"scale-x":ee()}],"scale-y":[{"scale-y":ee()}],"scale-z":[{"scale-z":ee()}],"scale-3d":["scale-3d"],skew:[{skew:se()}],"skew-x":[{"skew-x":se()}],"skew-y":[{"skew-y":se()}],transform:[{transform:[xe,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:ke()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Q()}],"translate-x":[{"translate-x":Q()}],"translate-y":[{"translate-y":Q()}],"translate-z":[{"translate-z":Q()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe,we]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Je,Ca,Zr,Zd]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},yR=(n,{cacheSize:e,prefix:t,experimentalParseClassName:r,extend:o={},override:i={}})=>(Vi(n,"cacheSize",e),Vi(n,"prefix",t),Vi(n,"experimentalParseClassName",r),Oa(n.theme,i.theme),Oa(n.classGroups,i.classGroups),Oa(n.conflictingClassGroups,i.conflictingClassGroups),Oa(n.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),Vi(n,"orderSensitiveModifiers",i.orderSensitiveModifiers),Ta(n.theme,o.theme),Ta(n.classGroups,o.classGroups),Ta(n.conflictingClassGroups,o.conflictingClassGroups),Ta(n.conflictingClassGroupModifiers,o.conflictingClassGroupModifiers),$b(n,o,"orderSensitiveModifiers"),n),Vi=(n,e,t)=>{t!==void 0&&(n[e]=t)},Oa=(n,e)=>{if(e)for(const t in e)Vi(n,t,e[t])},Ta=(n,e)=>{if(e)for(const t in e)$b(n,e,t)},$b=(n,e,t)=>{const r=e[t];r!==void 0&&(n[t]=n[t]?n[t].concat(r):r)},vR=(n,...e)=>typeof n=="function"?Zu(Qu,n,...e):Zu(()=>yR(Qu(),n),...e),bR=Zu(Qu);var wR={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},Gb=n=>n||void 0,ss=(...n)=>Gb(Db(n).filter(Boolean).join(" ")),Qd=null,Zn={},ef=!1,Ii=(...n)=>e=>e.twMerge?((!Qd||ef)&&(ef=!1,Qd=ln(Zn)?bR:vR({...Zn,extend:{theme:Zn.theme,classGroups:Zn.classGroups,conflictingClassGroupModifiers:Zn.conflictingClassGroupModifiers,conflictingClassGroups:Zn.conflictingClassGroups,...Zn.extend}})),Gb(Qd(ss(n)))):ss(n),Ym=(n,e)=>{for(let t in e)n.hasOwnProperty(t)?n[t]=ss(n[t],e[t]):n[t]=e[t];return n},Ub=(n,e)=>{let{extend:t=null,slots:r={},variants:o={},compoundVariants:i=[],compoundSlots:s=[],defaultVariants:l={}}=n,a={...wR,...e},c=t!=null&&t.base?ss(t.base,n==null?void 0:n.base):n==null?void 0:n.base,d=t!=null&&t.variants&&!ln(t.variants)?zb(o,t.variants):o,u=t!=null&&t.defaultVariants&&!ln(t.defaultVariants)?{...t.defaultVariants,...l}:l;!ln(a.twMergeConfig)&&!_D(a.twMergeConfig,Zn)&&(ef=!0,Zn=a.twMergeConfig);let f=ln(t==null?void 0:t.slots),h=ln(r)?{}:{base:ss(n==null?void 0:n.base,f&&(t==null?void 0:t.base)),...r},p=f?h:Ym({...t==null?void 0:t.slots},ln(h)?{base:n==null?void 0:n.base}:h),g=ln(t==null?void 0:t.compoundVariants)?i:Rb(t==null?void 0:t.compoundVariants,i),v=b=>{if(ln(d)&&ln(r)&&f)return Ii(c,b==null?void 0:b.class,b==null?void 0:b.className)(a);if(g&&!Array.isArray(g))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof g}`);if(s&&!Array.isArray(s))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof s}`);let w=(R,B,I=[],j)=>{let H=I;if(typeof B=="string")H=H.concat(Gm(B).split(" ").map($=>`${R}:${$}`));else if(Array.isArray(B))H=H.concat(B.reduce(($,D)=>$.concat(`${R}:${D}`),[]));else if(typeof B=="object"&&typeof j=="string"){for(let $ in B)if(B.hasOwnProperty($)&&$===j){let D=B[$];if(D&&typeof D=="string"){let q=Gm(D);H[j]?H[j]=H[j].concat(q.split(" ").map(U=>`${R}:${U}`)):H[j]=q.split(" ").map(U=>`${R}:${U}`)}else Array.isArray(D)&&D.length>0&&(H[j]=D.reduce((q,U)=>q.concat(`${R}:${U}`),[]))}}return H},M=(R,B=d,I=null,j=null)=>{var H;let $=B[R];if(!$||ln($))return null;let D=(H=j==null?void 0:j[R])!=null?H:b==null?void 0:b[R];if(D===null)return null;let q=$m(D),U=Array.isArray(a.responsiveVariants)&&a.responsiveVariants.length>0||a.responsiveVariants===!0,ie=u==null?void 0:u[R],oe=[];if(typeof q=="object"&&U)for(let[ee,se]of Object.entries(q)){let Q=$[se];if(ee==="initial"){ie=se;continue}Array.isArray(a.responsiveVariants)&&!a.responsiveVariants.includes(ee)||(oe=w(ee,Q,oe,I))}let ke=q!=null&&typeof q!="object"?q:$m(ie),K=$[ke||"false"];return typeof oe=="object"&&typeof I=="string"&&oe[I]?Ym(oe,K):oe.length>0?(oe.push(K),I==="base"?oe.join(" "):oe):K},k=()=>d?Object.keys(d).map(R=>M(R,d)):null,S=(R,B)=>{if(!d||typeof d!="object")return null;let I=new Array;for(let j in d){let H=M(j,d,R,B),$=R==="base"&&typeof H=="string"?H:H&&H[R];$&&(I[I.length]=$)}return I},A={};for(let R in b)b[R]!==void 0&&(A[R]=b[R]);let T=(R,B)=>{var I;let j=typeof(b==null?void 0:b[R])=="object"?{[R]:(I=b[R])==null?void 0:I.initial}:{};return{...u,...A,...j,...B}},P=(R=[],B)=>{let I=[];for(let{class:j,className:H,...$}of R){let D=!0;for(let[q,U]of Object.entries($)){let ie=T(q,B)[q];if(Array.isArray(U)){if(!U.includes(ie)){D=!1;break}}else{let oe=ke=>ke==null||ke===!1;if(oe(U)&&oe(ie))continue;if(ie!==U){D=!1;break}}}D&&(j&&I.push(j),H&&I.push(H))}return I},z=R=>{let B=P(g,R);if(!Array.isArray(B))return B;let I={};for(let j of B)if(typeof j=="string"&&(I.base=Ii(I.base,j)(a)),typeof j=="object")for(let[H,$]of Object.entries(j))I[H]=Ii(I[H],$)(a);return I},W=R=>{if(s.length<1)return null;let B={};for(let{slots:I=[],class:j,className:H,...$}of s){if(!ln($)){let D=!0;for(let q of Object.keys($)){let U=T(q,R)[q];if(U===void 0||(Array.isArray($[q])?!$[q].includes(U):$[q]!==U)){D=!1;break}}if(!D)continue}for(let D of I)B[D]=B[D]||[],B[D].push([j,H])}return B};if(!ln(r)||!f){let R={};if(typeof p=="object"&&!ln(p))for(let B of Object.keys(p))R[B]=I=>{var j,H;return Ii(p[B],S(B,I),((j=z(I))!=null?j:[])[B],((H=W(I))!=null?H:[])[B],I==null?void 0:I.class,I==null?void 0:I.className)(a)};return R}return Ii(c,k(),P(g),b==null?void 0:b.class,b==null?void 0:b.className)(a)},x=()=>{if(!(!d||typeof d!="object"))return Object.keys(d)};return v.variantKeys=x(),v.extend=t,v.base=c,v.slots=p,v.variants=d,v.defaultVariants=u,v.compoundSlots=s,v.compoundVariants=g,v};const Vo=Ub({base:"focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});var xR=G("<a><!></a>"),SR=G("<button><!></button>");function en(n,e){J(e,!0);let t=y(e,"variant",3,"default"),r=y(e,"size",3,"default"),o=y(e,"ref",15,null),i=y(e,"href",3,void 0),s=y(e,"type",3,"button"),l=Te(e,["$$slots","$$events","$$legacy","class","variant","size","ref","href","type","children"]);var a=F(),c=E(a);{var d=f=>{var h=xR();let p;var g=be(h);ae(g,()=>e.children??De),ge(h),tn(h,v=>o(v),()=>o()),Oe(v=>p=Ve(h,p,{class:v,href:i(),...l}),[()=>pt(Vo({variant:t(),size:r()}),e.class)]),C(f,h)},u=f=>{var h=SR();let p;var g=be(h);ae(g,()=>e.children??De),ge(h),tn(h,v=>o(v),()=>o()),Oe(v=>p=Ve(h,p,{class:v,type:s(),...l}),[()=>pt(Vo({variant:t(),size:r()}),e.class)]),C(f,h)};Ee(c,f=>{i()?f(d):f(u,!1)})}C(n,a),Y()}function Aa(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"sideOffset",3,4),o=Te(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","portalProps"]);var i=F(),s=E(i);X(s,()=>Gc,(l,a)=>{a(l,le(()=>e.portalProps,{children:(c,d)=>{var u=F(),f=E(u);const h=L(()=>pt("bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 outline-none",e.class));X(f,()=>$C,(p,g)=>{g(p,le({get sideOffset(){return r()},get class(){return m(h)}},()=>o,{get ref(){return t()},set ref(v){t(v)}}))}),C(c,u)},$$slots:{default:!0}}))}),C(n,i),Y()}function Qr(n,e){J(e,!0);let t=y(e,"ref",15,null),r=Te(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var o=F(),i=E(o);const s=L(()=>pt("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e.inset&&"pl-8",e.class));X(i,()=>xy,(l,a)=>{a(l,le({get class(){return m(s)}},()=>r,{get ref(){return t()},set ref(c){t(c)}}))}),C(n,o),Y()}const Ea=VC,Pa=UC,Xm=OC;var kR=G('<!> <h1 class="m-0 p-0">Header</h1>',1),MR=G('<!> <h2 class="m-0 p-0">Header</h2>',1),CR=G('<!> <h3 class="m-0 p-0">Header</h3>',1),OR=G('<!> <h4 class="m-0 p-0">Header</h4>',1),TR=G("<!> <!> <!> <!>",1),AR=G("<!> <!>",1),ER=G("<!> Bullet List",1),PR=G("<!> Ordered List",1),NR=G("<!> Task List",1),_R=G("<!> <!> <!>",1),IR=G("<!> <!>",1),DR=G("<!> <!>",1),RR=G("<!> <!>",1),zR=G("<!> <!>",1),LR=G("<!> <!>",1),FR=G('<div class="flex space-x-1.5 rounded-md p-1.5 shadow-sm border-0 border-b rounded-none mx-5"><div class="w-fit mx-auto flex gap-1.5"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div>'),BR=G('<div class="my-3"><!></div>');function VR(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(e.editor,"$editor",t),i=(c,d={})=>{var u;return(u=o())==null?void 0:u.isActive(c,d)};var s=BR(),l=be(s);{var a=c=>{var d=FR(),u=be(d),f=be(u);X(f,()=>Ea,(U,ie)=>{ie(U,{children:(oe,ke)=>{var K=AR(),ee=E(K);const se=L(()=>`${Vo({variant:"ghost"})} ${i("heading")&&"bg-blue-500/30"}`);X(ee,()=>Pa,(ce,pe)=>{pe(ce,{get class(){return m(se)},children:(Re,Me)=>{uT(Re,{class:"size-4"})},$$slots:{default:!0}})});var Q=te(ee,2);X(Q,()=>Aa,(ce,pe)=>{pe(ce,{class:"dark:prose-invert prose-sm",children:(Re,Me)=>{var ne=F(),me=E(ne);X(me,()=>Xm,(Le,Ce)=>{Ce(Le,{children:(Pe,He)=>{var qe=TR(),ht=E(qe);const kt=L(()=>i("heading",{level:1})&&"bg-blue-500/30");X(ht,()=>Qr,(Pt,qt)=>{qt(Pt,{get class(){return m(kt)},onclick:()=>o().chain().focus().toggleHeading({level:1}).run(),children:(xt,sn)=>{var Jt=kR(),xn=E(Jt);lT(xn,{class:"size-4 mr-2"}),vt(2),C(xt,Jt)},$$slots:{default:!0}})});var tt=te(ht,2);const Mt=L(()=>i("heading",{level:2})&&"bg-blue-500/30");X(tt,()=>Qr,(Pt,qt)=>{qt(Pt,{get class(){return m(Mt)},onclick:()=>o().chain().focus().toggleHeading({level:2}).run(),children:(xt,sn)=>{var Jt=MR(),xn=E(Jt);aT(xn,{class:"size-4 mr-2"}),vt(2),C(xt,Jt)},$$slots:{default:!0}})});var wn=te(tt,2);const qr=L(()=>i("heading",{level:3})&&"bg-blue-500/30");X(wn,()=>Qr,(Pt,qt)=>{qt(Pt,{get class(){return m(qr)},onclick:()=>o().chain().focus().toggleHeading({level:3}).run(),children:(xt,sn)=>{var Jt=CR(),xn=E(Jt);cT(xn,{class:"size-4 mr-2"}),vt(2),C(xt,Jt)},$$slots:{default:!0}})});var Et=te(wn,2);const gt=L(()=>i("heading",{level:4})&&"bg-blue-500/30");X(Et,()=>Qr,(Pt,qt)=>{qt(Pt,{get class(){return m(gt)},onclick:()=>o().chain().focus().toggleHeading({level:4}).run(),children:(xt,sn)=>{var Jt=OR(),xn=E(Jt);dT(xn,{class:"size-4 mr-2"}),vt(2),C(xt,Jt)},$$slots:{default:!0}})}),C(Pe,qe)},$$slots:{default:!0}})}),C(Re,ne)},$$slots:{default:!0}})}),C(oe,K)},$$slots:{default:!0}})});var h=te(f,2);X(h,()=>Ea,(U,ie)=>{ie(U,{children:(oe,ke)=>{var K=IR(),ee=E(K);const se=L(()=>`
                        ${Vo({variant:"ghost"})}
                        ${(i("bulletList")||i("orderedList")||i("taskList"))&&"bg-blue-500/30"}`);X(ee,()=>Pa,(ce,pe)=>{pe(ce,{get class(){return m(se)},children:(Re,Me)=>{Cp(Re,{class:"size-4"})},$$slots:{default:!0}})});var Q=te(ee,2);X(Q,()=>Aa,(ce,pe)=>{pe(ce,{children:(Re,Me)=>{var ne=F(),me=E(ne);X(me,()=>Xm,(Le,Ce)=>{Ce(Le,{children:(Pe,He)=>{var qe=_R(),ht=E(qe);const kt=L(()=>i("bulletList")&&"bg-blue-500/30");X(ht,()=>Qr,(Et,gt)=>{gt(Et,{get class(){return m(kt)},onclick:()=>o().chain().focus().toggleBulletList().run(),children:(Pt,qt)=>{var xt=ER(),sn=E(xt);Cp(sn,{class:"size-4 mr-2"}),vt(),C(Pt,xt)},$$slots:{default:!0}})});var tt=te(ht,2);const Mt=L(()=>i("orderedList")&&"bg-blue-500/30");X(tt,()=>Qr,(Et,gt)=>{gt(Et,{get class(){return m(Mt)},onclick:()=>o().chain().focus().toggleOrderedList().run(),children:(Pt,qt)=>{var xt=PR(),sn=E(xt);pT(sn,{class:"size-4 mr-2"}),vt(),C(Pt,xt)},$$slots:{default:!0}})});var wn=te(tt,2);const qr=L(()=>i("taskList")&&"bg-blue-500/30");X(wn,()=>Qr,(Et,gt)=>{gt(Et,{get class(){return m(qr)},onclick:()=>o().commands.toggleTaskList(),children:(Pt,qt)=>{var xt=NR(),sn=E(xt);mT(sn,{class:"size-4 mr-2"}),vt(),C(Pt,xt)},$$slots:{default:!0}})}),C(Pe,qe)},$$slots:{default:!0}})}),C(Re,ne)},$$slots:{default:!0}})}),C(oe,K)},$$slots:{default:!0}})});var p=te(h,2);const g=L(()=>i("blockquote")&&"bg-blue-500/30");en(p,{variant:"ghost",get class(){return m(g)},onclick:()=>o().chain().focus().toggleBlockquote().run(),children:(U,ie)=>{vT(U,{class:"size-4"})},$$slots:{default:!0}});var v=te(p,2);Mu(v,{orientation:"vertical"});var x=te(v,2);const b=L(()=>i("bold")&&"bg-blue-500/30");en(x,{variant:"ghost",get class(){return m(b)},onclick:()=>o().chain().focus().toggleBold().run(),children:(U,ie)=>{nT(U,{class:"size-4"})},$$slots:{default:!0}});var w=te(x,2);const M=L(()=>i("italic")&&"bg-blue-500/30");en(w,{variant:"ghost",get class(){return m(M)},onclick:()=>o().chain().focus().toggleItalic().run(),children:(U,ie)=>{hT(U,{class:"size-4"})},$$slots:{default:!0}});var k=te(w,2);const S=L(()=>i("strike")&&"bg-blue-500/30");en(k,{variant:"ghost",get class(){return m(S)},onclick:()=>o().chain().focus().toggleStrike().run(),children:(U,ie)=>{ST(U,{class:"size-4"})},$$slots:{default:!0}});var A=te(k,2);const T=L(()=>i("underline")&&"bg-blue-500/30");en(A,{variant:"ghost",get class(){return m(T)},onclick:()=>o().chain().focus().toggleUnderline().run(),children:(U,ie)=>{kT(U,{class:"size-4"})},$$slots:{default:!0}});var P=te(A,2);X(P,()=>Ea,(U,ie)=>{ie(U,{children:(oe,ke)=>{var K=RR(),ee=E(K);const se=L(()=>`${Vo({variant:"ghost"})} ${i("highlight")&&"bg-blue-500/30"}`);X(ee,()=>Pa,(ce,pe)=>{pe(ce,{get class(){return m(se)},children:(Re,Me)=>{fT(Re,{class:"size-4"})},$$slots:{default:!0}})});var Q=te(ee,2);X(Q,()=>Aa,(ce,pe)=>{pe(ce,{class:"grid grid-cols-3 gap-1 min-w-none w-fit",children:(Re,Me)=>{var ne=DR(),me=E(ne);en(me,{variant:"ghost",class:"p-0 size-7 rounded-full",onclick:()=>o().chain().focus().unsetHighlight().run(),children:(Ce,Pe)=>{Mp(Ce,{class:"size-full"})},$$slots:{default:!0}});var Le=te(me,2);Hn(Le,17,()=>jm,Gi,(Ce,Pe)=>{const He=L(()=>ND(m(Pe),.2)),qe=L(()=>`p-0 size-7 rounded-full ${i("highlight",{color:m(He)})&&"border-2 border-foreground"}`);en(Ce,{variant:"ghost",get class(){return m(qe)},get style(){return`background-color: ${m(He)??""};`},onclick:()=>o().chain().focus().toggleHighlight({color:m(He)}).run()})}),C(Re,ne)},$$slots:{default:!0}})}),C(oe,K)},$$slots:{default:!0}})});var z=te(P,2);X(z,()=>Ea,(U,ie)=>{ie(U,{children:(oe,ke)=>{var K=LR(),ee=E(K);const se=L(()=>`${Vo({variant:"ghost"})} ${i("textStyle")&&o().getAttributes("textStyle").color&&"bg-blue-500/30"}`);X(ee,()=>Pa,(ce,pe)=>{pe(ce,{get class(){return m(se)},children:(Re,Me)=>{yT(Re,{class:"size-4"})},$$slots:{default:!0}})});var Q=te(ee,2);X(Q,()=>Aa,(ce,pe)=>{pe(ce,{class:"grid grid-cols-3 gap-1 min-w-none w-fit",children:(Re,Me)=>{var ne=zR(),me=E(ne);en(me,{variant:"ghost",class:"p-0 size-7 rounded-full",onclick:()=>o().chain().focus().unsetColor().run(),children:(Ce,Pe)=>{Mp(Ce,{class:"size-full"})},$$slots:{default:!0}});var Le=te(me,2);Hn(Le,17,()=>jm,Gi,(Ce,Pe)=>{const He=L(()=>`p-0 size-7 rounded-full ${i("textStyle",{color:m(Pe)})&&"border-2 border-foreground"}`);en(Ce,{variant:"ghost",get class(){return m(He)},get style(){return`background-color: ${m(Pe)??""};`},onclick:()=>o().chain().focus().setColor(m(Pe)).run()})}),C(Re,ne)},$$slots:{default:!0}})}),C(oe,K)},$$slots:{default:!0}})});var W=te(z,2);Mu(W,{orientation:"vertical"});var R=te(W,2);const B=L(()=>i({textAlign:"left"})&&"bg-blue-500/30");en(R,{variant:"ghost",get class(){return m(B)},onclick:()=>o().commands.setTextAlign("left"),children:(U,ie)=>{eT(U,{class:"size-4"})},$$slots:{default:!0}});var I=te(R,2);const j=L(()=>i({textAlign:"center"})&&"bg-blue-500/30");en(I,{variant:"ghost",get class(){return m(j)},onclick:()=>o().commands.setTextAlign("center"),children:(U,ie)=>{ZO(U,{class:"size-4"})},$$slots:{default:!0}});var H=te(I,2);const $=L(()=>i({textAlign:"right"})&&"bg-blue-500/30");en(H,{variant:"ghost",get class(){return m($)},onclick:()=>o().commands.setTextAlign("right"),children:(U,ie)=>{tT(U,{class:"size-4"})},$$slots:{default:!0}});var D=te(H,2);const q=L(()=>i({textAlign:"justify"})&&"bg-blue-500/30");en(D,{variant:"ghost",get class(){return m(q)},onclick:()=>o().commands.setTextAlign("justify"),children:(U,ie)=>{QO(U,{class:"size-4"})},$$slots:{default:!0}}),ge(u),ge(d),C(c,d)};Ee(l,c=>{o()&&c(a)})}ge(s),C(n,s),Y(),r()}const HR=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,WR=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,KR=In.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",At(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[wo({find:HR,type:this.type})]},addPasteRules(){return[xo({find:WR,type:this.type})]}});var jR=G('<div class="flex flex-col flex-1 pb-5 mx-auto select-none w-full"><!> <!></div>');function $R(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(i(),"$editor",t);let i=y(e,"editor",15),s=y(e,"content",11,""),l=y(e,"editable",11,!0),a=y(e,"change",3,()=>{});nt(()=>{var f;(f=o())==null||f.setEditable(l())}),Dn(()=>{i(AD({content:s(),editable:l(),extensions:[TI,KR.configure({multicolor:!0,HTMLAttributes:{class:"highlight"}}),kI.configure({types:[Lm.name,qu.name,Jd.name]}),Lm.configure({types:[qu.name,Jd.name]}),CI,Jd.configure({nested:!0,HTMLAttributes:{class:"flex gap-2"}}),OI.configure({defaultAlignment:"left",types:["heading","paragraph"],alignments:["left","center","right","justify"]}),OD.configure({bulletList:{keepMarks:!0},orderedList:{keepMarks:!0},heading:{levels:[1,2,3,4]},codeBlock:!1,code:!1})],editorProps:{attributes:{class:"editorEl"}},onUpdate(){var f;(f=a())==null||f(o())},onSelectionUpdate(){var g;(g=a())==null||g(o());const{selection:f}=o().state;if(f.to!=f.from)return;if(f.to==1){window.scrollTo({top:1,behavior:"smooth"});return}const h=o().view.coordsAtPos(f.from),p=window.scrollY+h.top;h.top>.7*window.innerHeight?window.scrollTo({top:p-window.innerHeight*.7,behavior:"smooth"}):h.top<.3*window.innerHeight&&window.scrollTo({top:p-window.innerHeight*.3,behavior:"smooth"})}})),o().commands.focus(null,{scrollIntoView:!0})});var c=jR(),d=be(c);VR(d,{get editor(){return i()}});var u=te(d,2);PD(u,{get editor(){return o()},class:"editor"}),ge(c),C(n,c),Y(),r()}var GR=G("<!> Edit",1),UR=G("<!> <!>",1);function qR(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(yn,"$lock",t);let i=y(e,"content",15,""),s=L(()=>!o());var l=F(),a=E(l);X(a,()=>xA,(c,d)=>{d(c,{children:(u,f)=>{var h=UR(),p=E(h);X(p,()=>OA,(v,x)=>{x(v,{class:"w-full hover:bg-accent hover:text-accent-foreground flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",children:(b,w)=>{var M=GR(),k=E(M);sT(k,{class:"mr-2 size-4"}),vt(),C(b,M)},$$slots:{default:!0}})});var g=te(p,2);X(g,()=>CA,(v,x)=>{x(v,{class:"min-h-[80svh] bg-black",children:(b,w)=>{$R(b,{get content(){return i()},change:M=>i(M.getHTML()),get editable(){return m(s)},set editable(M){_(s,M,!0)}})},$$slots:{default:!0}})}),C(u,h)},$$slots:{default:!0}})}),C(n,l),Y(),r()}var JR=G('<div class="p-0.5 h-full w-full max-h-full"><!></div>'),YR=G("<!> <!>",1),XR=G("<!> <!>",1);function ZR(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(yn,"$lock",t);let{updateNodeData:i}=ko(),s=de(Ft(e.data.text||'<h4 style="text-align: left"><em>Inventory:</em></h4><ul><li><p style="text-align: left"><em>...</em></p></li></ul>'));nt(()=>{i(e.id,{text:m(s)})});var l=XR(),a=E(l);const c=L(()=>e.selected&&!o());Ul(a,{get nodeId(){return e.id},get isVisible(){return m(c)},minHeight:100,minWidth:150});var d=te(a,2);X(d,()=>na,(u,f)=>{f(u,{children:(h,p)=>{var g=YR(),v=E(g);X(v,()=>ra,(b,w)=>{w(b,{class:"max-h-full h-full w-full",children:(M,k)=>{var S=JR(),A=be(S);X(A,()=>ea,(T,P)=>{P(T,{class:`
                        nowheel .nodrag
                        h-full w-full flex flex-col
                        backdrop-blur-md backdrop-filter
                        bg-clip-padding bg-black/10
                        overflow-hidden`,children:(z,W)=>{var R=F(),B=E(R);X(B,()=>ta,(I,j)=>{j(I,{class:`
                            p-2 flex-1 overflow-auto max-h-full
                            prose dark:prose-invert prose-sm
                            *:!my-0 *:!py-0`,children:(H,$)=>{var D=F(),q=E(D);w0(q,()=>m(s)),C(H,D)},$$slots:{default:!0}})}),C(z,R)},$$slots:{default:!0}})}),ge(S),C(M,S)},$$slots:{default:!0}})});var x=te(v,2);oa(x,{get id(){return e.id},children:(b,w)=>{qR(b,{get content(){return m(s)},set content(M){_(s,M,!0)}})},$$slots:{default:!0}}),C(h,g)},$$slots:{default:!0}})}),C(n,l),Y(),r()}var QR=G('<div class="p-0.5 w-full h-full flex"><!></div>'),e2=G("<!> <!>",1),t2=G("<!> <!>",1);function n2(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(yn,"$lock",t);let{updateNodeData:i}=ko(),s=de(Ft(e.data.title||"STR"));nt(()=>{i(e.id,{title:m(s)})});var l=t2(),a=E(l);const c=L(()=>e.selected&&!o());Ul(a,{get isVisible(){return m(c)},minHeight:50,maxHeight:50,minWidth:100});var d=te(a,2);X(d,()=>na,(u,f)=>{f(u,{children:(h,p)=>{var g=e2(),v=E(g);X(v,()=>ra,(b,w)=>{w(b,{class:"size-full",children:(M,k)=>{var S=QR(),A=be(S);X(A,()=>ea,(T,P)=>{P(T,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(z,W)=>{var R=F(),B=E(R);X(B,()=>ta,(I,j)=>{j(I,{class:"p-0.5 h-full flex flex-col",children:(H,$)=>{Fa(H,{class:"border-0 text-center font-bold !p-0 my-1 disabled:opacity-100",get disabled(){return o()},get value(){return m(s)},set value(D){_(s,D,!0)}})},$$slots:{default:!0}})}),C(z,R)},$$slots:{default:!0}})}),ge(S),C(M,S)},$$slots:{default:!0}})});var x=te(v,2);oa(x,{get id(){return e.id}}),C(h,g)},$$slots:{default:!0}})}),C(n,l),Y(),r()}const po=pi([{id:"initial",type:"Text",position:{x:0,y:0},width:550,height:200,data:{content:'<h2 style="text-align: left"><em>Welcome !!!</em></h2><p style="text-align: left"></p><p style="text-align: left">This is a <span style="color: rgb(0, 166, 244)">character sheet</span> tool designed to be as <span style="color: rgb(0, 166, 244)">modular</span> as possible.</p><p style="text-align: left"></p><p style="text-align: left">To start creation open the menu by hitting <mark class="highlight" data-color="rgba(0, 166, 244, 0.2)" style="background-color: rgba(0, 166, 244, 0.2); color: inherit">cmd+k</mark> or clicking the button on the top of the page.</p><p style="text-align: left"></p><p style="text-align: left">All nodes have a menu, accessible by right-clicking, to access some more option (<strong>like this one!!</strong>)</p>'},measured:{width:550,height:200},selected:!1}]),qb={Avatar:IT,Image:BT,Stat:GT,Text:ZR,Title:n2},ja=pi({x:0,y:0,zoom:1}),yn=pi(!1);var r2=G("<!> <span> </span>",1),o2=G("<!> Unlock Nodes",1),i2=G("<!> Lock Nodes",1),s2=G("<!> Snap Viewport",1),l2=G("<!> Export",1),a2=G("<!> Import",1),c2=G("<!> <!> <!> <!>",1),d2=G("<!> <!> <!>",1),u2=G("<!> <!>",1),f2=G('<!> <input type="file" accept="application/JSON" class="hidden">',1);function h2(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(zi,"$open",t),i=()=>fe(po,"$nodes",t),s=()=>fe(yn,"$lock",t),l=()=>Kt(zi,!o());let{screenToFlowPosition:a,getViewport:c,setViewport:d}=ko(),u=de(void 0);const f=w=>{let{x:M,y:k}=a({x:window.innerWidth/2,y:window.innerHeight/2}),S={id:crypto.randomUUID(),position:{x:M,y:k},type:w};w=="Avatar"||w=="Image"?S.width=S.height=50:w=="Stat"?(S.height=150,S.width=100):w=="Title"?(S.height=50,S.width=100):w=="Text"&&(S.height=100,S.width=150),S.position.x-=S.width/2,S.position.y-=S.height/2,Kw(po,dr(i)[i().length]=S,dr(i)),l()};function h(){const w=JSON.stringify({sheet:i(),lock:s(),view:c()},null,2),M=new Blob([w],{type:"application/json"}),k=URL.createObjectURL(M),S=document.createElement("a");S.href=k,S.download="sheet.json",document.body.appendChild(S),S.click(),S.remove(),URL.revokeObjectURL(k),l()}async function p(w){const M=new FileReader;M.readAsText(w.target.files[0]),M.onload=function(){try{let k=JSON.parse(M.result);Kt(po,k.sheet),Kt(ja,k.view),Kt(yn,k.lock)}catch{}}}function g(w){w.key==="k"&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),Kt(zi,!o()))}var v=f2();wt("keydown",dn,g);var x=E(v);X(x,()=>BO,(w,M)=>{M(w,{loop:!0,class:"backdrop-blur-md bg-black",get open(){return Ww(),o()},set open(k){Kt(zi,k)},children:(k,S)=>{var A=u2(),T=E(A);X(T,()=>jO,(z,W)=>{W(z,{placeholder:"Type a command or search..."})});var P=te(T,2);X(P,()=>$O,(z,W)=>{W(z,{children:(R,B)=>{var I=d2(),j=E(I);X(j,()=>VO,(D,q)=>{q(D,{children:(U,ie)=>{vt();var oe=tf("No results found...");C(U,oe)},$$slots:{default:!0}})});var H=te(j,2);X(H,()=>kp,(D,q)=>{q(D,{heading:"Nodes",children:(U,ie)=>{var oe=F(),ke=E(oe);Hn(ke,17,()=>Object.keys(qb),Gi,(K,ee)=>{var se=F(),Q=E(se);X(Q,()=>Pi,(ce,pe)=>{pe(ce,{onSelect:()=>f(m(ee)),children:(Re,Me)=>{var ne=r2(),me=E(ne);oT(me,{class:"mr-2 size-4"});var Le=te(me,2),Ce=be(Le,!0);ge(Le),Oe(()=>nf(Ce,m(ee))),C(Re,ne)},$$slots:{default:!0}})}),C(K,se)}),C(U,oe)},$$slots:{default:!0}})});var $=te(H,2);X($,()=>kp,(D,q)=>{q(D,{heading:"Commands",children:(U,ie)=>{var oe=c2(),ke=E(oe);X(ke,()=>Pi,(Q,ce)=>{ce(Q,{onclick:()=>Kt(yn,!s()),children:(pe,Re)=>{var Me=F(),ne=E(Me);{var me=Ce=>{var Pe=o2(),He=E(Pe);gT(He,{class:"mr-2 size-4"}),vt(),C(Ce,Pe)},Le=Ce=>{var Pe=i2(),He=E(Pe);Fy(He,{class:"mr-2 size-4"}),vt(),C(Ce,Pe)};Ee(ne,Ce=>{s()?Ce(me):Ce(Le,!1)})}C(pe,Me)},$$slots:{default:!0}})});var K=te(ke,2);X(K,()=>Pi,(Q,ce)=>{ce(Q,{onclick:()=>{let pe=c();d({zoom:pe.zoom,x:Math.round(pe.x/25)*25,y:Math.round(pe.y/25)*25})},children:(pe,Re)=>{var Me=s2(),ne=E(Me);By(ne,{class:"mr-2 size-4"}),vt(),C(pe,Me)},$$slots:{default:!0}})});var ee=te(K,2);X(ee,()=>Pi,(Q,ce)=>{ce(Q,{onclick:h,children:(pe,Re)=>{var Me=l2(),ne=E(Me);wT(ne,{class:"mr-2 size-4"}),vt(),C(pe,Me)},$$slots:{default:!0}})});var se=te(ee,2);X(se,()=>Pi,(Q,ce)=>{ce(Q,{onclick:()=>m(u).click(),children:(pe,Re)=>{var Me=a2(),ne=E(Me);iT(ne,{class:"mr-2 size-4"}),vt(),C(pe,Me)},$$slots:{default:!0}})}),C(U,oe)},$$slots:{default:!0}})}),C(R,I)},$$slots:{default:!0}})}),C(k,A)},$$slots:{default:!0}})});var b=te(x,2);b.__change=p,tn(b,w=>_(u,w),()=>m(u)),C(n,v),Y(),r()}rf(["change"]);const p2=Ub({base:"focus:ring-ring inline-flex select-none items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent shadow",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent shadow",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m2(n,e){J(e,!0);let t=y(e,"ref",15,null),r=y(e,"variant",3,"default"),o=Te(e,["$$slots","$$events","$$legacy","ref","href","class","variant","children"]);var i=F(),s=E(i);yf(s,()=>e.href?"a":"span",!1,(l,a)=>{tn(l,f=>t(f),()=>t());let c;Oe(f=>c=Ve(l,c,{href:e.href,class:f,...o}),[()=>pt(p2({variant:r()}),e.class)]);var d=F(),u=E(d);ae(u,()=>e.children??De),C(a,d)}),C(n,i),Y()}var g2=G("<!> <span>+</span> <span>K</span>",1),y2=G('<!> <p class="text-muted-foreground mx-auto col-span-2">Search...</p> <!>',1),v2=G("<!> <!>",1);function b2(n){const[e,t]=ut(),r=()=>fe(yn,"$lock",e);var o=v2(),i=E(o);su(i,{position:"top-center",children:(l,a)=>{en(l,{onclick:()=>Kt(zi,!0),class:"bg-black/10 backdrop-blur-sm border hover:bg-accent rounded-2xl flex gap-5 group transition-colors",children:(c,d)=>{var u=y2(),f=E(u);xT(f,{class:"text-foreground size-5"});var h=te(f,4);m2(h,{variant:"secondary",class:"text-muted-foreground group-hover:bg-red-900/50 transition-colors flex gap-1",children:(p,g)=>{var v=g2(),x=E(v);rT(x,{class:"size-4"}),vt(4),C(p,v)},$$slots:{default:!0}}),C(c,u)},$$slots:{default:!0}})},$$slots:{default:!0}});var s=te(i,2);su(s,{position:"top-right",children:(l,a)=>{var c=F(),d=E(c);{var u=f=>{en(f,{variant:"ghost",size:"icon",class:"min-w-fit min-h-fit",onclick:()=>Kt(yn,!1),children:(h,p)=>{Fy(h,{class:"!size-10 !m-1.5 stroke-blue-500 animate-pulse"})},$$slots:{default:!0}})};Ee(d,f=>{r()&&f(u)})}C(l,c)},$$slots:{default:!0}}),C(n,o),t()}var w2=G('<div class="h-svh select-none"><!> <!> <!></div>');function I2(n,e){J(e,!0);const[t,r]=ut(),o=()=>fe(po,"$nodes",t),i=()=>fe(ja,"$viewport",t),s=()=>fe(yn,"$lock",t);localStorage.getItem("sheet")&&Kt(po,JSON.parse(localStorage.getItem("sheet"))),localStorage.getItem("view")&&Kt(ja,JSON.parse(localStorage.getItem("view"))),localStorage.getItem("lock")&&Kt(yn,JSON.parse(localStorage.getItem("lock"))),nt(()=>{localStorage.setItem("view",JSON.stringify(i())),localStorage.setItem("sheet",JSON.stringify(o())),localStorage.setItem("lock",JSON.stringify(s()))});var l=w2(),a=be(l);const c=L(()=>pi([])),d=L(()=>!s());cx(a,{get edges(){return m(c)},colorMode:"dark",minZoom:.1,maxZoom:3,viewport:ja,nodeTypes:qb,nodes:po,get nodesDraggable(){return m(d)},fitView:localStorage.getItem("view")==null,children:(h,p)=>{gx(h,{get variant(){return sr.Dots},size:1,gap:25})},$$slots:{default:!0}});var u=te(a,2);b2(u);var f=te(u,2);h2(f,{}),ge(l),C(n,l),Y(),r()}export{I2 as component};
