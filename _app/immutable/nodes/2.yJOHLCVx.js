var hw=Object.defineProperty;var pw=Object.getPrototypeOf;var mw=Reflect.get;var Th=r=>{throw TypeError(r)};var gw=(r,e,t)=>e in r?hw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var oe=(r,e,t)=>gw(r,typeof e!="symbol"?e+"":e,t),pd=(r,e,t)=>e.has(r)||Th("Cannot "+t);var T=(r,e,t)=>(pd(r,e,"read from private field"),t?t.call(r):e.get(r)),H=(r,e,t)=>e.has(r)?Th("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),dt=(r,e,t,o)=>(pd(r,e,"write to private field"),o?o.call(r,t):e.set(r,t),t),_e=(r,e,t)=>(pd(r,e,"access private method"),t);var Ah=(r,e,t)=>mw(pw(r),t,e);import{o as tu,p as yw,q as vw,r as Qm,t as U,a as O,k as xt,c as B,l as An,v as at,m as bw,u as ww,w as xw,b as nf,s as rf,e as of}from"../chunks/54c0vtkL.js";import{af as sf,ay as Sw,aI as kw,h as kt,a as ii,aJ as eg,aK as Mw,av as Cw,b as lf,p as af,c as Wc,d as En,U as Ow,C as Wo,ah as Lo,ag as tg,l as g,R as De,A as Tw,B as Eh,D as Wi,ao as Aw,F as cf,aL as ng,as as rg,I as Le,X as er,aM as md,q as Ew,ae as Ga,aN as df,aO as Pw,aP as uf,aQ as Ph,aR as Nw,ar as _w,aS as Iw,au as og,aT as Dw,am as ig,v as Te,aU as Rw,ap as zw,an as Lw,E as Fw,aV as Bw,u as ur,r as ff,e as ir,N as I,aW as Vw,a9 as hf,s as Y,a7 as Rn,aC as Ve,aD as Gn,w as X,m as fe,x as we,y as ye,aX as Kc,aa as F,K as Ee,aF as mi,a4 as Ua,a5 as pf,t as P,z as ne,aY as un,aG as sg,aZ as lg,aB as nu,a8 as ue,W as Bt,g as mf,i as rt,G as Re,a_ as Hw,a$ as ag,aE as bt}from"../chunks/DQ4ISc1H.js";import{p as v,a as ft,s as he,b as jt,i as Pe,c as ae,l as qe,d as Ww,r as Ae,m as Kw,e as jw}from"../chunks/BQ5rRwqh.js";import{b as nn,c as Z}from"../chunks/Cp4Wn3Cq.js";import{X as $w,u as qt,s as $e,b as fn,P as ru,d as gr,g as Nh,e as _h,f as Gw,S as Uw,h as fr,i as qw,D as Ih,j as Jw,l as $r,m as yr,n as lt,o as Yw,p as Xw,B as Dh,q as Rh,M as zh,r as Zw,t as Lh,v as Fh,w as Qw,x as Bh,C as gd,y as Vh,z as ex,A as tx,E as He,F as nx,G as rx,H as ox,I as ix,k as sx,J as lx,K as ax,L as cx,N as dx,O as ux,Q as Hh,R as Wh,T as Kh,U as fx,V as hx,W as _o,Y as px,Z as mx,_ as gx,$ as _a,a as ce,a0 as ou}from"../chunks/Cqv19kM5.js";import{i as vt}from"../chunks/DJakvyeT.js";const yx=[];function gf(r,e=!1){return Ia(r,new Map,"",yx)}function Ia(r,e,t,o,i=null){if(typeof r=="object"&&r!==null){var s=e.get(r);if(s!==void 0)return s;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(sf(r)){var l=Array(r.length);e.set(r,l),i!==null&&e.set(i,l);for(var a=0;a<r.length;a+=1){var c=r[a];a in r&&(l[a]=Ia(c,e,t,o))}return l}if(Sw(r)===kw){l={},e.set(r,l),i!==null&&e.set(i,l);for(var d in r)l[d]=Ia(r[d],e,t,o);return l}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function")return Ia(r.toJSON(),e,t,o,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}function yf(r,e,t){kt&&ii();var o=r,i=Ow,s,l=eg()?Mw:Cw;lf(()=>{l(i,i=e())&&(s&&af(s),s=Wc(()=>t(o)))}),kt&&(o=En)}function Ui(r,e){return e}function vx(r,e,t,o){for(var i=[],s=e.length,l=0;l<s;l++)Nw(e[l].e,i,!0);var a=s>0&&i.length===0&&t!==null;if(a){var c=t.parentNode;_w(c),c.append(t),o.clear(),Cr(r,e[0].prev,e[s-1].next)}Iw(i,()=>{for(var d=0;d<s;d++){var u=e[d];a||(o.delete(u.k),Cr(r,u.prev,u.next)),og(u.e,!a)}})}function Wn(r,e,t,o,i,s=null){var l=r,a={flags:e,items:new Map,first:null},c=(e&ng)!==0;if(c){var d=r;l=kt?Wo(Lo(d)):d.appendChild(tg())}kt&&ii();var u=null,f=!1,p=De(()=>{var h=t();return sf(h)?h:h==null?[]:rg(h)});lf(()=>{var h=g(p),m=h.length;if(f&&m===0)return;f=m===0;let y=!1;if(kt){var b=l.data===Tw;b!==(m===0)&&(l=Eh(),Wo(l),Wi(!1),y=!0)}if(kt){for(var S=null,w,x=0;x<m;x++){if(En.nodeType===8&&En.data===Aw){l=En,y=!0,Wi(!1);break}var C=h[x],M=o(C,x);w=cg(En,a,S,null,C,M,x,i,e,t),a.items.set(M,w),S=w}m>0&&Wo(Eh())}kt||bx(h,a,l,i,e,o,t),s!==null&&(m===0?u?cf(u):u=Wc(()=>s(l)):u!==null&&af(u,()=>{u=null})),y&&Wi(!0),g(p)}),kt&&(l=En)}function bx(r,e,t,o,i,s,l){var D,$,W,G;var a=(i&Pw)!==0,c=(i&(uf|df))!==0,d=r.length,u=e.items,f=e.first,p=f,h,m=null,y,b=[],S=[],w,x,C,M;if(a)for(M=0;M<d;M+=1)w=r[M],x=s(w,M),C=u.get(x),C!==void 0&&((D=C.a)==null||D.measure(),(y??(y=new Set)).add(C));for(M=0;M<d;M+=1){if(w=r[M],x=s(w,M),C=u.get(x),C===void 0){var k=p?p.e.nodes_start:t;m=cg(k,e,m,m===null?e.first:m.next,w,x,M,o,i,l),u.set(x,m),b=[],S=[],p=m.next;continue}if(c&&wx(C,w,M,i),(C.e.f&md)!==0&&(cf(C.e),a&&(($=C.a)==null||$.unfix(),(y??(y=new Set)).delete(C))),C!==p){if(h!==void 0&&h.has(C)){if(b.length<S.length){var E=S[0],A;m=E.prev;var N=b[0],L=b[b.length-1];for(A=0;A<b.length;A+=1)jh(b[A],E,t);for(A=0;A<S.length;A+=1)h.delete(S[A]);Cr(e,N.prev,L.next),Cr(e,m,N),Cr(e,L,E),p=E,m=L,M-=1,b=[],S=[]}else h.delete(C),jh(C,p,t),Cr(e,C.prev,C.next),Cr(e,C,m===null?e.first:m.next),Cr(e,m,C),m=C;continue}for(b=[],S=[];p!==null&&p.k!==x;)(p.e.f&md)===0&&(h??(h=new Set)).add(p),S.push(p),p=p.next;if(p===null)continue;C=p}b.push(C),m=C,p=C.next}if(p!==null||h!==void 0){for(var K=h===void 0?[]:rg(h);p!==null;)(p.e.f&md)===0&&K.push(p),p=p.next;var z=K.length;if(z>0){var V=(i&ng)!==0&&d===0?t:null;if(a){for(M=0;M<z;M+=1)(W=K[M].a)==null||W.measure();for(M=0;M<z;M+=1)(G=K[M].a)==null||G.fix()}vx(e,K,V,u)}}a&&Ew(()=>{var R;if(y!==void 0)for(C of y)(R=C.a)==null||R.apply()}),Ga.first=e.first&&e.first.e,Ga.last=m&&m.e}function wx(r,e,t,o){(o&uf)!==0&&Ph(r.v,e),(o&df)!==0?Ph(r.i,t):r.i=t}function cg(r,e,t,o,i,s,l,a,c,d){var u=(c&uf)!==0,f=(c&Dw)===0,p=u?f?Le(i):er(i):i,h=(c&df)===0?l:er(l),m={i:h,v:p,k:s,a:null,e:null,prev:t,next:o};try{return m.e=Wc(()=>a(r,p,h,d),kt),m.e.prev=t&&t.e,m.e.next=o&&o.e,t===null?e.first=m:(t.next=m,t.e.next=m.e),o!==null&&(o.prev=m,o.e.prev=m.e),m}finally{}}function jh(r,e,t){for(var o=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==o;){var l=ig(s);i.before(s),s=l}}function Cr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function xx(r,e,t=!1,o=!1,i=!1){var s=r,l="";Te(()=>{var a=Ga;if(l===(l=e()??"")){kt&&ii();return}if(a.nodes_start!==null&&(Rw(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),l!==""){if(kt){En.data;for(var c=ii(),d=c;c!==null&&(c.nodeType!==8||c.data!=="");)d=c,c=ig(c);if(c===null)throw zw(),Lw;tu(En,d),s=Wo(c);return}var u=l+"";t?u=`<svg>${u}</svg>`:o&&(u=`<math>${u}</math>`);var f=yw(u);if((t||o)&&(f=Lo(f)),tu(Lo(f),f.lastChild),t||o)for(;Lo(f);)s.before(Lo(f));else s.before(f)}})}function vf(r,e,t,o,i,s){let l=kt;kt&&ii();var a,c,d=null;kt&&En.nodeType===1&&(d=En,ii());var u=kt?En:r,f;lf(()=>{const p=e()||null;var h=t||p==="svg"?Bw:null;p!==a&&(f&&(p===null?af(f,()=>{f=null,c=null}):p===c?cf(f):og(f)),p&&p!==c&&(f=Wc(()=>{if(d=kt?d:h?document.createElementNS(h,p):document.createElement(p),tu(d,d),o){kt&&vw(p)&&d.append(document.createComment(""));var m=kt?Lo(d):d.appendChild(tg());kt&&(m===null?Wi(!1):Wo(m)),o(d,m)}Ga.nodes_end=d,u.before(d)})),a=p,a&&(c=a))},Fw),l&&(Wi(!0),Wo(u))}function iu(r,e,t=e){var o=eg();Qm(r,"input",i=>{var s=i?r.defaultValue:r.value;if(s=yd(r)?vd(s):s,t(s),o&&s!==(s=e())){var l=r.selectionStart,a=r.selectionEnd;r.value=s??"",a!==null&&(r.selectionStart=l,r.selectionEnd=Math.min(a,r.value.length))}}),(kt&&r.defaultValue!==r.value||ur(e)==null&&r.value)&&t(yd(r)?vd(r.value):r.value),ff(()=>{var i=e();yd(r)&&i===vd(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function yd(r){var e=r.type;return e==="number"||e==="range"}function vd(r){return r===""?null:+r}function Sx(r,e,t=e){Qm(r,"change",()=>{t(r.files)}),kt&&r.files&&t(r.files),ff(()=>{r.files=e()})}var Er,Uo,as,wc,dg;const xc=class xc{constructor(e){H(this,wc);H(this,Er,new WeakMap);H(this,Uo);H(this,as);dt(this,as,e)}observe(e,t){var o=T(this,Er).get(e)||new Set;return o.add(t),T(this,Er).set(e,o),_e(this,wc,dg).call(this).observe(e,T(this,as)),()=>{var i=T(this,Er).get(e);i.delete(t),i.size===0&&(T(this,Er).delete(e),T(this,Uo).unobserve(e))}}};Er=new WeakMap,Uo=new WeakMap,as=new WeakMap,wc=new WeakSet,dg=function(){return T(this,Uo)??dt(this,Uo,new ResizeObserver(e=>{for(var t of e){xc.entries.set(t.target,t);for(var o of T(this,Er).get(t.target)||[])o(t)}}))},oe(xc,"entries",new WeakMap);let su=xc;var kx=new su({box:"border-box"});function $h(r,e,t){var o=kx.observe(r,()=>t(r[e]));ir(()=>(ur(()=>t(r[e])),o))}function et(r,e){var s;var t=(s=r.$$events)==null?void 0:s[e.type],o=sf(t)?t.slice():t==null?[]:[t];for(var i of o)i.call(this,e)}function Io(r){I(r,r.v+1)}function Mx(r){let e=0,t=er(0),o;return()=>{Vw()&&(g(t),ff(()=>(e===0&&(o=ur(()=>r(()=>Io(t)))),e+=1,()=>{hf().then(()=>{e-=1,e===0&&(o==null||o(),o=void 0)})})))}}function bd(r,e){const{panZoom:t,minZoom:o,maxZoom:i,initialViewport:s,viewport:l,dragging:a,translateExtent:c,paneClickDistance:d}=e,u=$w({domNode:r,minZoom:o,maxZoom:i,translateExtent:c,viewport:s,paneClickDistance:d,onDraggingChange:a.set}),f=u.getViewport();return l.set(f),t.set(u),u.update(e),{update(p){u.update(p)}}}var Cx=U('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function Ox(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(R,"$panActivationKeyPressed",t),s=()=>he(V,"$minZoom",t),l=()=>he(D,"$maxZoom",t),a=()=>he(J,"$zoomActivationKeyPressed",t),c=()=>he(z,"$selectionRect",t),d=()=>he(W,"$translateExtent",t),u=()=>he(G,"$lib",t),f=Le(),p=Le(),h=Le();let m=v(e,"initialViewport",8,void 0),y=v(e,"onMoveStart",8,void 0),b=v(e,"onMove",8,void 0),S=v(e,"onMoveEnd",8,void 0),w=v(e,"panOnScrollMode",8),x=v(e,"preventScrolling",8),C=v(e,"zoomOnScroll",8),M=v(e,"zoomOnDoubleClick",8),k=v(e,"zoomOnPinch",8),E=v(e,"panOnDrag",8),A=v(e,"panOnScroll",8),N=v(e,"paneClickDistance",8);const{viewport:L,panZoom:K,selectionRect:z,minZoom:V,maxZoom:D,dragging:$,translateExtent:W,lib:G,panActivationKeyPressed:R,zoomActivationKeyPressed:J,viewportInitialized:q}=qt(),se=j=>L.set({x:j[0],y:j[1],zoom:j[2]});Rn(()=>{jt(q,!0)}),Ve(()=>fe(m()),()=>{I(f,m()||{x:0,y:0,zoom:1})}),Ve(()=>(i(),fe(E())),()=>{I(p,i()||E())}),Ve(()=>(i(),fe(A())),()=>{I(h,i()||A())}),Gn(),vt();var ie=Cx(),Me=we(ie);$e(Me,e,"default",{}),ye(ie),fn(ie,(j,te)=>bd==null?void 0:bd(j,te),()=>({viewport:L,minZoom:s(),maxZoom:l(),initialViewport:g(f),dragging:$,panZoom:K,onPanZoomStart:y(),onPanZoom:b(),onPanZoomEnd:S(),zoomOnScroll:C(),zoomOnDoubleClick:M(),zoomOnPinch:k(),panOnScroll:g(h),panOnDrag:g(p),panOnScrollSpeed:.5,panOnScrollMode:w()||ru.Free,zoomActivationKeyPressed:a(),preventScrolling:typeof x()=="boolean"?x():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!c(),translateExtent:d(),lib:u(),paneClickDistance:N(),onTransformChange:se})),O(r,ie),X(),o()}function Gh(r,e){return t=>{t.target===e&&(r==null||r(t))}}function Uh(r){return e=>{const t=r.includes(e.id);return e.selected!==t&&(e.selected=t),e}}var Tx=U("<div><!></div>");function Ax(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he($,"$panActivationKeyPressed",t),s=()=>he(V,"$selectionKeyPressed",t),l=()=>he(K,"$selectionRect",t),a=()=>he(L,"$elementsSelectable",t),c=()=>he(z,"$selectionRectMode",t),d=()=>he(G,"$connection",t),u=()=>he(E,"$edges",t),f=()=>he(k,"$nodeLookup",t),p=()=>he(A,"$viewport",t),h=()=>he(D,"$selectionMode",t),m=()=>he(N,"$dragging",t),y=Le(),b=Le(),S=Le();let w=v(e,"panOnDrag",8,void 0),x=v(e,"selectionOnDrag",8,void 0);const C=Kc(),{nodes:M,nodeLookup:k,edges:E,viewport:A,dragging:N,elementsSelectable:L,selectionRect:K,selectionRectMode:z,selectionKeyPressed:V,selectionMode:D,panActivationKeyPressed:$,unselectNodesAndEdges:W,connection:G}=qt();let R=Le(),J=null,q=[],se=!1;function ie(re){if(se||d().inProgress){se=!1;return}C("paneclick",{event:re}),W(),z.set(null)}function Me(re){var Oe,Ne;if(J=g(R).getBoundingClientRect(),!L||!g(b)||re.button!==0||re.target!==g(R)||!J)return;(Ne=(Oe=re.target)==null?void 0:Oe.setPointerCapture)==null||Ne.call(Oe,re.pointerId);const{x:ge,y:Fe}=Nh(re,J);W(),K.set({width:0,height:0,startX:ge,startY:Fe,x:ge,y:Fe})}function j(re){if(!g(b)||!J||!l())return;se=!0;const ge=Nh(re,J),Fe=l().startX??0,Oe=l().startY??0,Ne={...l(),x:ge.x<Fe?ge.x:Fe,y:ge.y<Oe?ge.y:Oe,width:Math.abs(ge.x-Fe),height:Math.abs(ge.y-Oe)},We=q.map(nt=>nt.id),Je=_h(q,u()).map(nt=>nt.id);q=Gw(f(),Ne,[p().x,p().y,p().zoom],h()===Uw.Partial,!0);const pt=_h(q,u()).map(nt=>nt.id),Mt=q.map(nt=>nt.id);(We.length!==Mt.length||Mt.some(nt=>!We.includes(nt)))&&M.update(nt=>nt.map(Uh(Mt))),(Je.length!==pt.length||pt.some(nt=>!Je.includes(nt)))&&E.update(nt=>nt.map(Uh(pt))),z.set("user"),K.set(Ne)}function te(re){var ge,Fe;re.button===0&&((Fe=(ge=re.target)==null?void 0:ge.releasePointerCapture)==null||Fe.call(ge,re.pointerId),!g(b)&&c()==="user"&&re.target===g(R)&&(ie==null||ie(re)),K.set(null),q.length>0&&jt(z,"nodes"),s()&&(se=!1))}const le=re=>{var ge;if(Array.isArray(g(y))&&((ge=g(y))!=null&&ge.includes(2))){re.preventDefault();return}C("panecontextmenu",{event:re})};Ve(()=>(i(),fe(w())),()=>{I(y,i()||w())}),Ve(()=>(s(),l(),fe(x()),g(y)),()=>{I(b,s()||l()||x()&&g(y)!==!0)}),Ve(()=>(a(),g(b),c()),()=>{I(S,a()&&(g(b)||c()==="user"))}),Gn(),vt();var ee=Tx(),de=F(()=>g(S)?void 0:Gh(ie,g(R))),me=F(()=>Gh(le,g(R)));let ze;var Ce=we(ee);$e(Ce,e,"default",{}),ye(ee),nn(ee,re=>I(R,re),()=>g(R)),Te(re=>ze=gr(ee,1,"svelte-flow__pane svelte-1esy7hx",null,ze,re),[()=>({draggable:w()===!0||Array.isArray(w())&&w().includes(0),dragging:m(),selection:g(b)})],De),xt("click",ee,function(...re){var ge;(ge=g(de))==null||ge.apply(this,re)}),xt("pointerdown",ee,function(...re){var ge;(ge=g(S)?Me:void 0)==null||ge.apply(this,re)}),xt("pointermove",ee,function(...re){var ge;(ge=g(S)?j:void 0)==null||ge.apply(this,re)}),xt("pointerup",ee,function(...re){var ge;(ge=g(S)?te:void 0)==null||ge.apply(this,re)}),xt("contextmenu",ee,function(...re){var ge;(ge=g(me))==null||ge.apply(this,re)}),O(r,ee),X(),o()}var Ex=U('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function Px(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(s,"$viewport",t),{viewport:s}=qt();vt();var l=Ex(),a=we(l);$e(a,e,"default",{}),ye(l),Te(()=>fr(l,`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),O(r,l),X(),o()}function Ko(r,e){const{store:t,onDrag:o,onDragStart:i,onDragStop:s,onNodeMouseDown:l}=e,a=qw({onDrag:o,onDragStart:i,onDragStop:s,onNodeMouseDown:l,getStoreItems:()=>{const d=Ee(t.snapGrid),u=Ee(t.viewport);return{nodes:Ee(t.nodes),nodeLookup:Ee(t.nodeLookup),edges:Ee(t.edges),nodeExtent:Ee(t.nodeExtent),snapGrid:d||[0,0],snapToGrid:!!d,nodeOrigin:Ee(t.nodeOrigin),multiSelectionActive:Ee(t.multiselectionKeyPressed),domNode:Ee(t.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:Ee(t.autoPanOnNodeDrag),nodesDraggable:Ee(t.nodesDraggable),selectNodesOnDrag:Ee(t.selectNodesOnDrag),nodeDragThreshold:Ee(t.nodeDragThreshold),unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodePositions:t.updateNodePositions,panBy:t.panBy}}});function c(d,u){if(u.disabled){a.destroy();return}a.update({domNode:d,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return c(r,e),{update(d){c(r,d)},destroy(){a.destroy()}}}function Nx({width:r,height:e,initialWidth:t,initialHeight:o,measuredWidth:i,measuredHeight:s}){if(i===void 0&&s===void 0){const l=r??t,a=e??o;return{width:l?`width:${l}px;`:"",height:a?`height:${a}px;`:""}}return{width:r?`width:${r}px;`:"",height:e?`height:${e}px;`:""}}var _x=U("<div><!></div>");function Ix(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(ee,"$nodeTypes",t),s=()=>he(re,"$elementsSelectable",t),l=()=>he(ge,"$nodesDraggable",t),a=()=>he(We,"$connectableStore",t),c=Le(void 0,!0),d=Le(void 0,!0),u=Le(void 0,!0),f=Le(void 0,!0);let p=v(e,"node",9),h=v(e,"id",9),m=v(e,"data",25,()=>({})),y=v(e,"selected",9,!1),b=v(e,"draggable",9,void 0),S=v(e,"selectable",9,void 0),w=v(e,"connectable",9,!0),x=v(e,"deletable",9,!0),C=v(e,"hidden",9,!1),M=v(e,"dragging",9,!1),k=v(e,"resizeObserver",9,null),E=v(e,"style",9,void 0),A=v(e,"type",9,"default"),N=v(e,"isParent",9,!1),L=v(e,"positionX",9),K=v(e,"positionY",9),z=v(e,"sourcePosition",9,void 0),V=v(e,"targetPosition",9,void 0),D=v(e,"zIndex",9),$=v(e,"measuredWidth",9,void 0),W=v(e,"measuredHeight",9,void 0),G=v(e,"initialWidth",9,void 0),R=v(e,"initialHeight",9,void 0),J=v(e,"width",9,void 0),q=v(e,"height",9,void 0),se=v(e,"dragHandle",9,void 0),ie=v(e,"initialized",9,!1),Me=v(e,"parentId",9,void 0),j=v(e,"nodeClickDistance",9,void 0),te=v(e,"class",9,"");const le=qt(),{nodeTypes:ee,nodeDragThreshold:de,selectNodesOnDrag:me,handleNodeSelection:ze,updateNodeInternals:Ce,elementsSelectable:re,nodesDraggable:ge}=le;let Fe=Le(void 0,!0),Oe=Le(null,!0);const Ne=Kc(),We=mi(w());let Je=Le(void 0,!0),pt=Le(void 0,!0),Mt=Le(void 0,!0);Ua("svelteflow__node_id",h()),Ua("svelteflow__node_connectable",We),pf(()=>{var Pt;g(Oe)&&((Pt=k())==null||Pt.unobserve(g(Oe)))});function nt(Pt){S()&&(!Ee(me)||!b()||Ee(de)>0)&&ze(h()),Ne("nodeclick",{node:p().internals.userNode,event:Pt})}Ve(()=>fe(A()),()=>{I(c,A()||"default")}),Ve(()=>(i(),g(c)),()=>{I(d,!!i()[g(c)])}),Ve(()=>(i(),g(c),Ih),()=>{I(u,i()[g(c)]||Ih)}),Ve(()=>(g(d),fe(A())),()=>{g(d)||console.warn("003",Jw.error003(A()))}),Ve(()=>(fe(J()),fe(q()),fe(G()),fe(R()),fe($()),fe(W())),()=>{I(f,Nx({width:J(),height:q(),initialWidth:G(),initialHeight:R(),measuredWidth:$(),measuredHeight:W()}))}),Ve(()=>fe(w()),()=>{We.set(!!w())}),Ve(()=>(g(Je),g(c),g(pt),fe(z()),g(Mt),fe(V()),fe(h()),g(Fe)),()=>{(g(Je)&&g(c)!==g(Je)||g(pt)&&z()!==g(pt)||g(Mt)&&V()!==g(Mt))&&requestAnimationFrame(()=>Ce(new Map([[h(),{id:h(),nodeElement:g(Fe),force:!0}]]))),I(Je,g(c)),I(pt,z()),I(Mt,V())}),Ve(()=>(fe(k()),g(Fe),g(Oe),fe(ie())),()=>{k()&&(g(Fe)!==g(Oe)||!ie())&&(g(Oe)&&k().unobserve(g(Oe)),g(Fe)&&k().observe(g(Fe)),I(Oe,g(Fe)))}),Gn(),vt(!0);var Ct=B(),xn=P(Ct);{var Jr=Pt=>{var yt=_x();let Nt,Jt;var St=we(yt);const ln=De(()=>y()??!1),Yt=De(()=>S()??s()??!0),Sn=De(()=>x()??!0),ki=De(()=>b()??l()??!0);Z(St,()=>g(u),(ct,zn)=>{zn(ct,{get data(){return m()},get id(){return h()},get selected(){return g(ln)},get selectable(){return g(Yt)},get deletable(){return g(Sn)},get sourcePosition(){return z()},get targetPosition(){return V()},get zIndex(){return D()},get dragging(){return M()},get draggable(){return g(ki)},get dragHandle(){return se()},get parentId(){return Me()},get type(){return g(c)},get isConnectable(){return a()},get positionAbsoluteX(){return L()},get positionAbsoluteY(){return K()},get width(){return J()},get height(){return q()}})}),ye(yt),fn(yt,(ct,zn)=>Ko==null?void 0:Ko(ct,zn),()=>({nodeId:h(),isSelectable:S(),disabled:!1,handleSelector:se(),noDragClass:"nodrag",nodeClickDistance:j(),onNodeMouseDown:ze,onDrag:(ct,zn,vr,Yr)=>{Ne("nodedrag",{event:ct,targetNode:vr,nodes:Yr})},onDragStart:(ct,zn,vr,Yr)=>{Ne("nodedragstart",{event:ct,targetNode:vr,nodes:Yr})},onDragStop:(ct,zn,vr,Yr)=>{Ne("nodedragstop",{event:ct,targetNode:vr,nodes:Yr})},store:le})),nn(yt,ct=>I(Fe,ct),()=>g(Fe)),ir(()=>xt("click",yt,nt)),ir(()=>xt("mouseenter",yt,ct=>Ne("nodemouseenter",{node:p(),event:ct}))),ir(()=>xt("mouseleave",yt,ct=>Ne("nodemouseleave",{node:p(),event:ct}))),ir(()=>xt("mousemove",yt,ct=>Ne("nodemousemove",{node:p(),event:ct}))),ir(()=>xt("contextmenu",yt,ct=>Ne("nodecontextmenu",{node:p(),event:ct}))),Te((ct,zn)=>{lt(yt,"data-id",h()),Nt=gr(yt,1,ct,null,Nt,zn),Jt=fr(yt,`${E()??""??""};${g(f).width??""}${g(f).height??""}`,Jt,{"z-index":D(),transform:`translate(${L()??""}px, ${K()??""}px)`,visibility:ie()?"visible":"hidden"})},[()=>$r(yr(["svelte-flow__node",`svelte-flow__node-${g(c)}`,te()])),()=>({dragging:M(),selected:y(),draggable:b(),connectable:w(),selectable:S(),nopan:b(),parent:N()})],De),O(Pt,yt)};Pe(xn,Pt=>{C()||Pt(Jr)})}O(r,Ct),X(),o()}var Dx=U('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function Rx(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(u,"$visibleNodes",t),s=()=>he(f,"$nodesDraggable",t),l=()=>he(h,"$elementsSelectable",t),a=()=>he(p,"$nodesConnectable",t),c=()=>he(y,"$parentLookup",t);let d=v(e,"nodeClickDistance",8,0);const{visibleNodes:u,nodesDraggable:f,nodesConnectable:p,elementsSelectable:h,updateNodeInternals:m,parentLookup:y}=qt(),b=typeof ResizeObserver>"u"?null:new ResizeObserver(w=>{const x=new Map;w.forEach(C=>{const M=C.target.getAttribute("data-id");x.set(M,{id:M,nodeElement:C.target,force:!0})}),m(x)});pf(()=>{b==null||b.disconnect()}),vt();var S=Dx();Wn(S,5,i,w=>w.id,(w,x)=>{const C=De(()=>!!g(x).selected),M=De(()=>!!g(x).hidden),k=De(()=>!!(g(x).draggable||s()&&typeof g(x).draggable>"u")),E=De(()=>!!(g(x).selectable||l()&&typeof g(x).selectable>"u")),A=De(()=>!!(g(x).connectable||a()&&typeof g(x).connectable>"u")),N=De(()=>g(x).deletable??!0),L=De(()=>c().has(g(x).id)),K=De(()=>g(x).type??"default"),z=De(()=>g(x).internals.z??0),V=De(()=>Yw(g(x)));Ix(w,{get node(){return g(x)},get id(){return g(x).id},get data(){return g(x).data},get selected(){return g(C)},get hidden(){return g(M)},get draggable(){return g(k)},get selectable(){return g(E)},get connectable(){return g(A)},get deletable(){return g(N)},get positionX(){return g(x).internals.positionAbsolute.x},get positionY(){return g(x).internals.positionAbsolute.y},get isParent(){return g(L)},get style(){return g(x).style},get class(){return g(x).class},get type(){return g(K)},get sourcePosition(){return g(x).sourcePosition},get targetPosition(){return g(x).targetPosition},get dragging(){return g(x).dragging},get zIndex(){return g(z)},get dragHandle(){return g(x).dragHandle},get initialized(){return g(V)},get width(){return g(x).width},get height(){return g(x).height},get initialWidth(){return g(x).initialWidth},get initialHeight(){return g(x).initialHeight},get measuredWidth(){return g(x).measured.width},get measuredHeight(){return g(x).measured.height},get parentId(){return g(x).parentId},resizeObserver:b,get nodeClickDistance(){return d()},$$events:{nodeclick(D){et.call(this,e,D)},nodemouseenter(D){et.call(this,e,D)},nodemousemove(D){et.call(this,e,D)},nodemouseleave(D){et.call(this,e,D)},nodedrag(D){et.call(this,e,D)},nodedragstart(D){et.call(this,e,D)},nodedragstop(D){et.call(this,e,D)},nodecontextmenu(D){et.call(this,e,D)}}})}),ye(S),O(r,S),X(),o()}var zx=An('<svg><g role="img"><!></g></svg>');function Lx(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(te,"$edgeTypes",t),s=()=>he(le,"$flowId",t),l=()=>he(ee,"$elementsSelectable",t),a=()=>he(j,"$edgeLookup",t),c=Le(void 0,!0),d=Le(void 0,!0),u=Le(void 0,!0),f=Le(void 0,!0),p=Le(void 0,!0);let h=v(e,"id",9),m=v(e,"type",9,"default"),y=v(e,"source",9,""),b=v(e,"target",9,""),S=v(e,"data",25,()=>({})),w=v(e,"style",9,void 0),x=v(e,"zIndex",9,void 0),C=v(e,"animated",9,!1),M=v(e,"selected",9,!1),k=v(e,"selectable",9,void 0),E=v(e,"deletable",9,void 0),A=v(e,"hidden",9,!1),N=v(e,"label",9,void 0),L=v(e,"labelStyle",9,void 0),K=v(e,"markerStart",9,void 0),z=v(e,"markerEnd",9,void 0),V=v(e,"sourceHandle",9,void 0),D=v(e,"targetHandle",9,void 0),$=v(e,"sourceX",9),W=v(e,"sourceY",9),G=v(e,"targetX",9),R=v(e,"targetY",9),J=v(e,"sourcePosition",9),q=v(e,"targetPosition",9),se=v(e,"ariaLabel",9,void 0),ie=v(e,"interactionWidth",9,void 0),Me=v(e,"class",9,"");Ua("svelteflow__edge_id",h());const{edgeLookup:j,edgeTypes:te,flowId:le,elementsSelectable:ee}=qt(),de=Kc(),me=Xw();function ze(Oe){const Ne=a().get(h());Ne&&(me(h()),de("edgeclick",{event:Oe,edge:Ne}))}function Ce(Oe,Ne){const We=a().get(h());We&&de(Ne,{event:Oe,edge:We})}Ve(()=>fe(m()),()=>{I(c,m()||"default")}),Ve(()=>(i(),g(c),Dh),()=>{I(d,i()[g(c)]||Dh)}),Ve(()=>(fe(K()),s()),()=>{I(u,K()?`url('#${Rh(K(),s())}')`:void 0)}),Ve(()=>(fe(z()),s()),()=>{I(f,z()?`url('#${Rh(z(),s())}')`:void 0)}),Ve(()=>(fe(k()),l()),()=>{I(p,k()??l())}),Gn(),vt(!0);var re=B(),ge=P(re);{var Fe=Oe=>{var Ne=zx();let We;var Je=we(Ne);let pt;var Mt=we(Je);const nt=De(()=>E()??!0);Z(Mt,()=>g(d),(Ct,xn)=>{xn(Ct,{get id(){return h()},get source(){return y()},get target(){return b()},get sourceX(){return $()},get sourceY(){return W()},get targetX(){return G()},get targetY(){return R()},get sourcePosition(){return J()},get targetPosition(){return q()},get animated(){return C()},get selected(){return M()},get label(){return N()},get labelStyle(){return L()},get data(){return S()},get style(){return w()},get interactionWidth(){return ie()},get selectable(){return g(p)},get deletable(){return g(nt)},get type(){return g(c)},get sourceHandleId(){return V()},get targetHandleId(){return D()},get markerStart(){return g(u)},get markerEnd(){return g(f)}})}),ye(Je),ye(Ne),Te((Ct,xn)=>{We=fr(Ne,"",We,{"z-index":x()}),pt=gr(Je,0,Ct,null,pt,xn),lt(Je,"data-id",h()),lt(Je,"aria-label",se()===null?void 0:se()?se():`Edge from ${y()} to ${b()}`)},[()=>$r(yr(["svelte-flow__edge",Me()])),()=>({animated:C(),selected:M(),selectable:g(p)})],De),xt("click",Je,ze),xt("contextmenu",Je,Ct=>{Ce(Ct,"edgecontextmenu")}),xt("mouseenter",Je,Ct=>{Ce(Ct,"edgemouseenter")}),xt("mouseleave",Je,Ct=>{Ce(Ct,"edgemouseleave")}),O(Oe,Ne)};Pe(ge,Oe=>{A()||Oe(Fe)})}O(r,re),X(),o()}function Fx(r,e){Y(e,!1);let t=v(e,"onMount",8,void 0),o=v(e,"onDestroy",8,void 0);Rn(()=>{var i;return(i=t())==null||i(),o()}),vt(),X()}var Bx=An("<defs></defs>");function Vx(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(s,"$markers",t),{markers:s}=qt();vt();var l=Bx();Wn(l,5,i,a=>a.id,(a,c)=>{jx(a,ae(()=>g(c)))}),ye(l),O(r,l),X(),o()}var Hx=An('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Wx=An('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Kx=An('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function jx(r,e){Y(e,!1);let t=v(e,"id",8),o=v(e,"type",8),i=v(e,"width",8,12.5),s=v(e,"height",8,12.5),l=v(e,"markerUnits",8,"strokeWidth"),a=v(e,"orient",8,"auto-start-reverse"),c=v(e,"color",8,void 0),d=v(e,"strokeWidth",8,void 0);vt();var u=Kx(),f=we(u);{var p=m=>{var y=Hx();Te(()=>{lt(y,"stroke",c()),lt(y,"stroke-width",d())}),O(m,y)},h=(m,y)=>{{var b=S=>{var w=Wx();Te(()=>{lt(w,"stroke",c()),lt(w,"stroke-width",d()),lt(w,"fill",c())}),O(S,w)};Pe(m,S=>{o()===zh.ArrowClosed&&S(b)},y)}};Pe(f,m=>{o()===zh.Arrow?m(p):m(h,!1)})}ye(u),Te(()=>{lt(u,"id",t()),lt(u,"markerWidth",`${i()}`),lt(u,"markerHeight",`${s()}`),lt(u,"markerUnits",l()),lt(u,"orient",a())}),O(r,u),X()}var $x=U('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function Gx(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(a,"$visibleEdges",t),s=()=>he(u,"$elementsSelectable",t);let l=v(e,"defaultEdgeOptions",8);const{visibleEdges:a,edgesInitialized:c,edges:{setDefaultOptions:d},elementsSelectable:u}=qt();Rn(()=>{l()&&d(l())}),vt();var f=$x(),p=we(f),h=we(p);Vx(h,{}),ye(p);var m=ne(p,2);Wn(m,1,i,S=>S.id,(S,w)=>{const x=De(()=>g(w).selectable??s()),C=De(()=>g(w).type||"default");Lx(S,{get id(){return g(w).id},get source(){return g(w).source},get target(){return g(w).target},get data(){return g(w).data},get style(){return g(w).style},get animated(){return g(w).animated},get selected(){return g(w).selected},get selectable(){return g(x)},get deletable(){return g(w).deletable},get hidden(){return g(w).hidden},get label(){return g(w).label},get labelStyle(){return g(w).labelStyle},get markerStart(){return g(w).markerStart},get markerEnd(){return g(w).markerEnd},get sourceHandle(){return g(w).sourceHandle},get targetHandle(){return g(w).targetHandle},get sourceX(){return g(w).sourceX},get sourceY(){return g(w).sourceY},get targetX(){return g(w).targetX},get targetY(){return g(w).targetY},get sourcePosition(){return g(w).sourcePosition},get targetPosition(){return g(w).targetPosition},get ariaLabel(){return g(w).ariaLabel},get interactionWidth(){return g(w).interactionWidth},get class(){return g(w).class},get type(){return g(C)},get zIndex(){return g(w).zIndex},$$events:{edgeclick(M){et.call(this,e,M)},edgecontextmenu(M){et.call(this,e,M)},edgemouseenter(M){et.call(this,e,M)},edgemouseleave(M){et.call(this,e,M)}}})});var y=ne(m,2);{var b=S=>{Fx(S,{onMount:()=>{jt(c,!0)},onDestroy:()=>{jt(c,!1)}})};Pe(y,S=>{i().length>0&&S(b)})}ye(f),O(r,f),X(),o()}var Ux=U('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function ug(r,e){let t=v(e,"x",8,0),o=v(e,"y",8,0),i=v(e,"width",8,0),s=v(e,"height",8,0),l=v(e,"isVisible",8,!0);var a=B(),c=P(a);{var d=u=>{var f=Ux();let p;Te(()=>p=fr(f,"",p,{width:typeof i()=="string"?i():`${i()}px`,height:typeof s()=="string"?s():`${s()}px`,transform:`translate(${t()}px, ${o()}px)`})),O(u,f)};Pe(c,u=>{l()&&u(d)})}O(r,a)}function qx(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(l,"$selectionRect",t),s=()=>he(a,"$selectionRectMode",t),{selectionRect:l,selectionRectMode:a}=qt();vt();const c=De(()=>!!(i()&&s()==="user")),d=De(()=>{var h;return(h=i())==null?void 0:h.width}),u=De(()=>{var h;return(h=i())==null?void 0:h.height}),f=De(()=>{var h;return(h=i())==null?void 0:h.x}),p=De(()=>{var h;return(h=i())==null?void 0:h.y});ug(r,{get isVisible(){return g(c)},get width(){return g(d)},get height(){return g(u)},get x(){return g(f)},get y(){return g(p)}}),X(),o()}var Jx=U('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function Yx(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(c,"$selectionRectMode",t),s=()=>he(u,"$nodeLookup",t),l=()=>he(d,"$nodes",t),a=qt(),{selectionRectMode:c,nodes:d,nodeLookup:u}=a,f=Kc();let p=Le(null);function h(w){const x=l().filter(C=>C.selected);f("selectioncontextmenu",{nodes:x,event:w})}function m(w){const x=l().filter(C=>C.selected);f("selectionclick",{nodes:x,event:w})}Ve(()=>(i(),s(),l()),()=>{i()==="nodes"&&(I(p,Zw(s(),{filter:w=>!!w.selected})),l())}),Gn(),vt();var y=B(),b=P(y);{var S=w=>{var x=Jx(),C=we(x);ug(C,{width:"100%",height:"100%",x:0,y:0}),ye(x),fn(x,(M,k)=>Ko==null?void 0:Ko(M,k),()=>({disabled:!1,store:a,onDrag:(M,k,E,A)=>{f("nodedrag",{event:M,targetNode:null,nodes:A})},onDragStart:(M,k,E,A)=>{f("nodedragstart",{event:M,targetNode:null,nodes:A})},onDragStop:(M,k,E,A)=>{f("nodedragstop",{event:M,targetNode:null,nodes:A})}})),ir(()=>xt("contextmenu",x,h)),ir(()=>xt("click",x,m)),ir(()=>xt("keyup",x,()=>{})),Te(()=>fr(x,`width: ${g(p).width??""}px; height: ${g(p).height??""}px; transform: translate(${g(p).x??""}px, ${g(p).y??""}px)`)),O(w,x)};Pe(b,w=>{i()==="nodes"&&g(p)&&Lh(g(p).x)&&Lh(g(p).y)&&w(S)})}O(r,y),X(),o()}function it(r,e){let{enabled:t=!0,trigger:o,type:i="keydown"}=e;function s(l){const a=Array.isArray(o)?o:[o],c={alt:l.altKey,ctrl:l.ctrlKey,shift:l.shiftKey,meta:l.metaKey};for(const d of a){const u={modifier:[],preventDefault:!1,enabled:!0,...d},{modifier:f,key:p,callback:h,preventDefault:m,enabled:y}=u;if(y){if(f.length&&!(Array.isArray(f)?f:[f]).map(w=>typeof w=="string"?[w]:w).some(w=>w.every(x=>c[x])))continue;if(l.key===p){m&&l.preventDefault();const b={node:r,trigger:u,originalEvent:l};r.dispatchEvent(new CustomEvent("shortcut",{detail:b})),h==null||h(b)}}}}return t&&r.addEventListener(i,s),{update:l=>{const{enabled:a=!0,type:c="keydown"}=l;t&&(!a||i!==c)?r.removeEventListener(i,s):!t&&a&&r.addEventListener(c,s),t=a,i=c,o=l.trigger},destroy:()=>{r.removeEventListener(i,s)}}}function Xx(r,e){Y(e,!1);let t=v(e,"selectionKey",8,"Shift"),o=v(e,"multiSelectionKey",24,()=>Fh()?"Meta":"Control"),i=v(e,"deleteKey",8,"Backspace"),s=v(e,"panActivationKey",8," "),l=v(e,"zoomActivationKey",24,()=>Fh()?"Meta":"Control");const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:d,panActivationKeyPressed:u,zoomActivationKeyPressed:f,selectionRect:p}=qt();function h(w){return w!==null&&typeof w=="object"}function m(w){return h(w)?w.modifier||[]:[]}function y(w){return w==null?"":h(w)?w.key:w}function b(w,x){return(Array.isArray(w)?w:[w]).map(M=>{const k=y(M);return{key:k,modifier:m(M),enabled:k!==null,callback:x}})}function S(){p.set(null),a.set(!1),c.set(!1),d.set(!1),u.set(!1),f.set(!1)}vt(),xt("blur",un,S),xt("contextmenu",un,S),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(t(),()=>a.set(!0)),type:"keydown"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(t(),()=>a.set(!1)),type:"keyup"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(o(),()=>c.set(!0)),type:"keydown"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(o(),()=>c.set(!1)),type:"keyup"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(i(),w=>{!(w.originalEvent.ctrlKey||w.originalEvent.metaKey||w.originalEvent.shiftKey)&&!Qw(w.originalEvent)&&d.set(!0)}),type:"keydown"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(i(),()=>d.set(!1)),type:"keyup"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(s(),()=>u.set(!0)),type:"keydown"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(s(),()=>u.set(!1)),type:"keyup"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(l(),()=>f.set(!0)),type:"keydown"})),fn(un,(w,x)=>it==null?void 0:it(w,x),()=>({trigger:b(l(),()=>f.set(!1)),type:"keyup"})),X()}var Zx=An('<path fill="none" class="svelte-flow__connection-path"></path>'),Qx=An('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function e0(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(h,"$connection",t),s=()=>he(m,"$connectionLineType",t),l=()=>he(f,"$width",t),a=()=>he(p,"$height",t);let c=v(e,"containerStyle",8,""),d=v(e,"style",8,""),u=v(e,"isCustomComponent",8,!1);const{width:f,height:p,connection:h,connectionLineType:m}=qt();let y=Le(null);Ve(()=>(i(),fe(u()),s(),g(y),Bh),()=>{if(i().inProgress&&!u()){const{from:x,to:C,fromPosition:M,toPosition:k}=i(),E={sourceX:x.x,sourceY:x.y,sourcePosition:M,targetX:C.x,targetY:C.y,targetPosition:k};switch(s()){case gd.Bezier:(A=>I(y,A[0]))(ex(E));break;case gd.Step:(A=>I(y,A[0]))(Vh({...E,borderRadius:0}));break;case gd.SmoothStep:(A=>I(y,A[0]))(Vh(E));break;default:(A=>I(y,A[0]))(Bh(E))}}}),Gn(),vt();var b=B(),S=P(b);{var w=x=>{var C=Qx(),M=we(C),k=we(M);$e(k,e,"connectionLine",{});var E=ne(k);{var A=N=>{var L=Zx();Te(()=>{lt(L,"d",g(y)),fr(L,d())}),O(N,L)};Pe(E,N=>{u()||N(A)})}ye(M),ye(C),Te(N=>{lt(C,"width",l()),lt(C,"height",a()),fr(C,c()),gr(M,0,N)},[()=>$r(yr(["svelte-flow__connection",tx(i().isValid)]))],De),O(x,C)};Pe(S,x=>{i().inProgress&&x(w)})}O(r,b),X(),o()}var t0=U("<div><!></div>");function lu(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]),o=qe(t,["position","style","class"]);Y(e,!1);const[i,s]=ft(),l=()=>he(f,"$selectionRectMode",i),a=Le();let c=v(e,"position",8,"top-right"),d=v(e,"style",8,void 0),u=v(e,"class",8,void 0);const{selectionRectMode:f}=qt();Ve(()=>fe(c()),()=>{I(a,`${c()}`.split("-"))}),Gn(),vt();var p=t0();let h;var m=we(p);$e(m,e,"default",{}),ye(p),Te(y=>h=He(p,h,{class:y,style:d(),...o,[nx]:{"pointer-events":l()?"none":""}}),[()=>yr(["svelte-flow__panel",u(),...g(a)])],De),O(r,p),X(),s()}var n0=U('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function r0(r,e){Y(e,!1);let t=v(e,"proOptions",8,void 0),o=v(e,"position",8,"bottom-right");vt();var i=B(),s=P(i);{var l=a=>{lu(a,{get position(){return o()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(c,d)=>{var u=n0();O(c,u)},$$slots:{default:!0}})};Pe(s,a=>{var c;(c=t())!=null&&c.hideAttribution||a(l)})}O(r,i),X()}function qh(r,{nodeTypes:e,edgeTypes:t,minZoom:o,maxZoom:i,translateExtent:s,paneClickDistance:l}){e!==void 0&&r.setNodeTypes(e),t!==void 0&&r.setEdgeTypes(t),o!==void 0&&r.setMinZoom(o),i!==void 0&&r.setMaxZoom(i),s!==void 0&&r.setTranslateExtent(s),l!==void 0&&r.setPaneClickDistance(l)}const o0=r=>Object.keys(r);function Jh(r,e){o0(e).forEach(t=>{const o=e[t];o!==void 0&&r[t].set(o)})}function i0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function s0(r="light"){return sg("light",t=>{if(r!=="system"){t(r);return}const o=i0(),i=()=>t(o!=null&&o.matches?"dark":"light");return t(o!=null&&o.matches?"dark":"light"),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}})}var l0=U('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),a0=U("<!> <!>",1),c0=U("<div><!> <!> <!> <!></div>");function d0(r,e){const t=rx(e),o=qe(e,["children","$$slots","$$events","$$legacy"]),i=qe(o,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);Y(e,!1);const[s,l]=ft(),a=()=>he(x(),"$viewport",s),c=()=>he(Zb,"$initialized",s),d=()=>he(g(u),"$colorModeClass",s),u=Le();let f=v(e,"id",8,"1"),p=v(e,"nodes",8),h=v(e,"edges",8),m=v(e,"fitView",8,void 0),y=v(e,"fitViewOptions",8,void 0),b=v(e,"minZoom",8,void 0),S=v(e,"maxZoom",8,void 0),w=v(e,"initialViewport",8,void 0),x=v(e,"viewport",8,void 0),C=v(e,"nodeTypes",8,void 0),M=v(e,"edgeTypes",8,void 0),k=v(e,"selectionKey",8,void 0),E=v(e,"selectionMode",8,void 0),A=v(e,"panActivationKey",8,void 0),N=v(e,"multiSelectionKey",8,void 0),L=v(e,"zoomActivationKey",8,void 0),K=v(e,"nodesDraggable",8,void 0),z=v(e,"nodesConnectable",8,void 0),V=v(e,"nodeDragThreshold",8,void 0),D=v(e,"elementsSelectable",8,void 0),$=v(e,"snapGrid",8,void 0),W=v(e,"deleteKey",8,void 0),G=v(e,"connectionRadius",8,void 0),R=v(e,"connectionLineType",8,void 0),J=v(e,"connectionMode",24,()=>ix.Strict),q=v(e,"connectionLineStyle",8,""),se=v(e,"connectionLineContainerStyle",8,""),ie=v(e,"onMoveStart",8,void 0),Me=v(e,"onMove",8,void 0),j=v(e,"onMoveEnd",8,void 0),te=v(e,"isValidConnection",8,void 0),le=v(e,"translateExtent",8,void 0),ee=v(e,"nodeExtent",8,void 0),de=v(e,"onlyRenderVisibleElements",8,void 0),me=v(e,"panOnScrollMode",24,()=>ru.Free),ze=v(e,"preventScrolling",8,!0),Ce=v(e,"zoomOnScroll",8,!0),re=v(e,"zoomOnDoubleClick",8,!0),ge=v(e,"zoomOnPinch",8,!0),Fe=v(e,"panOnScroll",8,!1),Oe=v(e,"panOnDrag",8,!0),Ne=v(e,"selectionOnDrag",8,void 0),We=v(e,"autoPanOnConnect",8,!0),Je=v(e,"autoPanOnNodeDrag",8,!0),pt=v(e,"onerror",8,void 0),Mt=v(e,"ondelete",8,void 0),nt=v(e,"onedgecreate",8,void 0),Ct=v(e,"attributionPosition",8,void 0),xn=v(e,"proOptions",8,void 0),Jr=v(e,"defaultEdgeOptions",8,void 0),Pt=v(e,"width",8,void 0),yt=v(e,"height",8,void 0),Nt=v(e,"colorMode",8,"light"),Jt=v(e,"onconnect",8,void 0),St=v(e,"onconnectstart",8,void 0),ln=v(e,"onconnectend",8,void 0),Yt=v(e,"onbeforedelete",8,void 0),Sn=v(e,"oninit",8,void 0),ki=v(e,"nodeOrigin",8,void 0),ct=v(e,"paneClickDistance",8,0),zn=v(e,"nodeClickDistance",8,0),vr=v(e,"defaultMarkerColor",8,"#b1b1b7"),Yr=v(e,"style",8,void 0),Yb=v(e,"class",8,void 0),fd=Le(),Mi=Le(),Ci=Le();const Xb=a()||w(),en=lg(sx)?qt():ox({nodes:Ee(p()),edges:Ee(h()),width:Pt(),height:yt(),fitView:m(),nodeOrigin:ki(),nodeExtent:ee()});Rn(()=>(en.width.set(g(Mi)),en.height.set(g(Ci)),en.domNode.set(g(fd)),en.syncNodeStores(p()),en.syncEdgeStores(h()),en.syncViewport(x()),m()!==void 0&&en.fitViewQueued.set(m()),y()&&en.fitViewOptions.set(y()),qh(en,{nodeTypes:C(),edgeTypes:M(),minZoom:b(),maxZoom:S(),translateExtent:le(),paneClickDistance:ct()}),()=>{en.reset()}));const{initialized:Zb}=en;let hd=Le(!1);Ve(()=>(g(Mi),g(Ci)),()=>{g(Mi)!==void 0&&g(Ci)!==void 0&&(en.width.set(g(Mi)),en.height.set(g(Ci)))}),Ve(()=>(g(hd),c(),fe(Sn())),()=>{var zt;!g(hd)&&c()&&((zt=Sn())==null||zt(),I(hd,!0))}),Ve(()=>(fe(f()),fe(R()),fe(G()),fe(E()),fe($()),fe(vr()),fe(K()),fe(z()),fe(D()),fe(de()),fe(te()),fe(We()),fe(Je()),fe(pt()),fe(Mt()),fe(nt()),fe(J()),fe(V()),fe(Jt()),fe(St()),fe(ln()),fe(Yt()),fe(ki()),Jh),()=>{const zt={flowId:f(),connectionLineType:R(),connectionRadius:G(),selectionMode:E(),snapGrid:$(),defaultMarkerColor:vr(),nodesDraggable:K(),nodesConnectable:z(),elementsSelectable:D(),onlyRenderVisibleElements:de(),isValidConnection:te(),autoPanOnConnect:We(),autoPanOnNodeDrag:Je(),onerror:pt(),ondelete:Mt(),onedgecreate:nt(),connectionMode:J(),nodeDragThreshold:V(),onconnect:Jt(),onconnectstart:St(),onconnectend:ln(),onbeforedelete:Yt(),nodeOrigin:ki()};Jh(en,zt)}),Ve(()=>(fe(C()),fe(M()),fe(b()),fe(S()),fe(le()),fe(ct())),()=>{qh(en,{nodeTypes:C(),edgeTypes:M(),minZoom:b(),maxZoom:S(),translateExtent:le(),paneClickDistance:ct()})}),Ve(()=>fe(Nt()),()=>{Ww(I(u,s0(Nt())),"$colorModeClass",s)}),Gn(),vt();var Jn=c0();let gh;var yh=we(Jn);Xx(yh,{get selectionKey(){return k()},get deleteKey(){return W()},get panActivationKey(){return A()},get multiSelectionKey(){return N()},get zoomActivationKey(){return L()}});var vh=ne(yh,2);const Qb=De(()=>me()===void 0?ru.Free:me()),ew=De(()=>ze()===void 0?!0:ze()),tw=De(()=>Ce()===void 0?!0:Ce()),nw=De(()=>re()===void 0?!0:re()),rw=De(()=>ge()===void 0?!0:ge()),ow=De(()=>Fe()===void 0?!1:Fe()),iw=De(()=>Oe()===void 0?!0:Oe()),sw=De(()=>ct()===void 0?0:ct());Ox(vh,{initialViewport:Xb,get onMoveStart(){return ie()},get onMove(){return Me()},get onMoveEnd(){return j()},get panOnScrollMode(){return g(Qb)},get preventScrolling(){return g(ew)},get zoomOnScroll(){return g(tw)},get zoomOnDoubleClick(){return g(nw)},get zoomOnPinch(){return g(rw)},get panOnScroll(){return g(ow)},get panOnDrag(){return g(iw)},get paneClickDistance(){return g(sw)},children:(zt,S2)=>{const aw=De(()=>Oe()===void 0?!0:Oe());Ax(zt,{get panOnDrag(){return g(aw)},get selectionOnDrag(){return Ne()},$$events:{paneclick(Oi){et.call(this,e,Oi)},panecontextmenu(Oi){et.call(this,e,Oi)}},children:(Oi,k2)=>{var wh=a0(),xh=P(wh);Px(xh,{children:(dw,M2)=>{var Sh=l0(),kh=P(Sh);Gx(kh,{get defaultEdgeOptions(){return Jr()},$$events:{edgeclick(Ze){et.call(this,e,Ze)},edgecontextmenu(Ze){et.call(this,e,Ze)},edgemouseenter(Ze){et.call(this,e,Ze)},edgemouseleave(Ze){et.call(this,e,Ze)}}});var Mh=ne(kh,2);e0(Mh,{get containerStyle(){return se()},get style(){return q()},isCustomComponent:t.connectionLine,$$slots:{connectionLine:(Ze,C2)=>{var Oh=B(),fw=P(Oh);$e(fw,e,"connectionLine",{}),O(Ze,Oh)}}});var Ch=ne(Mh,6);Rx(Ch,{get nodeClickDistance(){return zn()},$$events:{nodeclick(Ze){et.call(this,e,Ze)},nodemouseenter(Ze){et.call(this,e,Ze)},nodemousemove(Ze){et.call(this,e,Ze)},nodemouseleave(Ze){et.call(this,e,Ze)},nodedragstart(Ze){et.call(this,e,Ze)},nodedrag(Ze){et.call(this,e,Ze)},nodedragstop(Ze){et.call(this,e,Ze)},nodecontextmenu(Ze){et.call(this,e,Ze)}}});var uw=ne(Ch,2);Yx(uw,{$$events:{selectionclick(Ze){et.call(this,e,Ze)},selectioncontextmenu(Ze){et.call(this,e,Ze)},nodedragstart(Ze){et.call(this,e,Ze)},nodedrag(Ze){et.call(this,e,Ze)},nodedragstop(Ze){et.call(this,e,Ze)}}}),O(dw,Sh)},$$slots:{default:!0}});var cw=ne(xh,2);qx(cw,{}),O(Oi,wh)},$$slots:{default:!0}})},$$slots:{default:!0}});var bh=ne(vh,2);r0(bh,{get proOptions(){return xn()},get position(){return Ct()}});var lw=ne(bh,2);$e(lw,e,"default",{}),ye(Jn),nn(Jn,zt=>I(fd,zt),()=>g(fd)),Te(zt=>gh=He(Jn,gh,{style:Yr(),class:zt,"data-testid":"svelte-flow__wrapper",...i,role:"application"},"svelte-18e9ir1"),[()=>yr(["svelte-flow",Yb(),d()])],De),$h(Jn,"clientWidth",zt=>I(Mi,zt)),$h(Jn,"clientHeight",zt=>I(Ci,zt)),xt("dragover",Jn,function(zt){et.call(this,e,zt)}),xt("drop",Jn,function(zt){et.call(this,e,zt)}),O(r,Jn),X(),l()}var lr;(function(r){r.Lines="lines",r.Dots="dots",r.Cross="cross"})(lr||(lr={}));var u0=An("<circle></circle>");function f0(r,e){Y(e,!1);let t=v(e,"radius",8,5),o=v(e,"class",8,"");vt();var i=u0();Te(s=>{lt(i,"cx",t()),lt(i,"cy",t()),lt(i,"r",t()),gr(i,0,s)},[()=>$r(yr(["svelte-flow__background-pattern","dots",o()]))],De),O(r,i),X()}var h0=An("<path></path>");function p0(r,e){Y(e,!1);let t=v(e,"lineWidth",8,1),o=v(e,"dimensions",8),i=v(e,"variant",8,void 0),s=v(e,"class",8,"");vt();var l=h0();Te(a=>{lt(l,"stroke-width",t()),lt(l,"d",`M${o()[0]/2} 0 V${o()[1]} M0 ${o()[1]/2} H${o()[0]}`),gr(l,0,a)},[()=>$r(yr(["svelte-flow__background-pattern",i(),s()]))],De),O(r,l),X()}const m0={[lr.Dots]:1,[lr.Lines]:1,[lr.Cross]:6};var g0=An('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function y0(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(M,"$flowId",t),s=()=>he(C,"$viewport",t),l=Le(),a=Le(),c=Le(),d=Le(),u=Le();let f=v(e,"id",8,void 0),p=v(e,"variant",24,()=>lr.Dots),h=v(e,"gap",8,20),m=v(e,"size",8,1),y=v(e,"lineWidth",8,1),b=v(e,"bgColor",8,void 0),S=v(e,"patternColor",8,void 0),w=v(e,"patternClass",8,void 0),x=v(e,"class",8,"");const{viewport:C,flowId:M}=qt(),k=m()||m0[p()],E=p()===lr.Dots,A=p()===lr.Cross,N=Array.isArray(h())?h():[h(),h()];Ve(()=>(i(),fe(f())),()=>{I(l,`background-pattern-${i()}-${f()?f():""}`)}),Ve(()=>s(),()=>{I(a,[N[0]*s().zoom||1,N[1]*s().zoom||1])}),Ve(()=>s(),()=>{I(c,k*s().zoom)}),Ve(()=>(g(c),g(a)),()=>{I(d,A?[g(c),g(c)]:g(a))}),Ve(()=>(g(c),g(d)),()=>{I(u,E?[g(c)/2,g(c)/2]:[g(d)[0]/2,g(d)[1]/2])}),Gn(),vt();var L=g0();let K;var z=we(L),V=we(z);{var D=G=>{const R=De(()=>g(c)/2);f0(G,{get radius(){return g(R)},get class(){return w()}})},$=G=>{p0(G,{get dimensions(){return g(d)},get variant(){return p()},get lineWidth(){return y()},get class(){return w()}})};Pe(V,G=>{E?G(D):G($,!1)})}ye(z);var W=ne(z);ye(L),Te(G=>{gr(L,0,G,"svelte-1r7pe8d"),K=fr(L,"",K,{"--xy-background-color-props":b(),"--xy-background-pattern-color-props":S()}),lt(z,"id",g(l)),lt(z,"x",s().x%g(a)[0]),lt(z,"y",s().y%g(a)[1]),lt(z,"width",g(a)[0]),lt(z,"height",g(a)[1]),lt(z,"patternTransform",`translate(-${g(u)[0]},-${g(u)[1]})`),lt(W,"fill",`url(#${g(l)})`)},[()=>$r(yr(["svelte-flow__background",x()]))],De),O(r,L),X(),o()}const Yh=r=>lx(r);function Mo(){const{zoomIn:r,zoomOut:e,fitView:t,onbeforedelete:o,snapGrid:i,viewport:s,width:l,height:a,minZoom:c,maxZoom:d,panZoom:u,nodes:f,edges:p,domNode:h,nodeLookup:m,nodeOrigin:y,edgeLookup:b,connectionLookup:S}=qt(),w=M=>{var L,K;const k=Ee(m),E=Yh(M)?M:k.get(M.id),A=E.parentId?hx(E.position,E.measured,E.parentId,k,Ee(y)):E.position,N={...E,position:A,width:((L=E.measured)==null?void 0:L.width)??E.width,height:((K=E.measured)==null?void 0:K.height)??E.height};return Kh(N)},x=(M,k,E={replace:!1})=>{var L;const A=(L=Ee(m).get(M))==null?void 0:L.internals.userNode;if(!A)return;const N=typeof k=="function"?k(A):k;E.replace?f.update(K=>K.map(z=>z.id===M?Yh(N)?N:{...z,...N}:z)):(Object.assign(A,N),f.update(K=>K))},C=M=>Ee(m).get(M);return{zoomIn:r,zoomOut:e,getInternalNode:C,getNode:M=>{var k;return(k=C(M))==null?void 0:k.internals.userNode},getNodes:M=>M===void 0?Ee(f):Xh(Ee(m),M),getEdge:M=>Ee(b).get(M),getEdges:M=>M===void 0?Ee(p):Xh(Ee(b),M),setZoom:(M,k)=>{const E=Ee(u);return E?E.scaleTo(M,{duration:k==null?void 0:k.duration}):Promise.resolve(!1)},getZoom:()=>Ee(s).zoom,setViewport:async(M,k)=>{const E=Ee(s),A=Ee(u);return A?(await A.setViewport({x:M.x??E.x,y:M.y??E.y,zoom:M.zoom??E.zoom},{duration:k==null?void 0:k.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Ee(s),setCenter:async(M,k,E)=>{const A=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:Ee(d),N=Ee(u);return N?(await N.setViewport({x:Ee(l)/2-M*A,y:Ee(a)/2-k*A,zoom:A},{duration:E==null?void 0:E.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(M,k)=>{const E=Ee(u);if(!E)return Promise.resolve(!1);const A=fx(M,Ee(l),Ee(a),Ee(c),Ee(d),(k==null?void 0:k.padding)??.1);return await E.setViewport(A,{duration:k==null?void 0:k.duration}),Promise.resolve(!0)},getIntersectingNodes:(M,k=!0,E)=>{const A=Hh(M),N=A?M:w(M);return N?(E||Ee(f)).filter(L=>{const K=Ee(m).get(L.id);if(!K||!A&&L.id===M.id)return!1;const z=Kh(K),V=Wh(z,N);return k&&V>0||V>=N.width*N.height}):[]},isNodeIntersecting:(M,k,E=!0)=>{const N=Hh(M)?M:w(M);if(!N)return!1;const L=Wh(N,k);return E&&L>0||L>=N.width*N.height},deleteElements:async({nodes:M=[],edges:k=[]})=>{const{nodes:E,edges:A}=await ux({nodesToRemove:M,edgesToRemove:k,nodes:Ee(f),edges:Ee(p),onBeforeDelete:Ee(o)});return E&&f.update(N=>N.filter(L=>!E.some(({id:K})=>K===L.id))),A&&p.update(N=>N.filter(L=>!A.some(({id:K})=>K===L.id))),{deletedNodes:E,deletedEdges:A}},screenToFlowPosition:(M,k={snapToGrid:!0})=>{const E=Ee(h);if(!E)return M;const A=k.snapToGrid?Ee(i):!1,{x:N,y:L,zoom:K}=Ee(s),{x:z,y:V}=E.getBoundingClientRect(),D={x:M.x-z,y:M.y-V};return dx(D,[N,L,K],A!==null,A||[1,1])},flowToScreenPosition:M=>{const k=Ee(h);if(!k)return M;const{x:E,y:A,zoom:N}=Ee(s),{x:L,y:K}=k.getBoundingClientRect(),z=cx(M,[E,A,N]);return{x:z.x+L,y:z.y+K}},toObject:()=>({nodes:Ee(f).map(M=>({...M,position:{...M.position},data:{...M.data}})),edges:Ee(p).map(M=>({...M})),viewport:{...Ee(s)}}),updateNode:x,updateNodeData:(M,k,E)=>{var L;const A=(L=Ee(m).get(M))==null?void 0:L.internals.userNode;if(!A)return;const N=typeof k=="function"?k(A):k;A.data=E!=null&&E.replace?N:{...A.data,...N},f.update(K=>K)},getNodesBounds:M=>{const k=Ee(m),E=Ee(y);return ax(M,{nodeLookup:k,nodeOrigin:E})},getHandleConnections:({type:M,id:k,nodeId:E})=>{var A;return Array.from(((A=Ee(S).get(`${E}-${M}-${k??null}`))==null?void 0:A.values())??[])},viewport:s}}function Xh(r,e){var o;const t=[];for(const i of e){const s=r.get(i);if(s){const l="internals"in s?(o=s.internals)==null?void 0:o.userNode:s;t.push(l)}}return t}var v0=U("<div><!></div>");function Zh(r,e){Y(e,!1);const[t,o]=ft(),i=()=>he(q,"$nodeLookup",t),s=()=>he(ie,"$viewport",t),l=()=>he(se,"$snapGrid",t),a=()=>he(j,"$nodeOrigin",t),c=()=>he(te,"$domNode",t),d=()=>he(Me,"$nodes",t),u=Le(),f=Le(),p=Le(),h=Le(),m=Le(),y=Le(),b=Le(),S=Le(),w=Le(),x=Le(),C=Le();let M=v(e,"nodeId",8,void 0),k=v(e,"position",8,void 0),E=v(e,"variant",24,()=>_o.Handle),A=v(e,"color",8,void 0),N=v(e,"minWidth",8,10),L=v(e,"minHeight",8,10),K=v(e,"maxWidth",24,()=>Number.MAX_VALUE),z=v(e,"maxHeight",24,()=>Number.MAX_VALUE),V=v(e,"keepAspectRatio",8,!1),D=v(e,"shouldResize",8,void 0),$=v(e,"onResizeStart",8,void 0),W=v(e,"onResize",8,void 0),G=v(e,"onResizeEnd",8,void 0),R=v(e,"style",8,""),J=v(e,"class",8,"");const{nodeLookup:q,snapGrid:se,viewport:ie,nodes:Me,nodeOrigin:j,domNode:te}=qt(),le=nu("svelteflow__node_id");let ee=Le(),de=Le(null);Rn(()=>(g(ee)&&I(de,px({domNode:g(ee),nodeId:g(m),getStoreItems:()=>({nodeLookup:i(),transform:[s().x,s().y,s().zoom],snapGrid:l()??void 0,snapToGrid:!!l(),nodeOrigin:a(),paneDomNode:c()}),onChange:(Ce,re)=>{var Fe,Oe;const ge=(Fe=i().get(g(m)))==null?void 0:Fe.internals.userNode;if(ge){Ce.x!==void 0&&Ce.y!==void 0&&(ge.position={x:Ce.x,y:Ce.y}),Ce.width!==void 0&&Ce.height!==void 0&&(ge.width=Ce.width,ge.height=Ce.height);for(const Ne of re){const We=(Oe=i().get(Ne.id))==null?void 0:Oe.internals.userNode;We&&(We.position=Ne.position)}jt(Me,d())}}})),()=>{var Ce;(Ce=g(de))==null||Ce.destroy()})),Ve(()=>fe(N()),()=>{I(u,N()??10)}),Ve(()=>fe(L()),()=>{I(f,L()??10)}),Ve(()=>fe(K()),()=>{I(p,K()??Number.MAX_VALUE)}),Ve(()=>fe(z()),()=>{I(h,z()??Number.MAX_VALUE)}),Ve(()=>fe(M()),()=>{I(m,typeof M()=="string"?M():le)}),Ve(()=>(fe(E()),_o),()=>{I(y,E()===_o.Line?"right":"bottom-right")}),Ve(()=>(fe(k()),g(y)),()=>{I(b,k()??g(y))}),Ve(()=>g(b),()=>{I(S,g(b).split("-"))}),Ve(()=>(fe(E()),_o),()=>{I(w,E()===_o.Line?"border-color":"background-color")}),Ve(()=>fe(R()),()=>{I(x,R()??"")}),Ve(()=>(fe(A()),g(x),g(w)),()=>{I(C,A()?`${g(x)} ${g(w)}: ${A()};`:g(x))}),Ve(()=>(g(de),g(b),g(u),g(f),g(p),g(h),fe(V()),fe($()),fe(W()),fe(G()),fe(D())),()=>{var Ce;(Ce=g(de))==null||Ce.update({controlPosition:g(b),boundaries:{minWidth:g(u),minHeight:g(f),maxWidth:g(p),maxHeight:g(h)},keepAspectRatio:!!V(),onResizeStart:$(),onResize:W(),onResizeEnd:G(),shouldResize:D()})}),Gn(),vt();var me=v0(),ze=we(me);$e(ze,e,"default",{}),ye(me),nn(me,Ce=>I(ee,Ce),()=>g(ee)),Te(Ce=>{gr(me,1,Ce),fr(me,g(C))},[()=>$r(yr(["svelte-flow__resize-control","nodrag",...g(S),E(),J()]))],De),O(r,me),X(),o()}var b0=U("<!> <!>",1);function ql(r,e){Y(e,!1);let t=v(e,"nodeId",8,void 0),o=v(e,"isVisible",8,!0),i=v(e,"handleClass",8,void 0),s=v(e,"handleStyle",8,void 0),l=v(e,"lineClass",8,void 0),a=v(e,"lineStyle",8,void 0),c=v(e,"color",8,void 0),d=v(e,"minWidth",8,10),u=v(e,"minHeight",8,10),f=v(e,"maxWidth",24,()=>Number.MAX_VALUE),p=v(e,"maxHeight",24,()=>Number.MAX_VALUE),h=v(e,"keepAspectRatio",8,!1),m=v(e,"shouldResize",8,void 0),y=v(e,"onResizeStart",8,void 0),b=v(e,"onResize",8,void 0),S=v(e,"onResizeEnd",8,void 0),w=d()||10,x=u()||10,C=f()||Number.MAX_VALUE,M=p()||Number.MAX_VALUE;vt();var k=B(),E=P(k);{var A=N=>{var L=b0(),K=P(L);Wn(K,1,()=>mx,V=>V,(V,D)=>{Zh(V,{get class(){return l()},get style(){return a()},get nodeId(){return t()},get position(){return g(D)},get variant(){return _o.Line},get color(){return c()},minWidth:w,minHeight:x,maxWidth:C,maxHeight:M,get onResizeStart(){return y()},get keepAspectRatio(){return h()},get shouldResize(){return m()},get onResize(){return b()},get onResizeEnd(){return S()}})});var z=ne(K,2);Wn(z,1,()=>gx,V=>V,(V,D)=>{Zh(V,{get class(){return i()},get style(){return s()},get nodeId(){return t()},get position(){return g(D)},get color(){return c()},minWidth:w,minHeight:x,maxWidth:C,maxHeight:M,get onResizeStart(){return y()},get keepAspectRatio(){return h()},get shouldResize(){return m()},get onResize(){return b()},get onResizeEnd(){return S()}})}),O(N,L)};Pe(E,N=>{o()&&N(A)})}O(r,k),X()}function w0(r){return typeof r=="function"}function x0(r){return r!==null&&typeof r=="object"}const S0=["string","number","bigint","boolean"];function au(r){return r==null||S0.includes(typeof r)?!0:Array.isArray(r)?r.every(e=>au(e)):typeof r=="object"?Object.getPrototypeOf(r)===Object.prototype:!1}const qi=Symbol("box"),bf=Symbol("is-writable");function k0(r){return x0(r)&&qi in r}function M0(r){return _.isBox(r)&&bf in r}function _(r){let e=ue(Bt(r));return{[qi]:!0,[bf]:!0,get current(){return g(e)},set current(t){I(e,t,!0)}}}function C0(r,e){const t=F(r);return e?{[qi]:!0,[bf]:!0,get current(){return g(t)},set current(o){e(o)}}:{[qi]:!0,get current(){return r()}}}function O0(r){return _.isBox(r)?r:w0(r)?_.with(r):_(r)}function T0(r){return Object.entries(r).reduce((e,[t,o])=>_.isBox(o)?(_.isWritableBox(o)?Object.defineProperty(e,t,{get(){return o.current},set(i){o.current=i}}):Object.defineProperty(e,t,{get(){return o.current}}),e):Object.assign(e,{[t]:o}),{})}function A0(r){return _.isWritableBox(r)?{[qi]:!0,get current(){return r.current}}:r}_.from=O0;_.with=C0;_.flatten=T0;_.readonly=A0;_.isBox=k0;_.isWritableBox=M0;function fg(...r){return function(e){var t;for(const o of r)if(o){if(e.defaultPrevented)return;typeof o=="function"?o.call(this,e):(t=o.current)==null||t.call(this,e)}}}function E0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var To={},wd,Qh;function P0(){if(Qh)return wd;Qh=1;var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,d="/",u="*",f="",p="comment",h="declaration";wd=function(y,b){if(typeof y!="string")throw new TypeError("First argument must be a string");if(!y)return[];b=b||{};var S=1,w=1;function x(V){var D=V.match(e);D&&(S+=D.length);var $=V.lastIndexOf(c);w=~$?V.length-$:w+V.length}function C(){var V={line:S,column:w};return function(D){return D.position=new M(V),A(),D}}function M(V){this.start=V,this.end={line:S,column:w},this.source=b.source}M.prototype.content=y;function k(V){var D=new Error(b.source+":"+S+":"+w+": "+V);if(D.reason=V,D.filename=b.source,D.line=S,D.column=w,D.source=y,!b.silent)throw D}function E(V){var D=V.exec(y);if(D){var $=D[0];return x($),y=y.slice($.length),D}}function A(){E(t)}function N(V){var D;for(V=V||[];D=L();)D!==!1&&V.push(D);return V}function L(){var V=C();if(!(d!=y.charAt(0)||u!=y.charAt(1))){for(var D=2;f!=y.charAt(D)&&(u!=y.charAt(D)||d!=y.charAt(D+1));)++D;if(D+=2,f===y.charAt(D-1))return k("End of comment missing");var $=y.slice(2,D-2);return w+=2,x($),y=y.slice(D),w+=2,V({type:p,comment:$})}}function K(){var V=C(),D=E(o);if(D){if(L(),!E(i))return k("property missing ':'");var $=E(s),W=V({type:h,property:m(D[0].replace(r,f)),value:$?m($[0].replace(r,f)):f});return E(l),W}}function z(){var V=[];N(V);for(var D;D=K();)D!==!1&&(V.push(D),N(V));return V}return A(),z()};function m(y){return y?y.replace(a,f):f}return wd}var ep;function N0(){if(ep)return To;ep=1;var r=To&&To.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(To,"__esModule",{value:!0}),To.default=t;var e=r(P0());function t(o,i){var s=null;if(!o||typeof o!="string")return s;var l=(0,e.default)(o),a=typeof i=="function";return l.forEach(function(c){if(c.type==="declaration"){var d=c.property,u=c.value;a?i(d,u,c):u&&(s=s||{},s[d]=u)}}),s}return To}var _0=N0();const tp=E0(_0),I0=tp.default||tp,D0=/\d/,R0=["-","_","/","."];function z0(r=""){if(!D0.test(r))return r!==r.toLowerCase()}function L0(r){const e=[];let t="",o,i;for(const s of r){const l=R0.includes(s);if(l===!0){e.push(t),t="",o=void 0;continue}const a=z0(s);if(i===!1){if(o===!1&&a===!0){e.push(t),t=s,o=a;continue}if(o===!0&&a===!1&&t.length>1){const c=t.at(-1);e.push(t.slice(0,Math.max(0,t.length-1))),t=c+s,o=a;continue}}t+=s,o=a,i=l}return e.push(t),e}function hg(r){return r?L0(r).map(e=>B0(e)).join(""):""}function F0(r){return V0(hg(r||""))}function B0(r){return r?r[0].toUpperCase()+r.slice(1):""}function V0(r){return r?r[0].toLowerCase()+r.slice(1):""}function Ri(r){if(!r)return{};const e={};function t(o,i){if(o.startsWith("-moz-")||o.startsWith("-webkit-")||o.startsWith("-ms-")||o.startsWith("-o-")){e[hg(o)]=i;return}if(o.startsWith("--")){e[o]=i;return}e[F0(o)]=i}return I0(r,t),e}function ar(...r){return(...e)=>{for(const t of r)typeof t=="function"&&t(...e)}}function H0(r,e){const t=RegExp(r,"g");return o=>{if(typeof o!="string")throw new TypeError(`expected an argument of type string, but got ${typeof o}`);return o.match(t)?o.replace(t,e):o}}const W0=H0(/[A-Z]/,r=>`-${r.toLowerCase()}`);function K0(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError(`expected an argument of type object, but got ${typeof r}`);return Object.keys(r).map(e=>`${W0(e)}: ${r[e]};`).join(`
`)}function wf(r={}){return K0(r).replace(`
`," ")}const pg={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};wf(pg);function j0(r){var e;return r.length>2&&r.startsWith("on")&&r[2]===((e=r[2])==null?void 0:e.toLowerCase())}function Xe(...r){const e={...r[0]};for(let t=1;t<r.length;t++){const o=r[t];for(const i in o){const s=e[i],l=o[i],a=typeof s=="function",c=typeof l=="function";if(a&&j0(i)){const d=s,u=l;e[i]=fg(d,u)}else if(a&&c)e[i]=ar(s,l);else if(i==="class"){const d=au(s),u=au(l);d&&u?e[i]=_a(s,l):d?e[i]=_a(s):u&&(e[i]=_a(l))}else if(i==="style"){const d=typeof s=="object",u=typeof l=="object",f=typeof s=="string",p=typeof l=="string";if(d&&u)e[i]={...s,...l};else if(d&&p){const h=Ri(l);e[i]={...s,...h}}else if(f&&u){const h=Ri(s);e[i]={...h,...l}}else if(f&&p){const h=Ri(s),m=Ri(l);e[i]={...h,...m}}else d?e[i]=s:u?e[i]=l:f?e[i]=s:p&&(e[i]=l)}else e[i]=l!==void 0?l:s}}return typeof e.style=="object"&&(e.style=wf(e.style).replaceAll(`
`," ")),e.hidden!==!0&&(e.hidden=void 0,delete e.hidden),e.disabled!==!0&&(e.disabled=void 0,delete e.disabled),e}const mg=typeof window<"u"?window:void 0;function $0(r){let e=r.activeElement;for(;e!=null&&e.shadowRoot;){const t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}var Fn,Bn,tr,qo,Da;const mh=class mh extends Map{constructor(t){super();H(this,qo);H(this,Fn,new Map);H(this,Bn,er(0));H(this,tr,er(0));if(t){for(var[o,i]of t)super.set(o,i);T(this,tr).v=super.size}}has(t){var o=T(this,Fn),i=o.get(t);if(i===void 0){var s=super.get(t);if(s!==void 0)i=er(0),o.set(t,i);else return g(T(this,Bn)),!1}return g(i),!0}forEach(t,o){_e(this,qo,Da).call(this),super.forEach(t,o)}get(t){var o=T(this,Fn),i=o.get(t);if(i===void 0){var s=super.get(t);if(s!==void 0)i=er(0),o.set(t,i);else{g(T(this,Bn));return}}return g(i),super.get(t)}set(t,o){var f;var i=T(this,Fn),s=i.get(t),l=super.get(t),a=super.set(t,o),c=T(this,Bn);if(s===void 0)i.set(t,er(0)),I(T(this,tr),super.size),Io(c);else if(l!==o){Io(s);var d=c.reactions===null?null:new Set(c.reactions),u=d===null||!((f=s.reactions)!=null&&f.every(p=>d.has(p)));u&&Io(c)}return a}delete(t){var o=T(this,Fn),i=o.get(t),s=super.delete(t);return i!==void 0&&(o.delete(t),I(T(this,tr),super.size),I(i,-1),Io(T(this,Bn))),s}clear(){if(super.size!==0){super.clear();var t=T(this,Fn);I(T(this,tr),0);for(var o of t.values())I(o,-1);Io(T(this,Bn)),t.clear()}}keys(){return g(T(this,Bn)),super.keys()}values(){return _e(this,qo,Da).call(this),super.values()}entries(){return _e(this,qo,Da).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return g(T(this,tr)),super.size}};Fn=new WeakMap,Bn=new WeakMap,tr=new WeakMap,qo=new WeakSet,Da=function(){g(T(this,Bn));var t=T(this,Fn);if(T(this,tr).v!==t.size)for(var o of Ah(mh.prototype,this,"keys").call(this))t.has(o)||t.set(o,er(0));for(var[,i]of T(this,Fn))g(i)};let cu=mh;var Jo,cs;class G0{constructor(e={}){H(this,Jo);H(this,cs);const{window:t=mg,document:o=t==null?void 0:t.document}=e;t!==void 0&&(dt(this,Jo,o),dt(this,cs,Mx(i=>{const s=at(t,"focusin",i),l=at(t,"focusout",i);return()=>{s(),l()}})))}get current(){var e;return(e=T(this,cs))==null||e.call(this),T(this,Jo)?$0(T(this,Jo)):null}}Jo=new WeakMap,cs=new WeakMap;new G0;function U0(r){return typeof r=="function"}function q0(r,e){switch(r){case"post":rt(e);break;case"pre":mf(e);break}}function gg(r,e,t,o={}){const{lazy:i=!1}=o;let s=!i,l=Array.isArray(r)?[]:void 0;q0(e,()=>{const a=Array.isArray(r)?r.map(d=>d()):r();if(!s){s=!0,l=a;return}const c=ur(()=>t(a,l));return l=a,c})}function Qe(r,e,t){gg(r,"post",e,t)}function J0(r,e,t){gg(r,"pre",e,t)}Qe.pre=J0;function Y0(r){return U0(r)?r():r}var nr;class X0{constructor(e,t={box:"border-box"}){H(this,nr,ue(Bt({width:0,height:0})));var i,s;const o=t.window??mg;I(T(this,nr),{width:((i=t.initialSize)==null?void 0:i.width)??0,height:((s=t.initialSize)==null?void 0:s.height)??0},!0),rt(()=>{if(!o)return;const l=Y0(e);if(!l)return;const a=new o.ResizeObserver(c=>{for(const d of c){const u=t.box==="content-box"?d.contentBoxSize:d.borderBoxSize,f=Array.isArray(u)?u:[u];g(T(this,nr)).width=f.reduce((p,h)=>Math.max(p,h.inlineSize),0),g(T(this,nr)).height=f.reduce((p,h)=>Math.max(p,h.blockSize),0)}});return a.observe(l),()=>{a.disconnect()}})}get current(){return g(T(this,nr))}get width(){return g(T(this,nr)).width}get height(){return g(T(this,nr)).height}}nr=new WeakMap;var ds,us;class Z0{constructor(e){H(this,ds,ue(void 0));H(this,us);rt(()=>{I(T(this,ds),T(this,us),!0),dt(this,us,e())})}get current(){return g(T(this,ds))}}ds=new WeakMap,us=new WeakMap;var fs,rr;class bn{constructor(e){H(this,fs);H(this,rr);dt(this,fs,e),dt(this,rr,Symbol(e))}get key(){return T(this,rr)}exists(){return lg(T(this,rr))}get(){const e=nu(T(this,rr));if(e===void 0)throw new Error(`Context "${T(this,fs)}" not found`);return e}getOr(e){const t=nu(T(this,rr));return t===void 0?e:t}set(e){return Ua(T(this,rr),e)}}fs=new WeakMap,rr=new WeakMap;function xf(r){rt(()=>()=>{r()})}function st({id:r,ref:e,deps:t=()=>!0,onRefChange:o,getRootNode:i}){Qe([()=>r.current,t],([s])=>{const l=(i==null?void 0:i())??document,a=l==null?void 0:l.getElementById(s);a?e.current=a:e.current=null,o==null||o(e.current)}),xf(()=>{e.current=null,o==null||o(null)})}function Jl(r,e){return setTimeout(e,r)}function Dt(r){hf().then(r)}function Q0(r){rt(()=>ur(()=>r()))}function jc(r){return r?"open":"closed"}function yg(r){return r?"true":"false"}function Sf(r){return r?"true":"false"}function $c(r){return r?"":void 0}function e1(r){return r?"true":"false"}function t1(r){return r?"true":void 0}function n1(r){return r?"":void 0}const si="ArrowDown",kf="ArrowLeft",Mf="ArrowRight",Ji="ArrowUp",Cf="End",Yl="Enter",r1="Escape",Of="Home",o1="PageDown",i1="PageUp",Xl=" ",vg="Tab",s1="p",l1="n",a1="j",c1="k";function d1(r){return window.getComputedStyle(r).getPropertyValue("direction")}function u1(r="ltr",e="horizontal"){return{horizontal:r==="rtl"?kf:Mf,vertical:si}[e]}function f1(r="ltr",e="horizontal"){return{horizontal:r==="rtl"?Mf:kf,vertical:Ji}[e]}function h1(r="ltr",e="horizontal"){return["ltr","rtl"].includes(r)||(r="ltr"),["horizontal","vertical"].includes(e)||(e="horizontal"),{nextKey:u1(r,e),prevKey:f1(r,e)}}const Gc=typeof document<"u",np=p1();function p1(){var r,e;return Gc&&((r=window==null?void 0:window.navigator)==null?void 0:r.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function hr(r){return r instanceof HTMLElement}function qa(r){return r instanceof Element}function m1(r){return r instanceof Element||r instanceof SVGElement}function g1(r){return r!==null}function y1(r){return r instanceof HTMLInputElement&&"select"in r}function v1(r,e){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function b1(r){const e=_(null);function t(){if(!Gc)return[];const l=document.getElementById(r.rootNodeId.current);return l?r.candidateSelector?Array.from(l.querySelectorAll(r.candidateSelector)):Array.from(l.querySelectorAll(`[${r.candidateAttr}]:not([data-disabled])`)):[]}function o(){var a;const l=t();l.length&&((a=l[0])==null||a.focus())}function i(l,a,c=!1){var x;const d=document.getElementById(r.rootNodeId.current);if(!d||!l)return;const u=t();if(!u.length)return;const f=u.indexOf(l),p=d1(d),{nextKey:h,prevKey:m}=h1(p,r.orientation.current),y=r.loop.current,b={[h]:f+1,[m]:f-1,[Of]:0,[Cf]:u.length-1};if(c){const C=h===si?Mf:si,M=m===Ji?kf:Ji;b[C]=f+1,b[M]=f-1}let S=b[a.key];if(S===void 0)return;a.preventDefault(),S<0&&y?S=u.length-1:S===u.length&&y&&(S=0);const w=u[S];if(w)return w.focus(),e.current=w.id,(x=r.onCandidateFocus)==null||x.call(r,w),w}function s(l){const a=t(),c=e.current!==null;return l&&!c&&a[0]===l?(e.current=l.id,0):(l==null?void 0:l.id)===e.current?0:-1}return{setCurrentTabStopId(l){e.current=l},getTabIndex:s,handleKeydown:i,focusFirstCandidate:o,currentTabStopId:e}}globalThis.bitsIdCounter??(globalThis.bitsIdCounter={current:0});function ht(r="bits"){return globalThis.bitsIdCounter.current++,`${r}-${globalThis.bitsIdCounter.current}`}function tt(){}function w1(r,e){const t=_(r);function o(s){return e[t.current][s]??t.current}return{state:t,dispatch:s=>{t.current=o(s)}}}function x1(r,e){let t=ue(Bt({})),o=ue("none");const i=r.current?"mounted":"unmounted";let s=ue(null);const l=new Z0(()=>r.current);Qe([()=>e.current,()=>r.current],([p,h])=>{!p||!h||Dt(()=>{I(s,document.getElementById(p),!0)})});const{state:a,dispatch:c}=w1(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});Qe(()=>r.current,p=>{if(g(s)||I(s,document.getElementById(e.current),!0),!g(s)||!(p!==l.current))return;const m=g(o),y=da(g(s));p?c("MOUNT"):y==="none"||g(t).display==="none"?c("UNMOUNT"):c(l&&m!==y?"ANIMATION_OUT":"UNMOUNT")});function d(p){if(g(s)||I(s,document.getElementById(e.current),!0),!g(s))return;const h=da(g(s)),m=h.includes(p.animationName)||h==="none";p.target===g(s)&&m&&c("ANIMATION_END")}function u(p){g(s)||I(s,document.getElementById(e.current),!0),g(s)&&p.target===g(s)&&I(o,da(g(s)),!0)}Qe(()=>a.current,()=>{if(g(s)||I(s,document.getElementById(e.current),!0),!g(s))return;const p=da(g(s));I(o,a.current==="mounted"?p:"none",!0)}),Qe(()=>g(s),p=>{if(p)return I(t,getComputedStyle(p),!0),ar(at(p,"animationstart",u),at(p,"animationcancel",d),at(p,"animationend",d))});const f=F(()=>["mounted","unmountSuspended"].includes(a.current));return{get current(){return g(f)}}}function da(r){return r&&getComputedStyle(r).animationName||"none"}function Tf(r,e){Y(e,!0);const t=x1(_.with(()=>e.present),_.with(()=>e.id));var o=B(),i=P(o);{var s=l=>{var a=B(),c=P(a);ce(c,()=>e.presence??Re,()=>({present:t})),O(l,a)};Pe(i,l=>{(e.forceMount||e.present||t.current)&&l(s)})}O(r,o),X()}function S1(r){return{content:`data-${r}-content`,trigger:`data-${r}-trigger`,overlay:`data-${r}-overlay`,title:`data-${r}-title`,description:`data-${r}-description`,close:`data-${r}-close`,cancel:`data-${r}-cancel`,action:`data-${r}-action`}}var hs,ps,ms,gs,ys,vs,bs,ws,xs,Ss,ks;class k1{constructor(e){oe(this,"opts");H(this,hs,ue(null));H(this,ps,ue(null));H(this,ms,ue(null));H(this,gs,ue(null));H(this,ys,ue(void 0));H(this,vs,ue(void 0));H(this,bs,ue(void 0));H(this,ws,ue(void 0));H(this,xs,ue(null));H(this,Ss,F(()=>S1(this.opts.variant.current)));H(this,ks,F(()=>({"data-state":jc(this.opts.open.current)})));this.opts=e,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this)}get triggerNode(){return g(T(this,hs))}set triggerNode(e){I(T(this,hs),e,!0)}get titleNode(){return g(T(this,ps))}set titleNode(e){I(T(this,ps),e,!0)}get contentNode(){return g(T(this,ms))}set contentNode(e){I(T(this,ms),e,!0)}get descriptionNode(){return g(T(this,gs))}set descriptionNode(e){I(T(this,gs),e,!0)}get contentId(){return g(T(this,ys))}set contentId(e){I(T(this,ys),e,!0)}get titleId(){return g(T(this,vs))}set titleId(e){I(T(this,vs),e,!0)}get triggerId(){return g(T(this,bs))}set triggerId(e){I(T(this,bs),e,!0)}get descriptionId(){return g(T(this,ws))}set descriptionId(e){I(T(this,ws),e,!0)}get cancelNode(){return g(T(this,xs))}set cancelNode(e){I(T(this,xs),e,!0)}get attrs(){return g(T(this,Ss))}set attrs(e){I(T(this,Ss),e)}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}get sharedProps(){return g(T(this,ks))}set sharedProps(e){I(T(this,ks),e)}}hs=new WeakMap,ps=new WeakMap,ms=new WeakMap,gs=new WeakMap,ys=new WeakMap,vs=new WeakMap,bs=new WeakMap,ws=new WeakMap,xs=new WeakMap,Ss=new WeakMap,ks=new WeakMap;var Ms;class M1{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Ms,F(()=>({id:this.opts.id.current,"aria-haspopup":"dialog","aria-expanded":Sf(this.root.opts.open.current),"aria-controls":this.root.contentId,[this.root.attrs.trigger]:"",onkeydown:this.onkeydown,onclick:this.onclick,disabled:this.opts.disabled.current?!0:void 0,...this.root.sharedProps})));this.opts=e,this.root=t,st({...e,onRefChange:o=>{this.root.triggerNode=o,this.root.triggerId=o==null?void 0:o.id}}),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleOpen()}onkeydown(e){this.opts.disabled.current||(e.key===Xl||e.key===Yl)&&(e.preventDefault(),this.root.handleOpen())}get props(){return g(T(this,Ms))}set props(e){I(T(this,Ms),e)}}Ms=new WeakMap;var Sc,Cs;class C1{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Sc,F(()=>this.root.attrs[this.opts.variant.current]));H(this,Cs,F(()=>({id:this.opts.id.current,[g(T(this,Sc))]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:this.opts.disabled.current?!0:void 0,tabindex:0,...this.root.sharedProps})));this.opts=e,this.root=t,this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this),st({...e,deps:()=>this.root.opts.open.current})}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||(e.key===Xl||e.key===Yl)&&(e.preventDefault(),this.root.handleClose())}get props(){return g(T(this,Cs))}set props(e){I(T(this,Cs),e)}}Sc=new WeakMap,Cs=new WeakMap;var Os,Ts;class O1{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Os,F(()=>({open:this.root.opts.open.current})));H(this,Ts,F(()=>({id:this.opts.id.current,role:this.root.opts.variant.current==="alert-dialog"?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.attrs.content]:"",style:{pointerEvents:"auto",outline:this.root.opts.variant.current==="alert-dialog"?"none":void 0},tabindex:this.root.opts.variant.current==="alert-dialog"?-1:void 0,...this.root.sharedProps})));this.opts=e,this.root=t,st({...e,deps:()=>this.root.opts.open.current,onRefChange:o=>{this.root.contentNode=o,this.root.contentId=o==null?void 0:o.id}})}get snippetProps(){return g(T(this,Os))}set snippetProps(e){I(T(this,Os),e)}get props(){return g(T(this,Ts))}set props(e){I(T(this,Ts),e)}}Os=new WeakMap,Ts=new WeakMap;var As,Es;class T1{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,As,F(()=>({open:this.root.opts.open.current})));H(this,Es,F(()=>({id:this.opts.id.current,[this.root.attrs.overlay]:"",style:{pointerEvents:"auto"},...this.root.sharedProps})));this.opts=e,this.root=t,st({...e,deps:()=>this.root.opts.open.current})}get snippetProps(){return g(T(this,As))}set snippetProps(e){I(T(this,As),e)}get props(){return g(T(this,Es))}set props(e){I(T(this,Es),e)}}As=new WeakMap,Es=new WeakMap;const Zl=new bn("Dialog.Root");function A1(r){return Zl.set(new k1(r))}function E1(r){return new M1(r,Zl.get())}function P1(r){return new O1(r,Zl.get())}function N1(r){return new T1(r,Zl.get())}function _1(r){return new C1(r,Zl.get())}function I1(r,e){var t=B(),o=P(t);yf(o,()=>e.children,i=>{var s=B(),l=P(s);ce(l,()=>e.children??Re),O(i,s)}),O(r,t)}function Uc(r,e){Y(e,!0);let t=v(e,"to",3,"body");const o=Hw();let i=F(s);function s(){if(!Gc||e.disabled)return null;let f=null;return typeof t()=="string"?f=document.querySelector(t()):(t()instanceof HTMLElement||t()instanceof DocumentFragment)&&(f=t()),f}let l;function a(){l&&(ww(l),l=null)}Qe([()=>g(i),()=>e.disabled],([f,p])=>{if(!f||p){a();return}return l=bw(I1,{target:f,props:{children:e.children},context:o}),()=>{a()}});var c=B(),d=P(c);{var u=f=>{var p=B(),h=P(p);ce(h,()=>e.children??Re),O(f,p)};Pe(d,f=>{e.disabled&&f(u)})}O(r,c),X()}function bg(r,e,t,o){const i=Array.isArray(e)?e:[e];return i.forEach(s=>r.addEventListener(s,t,o)),()=>{i.forEach(s=>r.removeEventListener(s,t,o))}}class Af{constructor(e,t={bubbles:!0,cancelable:!0}){oe(this,"eventName");oe(this,"options");this.eventName=e,this.options=t}createEvent(e){return new CustomEvent(this.eventName,{...this.options,detail:e})}dispatch(e,t){const o=this.createEvent(t);return e.dispatchEvent(o),o}listen(e,t,o){const i=s=>{t(s)};return at(e,this.eventName,i,o)}}function rp(r,e=500){let t=null;const o=(...i)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{r(...i)},e)};return o.destroy=()=>{t!==null&&(clearTimeout(t),t=null)},o}function Ef(r,e){return r===e||r.contains(e)}function wg(r){return(r==null?void 0:r.ownerDocument)??document}function xg(r){return(r==null?void 0:r.ownerDocument)??document}function D1(r){if(!r)return null;for(const e of r.childNodes)if(e.nodeType!==Node.COMMENT_NODE)return e;return null}function R1(r,e){const{clientX:t,clientY:o}=r,i=e.getBoundingClientRect();return t<i.left||t>i.right||o<i.top||o>i.bottom}globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);var Yo,lo,Pr,Xo,Zo,Nr,Ps,Ns,or,kc,pi,Sg,Mc,Qo,Cc,Oc,Tc,Ac,_s,kg,Ec,Pc;class z1{constructor(e){H(this,pi);oe(this,"opts");H(this,Yo);H(this,lo);H(this,Pr,{pointerdown:!1});H(this,Xo,!1);H(this,Zo,!1);oe(this,"node",_(null));H(this,Nr);H(this,Ps);H(this,Ns,ue(null));H(this,or,tt);H(this,kc,e=>{e.defaultPrevented||this.currNode&&Dt(()=>{var t,o;!this.currNode||T(this,Ac).call(this,e.target)||e.target&&!T(this,Zo)&&((o=(t=T(this,Ps)).current)==null||o.call(t,e))})});H(this,Mc,e=>{let t=e;t.defaultPrevented&&(t=op(e)),T(this,Yo).current(e)});H(this,Qo,rp(e=>{if(!this.currNode){T(this,or).call(this);return}const t=this.opts.isValidEvent.current(e,this.currNode)||V1(e,this.currNode);if(!T(this,Xo)||_e(this,pi,kg).call(this)||!t){T(this,or).call(this);return}let o=e;if(o.defaultPrevented&&(o=op(o)),T(this,lo).current!=="close"&&T(this,lo).current!=="defer-otherwise-close"){T(this,or).call(this);return}e.pointerType==="touch"?(T(this,or).call(this),dt(this,or,bg(T(this,Nr),"click",T(this,Mc),{once:!0}))):T(this,Yo).current(o)},10));H(this,Cc,e=>{T(this,Pr)[e.type]=!0});H(this,Oc,e=>{T(this,Pr)[e.type]=!1});H(this,Tc,()=>{this.node.current&&dt(this,Xo,B1(this.node.current))});H(this,Ac,e=>this.node.current?Ef(this.node.current,e):!1);H(this,_s,rp(()=>{for(const e in T(this,Pr))T(this,Pr)[e]=!1;dt(this,Xo,!1)},20));H(this,Ec,()=>{dt(this,Zo,!0)});H(this,Pc,()=>{dt(this,Zo,!1)});oe(this,"props",{onfocuscapture:T(this,Ec),onblurcapture:T(this,Pc)});this.opts=e,st({id:e.id,ref:this.node,deps:()=>e.enabled.current,onRefChange:i=>{this.currNode=i}}),dt(this,lo,e.interactOutsideBehavior),dt(this,Yo,e.onInteractOutside),dt(this,Ps,e.onFocusOutside),rt(()=>{dt(this,Nr,wg(this.currNode))});let t=tt;const o=()=>{T(this,_s).call(this),globalThis.bitsDismissableLayers.delete(this),T(this,Qo).destroy(),t()};Qe([()=>this.opts.enabled.current,()=>this.currNode],([i,s])=>{if(!(!i||!s))return Jl(1,()=>{this.currNode&&(globalThis.bitsDismissableLayers.set(this,T(this,lo)),t(),t=_e(this,pi,Sg).call(this))}),o}),xf(()=>{T(this,_s).destroy(),globalThis.bitsDismissableLayers.delete(this),T(this,Qo).destroy(),T(this,or).call(this),t()})}get currNode(){return g(T(this,Ns))}set currNode(e){I(T(this,Ns),e,!0)}}Yo=new WeakMap,lo=new WeakMap,Pr=new WeakMap,Xo=new WeakMap,Zo=new WeakMap,Nr=new WeakMap,Ps=new WeakMap,Ns=new WeakMap,or=new WeakMap,kc=new WeakMap,pi=new WeakSet,Sg=function(){return ar(at(T(this,Nr),"pointerdown",ar(T(this,Cc),T(this,Tc)),{capture:!0}),at(T(this,Nr),"pointerdown",ar(T(this,Oc),T(this,Qo))),at(T(this,Nr),"focusin",T(this,kc)))},Mc=new WeakMap,Qo=new WeakMap,Cc=new WeakMap,Oc=new WeakMap,Tc=new WeakMap,Ac=new WeakMap,_s=new WeakMap,kg=function(){return Object.values(T(this,Pr)).some(Boolean)},Ec=new WeakMap,Pc=new WeakMap;function L1(r){return new z1(r)}function F1(r){return r.findLast(([e,{current:t}])=>t==="close"||t==="ignore")}function B1(r){const e=[...globalThis.bitsDismissableLayers],t=F1(e);if(t)return t[0].node.current===r;const[o]=e[0];return o.node.current===r}function V1(r,e){if("button"in r&&r.button>0)return!1;const t=r.target;return qa(t)?wg(t).documentElement.contains(t)&&!Ef(e,t)&&R1(r,e):!1}function op(r){const e=r.currentTarget,t=r.target;let o;r instanceof PointerEvent?o=new PointerEvent(r.type,r):o=new PointerEvent("pointerdown",r);let i=!1;return new Proxy(o,{get:(l,a)=>a==="currentTarget"?e:a==="target"?t:a==="preventDefault"?()=>{i=!0,typeof l.preventDefault=="function"&&l.preventDefault()}:a==="defaultPrevented"?i:a in l?l[a]:r[a]})}function Mg(r,e){Y(e,!0);let t=v(e,"interactOutsideBehavior",3,"close"),o=v(e,"onInteractOutside",3,tt),i=v(e,"onFocusOutside",3,tt),s=v(e,"isValidEvent",3,()=>!1);const l=L1({id:_.with(()=>e.id),interactOutsideBehavior:_.with(()=>t()),onInteractOutside:_.with(()=>o()),enabled:_.with(()=>e.enabled),onFocusOutside:_.with(()=>i()),isValidEvent:_.with(()=>s())});var a=B(),c=P(a);ce(c,()=>e.children??Re,()=>({props:l.props})),O(r,a),X()}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);var Nc,_c;class H1{constructor(e){oe(this,"opts");H(this,Nc,()=>at(document,"keydown",T(this,_c),{passive:!1}));H(this,_c,e=>{if(e.key!==r1||!K1(this))return;const t=new KeyboardEvent(e.type,e);e.preventDefault();const o=this.opts.escapeKeydownBehavior.current;o!=="close"&&o!=="defer-otherwise-close"||this.opts.onEscapeKeydown.current(t)});this.opts=e;let t=tt;Qe(()=>e.enabled.current,o=>(o&&(globalThis.bitsEscapeLayers.set(this,e.escapeKeydownBehavior),t=T(this,Nc).call(this)),()=>{t(),globalThis.bitsEscapeLayers.delete(this)}))}}Nc=new WeakMap,_c=new WeakMap;function W1(r){return new H1(r)}function K1(r){const e=[...globalThis.bitsEscapeLayers],t=e.findLast(([i,{current:s}])=>s==="close"||s==="ignore");if(t)return t[0]===r;const[o]=e[0];return o===r}function Cg(r,e){Y(e,!0);let t=v(e,"escapeKeydownBehavior",3,"close"),o=v(e,"onEscapeKeydown",3,tt);W1({escapeKeydownBehavior:_.with(()=>t()),onEscapeKeydown:_.with(()=>o()),enabled:_.with(()=>e.enabled)});var i=B(),s=P(i);ce(s,()=>e.children??Re),O(r,i),X()}const br=_([]);function j1(){return{add(r){const e=br.current[0];e&&r.id!==e.id&&e.pause(),br.current=ip(br.current,r),br.current.unshift(r)},remove(r){var e;br.current=ip(br.current,r),(e=br.current[0])==null||e.resume()},get current(){return br.current}}}function $1(){let r=ue(!1),e=ue(!1);return{id:ht(),get paused(){return g(r)},get isHandlingFocus(){return g(e)},set isHandlingFocus(t){I(e,t,!0)},pause(){I(r,!0)},resume(){I(r,!1)}}}function ip(r,e){return[...r].filter(t=>t.id!==e.id)}function G1(r){return r.filter(e=>e.tagName!=="A")}function Sr(r,{select:e=!1}={}){if(!(r&&r.focus)||document.activeElement===r)return;const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&y1(r)&&e&&r.select()}function Og(r,{select:e=!1}={}){const t=document.activeElement;for(const o of r)if(Sr(o,{select:e}),document.activeElement!==t)return!0}function sp(r,e){for(const t of r)if(!v1(t,e))return t}function Tg(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const i=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||i?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function U1(r){const e=Tg(r),t=sp(e,r),o=sp(e.reverse(),r);return[t,o]}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ag=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ja=Ag.join(","),Eg=typeof Element>"u",go=Eg?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ya=!Eg&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r==null?void 0:r.ownerDocument},Xa=function r(e,t){var o;t===void 0&&(t=!0);var i=e==null||(o=e.getAttribute)===null||o===void 0?void 0:o.call(e,"inert"),s=i===""||i==="true",l=s||t&&e&&r(e.parentNode);return l},q1=function(e){var t,o=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return o===""||o==="true"},Pg=function(e,t,o){if(Xa(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ja));return t&&go.call(e,Ja)&&i.unshift(e),i=i.filter(o),i},Ng=function r(e,t,o){for(var i=[],s=Array.from(e);s.length;){var l=s.shift();if(!Xa(l,!1))if(l.tagName==="SLOT"){var a=l.assignedElements(),c=a.length?a:l.children,d=r(c,!0,o);o.flatten?i.push.apply(i,d):i.push({scopeParent:l,candidates:d})}else{var u=go.call(l,Ja);u&&o.filter(l)&&(t||!e.includes(l))&&i.push(l);var f=l.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(l),p=!Xa(f,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(l));if(f&&p){var h=r(f===!0?l.children:f.children,!0,o);o.flatten?i.push.apply(i,h):i.push({scopeParent:l,candidates:h})}else s.unshift.apply(s,l.children)}}return i},_g=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ig=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||q1(e))&&!_g(e)?0:e.tabIndex},J1=function(e,t){var o=Ig(e);return o<0&&t&&!_g(e)?0:o},Y1=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Dg=function(e){return e.tagName==="INPUT"},X1=function(e){return Dg(e)&&e.type==="hidden"},Z1=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(o){return o.tagName==="SUMMARY"});return t},Q1=function(e,t){for(var o=0;o<e.length;o++)if(e[o].checked&&e[o].form===t)return e[o]},eS=function(e){if(!e.name)return!0;var t=e.form||Ya(e),o=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=o(window.CSS.escape(e.name));else try{i=o(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var s=Q1(i,e.form);return!s||s===e},tS=function(e){return Dg(e)&&e.type==="radio"},nS=function(e){return tS(e)&&!eS(e)},rS=function(e){var t,o=e&&Ya(e),i=(t=o)===null||t===void 0?void 0:t.host,s=!1;if(o&&o!==e){var l,a,c;for(s=!!((l=i)!==null&&l!==void 0&&(a=l.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!s&&i;){var d,u,f;o=Ya(i),i=(d=o)===null||d===void 0?void 0:d.host,s=!!((u=i)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},lp=function(e){var t=e.getBoundingClientRect(),o=t.width,i=t.height;return o===0&&i===0},oS=function(e,t){var o=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=go.call(e,"details>summary:first-of-type"),l=s?e.parentElement:e;if(go.call(l,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var c=e.parentElement,d=Ya(e);if(c&&!c.shadowRoot&&i(c)===!0)return lp(e);e.assignedSlot?e=e.assignedSlot:!c&&d!==e.ownerDocument?e=d.host:e=c}e=a}if(rS(e))return!e.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return lp(e);return!1},iS=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var o=0;o<t.children.length;o++){var i=t.children.item(o);if(i.tagName==="LEGEND")return go.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Za=function(e,t){return!(t.disabled||Xa(t)||X1(t)||oS(t,e)||Z1(t)||iS(t))},du=function(e,t){return!(nS(t)||Ig(t)<0||!Za(e,t))},sS=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},lS=function r(e){var t=[],o=[];return e.forEach(function(i,s){var l=!!i.scopeParent,a=l?i.scopeParent:i,c=J1(a,l),d=l?r(i.candidates):a;c===0?l?t.push.apply(t,d):t.push(a):o.push({documentOrder:s,tabIndex:c,item:i,isScope:l,content:d})}),o.sort(Y1).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},aS=function(e,t){t=t||{};var o;return t.getShadowRoot?o=Ng([e],t.includeContainer,{filter:du.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:sS}):o=Pg(e,t.includeContainer,du.bind(null,t)),lS(o)},cS=function(e,t){t=t||{};var o;return t.getShadowRoot?o=Ng([e],t.includeContainer,{filter:Za.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):o=Pg(e,t.includeContainer,Za.bind(null,t)),o},qc=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return go.call(e,Ja)===!1?!1:du(t,e)},dS=Ag.concat("iframe").join(","),uS=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return go.call(e,dS)===!1?!1:Za(t,e)};const fS=new Af("focusScope.autoFocusOnMount",{bubbles:!1,cancelable:!0}),hS=new Af("focusScope.autoFocusOnDestroy",{bubbles:!1,cancelable:!0}),Rg=new bn("FocusScope");function pS({id:r,loop:e,enabled:t,onOpenAutoFocus:o,onCloseAutoFocus:i,forceMount:s}){const l=j1(),a=$1(),c=_(null),d=Rg.getOr({ignoreCloseAutoFocus:!1});let u=null;st({id:r,ref:c,deps:()=>t.current});function f(S){if(!(a.paused||!c.current||a.isHandlingFocus)){a.isHandlingFocus=!0;try{const w=S.target;if(!hr(w))return;const x=c.current.contains(w);if(S.type==="focusin")if(x)u=w;else{if(d.ignoreCloseAutoFocus)return;Sr(u,{select:!0})}else S.type==="focusout"&&!x&&!d.ignoreCloseAutoFocus&&Sr(u,{select:!0})}finally{a.isHandlingFocus=!1}}}function p(S){var x;!((x=c.current)==null?void 0:x.contains(u))&&c.current&&Sr(c.current)}Qe([()=>c.current,()=>t.current],([S,w])=>{if(!S||!w)return;const x=ar(at(document,"focusin",f),at(document,"focusout",f)),C=new MutationObserver(p);return C.observe(S,{childList:!0,subtree:!0}),()=>{x(),C.disconnect()}}),Qe([()=>s.current,()=>c.current],([S,w])=>{if(S)return;const x=document.activeElement;return h(w,x),()=>{w&&m(x)}}),Qe([()=>s.current,()=>c.current,()=>t.current],([S,w])=>{if(!S)return;const x=document.activeElement;return h(w,x),()=>{w&&m(x)}});function h(S,w){if(S||(S=document.getElementById(r.current)),!S||!t.current)return;if(l.add(a),!S.contains(w)){const C=fS.createEvent();o.current(C),C.defaultPrevented||Dt(()=>{S&&(Og(G1(Tg(S)),{select:!0}),document.activeElement===w&&Sr(S))})}}function m(S){const w=hS.createEvent();i.current(w);const x=d.ignoreCloseAutoFocus;Jl(0,()=>{!w.defaultPrevented&&S&&!x&&Sr(qc(S)?S:document.body,{select:!0}),l.remove(a)})}function y(S){if(!t.current||!e.current&&!t.current||a.paused)return;const w=S.key===vg&&!S.ctrlKey&&!S.altKey&&!S.metaKey,x=document.activeElement;if(!(w&&x))return;const C=c.current;if(!C)return;const[M,k]=U1(C);M&&k?!S.shiftKey&&x===k?(S.preventDefault(),e.current&&Sr(M,{select:!0})):S.shiftKey&&x===M&&(S.preventDefault(),e.current&&Sr(k,{select:!0})):x===C&&S.preventDefault()}const b=F(()=>({id:r.current,tabindex:-1,onkeydown:y}));return{get props(){return g(b)}}}function zg(r,e){Y(e,!0);let t=v(e,"trapFocus",3,!1),o=v(e,"loop",3,!1),i=v(e,"onCloseAutoFocus",3,tt),s=v(e,"onOpenAutoFocus",3,tt),l=v(e,"forceMount",3,!1);const a=pS({enabled:_.with(()=>t()),loop:_.with(()=>o()),onCloseAutoFocus:_.with(()=>i()),onOpenAutoFocus:_.with(()=>s()),id:_.with(()=>e.id),forceMount:_.with(()=>l())});var c=B(),d=P(c);ce(d,()=>e.focusScope??Re,()=>({props:a.props})),O(r,c),X()}globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);var ei,Is,Ic,Lg,Dc,Ds;class mS{constructor(e){H(this,Ic);oe(this,"opts");H(this,ei,tt);H(this,Is,_(null));H(this,Dc,e=>{const t=T(this,Is).current,o=e.target;!hr(t)||!hr(o)||!this.opts.enabled.current||!vS(this)||!Ef(t,o)||(this.opts.onPointerDown.current(e),!e.defaultPrevented&&dt(this,ei,yS(t)))});H(this,Ds,()=>{T(this,ei).call(this),dt(this,ei,tt)});this.opts=e,st({id:e.id,ref:T(this,Is),deps:()=>this.opts.enabled.current});let t=tt;Qe(()=>this.opts.enabled.current,o=>(o&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),t(),t=_e(this,Ic,Lg).call(this)),()=>{t(),T(this,Ds).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}}ei=new WeakMap,Is=new WeakMap,Ic=new WeakSet,Lg=function(){return ar(at(document,"pointerdown",T(this,Dc)),at(document,"pointerup",fg(T(this,Ds),this.opts.onPointerUp.current)))},Dc=new WeakMap,Ds=new WeakMap;function gS(r){return new mS(r)}const ap=r=>r.style.userSelect||r.style.webkitUserSelect;function yS(r){const e=document.body,t=ap(e),o=ap(r);return ua(e,"none"),ua(r,"text"),()=>{ua(e,t),ua(r,o)}}function ua(r,e){r.style.userSelect=e,r.style.webkitUserSelect=e}function vS(r){const e=[...globalThis.bitsTextSelectionLayers];if(!e.length)return!1;const t=e.at(-1);return t?t[0]===r:!1}function Fg(r,e){Y(e,!0);let t=v(e,"preventOverflowTextSelection",3,!0),o=v(e,"onPointerDown",3,tt),i=v(e,"onPointerUp",3,tt);gS({id:_.with(()=>e.id),preventOverflowTextSelection:_.with(()=>t()),onPointerDown:_.with(()=>o()),onPointerUp:_.with(()=>i()),enabled:_.with(()=>e.enabled)});var s=B(),l=P(s);ce(l,()=>e.children??Re),O(r,s),X()}function bS(r){let e=0,t=ue(void 0),o;function i(){e-=1,o&&e<=0&&(o(),I(t,void 0),o=void 0)}return(...s)=>(e+=1,g(t)===void 0&&(o=ag(()=>{I(t,r(...s),!0)})),rt(()=>()=>{i()}),g(t))}const wS=bS(()=>{const r=new cu,e=F(()=>{for(const s of r.values())if(s)return!0;return!1});let t=ue(null),o=null;function i(){Gc&&(document.body.setAttribute("style",g(t)??""),document.body.style.removeProperty("--scrollbar-width"),np&&(o==null||o()))}return rt(()=>{const s=g(e);return ur(()=>{if(!s)return;I(t,document.body.getAttribute("style"),!0);const l=getComputedStyle(document.body),a=window.innerWidth-document.documentElement.clientWidth,d={padding:Number.parseInt(l.paddingRight??"0",10)+a,margin:Number.parseInt(l.marginRight??"0",10)};a>0&&(document.body.style.paddingRight=`${d.padding}px`,document.body.style.marginRight=`${d.margin}px`,document.body.style.setProperty("--scrollbar-width",`${a}px`),document.body.style.overflow="hidden"),np&&(o=bg(document,"touchmove",u=>{u.target===document.documentElement&&(u.touches.length>1||u.preventDefault())},{passive:!1})),Dt(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})})}),rt(()=>()=>{o==null||o()}),{get map(){return r},resetBodyStyle:i}});function xS(r,e=()=>null){const t=ht(),o=wS();if(!o)return;const i=F(e);o.map.set(t,r??!1);const s=_.with(()=>o.map.get(t)??!1,l=>o.map.set(t,l));return rt(()=>()=>{o.map.delete(t),!SS(o.map)&&(g(i)===null?requestAnimationFrame(()=>o.resetBodyStyle()):Jl(g(i),()=>o.resetBodyStyle()))}),s}function SS(r){for(const[e,t]of r)if(t)return!0;return!1}function Qa(r,e){Y(e,!0);let t=v(e,"preventScroll",3,!0),o=v(e,"restoreScrollDelay",3,null);xS(t(),()=>o()),X()}function kS({forceMount:r,present:e,trapFocus:t,open:o}){return r?o&&t:e&&t&&o}var MS=U("<div><!></div>");function Bg(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"forceMount",3,!1),i=v(e,"ref",15,null),s=Ae(e,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const l=N1({id:_.with(()=>t()),ref:_.with(()=>i(),d=>i(d))}),a=F(()=>Xe(s,l.props)),c=F(()=>l.root.opts.open.current||o());Tf(r,{get id(){return t()},get present(){return g(c)},presence:u=>{var f=B(),p=P(f);{var h=y=>{var b=B(),S=P(b),w=De(()=>({props:Xe(g(a)),...l.snippetProps}));ce(S,()=>e.child,()=>g(w)),O(y,b)},m=y=>{var b=MS();let S;var w=we(b);ce(w,()=>e.children??Re,()=>l.snippetProps),ye(b),Te(x=>S=He(b,S,{...x}),[()=>Xe(g(a))]),O(y,b)};Pe(p,y=>{e.child?y(h):y(m,!1)})}O(u,f)},$$slots:{presence:!0}}),X()}var CS=U("<button><!></button>");function OS(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"disabled",3,!1),s=Ae(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const l=E1({id:_.with(()=>t()),ref:_.with(()=>o(),p=>o(p)),disabled:_.with(()=>!!i())}),a=F(()=>Xe(s,l.props));var c=B(),d=P(c);{var u=p=>{var h=B(),m=P(h);ce(m,()=>e.child,()=>({props:g(a)})),O(p,h)},f=p=>{var h=CS();let m;var y=we(h);ce(y,()=>e.children??Re),ye(h),Te(()=>m=He(h,m,{...g(a)})),O(p,h)};Pe(d,p=>{e.child?p(u):p(f,!1)})}O(r,c),X()}const TS="data-avatar-root",AS="data-avatar-image";var Rs;class ES{constructor(e){oe(this,"opts");H(this,Rs,F(()=>({id:this.opts.id.current,[TS]:"","data-status":this.opts.loadingStatus.current})));this.opts=e,this.loadImage=this.loadImage.bind(this),st(e)}loadImage(e,t,o){if(this.opts.loadingStatus.current==="loaded")return;let i;const s=new Image;return s.src=e,t!==void 0&&(s.crossOrigin=t),o&&(s.referrerPolicy=o),this.opts.loadingStatus.current="loading",s.onload=()=>{i=window.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},s.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{window.clearTimeout(i)}}get props(){return g(T(this,Rs))}set props(e){I(T(this,Rs),e)}}Rs=new WeakMap;var zs;class PS{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,zs,F(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[AS]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current})));this.opts=e,this.root=t,st(e),mf(()=>{if(!this.opts.src.current){this.root.opts.loadingStatus.current="error";return}this.opts.crossOrigin.current,ur(()=>this.root.loadImage(this.opts.src.current??"",this.opts.crossOrigin.current,this.opts.referrerPolicy.current))})}get props(){return g(T(this,zs))}set props(e){I(T(this,zs),e)}}zs=new WeakMap;const Vg=new bn("Avatar.Root");function NS(r){return Vg.set(new ES(r))}function _S(r){return new PS(r,Vg.get())}var IS=U("<div><!></div>");function DS(r,e){Y(e,!0);let t=v(e,"delayMs",3,0),o=v(e,"loadingStatus",15,"loading"),i=v(e,"id",19,ht),s=v(e,"ref",15,null),l=Ae(e,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const a=NS({delayMs:_.with(()=>t()),loadingStatus:_.with(()=>o(),h=>{var m;o()!==h&&(o(h),(m=e.onLoadingStatusChange)==null||m.call(e,h))}),id:_.with(()=>i()),ref:_.with(()=>s(),h=>s(h))}),c=F(()=>Xe(l,a.props));var d=B(),u=P(d);{var f=h=>{var m=B(),y=P(m);ce(y,()=>e.child,()=>({props:g(c)})),O(h,m)},p=h=>{var m=IS();let y;var b=we(m);ce(b,()=>e.children??Re),ye(m),Te(()=>y=He(m,y,{...g(c)})),O(h,m)};Pe(u,h=>{e.child?h(f):h(p,!1)})}O(r,d),X()}var RS=U("<img>");function zS(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"crossorigin",3,void 0),s=v(e,"referrerpolicy",3,void 0),l=Ae(e,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const a=_S({src:_.with(()=>e.src),id:_.with(()=>t()),ref:_.with(()=>o(),h=>o(h)),crossOrigin:_.with(()=>i()),referrerPolicy:_.with(()=>s())}),c=F(()=>Xe(l,a.props));var d=B(),u=P(d);{var f=h=>{var m=B(),y=P(m);ce(y,()=>e.child,()=>({props:g(c)})),O(h,m)},p=h=>{var m=RS();let y;Te(()=>y=He(m,y,{...g(c),src:e.src})),xw(m),O(h,m)};Pe(u,h=>{e.child?h(f):h(p,!1)})}O(r,d),X()}function Hg(r,e,t){const o=e.toLowerCase();if(o.endsWith(" ")){const f=o.slice(0,-1);if(r.filter(y=>y.toLowerCase().startsWith(f)).length<=1)return Hg(r,f,t);const h=t==null?void 0:t.toLowerCase();if(h&&h.startsWith(f)&&h.charAt(f.length)===" "&&e.trim()===f)return t;const m=r.filter(y=>y.toLowerCase().startsWith(o));if(m.length>0){const y=t?r.indexOf(t):-1;return cp(m,Math.max(y,0)).find(w=>w!==t)||t}}const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,l=s.toLowerCase(),a=t?r.indexOf(t):-1;let c=cp(r,Math.max(a,0));s.length===1&&(c=c.filter(f=>f!==t));const u=c.find(f=>f==null?void 0:f.toLowerCase().startsWith(l));return u!==t?u:void 0}function cp(r,e){return r.map((t,o)=>r[(e+o)%r.length])}const LS=["top","right","bottom","left"],Hr=Math.min,pn=Math.max,ec=Math.round,fa=Math.floor,Hn=r=>({x:r,y:r}),FS={left:"right",right:"left",bottom:"top",top:"bottom"},BS={start:"end",end:"start"};function uu(r,e,t){return pn(r,Hr(e,t))}function pr(r,e){return typeof r=="function"?r(e):r}function mr(r){return r.split("-")[0]}function gi(r){return r.split("-")[1]}function Pf(r){return r==="x"?"y":"x"}function Nf(r){return r==="y"?"height":"width"}function Wr(r){return["top","bottom"].includes(mr(r))?"y":"x"}function _f(r){return Pf(Wr(r))}function VS(r,e,t){t===void 0&&(t=!1);const o=gi(r),i=_f(r),s=Nf(i);let l=i==="x"?o===(t?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(l=tc(l)),[l,tc(l)]}function HS(r){const e=tc(r);return[fu(r),e,fu(e)]}function fu(r){return r.replace(/start|end/g,e=>BS[e])}function WS(r,e,t){const o=["left","right"],i=["right","left"],s=["top","bottom"],l=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:o:e?o:i;case"left":case"right":return e?s:l;default:return[]}}function KS(r,e,t,o){const i=gi(r);let s=WS(mr(r),t==="start",o);return i&&(s=s.map(l=>l+"-"+i),e&&(s=s.concat(s.map(fu)))),s}function tc(r){return r.replace(/left|right|bottom|top/g,e=>FS[e])}function jS(r){return{top:0,right:0,bottom:0,left:0,...r}}function Wg(r){return typeof r!="number"?jS(r):{top:r,right:r,bottom:r,left:r}}function nc(r){const{x:e,y:t,width:o,height:i}=r;return{width:o,height:i,top:t,left:e,right:e+o,bottom:t+i,x:e,y:t}}function dp(r,e,t){let{reference:o,floating:i}=r;const s=Wr(e),l=_f(e),a=Nf(l),c=mr(e),d=s==="y",u=o.x+o.width/2-i.width/2,f=o.y+o.height/2-i.height/2,p=o[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:o.y-i.height};break;case"bottom":h={x:u,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:f};break;case"left":h={x:o.x-i.width,y:f};break;default:h={x:o.x,y:o.y}}switch(gi(e)){case"start":h[l]-=p*(t&&d?-1:1);break;case"end":h[l]+=p*(t&&d?-1:1);break}return h}const $S=async(r,e,t)=>{const{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:l}=t,a=s.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(e));let d=await l.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:f}=dp(d,o,c),p=o,h={},m=0;for(let y=0;y<a.length;y++){const{name:b,fn:S}=a[y],{x:w,y:x,data:C,reset:M}=await S({x:u,y:f,initialPlacement:o,placement:p,strategy:i,middlewareData:h,rects:d,platform:l,elements:{reference:r,floating:e}});u=w??u,f=x??f,h={...h,[b]:{...h[b],...C}},M&&m<=50&&(m++,typeof M=="object"&&(M.placement&&(p=M.placement),M.rects&&(d=M.rects===!0?await l.getElementRects({reference:r,floating:e,strategy:i}):M.rects),{x:u,y:f}=dp(d,p,c)),y=-1)}return{x:u,y:f,placement:p,strategy:i,middlewareData:h}};async function Yi(r,e){var t;e===void 0&&(e={});const{x:o,y:i,platform:s,rects:l,elements:a,strategy:c}=r,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=pr(e,r),m=Wg(h),b=a[p?f==="floating"?"reference":"floating":f],S=nc(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(b)))==null||t?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:d,rootBoundary:u,strategy:c})),w=f==="floating"?{x:o,y:i,width:l.floating.width,height:l.floating.height}:l.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},M=nc(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:c}):w);return{top:(S.top-M.top+m.top)/C.y,bottom:(M.bottom-S.bottom+m.bottom)/C.y,left:(S.left-M.left+m.left)/C.x,right:(M.right-S.right+m.right)/C.x}}const GS=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:o,placement:i,rects:s,platform:l,elements:a,middlewareData:c}=e,{element:d,padding:u=0}=pr(r,e)||{};if(d==null)return{};const f=Wg(u),p={x:t,y:o},h=_f(i),m=Nf(h),y=await l.getDimensions(d),b=h==="y",S=b?"top":"left",w=b?"bottom":"right",x=b?"clientHeight":"clientWidth",C=s.reference[m]+s.reference[h]-p[h]-s.floating[m],M=p[h]-s.reference[h],k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let E=k?k[x]:0;(!E||!await(l.isElement==null?void 0:l.isElement(k)))&&(E=a.floating[x]||s.floating[m]);const A=C/2-M/2,N=E/2-y[m]/2-1,L=Hr(f[S],N),K=Hr(f[w],N),z=L,V=E-y[m]-K,D=E/2-y[m]/2+A,$=uu(z,D,V),W=!c.arrow&&gi(i)!=null&&D!==$&&s.reference[m]/2-(D<z?L:K)-y[m]/2<0,G=W?D<z?D-z:D-V:0;return{[h]:p[h]+G,data:{[h]:$,centerOffset:D-$-G,...W&&{alignmentOffset:G}},reset:W}}}),US=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,o;const{placement:i,middlewareData:s,rects:l,initialPlacement:a,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...b}=pr(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const S=mr(i),w=Wr(a),x=mr(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),M=p||(x||!y?[tc(a)]:HS(a)),k=m!=="none";!p&&k&&M.push(...KS(a,y,m,C));const E=[a,...M],A=await Yi(e,b),N=[];let L=((o=s.flip)==null?void 0:o.overflows)||[];if(u&&N.push(A[S]),f){const D=VS(i,l,C);N.push(A[D[0]],A[D[1]])}if(L=[...L,{placement:i,overflows:N}],!N.every(D=>D<=0)){var K,z;const D=(((K=s.flip)==null?void 0:K.index)||0)+1,$=E[D];if($)return{data:{index:D,overflows:L},reset:{placement:$}};let W=(z=L.filter(G=>G.overflows[0]<=0).sort((G,R)=>G.overflows[1]-R.overflows[1])[0])==null?void 0:z.placement;if(!W)switch(h){case"bestFit":{var V;const G=(V=L.filter(R=>{if(k){const J=Wr(R.placement);return J===w||J==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(J=>J>0).reduce((J,q)=>J+q,0)]).sort((R,J)=>R[1]-J[1])[0])==null?void 0:V[0];G&&(W=G);break}case"initialPlacement":W=a;break}if(i!==W)return{reset:{placement:W}}}return{}}}};function up(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function fp(r){return LS.some(e=>r[e]>=0)}const qS=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:o="referenceHidden",...i}=pr(r,e);switch(o){case"referenceHidden":{const s=await Yi(e,{...i,elementContext:"reference"}),l=up(s,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:fp(l)}}}case"escaped":{const s=await Yi(e,{...i,altBoundary:!0}),l=up(s,t.floating);return{data:{escapedOffsets:l,escaped:fp(l)}}}default:return{}}}}};async function JS(r,e){const{placement:t,platform:o,elements:i}=r,s=await(o.isRTL==null?void 0:o.isRTL(i.floating)),l=mr(t),a=gi(t),c=Wr(t)==="y",d=["left","top"].includes(l)?-1:1,u=s&&c?-1:1,f=pr(e,r);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),c?{x:h*u,y:p*d}:{x:p*d,y:h*u}}const YS=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,o;const{x:i,y:s,placement:l,middlewareData:a}=e,c=await JS(e,r);return l===((t=a.offset)==null?void 0:t.placement)&&(o=a.arrow)!=null&&o.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:l}}}}},XS=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:o,placement:i}=e,{mainAxis:s=!0,crossAxis:l=!1,limiter:a={fn:b=>{let{x:S,y:w}=b;return{x:S,y:w}}},...c}=pr(r,e),d={x:t,y:o},u=await Yi(e,c),f=Wr(mr(i)),p=Pf(f);let h=d[p],m=d[f];if(s){const b=p==="y"?"top":"left",S=p==="y"?"bottom":"right",w=h+u[b],x=h-u[S];h=uu(w,h,x)}if(l){const b=f==="y"?"top":"left",S=f==="y"?"bottom":"right",w=m+u[b],x=m-u[S];m=uu(w,m,x)}const y=a.fn({...e,[p]:h,[f]:m});return{...y,data:{x:y.x-t,y:y.y-o,enabled:{[p]:s,[f]:l}}}}}},ZS=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:o,placement:i,rects:s,middlewareData:l}=e,{offset:a=0,mainAxis:c=!0,crossAxis:d=!0}=pr(r,e),u={x:t,y:o},f=Wr(i),p=Pf(f);let h=u[p],m=u[f];const y=pr(a,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const x=p==="y"?"height":"width",C=s.reference[p]-s.floating[x]+b.mainAxis,M=s.reference[p]+s.reference[x]-b.mainAxis;h<C?h=C:h>M&&(h=M)}if(d){var S,w;const x=p==="y"?"width":"height",C=["top","left"].includes(mr(i)),M=s.reference[f]-s.floating[x]+(C&&((S=l.offset)==null?void 0:S[f])||0)+(C?0:b.crossAxis),k=s.reference[f]+s.reference[x]+(C?0:((w=l.offset)==null?void 0:w[f])||0)-(C?b.crossAxis:0);m<M?m=M:m>k&&(m=k)}return{[p]:h,[f]:m}}}},QS=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,o;const{placement:i,rects:s,platform:l,elements:a}=e,{apply:c=()=>{},...d}=pr(r,e),u=await Yi(e,d),f=mr(i),p=gi(i),h=Wr(i)==="y",{width:m,height:y}=s.floating;let b,S;f==="top"||f==="bottom"?(b=f,S=p===(await(l.isRTL==null?void 0:l.isRTL(a.floating))?"start":"end")?"left":"right"):(S=f,b=p==="end"?"top":"bottom");const w=y-u.top-u.bottom,x=m-u.left-u.right,C=Hr(y-u[b],w),M=Hr(m-u[S],x),k=!e.middlewareData.shift;let E=C,A=M;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=x),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(E=w),k&&!p){const L=pn(u.left,0),K=pn(u.right,0),z=pn(u.top,0),V=pn(u.bottom,0);h?A=m-2*(L!==0||K!==0?L+K:pn(u.left,u.right)):E=y-2*(z!==0||V!==0?z+V:pn(u.top,u.bottom))}await c({...e,availableWidth:A,availableHeight:E});const N=await l.getDimensions(a.floating);return m!==N.width||y!==N.height?{reset:{rects:!0}}:{}}}};function Jc(){return typeof window<"u"}function yi(r){return Kg(r)?(r.nodeName||"").toLowerCase():"#document"}function gn(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Un(r){var e;return(e=(Kg(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Kg(r){return Jc()?r instanceof Node||r instanceof gn(r).Node:!1}function Nn(r){return Jc()?r instanceof Element||r instanceof gn(r).Element:!1}function Kn(r){return Jc()?r instanceof HTMLElement||r instanceof gn(r).HTMLElement:!1}function hp(r){return!Jc()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof gn(r).ShadowRoot}function Ql(r){const{overflow:e,overflowX:t,overflowY:o,display:i}=_n(r);return/auto|scroll|overlay|hidden|clip/.test(e+o+t)&&!["inline","contents"].includes(i)}function ek(r){return["table","td","th"].includes(yi(r))}function Yc(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function If(r){const e=Df(),t=Nn(r)?_n(r):r;return["transform","translate","scale","rotate","perspective"].some(o=>t[o]?t[o]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(o=>(t.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(t.contain||"").includes(o))}function tk(r){let e=Kr(r);for(;Kn(e)&&!li(e);){if(If(e))return e;if(Yc(e))return null;e=Kr(e)}return null}function Df(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function li(r){return["html","body","#document"].includes(yi(r))}function _n(r){return gn(r).getComputedStyle(r)}function Xc(r){return Nn(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Kr(r){if(yi(r)==="html")return r;const e=r.assignedSlot||r.parentNode||hp(r)&&r.host||Un(r);return hp(e)?e.host:e}function jg(r){const e=Kr(r);return li(e)?r.ownerDocument?r.ownerDocument.body:r.body:Kn(e)&&Ql(e)?e:jg(e)}function Xi(r,e,t){var o;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=jg(r),s=i===((o=r.ownerDocument)==null?void 0:o.body),l=gn(i);if(s){const a=hu(l);return e.concat(l,l.visualViewport||[],Ql(i)?i:[],a&&t?Xi(a):[])}return e.concat(i,Xi(i,[],t))}function hu(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function $g(r){const e=_n(r);let t=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=Kn(r),s=i?r.offsetWidth:t,l=i?r.offsetHeight:o,a=ec(t)!==s||ec(o)!==l;return a&&(t=s,o=l),{width:t,height:o,$:a}}function Rf(r){return Nn(r)?r:r.contextElement}function jo(r){const e=Rf(r);if(!Kn(e))return Hn(1);const t=e.getBoundingClientRect(),{width:o,height:i,$:s}=$g(e);let l=(s?ec(t.width):t.width)/o,a=(s?ec(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!a||!Number.isFinite(a))&&(a=1),{x:l,y:a}}const nk=Hn(0);function Gg(r){const e=gn(r);return!Df()||!e.visualViewport?nk:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rk(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==gn(r)?!1:e}function yo(r,e,t,o){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=Rf(r);let l=Hn(1);e&&(o?Nn(o)&&(l=jo(o)):l=jo(r));const a=rk(s,t,o)?Gg(s):Hn(0);let c=(i.left+a.x)/l.x,d=(i.top+a.y)/l.y,u=i.width/l.x,f=i.height/l.y;if(s){const p=gn(s),h=o&&Nn(o)?gn(o):o;let m=p,y=hu(m);for(;y&&o&&h!==m;){const b=jo(y),S=y.getBoundingClientRect(),w=_n(y),x=S.left+(y.clientLeft+parseFloat(w.paddingLeft))*b.x,C=S.top+(y.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,f*=b.y,c+=x,d+=C,m=gn(y),y=hu(m)}}return nc({width:u,height:f,x:c,y:d})}function zf(r,e){const t=Xc(r).scrollLeft;return e?e.left+t:yo(Un(r)).left+t}function Ug(r,e,t){t===void 0&&(t=!1);const o=r.getBoundingClientRect(),i=o.left+e.scrollLeft-(t?0:zf(r,o)),s=o.top+e.scrollTop;return{x:i,y:s}}function ok(r){let{elements:e,rect:t,offsetParent:o,strategy:i}=r;const s=i==="fixed",l=Un(o),a=e?Yc(e.floating):!1;if(o===l||a&&s)return t;let c={scrollLeft:0,scrollTop:0},d=Hn(1);const u=Hn(0),f=Kn(o);if((f||!f&&!s)&&((yi(o)!=="body"||Ql(l))&&(c=Xc(o)),Kn(o))){const h=yo(o);d=jo(o),u.x=h.x+o.clientLeft,u.y=h.y+o.clientTop}const p=l&&!f&&!s?Ug(l,c,!0):Hn(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:t.y*d.y-c.scrollTop*d.y+u.y+p.y}}function ik(r){return Array.from(r.getClientRects())}function sk(r){const e=Un(r),t=Xc(r),o=r.ownerDocument.body,i=pn(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),s=pn(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let l=-t.scrollLeft+zf(r);const a=-t.scrollTop;return _n(o).direction==="rtl"&&(l+=pn(e.clientWidth,o.clientWidth)-i),{width:i,height:s,x:l,y:a}}function lk(r,e){const t=gn(r),o=Un(r),i=t.visualViewport;let s=o.clientWidth,l=o.clientHeight,a=0,c=0;if(i){s=i.width,l=i.height;const d=Df();(!d||d&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:l,x:a,y:c}}function ak(r,e){const t=yo(r,!0,e==="fixed"),o=t.top+r.clientTop,i=t.left+r.clientLeft,s=Kn(r)?jo(r):Hn(1),l=r.clientWidth*s.x,a=r.clientHeight*s.y,c=i*s.x,d=o*s.y;return{width:l,height:a,x:c,y:d}}function pp(r,e,t){let o;if(e==="viewport")o=lk(r,t);else if(e==="document")o=sk(Un(r));else if(Nn(e))o=ak(e,t);else{const i=Gg(r);o={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return nc(o)}function qg(r,e){const t=Kr(r);return t===e||!Nn(t)||li(t)?!1:_n(t).position==="fixed"||qg(t,e)}function ck(r,e){const t=e.get(r);if(t)return t;let o=Xi(r,[],!1).filter(a=>Nn(a)&&yi(a)!=="body"),i=null;const s=_n(r).position==="fixed";let l=s?Kr(r):r;for(;Nn(l)&&!li(l);){const a=_n(l),c=If(l);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ql(l)&&!c&&qg(r,l))?o=o.filter(u=>u!==l):i=a,l=Kr(l)}return e.set(r,o),o}function dk(r){let{element:e,boundary:t,rootBoundary:o,strategy:i}=r;const l=[...t==="clippingAncestors"?Yc(e)?[]:ck(e,this._c):[].concat(t),o],a=l[0],c=l.reduce((d,u)=>{const f=pp(e,u,i);return d.top=pn(f.top,d.top),d.right=Hr(f.right,d.right),d.bottom=Hr(f.bottom,d.bottom),d.left=pn(f.left,d.left),d},pp(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function uk(r){const{width:e,height:t}=$g(r);return{width:e,height:t}}function fk(r,e,t){const o=Kn(e),i=Un(e),s=t==="fixed",l=yo(r,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=Hn(0);if(o||!o&&!s)if((yi(e)!=="body"||Ql(i))&&(a=Xc(e)),o){const p=yo(e,!0,s,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else i&&(c.x=zf(i));const d=i&&!o&&!s?Ug(i,a):Hn(0),u=l.left+a.scrollLeft-c.x-d.x,f=l.top+a.scrollTop-c.y-d.y;return{x:u,y:f,width:l.width,height:l.height}}function xd(r){return _n(r).position==="static"}function mp(r,e){if(!Kn(r)||_n(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Un(r)===t&&(t=t.ownerDocument.body),t}function Jg(r,e){const t=gn(r);if(Yc(r))return t;if(!Kn(r)){let i=Kr(r);for(;i&&!li(i);){if(Nn(i)&&!xd(i))return i;i=Kr(i)}return t}let o=mp(r,e);for(;o&&ek(o)&&xd(o);)o=mp(o,e);return o&&li(o)&&xd(o)&&!If(o)?t:o||tk(r)||t}const hk=async function(r){const e=this.getOffsetParent||Jg,t=this.getDimensions,o=await t(r.floating);return{reference:fk(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function pk(r){return _n(r).direction==="rtl"}const mk={convertOffsetParentRelativeRectToViewportRelativeRect:ok,getDocumentElement:Un,getClippingRect:dk,getOffsetParent:Jg,getElementRects:hk,getClientRects:ik,getDimensions:uk,getScale:jo,isElement:Nn,isRTL:pk};function Yg(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function gk(r,e){let t=null,o;const i=Un(r);function s(){var a;clearTimeout(o),(a=t)==null||a.disconnect(),t=null}function l(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const d=r.getBoundingClientRect(),{left:u,top:f,width:p,height:h}=d;if(a||e(),!p||!h)return;const m=fa(f),y=fa(i.clientWidth-(u+p)),b=fa(i.clientHeight-(f+h)),S=fa(u),x={rootMargin:-m+"px "+-y+"px "+-b+"px "+-S+"px",threshold:pn(0,Hr(1,c))||1};let C=!0;function M(k){const E=k[0].intersectionRatio;if(E!==c){if(!C)return l();E?l(!1,E):o=setTimeout(()=>{l(!1,1e-7)},1e3)}E===1&&!Yg(d,r.getBoundingClientRect())&&l(),C=!1}try{t=new IntersectionObserver(M,{...x,root:i.ownerDocument})}catch{t=new IntersectionObserver(M,x)}t.observe(r)}return l(!0),s}function yk(r,e,t,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,d=Rf(r),u=i||s?[...d?Xi(d):[],...Xi(e)]:[];u.forEach(S=>{i&&S.addEventListener("scroll",t,{passive:!0}),s&&S.addEventListener("resize",t)});const f=d&&a?gk(d,t):null;let p=-1,h=null;l&&(h=new ResizeObserver(S=>{let[w]=S;w&&w.target===d&&h&&(h.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(e)})),t()}),d&&!c&&h.observe(d),h.observe(e));let m,y=c?yo(r):null;c&&b();function b(){const S=yo(r);y&&!Yg(y,S)&&t(),y=S,m=requestAnimationFrame(b)}return t(),()=>{var S;u.forEach(w=>{i&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),f==null||f(),(S=h)==null||S.disconnect(),h=null,c&&cancelAnimationFrame(m)}}const vk=YS,bk=XS,wk=US,xk=QS,Sk=qS,kk=GS,Mk=ZS,Ck=(r,e,t)=>{const o=new Map,i={platform:mk,...t},s={...i.platform,_c:o};return $S(r,e,{...i,platform:s})};function Ti(r){return typeof r=="function"?r():r}function Xg(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function gp(r,e){const t=Xg(r);return Math.round(e*t)/t}function rc(r){return{[`--bits-${r}-content-transform-origin`]:"var(--bits-floating-transform-origin)",[`--bits-${r}-content-available-width`]:"var(--bits-floating-available-width)",[`--bits-${r}-content-available-height`]:"var(--bits-floating-available-height)",[`--bits-${r}-anchor-width`]:"var(--bits-floating-anchor-width)",[`--bits-${r}-anchor-height`]:"var(--bits-floating-anchor-height)"}}function Ok(r){const e=r.whileElementsMounted,t=F(()=>Ti(r.open)??!0),o=F(()=>Ti(r.middleware)),i=F(()=>Ti(r.transform)??!0),s=F(()=>Ti(r.placement)??"bottom"),l=F(()=>Ti(r.strategy)??"absolute"),a=r.reference;let c=ue(0),d=ue(0);const u=_(null);let f=ue(Bt(g(l))),p=ue(Bt(g(s))),h=ue(Bt({})),m=ue(!1);const y=F(()=>{const M={position:g(f),left:"0",top:"0"};if(!u.current)return M;const k=gp(u.current,g(c)),E=gp(u.current,g(d));return g(i)?{...M,transform:`translate(${k}px, ${E}px)`,...Xg(u.current)>=1.5&&{willChange:"transform"}}:{position:g(f),left:`${k}px`,top:`${E}px`}});let b;function S(){a.current===null||u.current===null||Ck(a.current,u.current,{middleware:g(o),placement:g(s),strategy:g(l)}).then(M=>{I(c,M.x,!0),I(d,M.y,!0),I(f,M.strategy,!0),I(p,M.placement,!0),I(h,M.middlewareData,!0),I(m,!0)})}function w(){typeof b=="function"&&(b(),b=void 0)}function x(){if(w(),e===void 0){S();return}a.current===null||u.current===null||(b=e(a.current,u.current,S))}function C(){g(t)||I(m,!1)}return rt(S),rt(x),rt(C),rt(()=>w),{floating:u,reference:a,get strategy(){return g(f)},get placement(){return g(p)},get middlewareData(){return g(h)},get isPositioned(){return g(m)},get floatingStyles(){return g(y)},get update(){return S}}}const Tk={top:"bottom",right:"left",bottom:"top",left:"right"};class Ak{constructor(){oe(this,"anchorNode",_(null));oe(this,"customAnchorNode",_(null));oe(this,"triggerNode",_(null));rt(()=>{this.customAnchorNode.current?typeof this.customAnchorNode.current=="string"?this.anchorNode.current=document.querySelector(this.customAnchorNode.current):this.anchorNode.current=this.customAnchorNode.current:this.anchorNode.current=this.triggerNode.current})}}var Ls,Rc,Fs,zc,Bs,Lc,Vs,Hs,Ws,Ks,js,$s,Gs,Us,qs,Js,Ys,Xs,Zs,Qs,el,tl,nl,rl;class Ek{constructor(e,t){oe(this,"opts");oe(this,"root");oe(this,"contentRef",_(null));oe(this,"wrapperRef",_(null));oe(this,"arrowRef",_(null));oe(this,"arrowId",_(ht()));H(this,Ls,F(()=>{if(typeof this.opts.style=="string")return Ri(this.opts.style);if(!this.opts.style)return{}}));H(this,Rc);H(this,Fs,new X0(()=>this.arrowRef.current??void 0));H(this,zc,F(()=>{var e;return((e=T(this,Fs))==null?void 0:e.width)??0}));H(this,Bs,F(()=>{var e;return((e=T(this,Fs))==null?void 0:e.height)??0}));H(this,Lc,F(()=>{var e;return((e=this.opts.side)==null?void 0:e.current)+(this.opts.align.current!=="center"?`-${this.opts.align.current}`:"")}));H(this,Vs,F(()=>Array.isArray(this.opts.collisionBoundary.current)?this.opts.collisionBoundary.current:[this.opts.collisionBoundary.current]));H(this,Hs,F(()=>g(T(this,Vs)).length>0));H(this,Ws,F(()=>({padding:this.opts.collisionPadding.current,boundary:g(T(this,Vs)).filter(g1),altBoundary:this.hasExplicitBoundaries})));H(this,Ks,ue(void 0));H(this,js,ue(void 0));H(this,$s,ue(void 0));H(this,Gs,ue(void 0));H(this,Us,F(()=>[vk({mainAxis:this.opts.sideOffset.current+g(T(this,Bs)),alignmentAxis:this.opts.alignOffset.current}),this.opts.avoidCollisions.current&&bk({mainAxis:!0,crossAxis:!1,limiter:this.opts.sticky.current==="partial"?Mk():void 0,...this.detectOverflowOptions}),this.opts.avoidCollisions.current&&wk({...this.detectOverflowOptions}),xk({...this.detectOverflowOptions,apply:({rects:e,availableWidth:t,availableHeight:o})=>{const{width:i,height:s}=e.reference;I(T(this,Ks),t,!0),I(T(this,js),o,!0),I(T(this,$s),i,!0),I(T(this,Gs),s,!0)}}),this.arrowRef.current&&kk({element:this.arrowRef.current,padding:this.opts.arrowPadding.current}),Rk({arrowWidth:g(T(this,zc)),arrowHeight:g(T(this,Bs))}),this.opts.hideWhenDetached.current&&Sk({strategy:"referenceHidden",...this.detectOverflowOptions})].filter(Boolean)));oe(this,"floating");H(this,qs,F(()=>zk(this.floating.placement)));H(this,Js,F(()=>Lk(this.floating.placement)));H(this,Ys,F(()=>{var e;return((e=this.floating.middlewareData.arrow)==null?void 0:e.x)??0}));H(this,Xs,F(()=>{var e;return((e=this.floating.middlewareData.arrow)==null?void 0:e.y)??0}));H(this,Zs,F(()=>{var e;return((e=this.floating.middlewareData.arrow)==null?void 0:e.centerOffset)!==0}));H(this,Qs,ue());H(this,el,F(()=>Tk[this.placedSide]));H(this,tl,F(()=>{var e,t,o;return{id:this.opts.wrapperId.current,"data-bits-floating-content-wrapper":"",style:{...this.floating.floatingStyles,transform:this.floating.isPositioned?this.floating.floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:this.contentZIndex,"--bits-floating-transform-origin":`${(e=this.floating.middlewareData.transformOrigin)==null?void 0:e.x} ${(t=this.floating.middlewareData.transformOrigin)==null?void 0:t.y}`,"--bits-floating-available-width":`${g(T(this,Ks))}px`,"--bits-floating-available-height":`${g(T(this,js))}px`,"--bits-floating-anchor-width":`${g(T(this,$s))}px`,"--bits-floating-anchor-height":`${g(T(this,Gs))}px`,...((o=this.floating.middlewareData.hide)==null?void 0:o.referenceHidden)&&{visibility:"hidden","pointer-events":"none"},...g(T(this,Ls))},dir:this.opts.dir.current}}));H(this,nl,F(()=>({"data-side":this.placedSide,"data-align":this.placedAlign,style:wf({...g(T(this,Ls))})})));H(this,rl,F(()=>({position:"absolute",left:this.arrowX?`${this.arrowX}px`:void 0,top:this.arrowY?`${this.arrowY}px`:void 0,[this.arrowBaseSide]:0,"transform-origin":{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[this.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[this.placedSide],visibility:this.cannotCenterArrow?"hidden":void 0})));this.opts=e,this.root=t,e.customAnchor&&(this.root.customAnchorNode.current=e.customAnchor.current),Qe(()=>e.customAnchor.current,o=>{this.root.customAnchorNode.current=o}),st({id:this.opts.wrapperId,ref:this.wrapperRef,deps:()=>this.opts.enabled.current}),st({id:this.opts.id,ref:this.contentRef,deps:()=>this.opts.enabled.current}),this.floating=Ok({strategy:()=>this.opts.strategy.current,placement:()=>g(T(this,Lc)),middleware:()=>this.middleware,reference:this.root.anchorNode,whileElementsMounted:(...o)=>{var s;return yk(...o,{animationFrame:((s=T(this,Rc))==null?void 0:s.current)==="always"})},open:()=>this.opts.enabled.current}),rt(()=>{var o;this.floating.isPositioned&&((o=this.opts.onPlaced)==null||o.current())}),Qe(()=>this.contentRef.current,o=>{o&&(this.contentZIndex=window.getComputedStyle(o).zIndex)}),rt(()=>{this.floating.floating.current=this.wrapperRef.current})}get hasExplicitBoundaries(){return g(T(this,Hs))}set hasExplicitBoundaries(e){I(T(this,Hs),e)}get detectOverflowOptions(){return g(T(this,Ws))}set detectOverflowOptions(e){I(T(this,Ws),e)}get middleware(){return g(T(this,Us))}set middleware(e){I(T(this,Us),e)}get placedSide(){return g(T(this,qs))}set placedSide(e){I(T(this,qs),e)}get placedAlign(){return g(T(this,Js))}set placedAlign(e){I(T(this,Js),e)}get arrowX(){return g(T(this,Ys))}set arrowX(e){I(T(this,Ys),e)}get arrowY(){return g(T(this,Xs))}set arrowY(e){I(T(this,Xs),e)}get cannotCenterArrow(){return g(T(this,Zs))}set cannotCenterArrow(e){I(T(this,Zs),e)}get contentZIndex(){return g(T(this,Qs))}set contentZIndex(e){I(T(this,Qs),e,!0)}get arrowBaseSide(){return g(T(this,el))}set arrowBaseSide(e){I(T(this,el),e)}get wrapperProps(){return g(T(this,tl))}set wrapperProps(e){I(T(this,tl),e)}get props(){return g(T(this,nl))}set props(e){I(T(this,nl),e)}get arrowStyle(){return g(T(this,rl))}set arrowStyle(e){I(T(this,rl),e)}}Ls=new WeakMap,Rc=new WeakMap,Fs=new WeakMap,zc=new WeakMap,Bs=new WeakMap,Lc=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,Ws=new WeakMap,Ks=new WeakMap,js=new WeakMap,$s=new WeakMap,Gs=new WeakMap,Us=new WeakMap,qs=new WeakMap,Js=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Zs=new WeakMap,Qs=new WeakMap,el=new WeakMap,tl=new WeakMap,nl=new WeakMap,rl=new WeakMap;class Pk{constructor(e,t){oe(this,"opts");oe(this,"root");oe(this,"ref",_(null));this.opts=e,this.root=t,e.virtualEl&&e.virtualEl.current?t.triggerNode=_.from(e.virtualEl.current):st({id:e.id,ref:this.ref,onRefChange:o=>{t.triggerNode.current=o}})}}const Lf=new bn("Floating.Root"),Nk=new bn("Floating.Content");function _k(){return Lf.set(new Ak)}function Ik(r){return Nk.set(new Ek(r,Lf.get()))}function Dk(r){return new Pk(r,Lf.get())}function Rk(r){return{name:"transformOrigin",options:r,fn(e){var b,S,w;const{placement:t,rects:o,middlewareData:i}=e,l=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=l?0:r.arrowWidth,c=l?0:r.arrowHeight,[d,u]=Ff(t),f={start:"0%",center:"50%",end:"100%"}[u],p=(((S=i.arrow)==null?void 0:S.x)??0)+a/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+c/2;let m="",y="";return d==="bottom"?(m=l?f:`${p}px`,y=`${-c}px`):d==="top"?(m=l?f:`${p}px`,y=`${o.floating.height+c}px`):d==="right"?(m=`${-c}px`,y=l?f:`${h}px`):d==="left"&&(m=`${o.floating.width+c}px`,y=l?f:`${h}px`),{data:{x:m,y}}}}}function Ff(r){const[e,t="center"]=r.split("-");return[e,t]}function zk(r){return Ff(r)[0]}function Lk(r){return Ff(r)[1]}function Zg(r,e){Y(e,!0),_k();var t=B(),o=P(t);ce(o,()=>e.children??Re),O(r,t),X()}function Qg(r,e=1e4,t=tt){let o=null,i=ue(Bt(r));function s(){return window.setTimeout(()=>{I(i,r,!0),t(r)},e)}return rt(()=>()=>{o&&clearTimeout(o)}),_.with(()=>g(i),l=>{I(i,l,!0),t(l),o&&clearTimeout(o),o=s()})}function Fk(r){const e=Qg("",1e3),t=l=>l.focus(),o=()=>document.activeElement;function i(l,a){var h;if(!a.length)return;e.current=e.current+l;const c=o(),d=((h=a.find(m=>m===c))==null?void 0:h.textContent)??"",u=a.map(m=>m.textContent??""),f=Hg(u,e.current,d),p=a.find(m=>m.textContent===f);return p&&t(p),p}function s(){e.current=""}return{search:e,handleTypeaheadSearch:i,resetTypeahead:s}}function ey(r,e){Y(e,!0),Dk({id:_.with(()=>e.id),virtualEl:_.with(()=>e.virtualEl)});var t=B(),o=P(t);ce(o,()=>e.children??Re),O(r,t),X()}function Bk(r,e){Y(e,!0);let t=v(e,"side",3,"bottom"),o=v(e,"sideOffset",3,0),i=v(e,"align",3,"center"),s=v(e,"alignOffset",3,0),l=v(e,"arrowPadding",3,0),a=v(e,"avoidCollisions",3,!0),c=v(e,"collisionBoundary",19,()=>[]),d=v(e,"collisionPadding",3,0),u=v(e,"hideWhenDetached",3,!1),f=v(e,"onPlaced",3,()=>{}),p=v(e,"sticky",3,"partial"),h=v(e,"updatePositionStrategy",3,"optimized"),m=v(e,"strategy",3,"fixed"),y=v(e,"dir",3,"ltr"),b=v(e,"style",19,()=>({})),S=v(e,"wrapperId",19,ht),w=v(e,"customAnchor",3,null);const x=Ik({side:_.with(()=>t()),sideOffset:_.with(()=>o()),align:_.with(()=>i()),alignOffset:_.with(()=>s()),id:_.with(()=>e.id),arrowPadding:_.with(()=>l()),avoidCollisions:_.with(()=>a()),collisionBoundary:_.with(()=>c()),collisionPadding:_.with(()=>d()),hideWhenDetached:_.with(()=>u()),onPlaced:_.with(()=>f()),sticky:_.with(()=>p()),updatePositionStrategy:_.with(()=>h()),strategy:_.with(()=>m()),dir:_.with(()=>y()),style:_.with(()=>b()),enabled:_.with(()=>e.enabled),wrapperId:_.with(()=>S()),customAnchor:_.with(()=>w())}),C=F(()=>Xe(x.wrapperProps,{style:{pointerEvents:"auto"}}));var M=B(),k=P(M);ce(k,()=>e.content??Re,()=>({props:x.props,wrapperProps:g(C)})),O(r,M),X()}function Vk(r,e){Y(e,!0),Rn(()=>{var i;(i=e.onPlaced)==null||i.call(e)});var t=B(),o=P(t);ce(o,()=>e.content??Re,()=>({props:{},wrapperProps:{}})),O(r,t),X()}const Hk="data-separator-root";var ol;class Wk{constructor(e){oe(this,"opts");H(this,ol,F(()=>({id:this.opts.id.current,role:this.opts.decorative.current?"none":"separator","aria-orientation":this.opts.orientation.current,"aria-hidden":t1(this.opts.decorative.current),"data-orientation":this.opts.orientation.current,[Hk]:""})));this.opts=e,st(e)}get props(){return g(T(this,ol))}set props(e){I(T(this,ol),e)}}ol=new WeakMap;function Kk(r){return new Wk(r)}var jk=U("<div><!></div>");function $k(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"decorative",3,!1),s=v(e,"orientation",3,"horizontal"),l=Ae(e,["$$slots","$$events","$$legacy","id","ref","child","children","decorative","orientation"]);const a=Kk({ref:_.with(()=>o(),h=>o(h)),id:_.with(()=>t()),decorative:_.with(()=>i()),orientation:_.with(()=>s())}),c=F(()=>Xe(l,a.props));var d=B(),u=P(d);{var f=h=>{var m=B(),y=P(m);ce(y,()=>e.child,()=>({props:g(c)})),O(h,m)},p=h=>{var m=jk();let y;var b=we(m);ce(b,()=>e.children??Re),ye(m),Te(()=>y=He(m,y,{...g(c)})),O(h,m)};Pe(u,h=>{e.child?h(f):h(p,!1)})}O(r,d),X()}function Gk(r,e){let t=v(e,"isStatic",3,!1),o=Ae(e,["$$slots","$$events","$$legacy","content","isStatic","onPlaced"]);var i=B(),s=P(i);{var l=c=>{Vk(c,{get content(){return e.content},get onPlaced(){return e.onPlaced}})},a=c=>{Bk(c,ae({get content(){return e.content},get onPlaced(){return e.onPlaced}},()=>o))};Pe(s,c=>{t()?c(l):c(a,!1)})}O(r,i)}var Uk=U("<!> <!>",1);function ty(r,e){Y(e,!0);let t=v(e,"interactOutsideBehavior",3,"close"),o=v(e,"trapFocus",3,!0),i=v(e,"isValidEvent",3,()=>!1),s=v(e,"customAnchor",3,null),l=v(e,"isStatic",3,!1),a=Ae(e,["$$slots","$$events","$$legacy","popper","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","enabled"]);Gk(r,{get isStatic(){return l()},get id(){return e.id},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return s()},get enabled(){return e.enabled},content:(d,u)=>{let f=()=>u==null?void 0:u().props,p=()=>u==null?void 0:u().wrapperProps;var h=Uk(),m=P(h);{var y=x=>{Qa(x,{get preventScroll(){return e.preventScroll}})},b=(x,C)=>{{var M=k=>{Qa(k,{get preventScroll(){return e.preventScroll}})};Pe(x,k=>{e.forceMount||k(M)},C)}};Pe(m,x=>{e.forceMount&&e.enabled?x(y):x(b,!1)})}var S=ne(m,2);const w=F(()=>e.enabled&&o());zg(S,{get id(){return e.id},get onOpenAutoFocus(){return e.onOpenAutoFocus},get onCloseAutoFocus(){return e.onCloseAutoFocus},get loop(){return e.loop},get trapFocus(){return g(w)},get forceMount(){return e.forceMount},focusScope:(C,M)=>{let k=()=>M==null?void 0:M().props;Cg(C,{get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get enabled(){return e.enabled},children:(E,A)=>{Mg(E,{get id(){return e.id},get onInteractOutside(){return e.onInteractOutside},get onFocusOutside(){return e.onFocusOutside},get interactOutsideBehavior(){return t()},get isValidEvent(){return i()},get enabled(){return e.enabled},children:(L,K)=>{let z=()=>K==null?void 0:K().props;Fg(L,{get id(){return e.id},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get enabled(){return e.enabled},children:(V,D)=>{var $=B(),W=P($),G=De(()=>({props:Xe(a,f(),z(),k(),{style:{pointerEvents:"auto"}}),wrapperProps:p()}));ce(W,()=>e.popper??Re,()=>g(G)),O(V,$)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{focusScope:!0}}),O(d,h)},$$slots:{content:!0}}),X()}function ny(r,e){let t=v(e,"interactOutsideBehavior",3,"close"),o=v(e,"trapFocus",3,!0),i=v(e,"isValidEvent",3,()=>!1),s=v(e,"customAnchor",3,null),l=v(e,"isStatic",3,!1),a=Ae(e,["$$slots","$$events","$$legacy","popper","present","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic"]);Tf(r,ae({get id(){return e.id},get present(){return e.present}},()=>a,{presence:d=>{ty(d,ae({get popper(){return e.popper},get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get id(){return e.id},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get preventScroll(){return e.preventScroll},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return s()},get isStatic(){return l()},get enabled(){return e.present},get onInteractOutside(){return e.onInteractOutside},get onCloseAutoFocus(){return e.onCloseAutoFocus},get onOpenAutoFocus(){return e.onOpenAutoFocus},get interactOutsideBehavior(){return t()},get loop(){return e.loop},get trapFocus(){return o()},get isValidEvent(){return i()},get onFocusOutside(){return e.onFocusOutside},forceMount:!1},()=>a))},$$slots:{presence:!0}}))}function ry(r,e){let t=v(e,"interactOutsideBehavior",3,"close"),o=v(e,"trapFocus",3,!0),i=v(e,"isValidEvent",3,()=>!1),s=v(e,"customAnchor",3,null),l=v(e,"isStatic",3,!1),a=Ae(e,["$$slots","$$events","$$legacy","popper","onEscapeKeydown","escapeKeydownBehavior","preventOverflowTextSelection","id","onPointerDown","onPointerUp","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","strategy","dir","preventScroll","wrapperId","style","onPlaced","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","onFocusOutside","interactOutsideBehavior","loop","trapFocus","isValidEvent","customAnchor","isStatic","enabled"]);ty(r,ae({get popper(){return e.popper},get onEscapeKeydown(){return e.onEscapeKeydown},get escapeKeydownBehavior(){return e.escapeKeydownBehavior},get preventOverflowTextSelection(){return e.preventOverflowTextSelection},get id(){return e.id},get onPointerDown(){return e.onPointerDown},get onPointerUp(){return e.onPointerUp},get side(){return e.side},get sideOffset(){return e.sideOffset},get align(){return e.align},get alignOffset(){return e.alignOffset},get arrowPadding(){return e.arrowPadding},get avoidCollisions(){return e.avoidCollisions},get collisionBoundary(){return e.collisionBoundary},get collisionPadding(){return e.collisionPadding},get sticky(){return e.sticky},get hideWhenDetached(){return e.hideWhenDetached},get updatePositionStrategy(){return e.updatePositionStrategy},get strategy(){return e.strategy},get dir(){return e.dir},get preventScroll(){return e.preventScroll},get wrapperId(){return e.wrapperId},get style(){return e.style},get onPlaced(){return e.onPlaced},get customAnchor(){return s()},get isStatic(){return l()},get enabled(){return e.enabled},get onInteractOutside(){return e.onInteractOutside},get onCloseAutoFocus(){return e.onCloseAutoFocus},get onOpenAutoFocus(){return e.onOpenAutoFocus},get interactOutsideBehavior(){return t()},get loop(){return e.loop},get trapFocus(){return o()},get isValidEvent(){return i()},get onFocusOutside(){return e.onFocusOutside}},()=>a,{forceMount:!0}))}function oc(r,e){Y(e,!0);let t=v(e,"mounted",15,!1),o=v(e,"onMountedChange",3,tt);Q0(()=>(t(!0),o()(!0),()=>{t(!1),o()(!1)})),X()}function qk(r,e){let t=r.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function Jk(r,e){let t=r.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}const Yk="data-command-root",Xk="data-command-list",Zk="data-command-input",Qk="data-command-empty",oy="data-command-group",iy="data-command-group-items",sy="data-command-group-heading",ly="data-command-item",eM="data-command-input-label",to="data-value",Ai=`[${oy}]`,Sd=`[${iy}]`,tM=`[${sy}]`,ay=`[${ly}]`,kd=`${ay}:not([aria-disabled="true"])`,Co=new bn("Command.Root"),nM=new bn("Command.List"),ea=new bn("Command.Group"),yp={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};var ti,il,sl,ll,al,cl,dl,ul,je,cy,Ra,pu,za,zi,La,Do,dy,mu,gu,yu,fl;class rM{constructor(e){H(this,je);oe(this,"opts");H(this,ti,!1);oe(this,"sortAfterTick",!1);oe(this,"sortAndFilterAfterTick",!1);oe(this,"allItems",new Set);oe(this,"allGroups",new Map);oe(this,"allIds",new Map);H(this,il,ue(0));H(this,sl,ue(null));H(this,ll,ue(null));H(this,al,ue(null));H(this,cl,ue(yp));H(this,dl,ue(Bt(yp)));H(this,ul,ue(!1));H(this,fl,F(()=>({id:this.opts.id.current,role:"application",[Yk]:"",tabindex:-1,onkeydown:this.onkeydown})));this.opts=e;const t={...this._commandState,value:this.opts.value.current??""};this._commandState=t,this.commandState=t,st(e),this.onkeydown=this.onkeydown.bind(this),rt(()=>{this._commandState.search!==""&&(this.searchHasHadValue=!0)})}get key(){return g(T(this,il))}set key(e){I(T(this,il),e,!0)}get viewportNode(){return g(T(this,sl))}set viewportNode(e){I(T(this,sl),e,!0)}get inputNode(){return g(T(this,ll))}set inputNode(e){I(T(this,ll),e,!0)}get labelNode(){return g(T(this,al))}set labelNode(e){I(T(this,al),e,!0)}get commandState(){return g(T(this,cl))}set commandState(e){I(T(this,cl),e)}get _commandState(){return g(T(this,dl))}set _commandState(e){I(T(this,dl),e,!0)}get searchHasHadValue(){return g(T(this,ul))}set searchHasHadValue(e){I(T(this,ul),e,!0)}setState(e,t,o){Object.is(this._commandState[e],t)||(this._commandState[e]=t,e==="search"?(_e(this,je,La).call(this),_e(this,je,za).call(this),_e(this,je,zi).call(this),Dt(()=>{_e(this,je,zi).call(this)})):e==="value"&&(o||_e(this,je,dy).call(this)),_e(this,je,Ra).call(this))}setValue(e,t){e!==this.opts.value.current&&e===""&&Dt(()=>{this.key++}),this.setState("value",e,t),this.opts.value.current=e}getValidItems(){const e=this.opts.ref.current;return e?Array.from(e.querySelectorAll(kd)).filter(o=>!!o):[]}updateSelectedToIndex(e){const o=this.getValidItems()[e];o&&this.setValue(o.getAttribute(to)??"")}updateSelectedByItem(e){const t=_e(this,je,Do).call(this),o=this.getValidItems(),i=o.findIndex(l=>l===t);let s=o[i+e];this.opts.loop.current&&(s=i+e<0?o[o.length-1]:i+e===o.length?o[0]:o[i+e]),s&&this.setValue(s.getAttribute(to)??"")}updateSelectedByGroup(e){const t=_e(this,je,Do).call(this);let o=t==null?void 0:t.closest(Ai),i;for(;o&&!i;)o=e>0?qk(o,Ai):Jk(o,Ai),i=o==null?void 0:o.querySelector(kd);i?this.setValue(i.getAttribute(to)??""):this.updateSelectedByItem(e)}registerValue(e,t,o){var i;return t===((i=this.allIds.get(e))==null?void 0:i.value)?tt:(this.allIds.set(e,{value:t,keywords:o}),this._commandState.filtered.items.set(e,_e(this,je,pu).call(this,t,o)),this.sortAfterTick||(this.sortAfterTick=!0,Dt(()=>{_e(this,je,za).call(this),this.sortAfterTick=!1})),()=>{this.allIds.delete(e)})}registerItem(e,t){return this.allItems.add(e),t&&(this.allGroups.has(t)?this.allGroups.get(t).add(e):this.allGroups.set(t,new Set([e]))),this.sortAndFilterAfterTick||(this.sortAndFilterAfterTick=!0,Dt(()=>{_e(this,je,La).call(this),_e(this,je,za).call(this),this.sortAndFilterAfterTick=!1})),_e(this,je,Ra).call(this),()=>{const o=_e(this,je,Do).call(this);this.allIds.delete(e),this.allItems.delete(e),this.commandState.filtered.items.delete(e),_e(this,je,La).call(this),(o==null?void 0:o.getAttribute("id"))===e&&_e(this,je,zi).call(this),_e(this,je,Ra).call(this)}}registerGroup(e){return this.allGroups.has(e)||this.allGroups.set(e,new Set),()=>{this.allIds.delete(e),this.allGroups.delete(e)}}onkeydown(e){switch(e.key){case l1:case a1:{this.opts.vimBindings.current&&e.ctrlKey&&_e(this,je,gu).call(this,e);break}case si:_e(this,je,gu).call(this,e);break;case s1:case c1:{this.opts.vimBindings.current&&e.ctrlKey&&_e(this,je,yu).call(this,e);break}case Ji:_e(this,je,yu).call(this,e);break;case Of:e.preventDefault(),this.updateSelectedToIndex(0);break;case Cf:e.preventDefault(),_e(this,je,mu).call(this);break;case Yl:if(!e.isComposing&&e.keyCode!==229){e.preventDefault();const t=_e(this,je,Do).call(this);t&&(t==null||t.click())}}}get props(){return g(T(this,fl))}set props(e){I(T(this,fl),e)}}ti=new WeakMap,il=new WeakMap,sl=new WeakMap,ll=new WeakMap,al=new WeakMap,cl=new WeakMap,dl=new WeakMap,ul=new WeakMap,je=new WeakSet,cy=function(){return gf(this._commandState)},Ra=function(){T(this,ti)||(dt(this,ti,!0),Dt(()=>{var o,i;dt(this,ti,!1);const e=_e(this,je,cy).call(this);!Object.is(this.commandState,e)&&(this.commandState=e,(i=(o=this.opts.onStateChange)==null?void 0:o.current)==null||i.call(o,e))}))},pu=function(e,t){const o=this.opts.filter.current??hy;return e?o(e,this._commandState.search,t):0},za=function(){var l;if(!this._commandState.search||this.opts.shouldFilter.current===!1){this.commandState.value||_e(this,je,zi).call(this);return}const e=this._commandState.filtered.items,t=[];for(const a of this._commandState.filtered.groups){const c=this.allGroups.get(a);let d=0;if(!c){t.push([a,d]);continue}for(const u of c){const f=e.get(u);d=Math.max(f??0,d)}t.push([a,d])}const o=this.viewportNode,i=this.getValidItems().sort((a,c)=>{const d=a.getAttribute("id"),u=c.getAttribute("id"),f=e.get(d)??0;return(e.get(u)??0)-f});for(const a of i){const c=a.closest(Sd);if(c){const d=a.parentElement===c?a:a.closest(`${Sd} > *`);d&&c.appendChild(d)}else{const d=a.parentElement===o?a:a.closest(`${Sd} > *`);d&&(o==null||o.appendChild(d))}}const s=t.sort((a,c)=>c[1]-a[1]);for(const a of s){const c=o==null?void 0:o.querySelector(`${Ai}[${to}="${encodeURIComponent(a[0])}"]`);(l=c==null?void 0:c.parentElement)==null||l.appendChild(c)}},zi=function(){Dt(()=>{const e=this.getValidItems().find(o=>o.getAttribute("aria-disabled")!=="true"),t=e==null?void 0:e.getAttribute(to);this.setValue(t||"")})},La=function(){var t,o;if(!this._commandState.search||this.opts.shouldFilter.current===!1){this._commandState.filtered.count=this.allItems.size;return}this._commandState.filtered.groups=new Set;let e=0;for(const i of this.allItems){const s=((t=this.allIds.get(i))==null?void 0:t.value)??"",l=((o=this.allIds.get(i))==null?void 0:o.keywords)??[],a=_e(this,je,pu).call(this,s,l);this._commandState.filtered.items.set(i,a),a>0&&e++}for(const[i,s]of this.allGroups)for(const l of s){const a=this._commandState.filtered.items.get(l);if(a&&a>0){this._commandState.filtered.groups.add(i);break}}this._commandState.filtered.count=e},Do=function(){const e=this.opts.ref.current;if(!e)return;const t=e.querySelector(`${kd}[data-selected]`);if(t)return t},dy=function(){Dt(()=>{var i,s,l,a;const e=_e(this,je,Do).call(this);if(!e)return;const t=(i=e.parentElement)==null?void 0:i.parentElement;if(!t)return;const o=D1(t);if(o&&((s=o.dataset)==null?void 0:s.value)===((l=e.dataset)==null?void 0:l.value)){const c=(a=e==null?void 0:e.closest(Ai))==null?void 0:a.querySelector(tM);c==null||c.scrollIntoView({block:"nearest"});return}e.scrollIntoView({block:"nearest"})})},mu=function(){return this.updateSelectedToIndex(this.getValidItems().length-1)},gu=function(e){e.preventDefault(),e.metaKey?_e(this,je,mu).call(this):e.altKey?this.updateSelectedByGroup(1):this.updateSelectedByItem(1)},yu=function(e){e.preventDefault(),e.metaKey?this.updateSelectedToIndex(0):e.altKey?this.updateSelectedByGroup(-1):this.updateSelectedByItem(-1)},fl=new WeakMap;var hl,pl,ml;class oM{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,hl,!0);H(this,pl,F(()=>this.root._commandState.filtered.count===0&&T(this,hl)===!1&&this.root.searchHasHadValue||this.opts.forceMount.current));H(this,ml,F(()=>({id:this.opts.id.current,role:"presentation",[Qk]:""})));this.opts=e,this.root=t,mf(()=>{dt(this,hl,!1)}),st({...e,deps:()=>this.shouldRender})}get shouldRender(){return g(T(this,pl))}set shouldRender(e){I(T(this,pl),e)}get props(){return g(T(this,ml))}set props(e){I(T(this,ml),e)}}hl=new WeakMap,pl=new WeakMap,ml=new WeakMap;var gl,yl,vl,bl;class iM{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,gl,ue(null));H(this,yl,F(()=>this.opts.forceMount.current||this.root.opts.shouldFilter.current===!1||!this.root.commandState.search?!0:this.root.commandState.filtered.groups.has(this.opts.id.current)));H(this,vl,ue(""));H(this,bl,F(()=>({id:this.opts.id.current,role:"presentation",hidden:this.shouldRender?void 0:!0,"data-value":this.trueValue,[oy]:""})));this.opts=e,this.root=t,this.trueValue=e.value.current,st({...e,deps:()=>this.shouldRender}),Qe(()=>this.opts.id.current,()=>this.root.registerGroup(this.opts.id.current)),rt(()=>{var o;if(this.opts.value.current)return this.trueValue=this.opts.value.current,this.root.registerValue(this.opts.id.current,this.opts.value.current);if(this.headingNode&&this.headingNode.textContent)return this.trueValue=this.headingNode.textContent.trim().toLowerCase(),this.root.registerValue(this.opts.id.current,this.trueValue);if((o=this.opts.ref.current)!=null&&o.textContent)return this.trueValue=this.opts.ref.current.textContent.trim().toLowerCase(),this.root.registerValue(this.opts.id.current,this.trueValue)})}get headingNode(){return g(T(this,gl))}set headingNode(e){I(T(this,gl),e,!0)}get shouldRender(){return g(T(this,yl))}set shouldRender(e){I(T(this,yl),e)}get trueValue(){return g(T(this,vl))}set trueValue(e){I(T(this,vl),e,!0)}get props(){return g(T(this,bl))}set props(e){I(T(this,bl),e)}}gl=new WeakMap,yl=new WeakMap,vl=new WeakMap,bl=new WeakMap;var wl;class sM{constructor(e,t){oe(this,"opts");oe(this,"group");H(this,wl,F(()=>({id:this.opts.id.current,[sy]:""})));this.opts=e,this.group=t,st({...e,onRefChange:o=>{this.group.headingNode=o}})}get props(){return g(T(this,wl))}set props(e){I(T(this,wl),e)}}wl=new WeakMap;var xl;class lM{constructor(e,t){oe(this,"opts");oe(this,"group");H(this,xl,F(()=>{var e;return{id:this.opts.id.current,role:"group",[iy]:"","aria-labelledby":((e=this.group.headingNode)==null?void 0:e.id)??void 0}}));this.opts=e,this.group=t,st(e)}get props(){return g(T(this,xl))}set props(e){I(T(this,xl),e)}}xl=new WeakMap;var Fc,Sl;class aM{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Fc,F(()=>{var t;const e=(t=this.root.viewportNode)==null?void 0:t.querySelector(`${ay}[${to}="${encodeURIComponent(this.root.opts.value.current)}"]`);if(e)return(e==null?void 0:e.getAttribute("id"))??void 0}));H(this,Sl,F(()=>{var e,t;return{id:this.opts.id.current,type:"text",[Zk]:"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":Sf(!0),"aria-controls":((e=this.root.viewportNode)==null?void 0:e.id)??void 0,"aria-labelledby":((t=this.root.labelNode)==null?void 0:t.id)??void 0,"aria-activedescendant":g(T(this,Fc))}}));this.opts=e,this.root=t,st({...e,onRefChange:o=>{this.root.inputNode=o}}),Qe(()=>this.opts.ref.current,()=>{const o=this.opts.ref.current;o&&this.opts.autofocus.current&&Jl(10,()=>o.focus())}),Qe(()=>this.opts.value.current,()=>{this.root.commandState.search!==this.opts.value.current&&this.root.setState("search",this.opts.value.current)})}get props(){return g(T(this,Sl))}set props(e){I(T(this,Sl),e)}}Fc=new WeakMap,Sl=new WeakMap;var ao,Bc,kl,Ml,Cl,ko,uy,vu,Ol;class cM{constructor(e,t){H(this,ko);oe(this,"opts");oe(this,"root");H(this,ao,null);H(this,Bc,F(()=>{var e;return this.opts.forceMount.current||((e=T(this,ao))==null?void 0:e.opts.forceMount.current)===!0}));H(this,kl,ue(""));H(this,Ml,F(()=>{if(this.opts.ref.current,g(T(this,Bc))||this.root.opts.shouldFilter.current===!1||!this.root.commandState.search)return!0;const e=this.root.commandState.filtered.items.get(this.opts.id.current);return e===void 0?!1:e>0}));H(this,Cl,F(()=>this.root.opts.value.current===this.trueValue&&this.trueValue!==""));H(this,Ol,F(()=>({id:this.opts.id.current,"aria-disabled":yg(this.opts.disabled.current),"aria-selected":e1(this.isSelected),"data-disabled":$c(this.opts.disabled.current),"data-selected":n1(this.isSelected),"data-value":this.trueValue,[ly]:"",role:"option",onpointermove:this.onpointermove,onclick:this.onclick})));this.opts=e,this.root=t,dt(this,ao,ea.getOr(null)),this.trueValue=e.value.current,st({...e,deps:()=>!!this.root.commandState.search}),Qe([()=>this.opts.id.current,()=>{var o;return(o=T(this,ao))==null?void 0:o.opts.id.current},()=>this.opts.forceMount.current,()=>this.opts.ref.current],()=>{var o;if(!this.opts.forceMount.current)return this.root.registerItem(this.opts.id.current,(o=T(this,ao))==null?void 0:o.opts.id.current)}),Qe([()=>this.opts.value.current,()=>this.opts.ref.current],()=>{this.opts.ref.current&&(!this.opts.value.current&&this.opts.ref.current.textContent&&(this.trueValue=this.opts.ref.current.textContent.trim()),this.root.registerValue(this.opts.id.current,this.trueValue,e.keywords.current.map(o=>o.trim())),this.opts.ref.current.setAttribute(to,this.trueValue))}),this.onclick=this.onclick.bind(this),this.onpointermove=this.onpointermove.bind(this)}get trueValue(){return g(T(this,kl))}set trueValue(e){I(T(this,kl),e,!0)}get shouldRender(){return g(T(this,Ml))}set shouldRender(e){I(T(this,Ml),e)}get isSelected(){return g(T(this,Cl))}set isSelected(e){I(T(this,Cl),e)}onpointermove(e){this.opts.disabled.current||this.root.opts.disablePointerSelection.current||_e(this,ko,vu).call(this)}onclick(e){this.opts.disabled.current||_e(this,ko,uy).call(this)}get props(){return g(T(this,Ol))}set props(e){I(T(this,Ol),e)}}ao=new WeakMap,Bc=new WeakMap,kl=new WeakMap,Ml=new WeakMap,Cl=new WeakMap,ko=new WeakSet,uy=function(){var e;this.opts.disabled.current||(_e(this,ko,vu).call(this),(e=this.opts.onSelect)==null||e.current())},vu=function(){this.opts.disabled.current||this.root.setValue(this.trueValue,!0)},Ol=new WeakMap;var Tl;class dM{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Tl,F(()=>({id:this.opts.id.current,role:"listbox","aria-label":this.opts.ariaLabel.current,[Xk]:""})));this.opts=e,this.root=t,st(e)}get props(){return g(T(this,Tl))}set props(e){I(T(this,Tl),e)}}Tl=new WeakMap;var Al;class uM{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Al,F(()=>{var e;return{id:this.opts.id.current,[eM]:"",for:(e=this.opts.for)==null?void 0:e.current,style:pg}}));this.opts=e,this.root=t,st({...e,onRefChange:o=>{this.root.labelNode=o}})}get props(){return g(T(this,Al))}set props(e){I(T(this,Al),e)}}Al=new WeakMap;function fM(r){return Co.set(new rM(r))}function hM(r){return new oM(r,Co.get())}function pM(r){const e=ea.getOr(null);return new cM({...r,group:e},Co.get())}function mM(r){return ea.set(new iM(r,Co.get()))}function gM(r){return new sM(r,ea.get())}function yM(r){return new lM(r,ea.get())}function vM(r){return new aM(r,Co.get())}function bM(r){return nM.set(new dM(r,Co.get()))}function wM(r){return new uM(r,Co.get())}var xM=U("<label><!></label>");function SM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=Ae(e,["$$slots","$$events","$$legacy","id","ref","children"]);const s=wM({id:_.with(()=>t()),ref:_.with(()=>o(),u=>o(u))}),l=F(()=>Xe(i,s.props));var a=xM();let c;var d=we(a);ce(d,()=>e.children??Re),ye(a),Te(()=>c=He(a,c,{...g(l)})),O(r,a),X()}var kM=U("<!> <!>",1),MM=U("<div><!> <!></div>");function CM(r,e){Y(e,!0);const t=N=>{SM(N,{children:(L,K)=>{bt();var z=nf();Te(()=>rf(z,f())),O(L,z)},$$slots:{default:!0}})};let o=v(e,"id",19,ht),i=v(e,"ref",15,null),s=v(e,"value",15,""),l=v(e,"onValueChange",3,tt),a=v(e,"onStateChange",3,tt),c=v(e,"loop",3,!1),d=v(e,"shouldFilter",3,!0),u=v(e,"filter",3,hy),f=v(e,"label",3,""),p=v(e,"vimBindings",3,!0),h=v(e,"disablePointerSelection",3,!1),m=Ae(e,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","onStateChange","loop","shouldFilter","filter","label","vimBindings","disablePointerSelection","children","child"]);const y=fM({id:_.with(()=>o()),ref:_.with(()=>i(),N=>i(N)),filter:_.with(()=>u()),shouldFilter:_.with(()=>d()),loop:_.with(()=>c()),value:_.with(()=>s(),N=>{s(N),l()(N)}),vimBindings:_.with(()=>p()),disablePointerSelection:_.with(()=>h()),onStateChange:_.with(()=>a())}),b=N=>y.updateSelectedToIndex(N),S=N=>y.updateSelectedByGroup(N),w=N=>y.updateSelectedByItem(N),x=()=>y.getValidItems(),C=F(()=>Xe(m,y.props));var M=B(),k=P(M);{var E=N=>{var L=kM(),K=P(L);t(K);var z=ne(K,2);ce(z,()=>e.child,()=>({props:g(C)})),O(N,L)},A=N=>{var L=MM();let K;var z=we(L);t(z);var V=ne(z,2);ce(V,()=>e.children??Re),ye(L),Te(()=>K=He(L,K,{...g(C)})),O(N,L)};Pe(k,N=>{e.child?N(E):N(A,!1)})}return O(r,M),X({updateSelectedToIndex:b,updateSelectedByGroup:S,updateSelectedByItem:w,getValidItems:x})}var OM=U("<div><!></div>");function TM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"forceMount",3,!1),s=Ae(e,["$$slots","$$events","$$legacy","id","ref","children","child","forceMount"]);const l=hM({id:_.with(()=>t()),ref:_.with(()=>o(),f=>o(f)),forceMount:_.with(()=>i())}),a=F(()=>Xe(l.props,s));var c=B(),d=P(c);{var u=f=>{var p=B(),h=P(p);{var m=b=>{var S=B(),w=P(S);ce(w,()=>e.child,()=>({props:g(a)})),O(b,S)},y=b=>{var S=OM();let w;var x=we(S);ce(x,()=>e.children??Re),ye(S),Te(()=>w=He(S,w,{...g(a)})),O(b,S)};Pe(h,b=>{e.child?b(m):b(y,!1)})}O(f,p)};Pe(d,f=>{l.shouldRender&&f(u)})}O(r,c),X()}var AM=U("<div><!></div>");function EM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"value",3,""),s=v(e,"forceMount",3,!1),l=Ae(e,["$$slots","$$events","$$legacy","id","ref","value","forceMount","children","child"]);const a=mM({id:_.with(()=>t()),ref:_.with(()=>o(),h=>o(h)),forceMount:_.with(()=>s()),value:_.with(()=>i())}),c=F(()=>Xe(l,a.props));var d=B(),u=P(d);{var f=h=>{var m=B(),y=P(m);ce(y,()=>e.child,()=>({props:g(c)})),O(h,m)},p=h=>{var m=AM();let y;var b=we(m);ce(b,()=>e.children??Re),ye(m),Te(()=>y=He(m,y,{...g(c)})),O(h,m)};Pe(u,h=>{e.child?h(f):h(p,!1)})}O(r,d),X()}var PM=U("<div><!></div>");function NM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=Ae(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const s=gM({id:_.with(()=>t()),ref:_.with(()=>o(),f=>o(f))}),l=F(()=>Xe(i,s.props));var a=B(),c=P(a);{var d=f=>{var p=B(),h=P(p);ce(h,()=>e.child,()=>({props:g(l)})),O(f,p)},u=f=>{var p=PM();let h;var m=we(p);ce(m,()=>e.children??Re),ye(p),Te(()=>h=He(p,h,{...g(l)})),O(f,p)};Pe(c,f=>{e.child?f(d):f(u,!1)})}O(r,a),X()}var _M=U("<div><!></div>"),IM=U('<div style="display: contents;"><!></div>');function DM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=Ae(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const s=yM({id:_.with(()=>t()),ref:_.with(()=>o(),f=>o(f))}),l=F(()=>Xe(i,s.props));var a=IM(),c=we(a);{var d=f=>{var p=B(),h=P(p);ce(h,()=>e.child,()=>({props:g(l)})),O(f,p)},u=f=>{var p=_M();let h;var m=we(p);ce(m,()=>e.children??Re),ye(p),Te(()=>h=He(p,h,{...g(l)})),O(f,p)};Pe(c,f=>{e.child?f(d):f(u,!1)})}ye(a),O(r,a),X()}var RM=U("<input>");function zM(r,e){Y(e,!0);let t=v(e,"value",15,""),o=v(e,"autofocus",3,!1),i=v(e,"id",19,ht),s=v(e,"ref",15,null),l=Ae(e,["$$slots","$$events","$$legacy","value","autofocus","id","ref","child"]);const a=vM({id:_.with(()=>i()),ref:_.with(()=>s(),h=>s(h)),value:_.with(()=>t(),h=>{t(h)}),autofocus:_.with(()=>o()??!1)}),c=F(()=>Xe(l,a.props));var d=B(),u=P(d);{var f=h=>{var m=B(),y=P(m);ce(y,()=>e.child,()=>({props:g(c)})),O(h,m)},p=h=>{var m=RM();ou(m);let y;Te(()=>y=He(m,y,{...g(c)})),iu(m,t),O(h,m)};Pe(u,h=>{e.child?h(f):h(p,!1)})}O(r,d),X()}var LM=U("<div><!></div>"),FM=U('<div style="display: contents;" data-item-wrapper=""><!></div>');function BM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"value",3,""),s=v(e,"disabled",3,!1),l=v(e,"onSelect",3,tt),a=v(e,"forceMount",3,!1),c=v(e,"keywords",19,()=>[]),d=Ae(e,["$$slots","$$events","$$legacy","id","ref","value","disabled","children","child","onSelect","forceMount","keywords"]);const u=pM({id:_.with(()=>t()),ref:_.with(()=>o(),m=>o(m)),value:_.with(()=>i()),disabled:_.with(()=>s()),onSelect:_.with(()=>l()),forceMount:_.with(()=>a()),keywords:_.with(()=>c())}),f=F(()=>Xe(d,u.props));var p=B(),h=P(p);yf(h,()=>u.root.key,m=>{var y=FM(),b=we(y);{var S=w=>{var x=B(),C=P(x);{var M=E=>{var A=B(),N=P(A);ce(N,()=>e.child,()=>({props:g(f)})),O(E,A)},k=E=>{var A=LM();let N;var L=we(A);ce(L,()=>e.children??Re),ye(A),Te(()=>N=He(A,N,{...g(f)})),O(E,A)};Pe(C,E=>{e.child?E(M):E(k,!1)})}O(w,x)};Pe(b,w=>{u.shouldRender&&w(S)})}ye(y),Te(()=>lt(y,"data-value",u.trueValue)),O(m,y)}),O(r,p),X()}var VM=U("<div><!></div>");function HM(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=Ae(e,["$$slots","$$events","$$legacy","id","ref","child","children","aria-label"]);const s=bM({id:_.with(()=>t()),ref:_.with(()=>o(),d=>o(d)),ariaLabel:_.with(()=>e["aria-label"]??"Suggestions...")}),l=F(()=>Xe(i,s.props));var a=B(),c=P(a);yf(c,()=>s.root._commandState.search==="",d=>{var u=B(),f=P(u);{var p=m=>{var y=B(),b=P(y);ce(b,()=>e.child,()=>({props:g(l)})),O(m,y)},h=m=>{var y=VM();let b;var S=we(y);ce(S,()=>e.children??Re),ye(y),Te(()=>b=He(y,b,{...g(l)})),O(m,y)};Pe(f,m=>{e.child?m(p):m(h,!1)})}O(d,u)}),O(r,a),X()}const vp=1,WM=.9,KM=.8,jM=.17,Md=.1,Cd=.999,$M=.9999,GM=.99,UM=/[\\/_+.#"@[({&]/,qM=/[\\/_+.#"@[({&]/g,JM=/[\s-]/,fy=/[\s-]/g;function bu(r,e,t,o,i,s,l){if(s===e.length)return i===r.length?vp:GM;const a=`${i},${s}`;if(l[a]!==void 0)return l[a];const c=o.charAt(s);let d=t.indexOf(c,i),u=0,f,p,h,m;for(;d>=0;)f=bu(r,e,t,o,d+1,s+1,l),f>u&&(d===i?f*=vp:UM.test(r.charAt(d-1))?(f*=KM,h=r.slice(i,d-1).match(qM),h&&i>0&&(f*=Cd**h.length)):JM.test(r.charAt(d-1))?(f*=WM,m=r.slice(i,d-1).match(fy),m&&i>0&&(f*=Cd**m.length)):(f*=jM,i>0&&(f*=Cd**(d-i))),r.charAt(d)!==e.charAt(s)&&(f*=$M)),(f<Md&&t.charAt(d-1)===o.charAt(s+1)||o.charAt(s+1)===o.charAt(s)&&t.charAt(d-1)!==o.charAt(s))&&(p=bu(r,e,t,o,d+1,s+2,l),p*Md>f&&(f=p*Md)),f>u&&(u=f),d=t.indexOf(c,d+1);return l[a]=u,u}function bp(r){return r.toLowerCase().replace(fy," ")}function hy(r,e,t){return r=t&&t.length>0?`${`${r} ${t==null?void 0:t.join(" ")}`}`:r,bu(r,e,bp(r),bp(e),0,0,{})}const YM=[Yl,Xl],XM=[si,i1,Of],py=[Ji,o1,Cf],ZM=[...XM,...py];function Fo(r){return r.pointerType==="mouse"}function QM(r){const e=F(()=>r.enabled()),t=Qg(!1,300,l=>{var a;g(e)&&((a=r.setIsPointerInTransit)==null||a.call(r,l))});let o=ue(null);function i(){I(o,null),t.current=!1}function s(l,a){const c=l.currentTarget;if(!hr(c))return;const d={x:l.clientX,y:l.clientY},u=eC(d,c.getBoundingClientRect()),f=tC(d,u),p=nC(a.getBoundingClientRect()),h=oC([...f,...p]);I(o,h,!0),t.current=!0}return Qe([r.triggerNode,r.contentNode,r.enabled],([l,a,c])=>{if(!l||!a||!c)return;const d=f=>{s(f,a)},u=f=>{s(f,l)};return ar(at(l,"pointerleave",d),at(a,"pointerleave",u))}),Qe(()=>g(o),()=>at(document,"pointermove",a=>{var p,h;if(!g(o))return;const c=a.target;if(!qa(c))return;const d={x:a.clientX,y:a.clientY},u=((p=r.triggerNode())==null?void 0:p.contains(c))||((h=r.contentNode())==null?void 0:h.contains(c)),f=!rC(d,g(o));u?i():f&&(i(),r.onPointerExit())})),{isPointerInTransit:t}}function eC(r,e){const t=Math.abs(e.top-r.y),o=Math.abs(e.bottom-r.y),i=Math.abs(e.right-r.x),s=Math.abs(e.left-r.x);switch(Math.min(t,o,i,s)){case s:return"left";case i:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function tC(r,e,t=5){const o=t*1.5;switch(e){case"top":return[{x:r.x-t,y:r.y+t},{x:r.x,y:r.y-o},{x:r.x+t,y:r.y+t}];case"bottom":return[{x:r.x-t,y:r.y-t},{x:r.x,y:r.y+o},{x:r.x+t,y:r.y-t}];case"left":return[{x:r.x+t,y:r.y-t},{x:r.x-o,y:r.y},{x:r.x+t,y:r.y+t}];case"right":return[{x:r.x-t,y:r.y-t},{x:r.x+o,y:r.y},{x:r.x-t,y:r.y+t}]}}function nC(r){const{top:e,right:t,bottom:o,left:i}=r;return[{x:i,y:e},{x:t,y:e},{x:t,y:o},{x:i,y:o}]}function rC(r,e){const{x:t,y:o}=r;let i=!1;for(let s=0,l=e.length-1;s<e.length;l=s++){const a=e[s].x,c=e[s].y,d=e[l].x,u=e[l].y;c>o!=u>o&&t<(d-a)*(o-c)/(u-c)+a&&(i=!i)}return i}function oC(r){const e=r.slice();return e.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),iC(e)}function iC(r){if(r.length<=1)return r.slice();const e=[];for(let o=0;o<r.length;o++){const i=r[o];for(;e.length>=2;){const s=e[e.length-1],l=e[e.length-2];if((s.x-l.x)*(i.y-l.y)>=(s.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let o=r.length-1;o>=0;o--){const i=r[o];for(;t.length>=2;){const s=t[t.length-1],l=t[t.length-2];if((s.x-l.x)*(i.y-l.y)>=(s.y-l.y)*(i.x-l.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}function Ki(){return{getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"}}function sC(r,e){if(!qc(r,Ki()))return lC(r,e);const t=aS(xg(r).body,Ki());e==="prev"&&t.reverse();const o=t.indexOf(r);return o===-1?document.body:t.slice(o+1)[0]}function lC(r,e){if(!uS(r,Ki()))return document.body;const t=cS(xg(r).body,Ki());e==="prev"&&t.reverse();const o=t.indexOf(r);return o===-1?document.body:t.slice(o+1).find(s=>qc(s,Ki()))??document.body}const my="data-context-menu-trigger",Bf=new bn("Menu.Root"),Zc=new bn("Menu.Root | Menu.Sub"),gy=new bn("Menu.Content"),aC=new bn("Menu.Group | Menu.RadioGroup"),cC=new Af("bitsmenuopen",{bubbles:!1,cancelable:!0});var El,Pl;class dC{constructor(e){oe(this,"opts");oe(this,"isUsingKeyboard",new xu);H(this,El,ue(!1));H(this,Pl,ue(!1));this.opts=e}get ignoreCloseAutoFocus(){return g(T(this,El))}set ignoreCloseAutoFocus(e){I(T(this,El),e,!0)}get isPointerInTransit(){return g(T(this,Pl))}set isPointerInTransit(e){I(T(this,Pl),e,!0)}getAttr(e){return`data-${this.opts.variant.current}-${e}`}}El=new WeakMap,Pl=new WeakMap;var Nl,_l;class uC{constructor(e,t,o){oe(this,"opts");oe(this,"root");oe(this,"parentMenu");oe(this,"contentId",_.with(()=>""));H(this,Nl,ue(null));H(this,_l,ue(null));this.opts=e,this.root=t,this.parentMenu=o,o&&Qe(()=>o.opts.open.current,()=>{o.opts.open.current||(this.opts.open.current=!1)})}get contentNode(){return g(T(this,Nl))}set contentNode(e){I(T(this,Nl),e,!0)}get triggerNode(){return g(T(this,_l))}set triggerNode(e){I(T(this,_l),e,!0)}toggleOpen(){this.opts.open.current=!this.opts.open.current}onOpen(){this.opts.open.current=!0}onClose(){this.opts.open.current=!1}}Nl=new WeakMap,_l=new WeakMap;var Il,Dl,Rl,zl,Ll,Vr,yy,Fa,Fl,Bl;class fC{constructor(e,t){H(this,Vr);oe(this,"opts");oe(this,"parentMenu");H(this,Il,ue(""));H(this,Dl,0);H(this,Rl);oe(this,"rovingFocusGroup");H(this,zl,ue(!1));H(this,Ll);oe(this,"onCloseAutoFocus",e=>{this.opts.onCloseAutoFocus.current(e),!(e.defaultPrevented||T(this,Ll))&&this.parentMenu.triggerNode&&qc(this.parentMenu.triggerNode)&&this.parentMenu.triggerNode.focus()});oe(this,"onOpenAutoFocus",e=>{if(e.defaultPrevented)return;e.preventDefault();const t=this.parentMenu.contentNode;t==null||t.focus()});H(this,Fl,F(()=>({open:this.parentMenu.opts.open.current})));H(this,Bl,F(()=>({id:this.opts.id.current,role:"menu","aria-orientation":"vertical",[this.parentMenu.root.getAttr("content")]:"","data-state":jc(this.parentMenu.opts.open.current),onkeydown:this.onkeydown,onblur:this.onblur,onfocus:this.onfocus,dir:this.parentMenu.root.opts.dir.current,style:{pointerEvents:"auto"}})));oe(this,"popperProps",{onCloseAutoFocus:e=>this.onCloseAutoFocus(e)});this.opts=e,this.parentMenu=t,t.contentId=e.id,dt(this,Ll,e.isSub??!1),this.onkeydown=this.onkeydown.bind(this),this.onblur=this.onblur.bind(this),this.onfocus=this.onfocus.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this),st({...e,deps:()=>this.parentMenu.opts.open.current,onRefChange:o=>{this.parentMenu.contentNode!==o&&(this.parentMenu.contentNode=o)}}),QM({contentNode:()=>this.parentMenu.contentNode,triggerNode:()=>this.parentMenu.triggerNode,enabled:()=>{var o;return this.parentMenu.opts.open.current&&!!((o=this.parentMenu.triggerNode)!=null&&o.hasAttribute(this.parentMenu.root.getAttr("sub-trigger")))},onPointerExit:()=>{this.parentMenu.opts.open.current=!1},setIsPointerInTransit:o=>{this.parentMenu.root.isPointerInTransit=o}}),dt(this,Rl,Fk().handleTypeaheadSearch),this.rovingFocusGroup=b1({rootNodeId:this.parentMenu.contentId,candidateAttr:this.parentMenu.root.getAttr("item"),loop:this.opts.loop,orientation:_.with(()=>"vertical")}),Qe(()=>this.parentMenu.contentNode,o=>{if(!o)return;const i=()=>{Dt(()=>{this.parentMenu.root.isUsingKeyboard.current&&this.rovingFocusGroup.focusFirstCandidate()})};return cC.listen(o,i)}),rt(()=>{this.parentMenu.opts.open.current||window.clearTimeout(T(this,Dl))})}get search(){return g(T(this,Il))}set search(e){I(T(this,Il),e,!0)}get mounted(){return g(T(this,zl))}set mounted(e){I(T(this,zl),e,!0)}handleTabKeyDown(e){let t=this.parentMenu;for(;t.parentMenu!==null;)t=t.parentMenu;if(!t.triggerNode)return;e.preventDefault();const o=sC(t.triggerNode,e.shiftKey?"prev":"next");o?(this.parentMenu.root.ignoreCloseAutoFocus=!0,t.onClose(),Dt(()=>{o.focus(),Dt(()=>{this.parentMenu.root.ignoreCloseAutoFocus=!1})})):document.body.focus()}onkeydown(e){var d,u;if(e.defaultPrevented)return;if(e.key===vg){this.handleTabKeyDown(e);return}const t=e.target,o=e.currentTarget;if(!hr(t)||!hr(o))return;const i=((d=t.closest(`[${this.parentMenu.root.getAttr("content")}]`))==null?void 0:d.id)===this.parentMenu.contentId.current,s=e.ctrlKey||e.altKey||e.metaKey,l=e.key.length===1;if(this.rovingFocusGroup.handleKeydown(t,e)||e.code==="Space")return;const c=_e(this,Vr,yy).call(this);i&&!s&&l&&T(this,Rl).call(this,e.key,c),((u=e.target)==null?void 0:u.id)===this.parentMenu.contentId.current&&ZM.includes(e.key)&&(e.preventDefault(),py.includes(e.key)&&c.reverse(),Og(c))}onblur(e){var t,o;qa(e.currentTarget)&&qa(e.target)&&((o=(t=e.currentTarget).contains)!=null&&o.call(t,e.target)||(window.clearTimeout(T(this,Dl)),this.search=""))}onfocus(e){this.parentMenu.root.isUsingKeyboard.current&&Dt(()=>this.rovingFocusGroup.focusFirstCandidate())}onItemEnter(){return _e(this,Vr,Fa).call(this)}onItemLeave(e){if(e.currentTarget.hasAttribute(this.parentMenu.root.getAttr("sub-trigger"))||_e(this,Vr,Fa).call(this)||this.parentMenu.root.isUsingKeyboard.current)return;const t=this.parentMenu.contentNode;t==null||t.focus(),this.rovingFocusGroup.setCurrentTabStopId("")}onTriggerLeave(){return!!_e(this,Vr,Fa).call(this)}handleInteractOutside(e){var o;if(!m1(e.target))return;const t=(o=this.parentMenu.triggerNode)==null?void 0:o.id;if(e.target.id===t){e.preventDefault();return}e.target.closest(`#${t}`)&&e.preventDefault()}get snippetProps(){return g(T(this,Fl))}set snippetProps(e){I(T(this,Fl),e)}get props(){return g(T(this,Bl))}set props(e){I(T(this,Bl),e)}}Il=new WeakMap,Dl=new WeakMap,Rl=new WeakMap,zl=new WeakMap,Ll=new WeakMap,Vr=new WeakSet,yy=function(){const e=this.parentMenu.contentNode;return e?Array.from(e.querySelectorAll(`[${this.parentMenu.root.getAttr("item")}]:not([data-disabled])`)):[]},Fa=function(){return this.parentMenu.root.isPointerInTransit},Fl=new WeakMap,Bl=new WeakMap;var ni,Vl;class hC{constructor(e,t){oe(this,"opts");oe(this,"content");H(this,ni,ue(!1));H(this,Vl,F(()=>({id:this.opts.id.current,tabindex:-1,role:"menuitem","aria-disabled":yg(this.opts.disabled.current),"data-disabled":$c(this.opts.disabled.current),"data-highlighted":g(T(this,ni))?"":void 0,[this.content.parentMenu.root.getAttr("item")]:"",onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,onfocus:this.onfocus,onblur:this.onblur})));this.opts=e,this.content=t,this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this),st({...e,deps:()=>this.content.mounted})}onpointermove(e){if(!e.defaultPrevented&&Fo(e))if(this.opts.disabled.current)this.content.onItemLeave(e);else{if(this.content.onItemEnter())return;const o=e.currentTarget;if(!hr(o))return;o.focus()}}onpointerleave(e){e.defaultPrevented||Fo(e)&&this.content.onItemLeave(e)}onfocus(e){Dt(()=>{e.defaultPrevented||this.opts.disabled.current||I(T(this,ni),!0)})}onblur(e){Dt(()=>{e.defaultPrevented||I(T(this,ni),!1)})}get props(){return g(T(this,Vl))}set props(e){I(T(this,Vl),e)}}ni=new WeakMap,Vl=new WeakMap;var Hl,Vc,vy,Wl;class pC{constructor(e,t){H(this,Vc);oe(this,"opts");oe(this,"item");H(this,Hl,!1);oe(this,"root");H(this,Wl,F(()=>Xe(this.item.props,{onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown})));this.opts=e,this.item=t,this.root=t.content.parentMenu.root,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this)}onkeydown(e){const t=this.item.content.search!=="";if(!(this.item.opts.disabled.current||t&&e.key===Xl)&&YM.includes(e.key)){if(!hr(e.currentTarget))return;e.currentTarget.click(),e.preventDefault()}}onclick(e){this.item.opts.disabled.current||_e(this,Vc,vy).call(this)}onpointerup(e){var t;if(!e.defaultPrevented&&!T(this,Hl)){if(!hr(e.currentTarget))return;(t=e.currentTarget)==null||t.click()}}onpointerdown(e){dt(this,Hl,!0)}get props(){return g(T(this,Wl))}set props(e){I(T(this,Wl),e)}}Hl=new WeakMap,Vc=new WeakSet,vy=function(){if(this.item.opts.disabled.current)return;const e=new CustomEvent("menuitemselect",{bubbles:!0,cancelable:!0});this.opts.onSelect.current(e),Dt(()=>{if(e.defaultPrevented){this.item.content.parentMenu.root.isUsingKeyboard.current=!1;return}this.opts.closeOnSelect.current&&this.item.content.parentMenu.root.opts.onClose()})},Wl=new WeakMap;var Kl,jl;class mC{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,Kl,ue(void 0));H(this,jl,F(()=>({id:this.opts.id.current,role:"group","aria-labelledby":this.groupHeadingId,[this.root.getAttr("group")]:""})));this.opts=e,this.root=t,st(this.opts)}get groupHeadingId(){return g(T(this,Kl))}set groupHeadingId(e){I(T(this,Kl),e,!0)}get props(){return g(T(this,jl))}set props(e){I(T(this,jl),e)}}Kl=new WeakMap,jl=new WeakMap;var $l;class gC{constructor(e,t){oe(this,"opts");oe(this,"root");H(this,$l,F(()=>({id:this.opts.id.current,role:"group",[this.root.getAttr("separator")]:""})));this.opts=e,this.root=t,st(e)}get props(){return g(T(this,$l))}set props(e){I(T(this,$l),e)}}$l=new WeakMap;var Hc,Gl;class yC{constructor(e,t){oe(this,"opts");oe(this,"parentMenu");H(this,Hc,F(()=>{if(this.parentMenu.opts.open.current&&this.parentMenu.contentId.current)return this.parentMenu.contentId.current}));H(this,Gl,F(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"aria-haspopup":"menu","aria-expanded":Sf(this.parentMenu.opts.open.current),"aria-controls":g(T(this,Hc)),"data-disabled":$c(this.opts.disabled.current),"data-state":jc(this.parentMenu.opts.open.current),[this.parentMenu.root.getAttr("trigger")]:"",onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown})));this.opts=e,this.parentMenu=t,this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onkeydown=this.onkeydown.bind(this),st({...e,onRefChange:o=>{this.parentMenu.triggerNode=o}})}onpointerdown(e){if(!this.opts.disabled.current){if(e.pointerType==="touch")return e.preventDefault();e.button===0&&e.ctrlKey===!1&&(this.parentMenu.toggleOpen(),this.parentMenu.opts.open.current||e.preventDefault())}}onpointerup(e){this.opts.disabled.current||e.pointerType==="touch"&&(e.preventDefault(),this.parentMenu.toggleOpen())}onkeydown(e){if(!this.opts.disabled.current){if(e.key===Xl||e.key===Yl){this.parentMenu.toggleOpen(),e.preventDefault();return}e.key===si&&(this.parentMenu.onOpen(),e.preventDefault())}}get props(){return g(T(this,Gl))}set props(e){I(T(this,Gl),e)}}Hc=new WeakMap,Gl=new WeakMap;var ri,oi,hn,kr,wu,Ul;class vC{constructor(e,t){H(this,hn);oe(this,"opts");oe(this,"parentMenu");H(this,ri,ue(Bt({x:0,y:0})));oe(this,"virtualElement",_({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...g(T(this,ri))})}));H(this,oi,null);H(this,Ul,F(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"data-disabled":$c(this.opts.disabled.current),"data-state":jc(this.parentMenu.opts.open.current),[my]:"",tabindex:-1,onpointerdown:this.onpointerdown,onpointermove:this.onpointermove,onpointercancel:this.onpointercancel,onpointerup:this.onpointerup,oncontextmenu:this.oncontextmenu})));this.opts=e,this.parentMenu=t,this.oncontextmenu=this.oncontextmenu.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointermove=this.onpointermove.bind(this),this.onpointercancel=this.onpointercancel.bind(this),this.onpointerup=this.onpointerup.bind(this),st({...e,onRefChange:o=>{this.parentMenu.triggerNode=o},deps:()=>this.parentMenu.opts.open.current}),Qe(()=>g(T(this,ri)),o=>{this.virtualElement.current={getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o})}}),rt(()=>{this.opts.disabled.current&&_e(this,hn,kr).call(this)}),xf(()=>_e(this,hn,kr).call(this))}oncontextmenu(e){var t;this.opts.disabled.current||(_e(this,hn,kr).call(this),_e(this,hn,wu).call(this,e),e.preventDefault(),(t=this.parentMenu.contentNode)==null||t.focus())}onpointerdown(e){this.opts.disabled.current||Fo(e)||(_e(this,hn,kr).call(this),dt(this,oi,window.setTimeout(()=>_e(this,hn,wu).call(this,e),700)))}onpointermove(e){this.opts.disabled.current||Fo(e)||_e(this,hn,kr).call(this)}onpointercancel(e){this.opts.disabled.current||Fo(e)||_e(this,hn,kr).call(this)}onpointerup(e){this.opts.disabled.current||Fo(e)||_e(this,hn,kr).call(this)}get props(){return g(T(this,Ul))}set props(e){I(T(this,Ul),e)}}ri=new WeakMap,oi=new WeakMap,hn=new WeakSet,kr=function(){T(this,oi)!==null&&window.clearTimeout(T(this,oi))},wu=function(e){I(T(this,ri),{x:e.clientX,y:e.clientY},!0),this.parentMenu.onOpen()},Ul=new WeakMap;function by(r){const e=new dC(r);return Rg.set({get ignoreCloseAutoFocus(){return e.ignoreCloseAutoFocus}}),Bf.set(e)}function wy(r,e){return Zc.set(new uC(e,r,null))}function bC(r){return new yC(r,Zc.get())}function wC(r){return new vC(r,Zc.get())}function xy(r){return gy.set(new fC(r,Zc.get()))}function xC(r){const e=new hC(r,gy.get());return new pC(r,e)}function SC(r){return aC.set(new mC(r,Bf.get()))}function kC(r){return new gC(r,Bf.get())}function MC(r,e){Y(e,!0);let t=v(e,"open",15,!1),o=v(e,"dir",3,"ltr"),i=v(e,"onOpenChange",3,tt);const s=by({variant:_.with(()=>"context-menu"),dir:_.with(()=>o()),onClose:()=>{var l;t(!1),(l=i())==null||l(!1)}});wy(s,{open:_.with(()=>t(),l=>{t(l),i()(l)})}),Zg(r,{children:(l,a)=>{var c=B(),d=P(c);ce(d,()=>e.children??Re),O(l,c)},$$slots:{default:!0}}),X()}var CC=U("<div><!></div>");function Sy(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"id",19,ht),i=v(e,"disabled",3,!1),s=v(e,"onSelect",3,tt),l=v(e,"closeOnSelect",3,!0),a=Ae(e,["$$slots","$$events","$$legacy","child","children","ref","id","disabled","onSelect","closeOnSelect"]);const c=xC({id:_.with(()=>o()),disabled:_.with(()=>i()),onSelect:_.with(()=>s()),ref:_.with(()=>t(),m=>t(m)),closeOnSelect:_.with(()=>l())}),d=F(()=>Xe(a,c.props));var u=B(),f=P(u);{var p=m=>{var y=B(),b=P(y);ce(b,()=>e.child,()=>({props:g(d)})),O(m,y)},h=m=>{var y=CC();let b;var S=we(y);ce(S,()=>e.children??Re),ye(y),Te(()=>b=He(y,b,{...g(d)})),O(m,y)};Pe(f,m=>{e.child?m(p):m(h,!1)})}O(r,u),X()}var OC=U("<div><!></div>");function TC(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"id",19,ht),i=Ae(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const s=SC({id:_.with(()=>o()),ref:_.with(()=>t(),f=>t(f))}),l=F(()=>Xe(i,s.props));var a=B(),c=P(a);{var d=f=>{var p=B(),h=P(p);ce(h,()=>e.child,()=>({props:g(l)})),O(f,p)},u=f=>{var p=OC();let h;var m=we(p);ce(m,()=>e.children??Re),ye(p),Te(()=>h=He(p,h,{...g(l)})),O(f,p)};Pe(c,f=>{e.child?f(d):f(u,!1)})}O(r,a),X()}var AC=U("<div><div><!></div></div>"),EC=U("<!> <!>",1),PC=U("<div><div><!></div></div>"),NC=U("<!> <!>",1);function _C(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"loop",3,!0),s=v(e,"onInteractOutside",3,tt),l=v(e,"onCloseAutoFocus",3,tt),a=v(e,"onOpenAutoFocus",3,tt),c=v(e,"preventScroll",3,!0),d=v(e,"onEscapeKeydown",3,tt),u=v(e,"forceMount",3,!1),f=v(e,"trapFocus",3,!0),p=Ae(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onCloseAutoFocus","onOpenAutoFocus","preventScroll","onEscapeKeydown","forceMount","trapFocus"]);const h=xy({id:_.with(()=>t()),loop:_.with(()=>i()),ref:_.with(()=>o(),k=>o(k)),onCloseAutoFocus:_.with(()=>l())}),m=F(()=>Xe(p,h.props));function y(k){s()(k),!k.defaultPrevented&&h.parentMenu.onClose()}function b(k){d()(k),!k.defaultPrevented&&h.parentMenu.onClose()}function S(k){if("button"in k&&k.button===2){const E=k.target;return E?E.closest(`[${my}]`)!==h.parentMenu.triggerNode:!1}return!1}var w=B(),x=P(w);{var C=k=>{ry(k,ae(()=>g(m),()=>h.popperProps,{side:"right",sideOffset:2,align:"start",get enabled(){return h.parentMenu.opts.open.current},get preventScroll(){return c()},onInteractOutside:y,onEscapeKeydown:b,get onOpenAutoFocus(){return a()},isValidEvent:S,get trapFocus(){return f()},get loop(){return i()},get id(){return t()},popper:(A,N)=>{let L=()=>N==null?void 0:N().props,K=()=>N==null?void 0:N().wrapperProps;var z=EC();const V=F(()=>Xe(L(),{style:rc("context-menu")}));var D=P(z);{var $=R=>{var J=B(),q=P(J),se=De(()=>({props:g(V),wrapperProps:K(),...h.snippetProps}));ce(q,()=>e.child,()=>g(se)),O(R,J)},W=R=>{var J=AC();let q;var se=we(J);let ie;var Me=we(se);ce(Me,()=>e.children??Re),ye(se),ye(J),Te(()=>{q=He(J,q,{...K()}),ie=He(se,ie,{...g(V)})}),O(R,J)};Pe(D,R=>{e.child?R($):R(W,!1)})}var G=ne(D,2);oc(G,{get mounted(){return h.mounted},set mounted(R){h.mounted=R}}),O(A,z)},$$slots:{popper:!0}}))},M=(k,E)=>{{var A=N=>{ny(N,ae(()=>g(m),()=>h.popperProps,{side:"right",sideOffset:2,align:"start",get present(){return h.parentMenu.opts.open.current},get preventScroll(){return c()},onInteractOutside:y,onEscapeKeydown:b,get onOpenAutoFocus(){return a()},isValidEvent:S,get trapFocus(){return f()},get loop(){return i()},get id(){return t()},popper:(K,z)=>{let V=()=>z==null?void 0:z().props,D=()=>z==null?void 0:z().wrapperProps;var $=NC();const W=F(()=>Xe(V(),{style:rc("context-menu")}));var G=P($);{var R=se=>{var ie=B(),Me=P(ie),j=De(()=>({props:g(W),wrapperProps:D(),...h.snippetProps}));ce(Me,()=>e.child,()=>g(j)),O(se,ie)},J=se=>{var ie=PC();let Me;var j=we(ie);let te;var le=we(j);ce(le,()=>e.children??Re),ye(j),ye(ie),Te(()=>{Me=He(ie,Me,{...D()}),te=He(j,te,{...g(W)})}),O(se,ie)};Pe(G,se=>{e.child?se(R):se(J,!1)})}var q=ne(G,2);oc(q,{get mounted(){return h.mounted},set mounted(se){h.mounted=se}}),O(K,$)},$$slots:{popper:!0}}))};Pe(k,N=>{u()||N(A)},E)}};Pe(x,k=>{u()?k(C):k(M,!1)})}O(r,w),X()}var IC=U("<div><!></div>");function DC(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"disabled",3,!1),s=Ae(e,["$$slots","$$events","$$legacy","id","ref","child","children","disabled"]);const l=wC({id:_.with(()=>t()),disabled:_.with(()=>i()),ref:_.with(()=>o(),u=>o(u))}),a=F(()=>Xe(s,l.props,{style:{pointerEvents:"auto"}}));var c=B(),d=P(c);Z(d,()=>ey,(u,f)=>{f(u,{get id(){return t()},get virtualEl(){return l.virtualElement},children:(p,h)=>{var m=B(),y=P(m);{var b=w=>{var x=B(),C=P(x);ce(C,()=>e.child,()=>({props:g(a)})),O(w,x)},S=w=>{var x=IC();let C;var M=we(x);ce(M,()=>e.children??Re),ye(x),Te(()=>C=He(x,C,{...g(a)})),O(w,x)};Pe(y,w=>{e.child?w(b):w(S,!1)})}O(p,m)},$$slots:{default:!0}})}),O(r,c),X()}var RC=U("<div><!></div>");function zC(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"id",19,ht),i=Ae(e,["$$slots","$$events","$$legacy","ref","id","child","children"]);const s=kC({id:_.with(()=>o()),ref:_.with(()=>t(),f=>t(f))}),l=F(()=>Xe(i,s.props));var a=B(),c=P(a);{var d=f=>{var p=B(),h=P(p);ce(h,()=>e.child,()=>({props:g(l)})),O(f,p)},u=f=>{var p=RC();let h;var m=we(p);ce(m,()=>e.children??Re),ye(p),Te(()=>h=He(p,h,{...g(l)})),O(f,p)};Pe(c,f=>{e.child?f(d):f(u,!1)})}O(r,a),X()}function ky(r,e){Y(e,!0);let t=v(e,"open",15,!1),o=v(e,"onOpenChange",3,tt);A1({variant:_.with(()=>"dialog"),open:_.with(()=>t(),l=>{t(l),o()(l)})});var i=B(),s=P(i);ce(s,()=>e.children??Re),O(r,i),X()}var LC=U("<button><!></button>");function FC(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"disabled",3,!1),s=Ae(e,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const l=_1({variant:_.with(()=>"close"),id:_.with(()=>t()),ref:_.with(()=>o(),p=>o(p)),disabled:_.with(()=>!!i())}),a=F(()=>Xe(s,l.props));var c=B(),d=P(c);{var u=p=>{var h=B(),m=P(h);ce(m,()=>e.child,()=>({props:g(a)})),O(p,h)},f=p=>{var h=LC();let m;var y=we(h);ce(y,()=>e.children??Re),ye(h),Te(()=>m=He(h,m,{...g(a)})),O(p,h)};Pe(d,p=>{e.child?p(u):p(f,!1)})}O(r,c),X()}var BC=U("<!> <!>",1),VC=U("<!> <div><!></div>",1);function My(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"forceMount",3,!1),s=v(e,"onCloseAutoFocus",3,tt),l=v(e,"onEscapeKeydown",3,tt),a=v(e,"onInteractOutside",3,tt),c=v(e,"trapFocus",3,!0),d=v(e,"preventScroll",3,!0),u=v(e,"restoreScrollDelay",3,null),f=Ae(e,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const p=P1({id:_.with(()=>t()),ref:_.with(()=>o(),y=>o(y))}),h=F(()=>Xe(f,p.props)),m=F(()=>p.root.opts.open.current||i());Tf(r,ae(()=>g(h),{get forceMount(){return i()},get present(){return g(m)},presence:b=>{const S=F(()=>kS({forceMount:i(),present:p.root.opts.open.current,trapFocus:c(),open:p.root.opts.open.current}));zg(b,ae({loop:!0,get trapFocus(){return g(S)}},()=>g(h),{onCloseAutoFocus:x=>{var C;s()(x),!x.defaultPrevented&&((C=p.root.triggerNode)==null||C.focus())},focusScope:(x,C)=>{let M=()=>C==null?void 0:C().props;Cg(x,ae(()=>g(h),{get enabled(){return p.root.opts.open.current},onEscapeKeydown:k=>{l()(k),!k.defaultPrevented&&p.root.handleClose()},children:(k,E)=>{Mg(k,ae(()=>g(h),{get enabled(){return p.root.opts.open.current},onInteractOutside:A=>{a()(A),!A.defaultPrevented&&p.root.handleClose()},children:(A,N)=>{Fg(A,ae(()=>g(h),{get enabled(){return p.root.opts.open.current},children:(L,K)=>{var z=B(),V=P(z);{var D=W=>{var G=BC(),R=P(G);{var J=ie=>{Qa(ie,{get preventScroll(){return d()},get restoreScrollDelay(){return u()}})};Pe(R,ie=>{p.root.opts.open.current&&ie(J)})}var q=ne(R,2),se=De(()=>({props:Xe(g(h),M()),...p.snippetProps}));ce(q,()=>e.child,()=>g(se)),O(W,G)},$=W=>{var G=VC(),R=P(G);Qa(R,{get preventScroll(){return d()}});var J=ne(R,2);let q;var se=we(J);ce(se,()=>e.children??Re),ye(J),Te(ie=>q=He(J,q,{...ie}),[()=>Xe(g(h),M())]),O(W,G)};Pe(V,W=>{e.child?W(D):W($,!1)})}O(L,z)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{focusScope:!0}}))},$$slots:{presence:!0}})),X()}function HC(r,e){Y(e,!0);let t=v(e,"open",15,!1),o=v(e,"dir",3,"ltr"),i=v(e,"onOpenChange",3,tt),s=v(e,"_internal_variant",3,"dropdown-menu");const l=by({variant:_.with(()=>s()),dir:_.with(()=>o()),onClose:()=>{t(!1),i()(!1)}});wy(l,{open:_.with(()=>t(),a=>{t(a),i()(a)})}),Zg(r,{children:(a,c)=>{var d=B(),u=P(d);ce(u,()=>e.children??Re),O(a,d)},$$slots:{default:!0}}),X()}var WC=U("<div><div><!></div></div>"),KC=U("<!> <!>",1),jC=U("<div><div><!></div></div>"),$C=U("<!> <!>",1);function GC(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"loop",3,!0),s=v(e,"onInteractOutside",3,tt),l=v(e,"onEscapeKeydown",3,tt),a=v(e,"onCloseAutoFocus",3,tt),c=v(e,"forceMount",3,!1),d=Ae(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onEscapeKeydown","onCloseAutoFocus","forceMount"]);const u=xy({id:_.with(()=>t()),loop:_.with(()=>i()),ref:_.with(()=>o(),w=>o(w)),onCloseAutoFocus:_.with(()=>a())}),f=F(()=>Xe(d,u.props));function p(w){u.handleInteractOutside(w),!w.defaultPrevented&&(s()(w),!w.defaultPrevented&&u.parentMenu.onClose())}function h(w){l()(w),!w.defaultPrevented&&u.parentMenu.onClose()}var m=B(),y=P(m);{var b=w=>{ry(w,ae(()=>g(f),()=>u.popperProps,{get enabled(){return u.parentMenu.opts.open.current},onInteractOutside:p,onEscapeKeydown:h,trapFocus:!0,get loop(){return i()},forceMount:!0,get id(){return t()},popper:(C,M)=>{let k=()=>M==null?void 0:M().props,E=()=>M==null?void 0:M().wrapperProps;var A=KC();const N=F(()=>Xe(k(),{style:rc("dropdown-menu")}));var L=P(A);{var K=D=>{var $=B(),W=P($),G=De(()=>({props:g(N),wrapperProps:E(),...u.snippetProps}));ce(W,()=>e.child,()=>g(G)),O(D,$)},z=D=>{var $=WC();let W;var G=we($);let R;var J=we(G);ce(J,()=>e.children??Re),ye(G),ye($),Te(()=>{W=He($,W,{...E()}),R=He(G,R,{...g(N)})}),O(D,$)};Pe(L,D=>{e.child?D(K):D(z,!1)})}var V=ne(L,2);oc(V,{get mounted(){return u.mounted},set mounted(D){u.mounted=D}}),O(C,A)},$$slots:{popper:!0}}))},S=(w,x)=>{{var C=M=>{ny(M,ae(()=>g(f),()=>u.popperProps,{get present(){return u.parentMenu.opts.open.current},onInteractOutside:p,onEscapeKeydown:h,trapFocus:!0,get loop(){return i()},forceMount:!1,get id(){return t()},popper:(E,A)=>{let N=()=>A==null?void 0:A().props,L=()=>A==null?void 0:A().wrapperProps;var K=$C();const z=F(()=>Xe(N(),{style:rc("dropdown-menu")}));var V=P(K);{var D=G=>{var R=B(),J=P(R),q=De(()=>({props:g(z),wrapperProps:L(),...u.snippetProps}));ce(J,()=>e.child,()=>g(q)),O(G,R)},$=G=>{var R=jC();let J;var q=we(R);let se;var ie=we(q);ce(ie,()=>e.children??Re),ye(q),ye(R),Te(()=>{J=He(R,J,{...L()}),se=He(q,se,{...g(z)})}),O(G,R)};Pe(V,G=>{e.child?G(D):G($,!1)})}var W=ne(V,2);oc(W,{get mounted(){return u.mounted},set mounted(G){u.mounted=G}}),O(E,K)},$$slots:{popper:!0}}))};Pe(w,M=>{c()||M(C)},x)}};Pe(y,w=>{c()?w(b):w(S,!1)})}O(r,m),X()}var UC=U("<button><!></button>");function qC(r,e){Y(e,!0);let t=v(e,"id",19,ht),o=v(e,"ref",15,null),i=v(e,"disabled",3,!1),s=v(e,"type",3,"button"),l=Ae(e,["$$slots","$$events","$$legacy","id","ref","child","children","disabled","type"]);const a=bC({id:_.with(()=>t()),disabled:_.with(()=>i()??!1),ref:_.with(()=>o(),d=>o(d))}),c=F(()=>Xe(l,a.props,{type:s()}));ey(r,{get id(){return t()},children:(d,u)=>{var f=B(),p=P(f);{var h=y=>{var b=B(),S=P(b);ce(S,()=>e.child,()=>({props:g(c)})),O(y,b)},m=y=>{var b=UC();let S;var w=we(b);ce(w,()=>e.children??Re),ye(b),Te(()=>S=He(b,S,{...g(c)})),O(y,b)};Pe(p,y=>{e.child?y(h):y(m,!1)})}O(d,f)},$$slots:{default:!0}}),X()}let Ei=ue(!1);const kn=class kn{constructor(){rt(()=>(kn._refs===0&&(kn._cleanup=ag(()=>{const e=[],t=i=>{I(Ei,!1)},o=i=>{I(Ei,!0)};return e.push(at(document,"pointerdown",t,{capture:!0}),at(document,"pointermove",t,{capture:!0}),at(document,"keydown",o,{capture:!0})),ar(...e)})),kn._refs++,()=>{var e;kn._refs--,kn._refs===0&&(I(Ei,!1),(e=kn._cleanup)==null||e.call(kn))}))}get current(){return g(Ei)}set current(e){I(Ei,e,!0)}};oe(kn,"_refs",0),oe(kn,"_cleanup");let xu=kn;const Vf="-",JC=r=>{const e=XC(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:o}=r;return{getClassGroupId:l=>{const a=l.split(Vf);return a[0]===""&&a.length!==1&&a.shift(),Cy(a,e)||YC(l)},getConflictingClassGroupIds:(l,a)=>{const c=t[l]||[];return a&&o[l]?[...c,...o[l]]:c}}},Cy=(r,e)=>{var l;if(r.length===0)return e.classGroupId;const t=r[0],o=e.nextPart.get(t),i=o?Cy(r.slice(1),o):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(Vf);return(l=e.validators.find(({validator:a})=>a(s)))==null?void 0:l.classGroupId},wp=/^\[(.+)\]$/,YC=r=>{if(wp.test(r)){const e=wp.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},XC=r=>{const{theme:e,classGroups:t}=r,o={nextPart:new Map,validators:[]};for(const i in t)Su(t[i],o,i,e);return o},Su=(r,e,t,o)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:xp(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(ZC(i)){Su(i(o),e,t,o);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,l])=>{Su(l,xp(e,s),t,o)})})},xp=(r,e)=>{let t=r;return e.split(Vf).forEach(o=>{t.nextPart.has(o)||t.nextPart.set(o,{nextPart:new Map,validators:[]}),t=t.nextPart.get(o)}),t},ZC=r=>r.isThemeGetter,QC=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,o=new Map;const i=(s,l)=>{t.set(s,l),e++,e>r&&(e=0,o=t,t=new Map)};return{get(s){let l=t.get(s);if(l!==void 0)return l;if((l=o.get(s))!==void 0)return i(s,l),l},set(s,l){t.has(s)?t.set(s,l):i(s,l)}}},ku="!",Mu=":",eO=Mu.length,tO=r=>{const{prefix:e,experimentalParseClassName:t}=r;let o=i=>{const s=[];let l=0,a=0,c=0,d;for(let m=0;m<i.length;m++){let y=i[m];if(l===0&&a===0){if(y===Mu){s.push(i.slice(c,m)),c=m+eO;continue}if(y==="/"){d=m;continue}}y==="["?l++:y==="]"?l--:y==="("?a++:y===")"&&a--}const u=s.length===0?i:i.substring(c),f=nO(u),p=f!==u,h=d&&d>c?d-c:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:h}};if(e){const i=e+Mu,s=o;o=l=>l.startsWith(i)?s(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const i=o;o=s=>t({className:s,parseClassName:i})}return o},nO=r=>r.endsWith(ku)?r.substring(0,r.length-1):r.startsWith(ku)?r.substring(1):r,rO=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const i=[];let s=[];return o.forEach(l=>{l[0]==="["||e[l]?(i.push(...s.sort(),l),s=[]):s.push(l)}),i.push(...s.sort()),i}},oO=r=>({cache:QC(r.cacheSize),parseClassName:tO(r),sortModifiers:rO(r),...JC(r)}),iO=/\s+/,sO=(r,e)=>{const{parseClassName:t,getClassGroupId:o,getConflictingClassGroupIds:i,sortModifiers:s}=e,l=[],a=r.trim().split(iO);let c="";for(let d=a.length-1;d>=0;d-=1){const u=a[d],{isExternal:f,modifiers:p,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=t(u);if(f){c=u+(c.length>0?" "+c:c);continue}let b=!!y,S=o(b?m.substring(0,y):m);if(!S){if(!b){c=u+(c.length>0?" "+c:c);continue}if(S=o(m),!S){c=u+(c.length>0?" "+c:c);continue}b=!1}const w=s(p).join(":"),x=h?w+ku:w,C=x+S;if(l.includes(C))continue;l.push(C);const M=i(S,b);for(let k=0;k<M.length;++k){const E=M[k];l.push(x+E)}c=u+(c.length>0?" "+c:c)}return c};function lO(){let r=0,e,t,o="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Oy(e))&&(o&&(o+=" "),o+=t);return o}const Oy=r=>{if(typeof r=="string")return r;let e,t="";for(let o=0;o<r.length;o++)r[o]&&(e=Oy(r[o]))&&(t&&(t+=" "),t+=e);return t};function aO(r,...e){let t,o,i,s=l;function l(c){const d=e.reduce((u,f)=>f(u),r());return t=oO(d),o=t.cache.get,i=t.cache.set,s=a,a(c)}function a(c){const d=o(c);if(d)return d;const u=sO(c,t);return i(c,u),u}return function(){return s(lO.apply(null,arguments))}}const _t=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},Ty=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ay=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cO=/^\d+\/\d+$/,dO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ao=r=>cO.test(r),Ge=r=>!!r&&!Number.isNaN(Number(r)),wr=r=>!!r&&Number.isInteger(Number(r)),Od=r=>r.endsWith("%")&&Ge(r.slice(0,-1)),Yn=r=>dO.test(r),mO=()=>!0,gO=r=>uO.test(r)&&!fO.test(r),Ey=()=>!1,yO=r=>hO.test(r),vO=r=>pO.test(r),bO=r=>!ve(r)&&!be(r),wO=r=>vi(r,_y,Ey),ve=r=>Ty.test(r),Xr=r=>vi(r,Iy,gO),Td=r=>vi(r,CO,Ge),Sp=r=>vi(r,Py,Ey),xO=r=>vi(r,Ny,vO),ha=r=>vi(r,Dy,yO),be=r=>Ay.test(r),Pi=r=>bi(r,Iy),SO=r=>bi(r,OO),kp=r=>bi(r,Py),kO=r=>bi(r,_y),MO=r=>bi(r,Ny),pa=r=>bi(r,Dy,!0),vi=(r,e,t)=>{const o=Ty.exec(r);return o?o[1]?e(o[1]):t(o[2]):!1},bi=(r,e,t=!1)=>{const o=Ay.exec(r);return o?o[1]?e(o[1]):t:!1},Py=r=>r==="position"||r==="percentage",Ny=r=>r==="image"||r==="url",_y=r=>r==="length"||r==="size"||r==="bg-size",Iy=r=>r==="length",CO=r=>r==="number",OO=r=>r==="family-name",Dy=r=>r==="shadow",TO=()=>{const r=_t("color"),e=_t("font"),t=_t("text"),o=_t("font-weight"),i=_t("tracking"),s=_t("leading"),l=_t("breakpoint"),a=_t("container"),c=_t("spacing"),d=_t("radius"),u=_t("shadow"),f=_t("inset-shadow"),p=_t("text-shadow"),h=_t("drop-shadow"),m=_t("blur"),y=_t("perspective"),b=_t("aspect"),S=_t("ease"),w=_t("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...C(),be,ve],k=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],A=()=>[be,ve,c],N=()=>[Ao,"full","auto",...A()],L=()=>[wr,"none","subgrid",be,ve],K=()=>["auto",{span:["full",wr,be,ve]},wr,be,ve],z=()=>[wr,"auto",be,ve],V=()=>["auto","min","max","fr",be,ve],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],W=()=>["auto",...A()],G=()=>[Ao,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],R=()=>[r,be,ve],J=()=>[...C(),kp,Sp,{position:[be,ve]}],q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",kO,wO,{size:[be,ve]}],ie=()=>[Od,Pi,Xr],Me=()=>["","none","full",d,be,ve],j=()=>["",Ge,Pi,Xr],te=()=>["solid","dashed","dotted","double"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[Ge,Od,kp,Sp],de=()=>["","none",m,be,ve],me=()=>["none",Ge,be,ve],ze=()=>["none",Ge,be,ve],Ce=()=>[Ge,be,ve],re=()=>[Ao,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yn],breakpoint:[Yn],color:[mO],container:[Yn],"drop-shadow":[Yn],ease:["in","out","in-out"],font:[bO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yn],shadow:[Yn],spacing:["px",Ge],text:[Yn],"text-shadow":[Yn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ao,ve,be,b]}],container:["container"],columns:[{columns:[Ge,ve,be,a]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[wr,"auto",be,ve]}],basis:[{basis:[Ao,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,Ao,"auto","initial","none",ve]}],grow:[{grow:["",Ge,be,ve]}],shrink:[{shrink:["",Ge,be,ve]}],order:[{order:[wr,"first","last","none",be,ve]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:K()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:K()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:W()}],mx:[{mx:W()}],my:[{my:W()}],ms:[{ms:W()}],me:[{me:W()}],mt:[{mt:W()}],mr:[{mr:W()}],mb:[{mb:W()}],ml:[{ml:W()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[a,"screen",...G()]}],"min-w":[{"min-w":[a,"screen","none",...G()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[l]},...G()]}],h:[{h:["screen",...G()]}],"min-h":[{"min-h":["screen","none",...G()]}],"max-h":[{"max-h":["screen",...G()]}],"font-size":[{text:["base",t,Pi,Xr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,be,Td]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Od,ve]}],"font-family":[{font:[SO,ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,be,ve]}],"line-clamp":[{"line-clamp":[Ge,"none",be,Td]}],leading:[{leading:[s,...A()]}],"list-image":[{"list-image":["none",be,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",be,Xr]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[Ge,"auto",be,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:q()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wr,be,ve],radial:["",be,ve],conic:[wr,be,ve]},MO,xO]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:Me()}],"rounded-s":[{"rounded-s":Me()}],"rounded-e":[{"rounded-e":Me()}],"rounded-t":[{"rounded-t":Me()}],"rounded-r":[{"rounded-r":Me()}],"rounded-b":[{"rounded-b":Me()}],"rounded-l":[{"rounded-l":Me()}],"rounded-ss":[{"rounded-ss":Me()}],"rounded-se":[{"rounded-se":Me()}],"rounded-ee":[{"rounded-ee":Me()}],"rounded-es":[{"rounded-es":Me()}],"rounded-tl":[{"rounded-tl":Me()}],"rounded-tr":[{"rounded-tr":Me()}],"rounded-br":[{"rounded-br":Me()}],"rounded-bl":[{"rounded-bl":Me()}],"border-w":[{border:j()}],"border-w-x":[{"border-x":j()}],"border-w-y":[{"border-y":j()}],"border-w-s":[{"border-s":j()}],"border-w-e":[{"border-e":j()}],"border-w-t":[{"border-t":j()}],"border-w-r":[{"border-r":j()}],"border-w-b":[{"border-b":j()}],"border-w-l":[{"border-l":j()}],"divide-x":[{"divide-x":j()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":j()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...te(),"hidden","none"]}],"divide-style":[{divide:[...te(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,be,ve]}],"outline-w":[{outline:["",Ge,Pi,Xr]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",u,pa,ha]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",f,pa,ha]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[Ge,Xr]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":j()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",p,pa,ha]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[Ge,be,ve]}],"mix-blend":[{"mix-blend":[...le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[be,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:q()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,ve]}],filter:[{filter:["","none",be,ve]}],blur:[{blur:de()}],brightness:[{brightness:[Ge,be,ve]}],contrast:[{contrast:[Ge,be,ve]}],"drop-shadow":[{"drop-shadow":["","none",h,pa,ha]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",Ge,be,ve]}],"hue-rotate":[{"hue-rotate":[Ge,be,ve]}],invert:[{invert:["",Ge,be,ve]}],saturate:[{saturate:[Ge,be,ve]}],sepia:[{sepia:["",Ge,be,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",be,ve]}],"backdrop-blur":[{"backdrop-blur":de()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,be,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,be,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,be,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,be,ve]}],"backdrop-invert":[{"backdrop-invert":["",Ge,be,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,be,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,be,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,be,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",be,ve]}],ease:[{ease:["linear","initial",S,be,ve]}],delay:[{delay:[Ge,be,ve]}],animate:[{animate:["none",w,be,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,be,ve]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:me()}],"rotate-x":[{"rotate-x":me()}],"rotate-y":[{"rotate-y":me()}],"rotate-z":[{"rotate-z":me()}],scale:[{scale:ze()}],"scale-x":[{"scale-x":ze()}],"scale-y":[{"scale-y":ze()}],"scale-z":[{"scale-z":ze()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[be,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:re()}],"translate-x":[{"translate-x":re()}],"translate-y":[{"translate-y":re()}],"translate-z":[{"translate-z":re()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,ve]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[Ge,Pi,Xr,Td]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AO=aO(TO);function mt(...r){return AO(_a(r))}function EO(r,e){Y(e,!0);let t=v(e,"value",15,""),o=v(e,"ref",15,null),i=Ae(e,["$$slots","$$events","$$legacy","value","ref","class"]);var s=B(),l=P(s);const a=F(()=>mt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e.class));Z(l,()=>CM,(c,d)=>{d(c,ae({get class(){return g(a)}},()=>i,{get ref(){return o()},set ref(u){o(u)},get value(){return t()},set value(u){t(u)}}))}),O(r,s),X()}function PO(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class"]);var i=B(),s=P(i);const l=F(()=>mt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",e.class));Z(s,()=>Bg,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}/**
 * @license @lucide/svelte v0.501.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const NO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var _O=An("<svg><!><!></svg>");function Ry(r,e){Y(e,!0);const t=v(e,"color",3,"currentColor"),o=v(e,"size",3,24),i=v(e,"strokeWidth",3,2),s=v(e,"absoluteStrokeWidth",3,!1),l=v(e,"iconNode",19,()=>[]),a=Ae(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var c=_O();let d;var u=we(c);Wn(u,17,l,Ui,(p,h)=>{let m=()=>g(h)[0],y=()=>g(h)[1];var b=B(),S=P(b);vf(S,m,!0,(w,x)=>{let C;Te(()=>C=He(w,C,{...y()}))}),O(p,b)});var f=ne(u);ce(f,()=>e.children??Re),ye(c),Te(p=>d=He(c,d,{...NO,...a,width:o(),height:o(),stroke:t(),"stroke-width":p,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>s()?Number(i())*24/Number(o()):i()]),O(r,c),X()}function IO(r,e){Y(e,!0);let t=Ae(e,["$$slots","$$events","$$legacy"]);Ry(r,ae({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(i,s)=>{var l=B(),a=P(l);ce(a,()=>e.children??Re),O(i,l)},$$slots:{default:!0}})),X()}var DO=U('<!> <span class="sr-only">Close</span>',1),RO=U("<!> <!>",1),zO=U("<!> <!>",1);function LO(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var i=B(),s=P(i);Z(s,()=>BO,(l,a)=>{a(l,ae(()=>e.portalProps,{children:(c,d)=>{var u=zO(),f=P(u);Z(f,()=>PO,(m,y)=>{y(m,{})});var p=ne(f,2);const h=F(()=>mt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e.class));Z(p,()=>My,(m,y)=>{y(m,ae({get class(){return g(h)}},()=>o,{get ref(){return t()},set ref(b){t(b)},children:(b,S)=>{var w=RO(),x=P(w);ce(x,()=>e.children??Re);var C=ne(x,2);Z(C,()=>FC,(M,k)=>{k(M,{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(E,A)=>{var N=DO(),L=P(N);IO(L,{class:"size-4"}),bt(2),O(E,N)},$$slots:{default:!0}})}),O(b,w)},$$slots:{default:!0}}))}),O(c,u)},$$slots:{default:!0}}))}),O(r,i),X()}const FO=ky,BO=Uc;function VO(r,e){Y(e,!0);let t=v(e,"open",15,!1),o=v(e,"ref",15,null),i=v(e,"value",15,""),s=Ae(e,["$$slots","$$events","$$legacy","open","ref","value","portalProps","children"]);var l=B(),a=P(l);Z(a,()=>FO,(c,d)=>{d(c,ae(()=>s,{get open(){return t()},set open(u){t(u)},children:(u,f)=>{var p=B(),h=P(p);Z(h,()=>LO,(m,y)=>{y(m,{class:"overflow-hidden p-0",get portalProps(){return e.portalProps},children:(b,S)=>{EO(b,ae({class:"[&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group]:not([hidden])_~[data-cmdk-group]]:pt-0 [&_[data-cmdk-group]]:px-2 [&_[data-cmdk-input-wrapper]_svg]:h-5 [&_[data-cmdk-input-wrapper]_svg]:w-5 [&_[data-cmdk-input]]:h-12 [&_[data-cmdk-item]]:px-2 [&_[data-cmdk-item]]:py-3 [&_[data-cmdk-item]_svg]:h-5 [&_[data-cmdk-item]_svg]:w-5"},()=>s,{get children(){return e.children},get value(){return i()},set value(w){i(w)},get ref(){return o()},set ref(w){o(w)}}))},$$slots:{default:!0}})}),O(u,p)},$$slots:{default:!0}}))}),O(r,l),X()}function HO(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class"]);var i=B(),s=P(i);const l=F(()=>mt("py-6 text-center text-sm",e.class));Z(s,()=>TM,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}var WO=U("<!> <!>",1);function Mp(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","children","heading"]);var i=B(),s=P(i);const l=F(()=>mt("text-foreground overflow-hidden p-1",e.class));Z(s,()=>EM,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)},children:(d,u)=>{var f=WO(),p=P(f);{var h=y=>{var b=B(),S=P(b);Z(S,()=>NM,(w,x)=>{x(w,{class:"text-muted-foreground px-2 py-1.5 text-xs font-medium",children:(C,M)=>{bt();var k=nf();Te(()=>rf(k,e.heading)),O(C,k)},$$slots:{default:!0}})}),O(y,b)};Pe(p,y=>{e.heading&&y(h)})}var m=ne(p,2);Z(m,()=>DM,(y,b)=>{b(y,{get children(){return e.children}})}),O(d,f)},$$slots:{default:!0}}))}),O(r,i),X()}function Ni(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class"]);var i=B(),s=P(i);const l=F(()=>mt("aria-selected:bg-accent aria-selected:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e.class));Z(s,()=>BM,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}function KO(r,e){Y(e,!0);let t=Ae(e,["$$slots","$$events","$$legacy"]);Ry(r,ae({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(i,s)=>{var l=B(),a=P(l);ce(a,()=>e.children??Re),O(i,l)},$$slots:{default:!0}})),X()}var jO=U('<div class="flex items-center border-b px-3" data-command-input-wrapper=""><!> <!></div>');function $O(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"value",15,""),i=Ae(e,["$$slots","$$events","$$legacy","ref","class","value"]);var s=jO(),l=we(s);KO(l,{class:"mr-2 size-4 shrink-0 opacity-50"});var a=ne(l,2);const c=F(()=>mt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-base outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class));Z(a,()=>zM,(d,u)=>{u(d,ae({get class(){return g(c)}},()=>i,{get ref(){return t()},set ref(f){t(f)},get value(){return o()},set value(f){o(f)}}))}),ye(s),O(r,s),X()}function GO(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class"]);var i=B(),s=P(i);const l=F(()=>mt("max-h-[300px] overflow-y-auto overflow-x-hidden",e.class));Z(s,()=>HM,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}const Li=mi(!1);function zy(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"loadingStatus",15,"loading"),i=Ae(e,["$$slots","$$events","$$legacy","class","ref","loadingStatus"]);var s=B(),l=P(s);const a=F(()=>mt("relative flex size-10 shrink-0 overflow-hidden rounded-full",e.class));Z(l,()=>DS,(c,d)=>{d(c,ae({get class(){return g(a)}},()=>i,{get loadingStatus(){return o()},set loadingStatus(u){o(u)},get ref(){return t()},set ref(u){t(u)}}))}),O(r,s),X()}function Ly(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","class","src","alt","ref"]);var i=B(),s=P(i);const l=F(()=>mt("aspect-square size-full",e.class));Z(s,()=>zS,(a,c)=>{c(a,ae({get src(){return e.src},get alt(){return e.alt},get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}var UO=U("<div><!></div>");function ta(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=UO();let s;var l=we(i);ce(l,()=>e.children??Re),ye(i),nn(i,a=>t(a),()=>t()),Te(a=>s=He(i,s,{class:a,...o}),[()=>mt("bg-card text-card-foreground rounded-xl border shadow",e.class)]),O(r,i),X()}var qO=U("<div><!></div>");function na(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=qO();let s;var l=we(i);ce(l,()=>e.children??Re),ye(i),nn(i,a=>t(a),()=>t()),Te(a=>s=He(i,s,{class:a,...o}),[()=>mt("p-6",e.class)]),O(r,i),X()}function ic(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var i=B(),s=P(i);const l=F(()=>mt("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.inset&&"pl-8",e.class));Z(s,()=>Sy,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}function JO(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","portalProps"]);var i=B(),s=P(i);Z(s,()=>Uc,(l,a)=>{a(l,ae(()=>e.portalProps,{children:(c,d)=>{var u=B(),f=P(u);const p=F(()=>mt("bg-popover text-popover-foreground z-50 min-w-[8rem] rounded-md border p-1 shadow-md focus:outline-none",e.class));Z(f,()=>_C,(h,m)=>{m(h,ae({get class(){return g(p)}},()=>o,{get ref(){return t()},set ref(y){t(y)}}))}),O(c,u)},$$slots:{default:!0}}))}),O(r,i),X()}function YO(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class"]);var i=B(),s=P(i);const l=F(()=>mt("bg-border -mx-1 my-1 h-px",e.class));Z(s,()=>zC,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}const ra=MC,oa=DC;/**
 * @license lucide-svelte v0.501.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const XO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ZO=An("<svg><!><!></svg>");function ot(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]),o=qe(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Y(e,!1);let i=v(e,"name",8,void 0),s=v(e,"color",8,"currentColor"),l=v(e,"size",8,24),a=v(e,"strokeWidth",8,2),c=v(e,"absoluteStrokeWidth",8,!1),d=v(e,"iconNode",24,()=>[]);const u=(...y)=>y.filter((b,S,w)=>!!b&&w.indexOf(b)===S).join(" ");vt();var f=ZO();let p;var h=we(f);Wn(h,1,d,Ui,(y,b)=>{let S=()=>g(b)[0],w=()=>g(b)[1];var x=B(),C=P(x);vf(C,S,!0,(M,k)=>{let E;Te(()=>E=He(M,E,{...w()}))}),O(y,x)});var m=ne(h);$e(m,e,"default",{}),ye(f),Te((y,b)=>p=He(f,p,{...XO,...o,width:l(),height:l(),stroke:s(),"stroke-width":y,class:b}),[()=>c()?Number(a())*24/Number(l()):a(),()=>u("lucide-icon","lucide",i()?`lucide-${i()}`:"",t.class)],De),O(r,f),X()}function QO(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"align-center"},()=>t,{iconNode:[["path",{d:"M17 12H7"}],["path",{d:"M19 18H5"}],["path",{d:"M21 6H3"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function eT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"align-justify"},()=>t,{iconNode:[["path",{d:"M3 12h18"}],["path",{d:"M3 18h18"}],["path",{d:"M3 6h18"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function tT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"align-left"},()=>t,{iconNode:[["path",{d:"M15 12H3"}],["path",{d:"M17 18H3"}],["path",{d:"M21 6H3"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function nT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"align-right"},()=>t,{iconNode:[["path",{d:"M21 12H9"}],["path",{d:"M21 18H7"}],["path",{d:"M21 6H3"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function Cp(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"ban"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m4.9 4.9 14.2 14.2"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function rT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"bold"},()=>t,{iconNode:[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function oT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"command"},()=>t,{iconNode:[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function iT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"cuboid"},()=>t,{iconNode:[["path",{d:"m21.12 6.4-6.05-4.06a2 2 0 0 0-2.17-.05L2.95 8.41a2 2 0 0 0-.95 1.7v5.82a2 2 0 0 0 .88 1.66l6.05 4.07a2 2 0 0 0 2.17.05l9.95-6.12a2 2 0 0 0 .95-1.7V8.06a2 2 0 0 0-.88-1.66Z"}],["path",{d:"M10 22v-8L2.25 9.15"}],["path",{d:"m10 14 11.77-6.87"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function sT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"download"},()=>t,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function lT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"feather"},()=>t,{iconNode:[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z"}],["path",{d:"M16 8 2 22"}],["path",{d:"M17.5 15H9"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function aT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"heading-1"},()=>t,{iconNode:[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"m17 12 3-2v8"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function cT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"heading-2"},()=>t,{iconNode:[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function dT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"heading-3"},()=>t,{iconNode:[["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}],["path",{d:"M12 18V6"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function uT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"heading-4"},()=>t,{iconNode:[["path",{d:"M12 18V6"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3"}],["path",{d:"M21 10v8"}],["path",{d:"M4 12h8"}],["path",{d:"M4 18V6"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function fT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"heading"},()=>t,{iconNode:[["path",{d:"M6 12h12"}],["path",{d:"M6 20V4"}],["path",{d:"M18 20V4"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function hT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"highlighter"},()=>t,{iconNode:[["path",{d:"m9 11-6 6v3h9l3-3"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function Fy(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"image"},()=>t,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function pT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"italic"},()=>t,{iconNode:[["line",{x1:"19",x2:"10",y1:"4",y2:"4"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function mT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"list-ordered"},()=>t,{iconNode:[["path",{d:"M10 12h11"}],["path",{d:"M10 18h11"}],["path",{d:"M10 6h11"}],["path",{d:"M4 10h2"}],["path",{d:"M4 6h1v4"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function gT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"list-todo"},()=>t,{iconNode:[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1"}],["path",{d:"m3 17 2 2 4-4"}],["path",{d:"M13 6h8"}],["path",{d:"M13 12h8"}],["path",{d:"M13 18h8"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function Op(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"list"},()=>t,{iconNode:[["path",{d:"M3 12h.01"}],["path",{d:"M3 18h.01"}],["path",{d:"M3 6h.01"}],["path",{d:"M8 12h13"}],["path",{d:"M8 18h13"}],["path",{d:"M8 6h13"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function yT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"lock-open"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function By(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"lock"},()=>t,{iconNode:[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function vT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"palette"},()=>t,{iconNode:[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function Vy(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"pin"},()=>t,{iconNode:[["path",{d:"M12 17v5"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function bT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"quote"},()=>t,{iconNode:[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function wT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"ruler"},()=>t,{iconNode:[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"}],["path",{d:"m14.5 12.5 2-2"}],["path",{d:"m11.5 9.5 2-2"}],["path",{d:"m8.5 6.5 2-2"}],["path",{d:"m17.5 15.5 2-2"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function xT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"save"},()=>t,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function ST(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"search"},()=>t,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function kT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"strikethrough"},()=>t,{iconNode:[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}function MT(r,e){const t=qe(e,["children","$$slots","$$events","$$legacy"]);ot(r,ae({name:"underline"},()=>t,{iconNode:[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20"}]],children:(i,s)=>{var l=B(),a=P(l);$e(a,e,"default",{}),O(i,l)},$$slots:{default:!0}}))}var CT=U("<!> <!>",1),OT=U("<!> Snap Size",1),TT=U("<!> Snap Position",1),AT=U("<!> <!> <!>",1);function ia(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(mo,"$nodes",t);let s=v(e,"id",3,""),{updateNode:l}=Mo();var a=B(),c=P(a);Z(c,()=>JO,(d,u)=>{u(d,{class:"backdrop-blur-md backdrop-filter bg-clip-padding bg-black/80",children:(f,p)=>{var h=AT(),m=P(h);{var y=w=>{var x=CT(),C=P(x);ce(C,()=>e.children??Re);var M=ne(C,2);Z(M,()=>YO,(k,E)=>{E(k,{})}),O(w,x)};Pe(m,w=>{e.children&&w(y)})}var b=ne(m,2);Z(b,()=>ic,(w,x)=>{x(w,{onclick:()=>{let C=i().find(M=>M.id==s());l(s(),{width:Math.round(C.width/25)*25,height:Math.round(C.height/25)*25})},children:(C,M)=>{var k=OT(),E=P(k);wT(E,{class:"mr-2 size-4"}),bt(),O(C,k)},$$slots:{default:!0}})});var S=ne(b,2);Z(S,()=>ic,(w,x)=>{x(w,{onclick:()=>{let C=i().find(M=>M.id==s());l(s(),{position:{x:Math.round(C.position.x/25)*25,y:Math.round(C.position.y/25)*25}})},children:(C,M)=>{var k=TT(),E=P(k);Vy(E,{class:"mr-2 size-4"}),bt(),O(C,k)},$$slots:{default:!0}})}),O(f,h)},$$slots:{default:!0}})}),O(r,a),X(),o()}function ET(r,e,t){if(!g(e).files||!g(e).files[0])return;const o=new FileReader;o.addEventListener("load",i=>I(t,i.target.result,!0)),o.readAsDataURL(g(e).files[0])}var PT=U('<div class="p-0.5 w-full h-full flex"><!></div>'),NT=U("<!> Change Image",1),_T=U("<!> <!>",1),IT=U('<!> <!> <input type="file" class="hidden" accept="image/*">',1);function DT(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(vn,"$lock",t);let s=ue(void 0),{updateNodeData:l}=Mo(),a=ue(Bt(e.data.img||"https://github.com/shadcn.png"));rt(()=>{l(e.id,{img:g(a)})});var c=IT(),d=P(c);const u=F(()=>e.selected&&!i());ql(d,{get isVisible(){return g(u)},keepAspectRatio:!0,minHeight:50,minWidth:50});var f=ne(d,2);Z(f,()=>ra,(h,m)=>{m(h,{children:(y,b)=>{var S=_T(),w=P(S);Z(w,()=>oa,(C,M)=>{M(C,{class:"size-full",children:(k,E)=>{var A=PT(),N=we(A);Z(N,()=>ta,(L,K)=>{K(L,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(z,V)=>{var D=B(),$=P(D);Z($,()=>na,(W,G)=>{G(W,{class:"p-0.5 h-full",children:(R,J)=>{var q=B(),se=P(q);Z(se,()=>zy,(ie,Me)=>{Me(ie,{class:"size-full",children:(j,te)=>{var le=B(),ee=P(le);Z(ee,()=>Ly,(de,me)=>{me(de,{get src(){return g(a)}})}),O(j,le)},$$slots:{default:!0}})}),O(R,q)},$$slots:{default:!0}})}),O(z,D)},$$slots:{default:!0}})}),ye(A),O(k,A)},$$slots:{default:!0}})});var x=ne(w,2);ia(x,{get id(){return e.id},children:(C,M)=>{var k=B(),E=P(k);Z(E,()=>ic,(A,N)=>{N(A,{onclick:()=>{i()||g(s).click()},children:(L,K)=>{var z=NT(),V=P(z);Fy(V,{class:"mr-2 size-4"}),bt(),O(L,z)},$$slots:{default:!0}})}),O(C,k)},$$slots:{default:!0}}),O(y,S)},$$slots:{default:!0}})});var p=ne(f,2);p.__change=[ET,s,a],nn(p,h=>I(s,h),()=>g(s)),O(r,c),X(),o()}of(["change"]);function RT(r,e,t){if(!g(e).files||!g(e).files[0])return;const o=new FileReader;o.addEventListener("load",i=>I(t,i.target.result,!0)),o.readAsDataURL(g(e).files[0])}var zT=U('<div class="p-0.5 w-full h-full flex"><!></div>'),LT=U("<!> Change Image",1),FT=U("<!> <!>",1),BT=U('<!> <!> <input type="file" class="hidden" accept="image/*">',1);function VT(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(vn,"$lock",t);let s=ue(void 0),{updateNodeData:l}=Mo(),a=ue(Bt(e.data.img||"https://github.com/shadcn.png"));rt(()=>{l(e.id,{img:g(a)})});var c=BT(),d=P(c);const u=F(()=>e.selected&&!i());ql(d,{get isVisible(){return g(u)},minHeight:50,minWidth:50});var f=ne(d,2);Z(f,()=>ra,(h,m)=>{m(h,{children:(y,b)=>{var S=FT(),w=P(S);Z(w,()=>oa,(C,M)=>{M(C,{class:"size-full",children:(k,E)=>{var A=zT(),N=we(A);Z(N,()=>ta,(L,K)=>{K(L,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(z,V)=>{var D=B(),$=P(D);Z($,()=>na,(W,G)=>{G(W,{class:"p-0.5 h-full",children:(R,J)=>{var q=B(),se=P(q);Z(se,()=>zy,(ie,Me)=>{Me(ie,{class:"size-full rounded-md",children:(j,te)=>{var le=B(),ee=P(le);Z(ee,()=>Ly,(de,me)=>{me(de,{get src(){return g(a)}})}),O(j,le)},$$slots:{default:!0}})}),O(R,q)},$$slots:{default:!0}})}),O(z,D)},$$slots:{default:!0}})}),ye(A),O(k,A)},$$slots:{default:!0}})});var x=ne(w,2);ia(x,{get id(){return e.id},children:(C,M)=>{var k=B(),E=P(k);Z(E,()=>ic,(A,N)=>{N(A,{onclick:()=>{i()||g(s).click()},children:(L,K)=>{var z=LT(),V=P(z);Fy(V,{class:"mr-2 size-4"}),bt(),O(L,z)},$$slots:{default:!0}})}),O(C,k)},$$slots:{default:!0}}),O(y,S)},$$slots:{default:!0}})});var p=ne(f,2);p.__change=[RT,s,a],nn(p,h=>I(s,h),()=>g(s)),O(r,c),X(),o()}of(["change"]);function Cu(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"orientation",3,"horizontal"),i=Ae(e,["$$slots","$$events","$$legacy","ref","class","orientation"]);var s=B(),l=P(s);const a=F(()=>mt("bg-border shrink-0",o()==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",e.class));Z(l,()=>$k,(c,d)=>{d(c,ae({get class(){return g(a)},get orientation(){return o()}},()=>i,{get ref(){return t()},set ref(u){t(u)}}))}),O(r,s),X()}var HT=U("<input>"),WT=U("<input>");function Ba(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"value",15),i=v(e,"files",15),s=Ae(e,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var l=B(),a=P(l);{var c=u=>{var f=HT();ou(f);let p;nn(f,h=>t(h),()=>t()),Te(h=>p=He(f,p,{class:h,type:"file",...s}),[()=>mt("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),Sx(f,i),iu(f,o),O(u,f)},d=u=>{var f=WT();ou(f);let p;nn(f,h=>t(h),()=>t()),Te(h=>p=He(f,p,{class:h,type:e.type,...s}),[()=>mt("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),iu(f,o),O(u,f)};Pe(a,u=>{e.type==="file"?u(c):u(d,!1)})}O(r,l),X()}var KT=U("<!> <!> <!> <!>",1),jT=U('<div class="p-0.5 w-full h-full flex"><!></div>'),$T=U("<!> <!>",1),GT=U("<!> <!>",1);function UT(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(vn,"$lock",t);let{updateNodeData:s}=Mo(),l=ue(Bt(e.data.name||"STR")),a=ue(Bt(e.data.stat||0)),c=ue(Bt(e.data.mod||0));rt(()=>{s(e.id,{name:g(l),stat:g(a),mod:g(c)})});var d=GT(),u=P(d);const f=F(()=>e.selected&&!i());ql(u,{get isVisible(){return g(f)},minHeight:150,minWidth:100});var p=ne(u,2);Z(p,()=>ra,(h,m)=>{m(h,{children:(y,b)=>{var S=$T(),w=P(S);Z(w,()=>oa,(C,M)=>{M(C,{class:"size-full",children:(k,E)=>{var A=jT(),N=we(A);Z(N,()=>ta,(L,K)=>{K(L,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(z,V)=>{var D=B(),$=P(D);Z($,()=>na,(W,G)=>{G(W,{class:"p-0.5 h-full flex flex-col",children:(R,J)=>{var q=KT(),se=P(q);Ba(se,{class:"border-0 text-center !p-0 my-1 disabled:opacity-100",get disabled(){return i()},get value(){return g(l)},set value(te){I(l,te,!0)}});var ie=ne(se,2);Cu(ie,{class:"w-[calc(100%_-_10px)] mx-auto"});var Me=ne(ie,2);Ba(Me,{class:"border-0 text-center !text-2xl h-10 my-auto font-bold p-0 disabled:opacity-100",get disabled(){return i()},get value(){return g(a)},set value(te){I(a,te,!0)}});var j=ne(Me,2);Ba(j,{class:"border-0 text-center font-thin p-0 disabled:opacity-100",get disabled(){return i()},get value(){return g(c)},set value(te){I(c,te,!0)}}),O(R,q)},$$slots:{default:!0}})}),O(z,D)},$$slots:{default:!0}})}),ye(A),O(k,A)},$$slots:{default:!0}})});var x=ne(w,2);ia(x,{get id(){return e.id}}),O(y,S)},$$slots:{default:!0}})}),O(r,d),X(),o()}function Ot(){}const gt={DURATION:.5,EASE:[.32,.72,0,1]},Hy=.4,qT=.25,JT=100,Wy=8,ma=16,Ou=26,Ad="vaul-dragging",Ky=new WeakMap;function It(r,e,t=!1){if(!r||!(r instanceof HTMLElement))return;let o={};Object.entries(e).forEach(([i,s])=>{if(i.startsWith("--")){r.style.setProperty(i,s);return}o[i]=r.style[i],r.style[i]=s}),!t&&Ky.set(r,o)}function YT(r,e){if(!r||!(r instanceof HTMLElement))return;let t=Ky.get(r);t&&(r.style[e]=t[e])}const Tt=r=>{switch(r){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return r}};function ga(r,e){if(!r)return null;const t=window.getComputedStyle(r),o=t.transform||t.webkitTransform||t.mozTransform;let i=o.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Tt(e)?13:12]):(i=o.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Tt(e)?5:4]):null)}function XT(r){return 8*(Math.log(r+1)-2)}function Ed(r,e){if(!r)return()=>{};const t=r.style.cssText;return Object.assign(r.style,e),()=>{r.style.cssText=t}}function ZT(...r){return(...e)=>{for(const t of r)typeof t=="function"&&t(...e)}}function QT({snapPoints:r,drawerNode:e,overlayNode:t,fadeFromIndex:o,setOpenTime:i,direction:s,container:l,snapToSequentialPoint:a,activeSnapPoint:c,open:d,isReleasing:u}){let f=ue(Bt(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0));Rn(()=>{function k(){I(f,{innerWidth:window.innerWidth,innerHeight:window.innerHeight},!0)}return at(window,"resize",k)});const p=F(()=>{var k;return c.current===((k=r.current)==null?void 0:k[r.current.length-1])||null}),h=F(()=>{var k;return(k=r.current)==null?void 0:k.findIndex(E=>E===c.current)}),m=F(()=>r.current&&r.current.length>0&&(o.current||o.current===0)&&!Number.isNaN(o.current)&&r.current[o.current]===c.current||!r.current),y=F(()=>{var E;d.current;const k=l.current?{width:l.current.getBoundingClientRect().width,height:l.current.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};return((E=r.current)==null?void 0:E.map(A=>{const N=typeof A=="string";let L=0;if(N&&(L=parseInt(A,10)),Tt(s.current)){const z=N?L:g(f)?A*k.height:0;return g(f)?s.current==="bottom"?k.height-z:-k.height+z:z}const K=N?L:g(f)?A*k.width:0;return g(f)?s.current==="right"?k.width-K:-k.width+K:K}))??[]}),b=F(()=>g(h)!==null&&g(h)!==void 0?g(y)[g(h)]:null);function S(k){r.current&&k===g(y).length-1&&i(new Date)}function w(k){var A,N;const E=((A=g(y))==null?void 0:A.findIndex(L=>L===k))??null;S(E),It(e(),{transition:`transform ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`,transform:Tt(s.current)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`}),g(y)&&E!==g(y).length-1&&o.current!==void 0&&E!==o.current&&E<o.current?It(t(),{transition:`opacity ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`,opacity:"0"}):It(t(),{transition:`opacity ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`,opacity:"1"}),c.current=(N=r.current)==null?void 0:N[Math.max(E,0)]}Qe([()=>c.current,()=>d.current],()=>{var A;const k=u();if(!c.current||k)return;const E=((A=r.current)==null?void 0:A.findIndex(N=>N===c.current))??-1;if(g(y)&&E!==-1&&typeof g(y)[E]=="number"){if(g(y)[E]===c.current)return;w(g(y)[E])}});function x({draggedDistance:k,closeDrawer:E,velocity:A,dismissible:N}){var G;if(o.current===void 0)return;const L=s.current,K=L==="bottom"||L==="right"?(g(b)??0)-k:(g(b)??0)+k,z=g(h)===o.current-1,V=g(h)===0,D=k>0;if(z&&It(t(),{transition:`opacity ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`}),!a.current&&A>2&&!D){N?E():w(g(y)[0]);return}if(!a.current&&A>2&&D&&g(y)&&r.current){w(g(y)[r.current.length-1]);return}const $=(G=g(y))==null?void 0:G.reduce((R,J)=>typeof R!="number"||typeof J!="number"?R:Math.abs(J-K)<Math.abs(R-K)?J:R),W=Tt(L)?window.innerHeight:window.innerWidth;if(A>Hy&&Math.abs(k)<W*.4){const R=D?1:-1;if(R>0&&g(p)&&r.current){w(g(y)[r.current.length-1]);return}if(V&&R<0&&N&&E(),g(h)===null)return;w(g(y)[g(h)+R]);return}w($)}function C({draggedDistance:k}){if(g(b)===null)return;const E=s.current,A=Pd(E)?g(b)-k:g(b)+k,N=g(y)[g(y).length-1];Pd(E)&&A<N||!Pd(E)&&A>N||It(e(),{transform:Tt(E)?`translate3d(0, ${A}px, 0)`:`translate3d(${A}px, 0, 0)`})}function M(k,E){if(!r.current||typeof g(h)!="number"||!g(y)||o.current===void 0)return null;const A=g(h)===o.current-1;if(g(h)>=o.current&&E)return 0;if(A&&!E)return 1;if(!g(m)&&!A)return null;const L=A?g(h)+1:g(h)-1,K=A?g(y)[L]-g(y)[L-1]:g(y)[L+1]-g(y)[L],z=k/Math.abs(K);return A?1-z:z}return{get isLastSnapPoint(){return g(p)},get shouldFade(){return g(m)},get activeSnapPointIndex(){return g(h)},get snapPointsOffset(){return gf(g(y))},getPercentageDragged:M,onRelease:x,onDrag:C}}function Pd(r){return r==="bottom"||r==="right"}const eA=typeof document<"u";function tA(){const r=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(r)&&/Mobile/.test(r)||/FxiOS/.test(r))}function nA(){return Hf(/^Mac/)}function rA(){return Hf(/^iPhone/)}function Tp(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function oA(){return Hf(/^iPad/)||nA()&&navigator.maxTouchPoints>1}function jy(){return rA()||oA()}function Hf(r){return typeof window<"u"&&window.navigator!=null?r.test(window.navigator.platform):void 0}const iA=24;function Ap(...r){return(...e)=>{for(let t of r)typeof t=="function"&&t(...e)}}const Nd=eA&&window.visualViewport;function Ep(r){let e=window.getComputedStyle(r);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function $y(r){for(Ep(r)&&(r=r.parentElement);r&&!Ep(r);)r=r.parentElement;return r||document.scrollingElement||document.documentElement}const sA=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let ya=0,va;function lA(r){Qe(r.isDisabled,()=>{if(!r.isDisabled())return ya++,ya===1&&jy()&&(va=aA()),()=>{ya--,ya===0&&(va==null||va())}})}function aA(){let r,e=0;const t=f=>{r=$y(f.target),!(r===document.documentElement&&r===document.body)&&(e=f.changedTouches[0].pageY)};let o=f=>{if(!r||r===document.documentElement||r===document.body){f.preventDefault();return}let p=f.changedTouches[0].pageY,h=r.scrollTop,m=r.scrollHeight-r.clientHeight;m!==0&&((h<=0&&p>e||h>=m&&p<e)&&f.preventDefault(),e=p)},i=f=>{let p=f.target;Tu(p)&&p!==document.activeElement&&(f.preventDefault(),p.style.transform="translateY(-2000px)",p.focus(),requestAnimationFrame(()=>{p.style.transform=""}))};const s=f=>{let p=f.target;Tu(p)&&(p.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{p.style.transform="",Nd&&(Nd.height<window.innerHeight?requestAnimationFrame(()=>{Pp(p)}):Nd.addEventListener("resize",()=>Pp(p),{once:!0}))}))};let l=()=>{window.scrollTo(0,0)},a=window.pageXOffset,c=window.pageYOffset,d=Ap(cA(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let u=Ap(at(document,"touchstart",t,{passive:!1,capture:!0}),at(document,"touchmove",o,{passive:!1,capture:!0}),at(document,"touchend",i,{passive:!1,capture:!0}),at(document,"focus",s,{capture:!0}),at(window,"scroll",l));return()=>{d(),u(),window.scrollTo(a,c)}}function cA(r,e,t){let o=r.style[e];return r.style[e]=t,()=>{r.style[e]=o}}function Pp(r){let e=document.scrollingElement||document.documentElement;for(;r&&r!==e;){let t=$y(r);if(t!==document.documentElement&&t!==document.body&&t!==r){let o=t.getBoundingClientRect().top,i=r.getBoundingClientRect().top,s=r.getBoundingClientRect().bottom;const l=t.getBoundingClientRect().bottom+iA;s>l&&(t.scrollTop+=i-o)}r=t.parentElement}}function Tu(r){return r instanceof HTMLInputElement&&!sA.has(r.type)||r instanceof HTMLTextAreaElement||r instanceof HTMLElement&&r.isContentEditable}let _i=null;function dA({open:r,modal:e,nested:t,hasBeenOpened:o,preventScrollRestoration:i,noBodyStyles:s}){let l=ue(Bt(typeof window<"u"?window.location.href:"")),a=0;function c(){if(Tp()&&_i===null&&r.current&&!s.current){_i={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:f}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-a}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const p=f-window.innerHeight;p&&a>=f&&(document.body.style.top=`${-(a+p)}px`)}),300)}}function d(){if(Tp()&&_i!==null&&!s.current){const u=-parseInt(document.body.style.top,10),f=-parseInt(document.body.style.left,10);Object.assign(document.body.style,_i),window.requestAnimationFrame(()=>{if(i.current&&g(l)!==window.location.href){I(l,window.location.href,!0);return}window.scrollTo(f,u)}),_i=null}}return Rn(()=>{function u(){a=window.scrollY}return u(),at(window,"scroll",u)}),Qe([()=>e.current,()=>g(l)],()=>{if(e.current)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||d()}}),Qe([()=>r.current,()=>o(),()=>g(l),()=>e.current,()=>t.current],()=>{t.current||!o()||(r.current?(!window.matchMedia("(display-mode: standalone)").matches&&c(),e.current||window.setTimeout(()=>{d()},500)):d())}),{restorePositionSetting:d}}const sa=new bn("Drawer.Root");function uA(r){let e=ue(!1),t=ue(!1),o=ue(!1),i=ue(null),s=ue(null),l=null,a=null,c=null,d=null,u=!1,f=null,p=0,h=_(!1),m=ue(!r.open.current),y=0,b=0,S=0,w=0,x=!1;const C=QT({snapPoints:r.snapPoints,drawerNode:()=>g(s),activeSnapPoint:r.activeSnapPoint,container:r.container,direction:r.direction,fadeFromIndex:r.fadeFromIndex,overlayNode:()=>g(i),setOpenTime:j=>{l=j},snapToSequentialPoint:r.snapToSequentialPoint,open:r.open,isReleasing:()=>x});lA({isDisabled:()=>!r.open.current||g(t)||!r.modal.current||g(o)||!g(e)||!r.repositionInputs.current||!r.disablePreventScroll.current});const{restorePositionSetting:M}=dA({...r,hasBeenOpened:()=>g(e)});function k(){return(window.innerWidth-Ou)/window.innerWidth}function E(j){var te,le;!r.dismissible.current&&!r.snapPoints.current||g(s)&&!g(s).contains(j.target)||(b=((te=g(s))==null?void 0:te.getBoundingClientRect().height)||0,S=((le=g(s))==null?void 0:le.getBoundingClientRect().width)||0,I(t,!0),a=new Date,jy()&&at(window,"touchend",()=>u=!1,{once:!0}),j.target.setPointerCapture(j.pointerId),p=Tt(r.direction.current)?j.pageY:j.pageX)}function A(j,te){var ze;let le=j;const ee=(ze=window.getSelection())==null?void 0:ze.toString(),de=g(s)?ga(g(s),r.direction.current):null,me=new Date;if(le.tagName==="SELECT"||le.hasAttribute("data-vaul-no-drag")||le.closest("[data-vaul-no-drag]"))return!1;if(r.direction.current==="right"||r.direction.current==="left")return!0;if(l&&me.getTime()-l.getTime()<500)return!1;if(de!==null&&(r.direction.current==="bottom"?de>0:de<0))return!0;if(ee&&ee.length>0)return!1;if(d&&me.getTime()-d.getTime()<r.scrollLockTimeout.current&&de===0||te)return d=me,!1;for(;le;){if(le.scrollHeight>le.clientHeight){if(le.scrollTop!==0)return d=new Date,!1;if(le.getAttribute("role")==="dialog")return!0}le=le.parentNode}return!0}function N(j){var Oe,Ne;if(!g(s)||!g(t))return;const te=r.direction.current==="bottom"||r.direction.current==="right"?1:-1,le=(p-(Tt(r.direction.current)?j.pageY:j.pageX))*te,ee=le>0,de=r.snapPoints.current&&!r.dismissible.current&&!ee;if(de&&C.activeSnapPointIndex===0)return;const me=Math.abs(le),ze=document.querySelector("[data-vaul-drawer-wrapper]"),Ce=r.direction.current==="bottom"||r.direction.current==="top"?b:S;let re=me/Ce;const ge=C.getPercentageDragged(me,ee);if(ge!==null&&(re=ge),de&&re>=1||!u&&!A(j.target,ee))return;if(g(s).classList.add(Ad),u=!0,It(g(s),{transition:"none"}),It(g(i),{transition:"none"}),r.snapPoints.current&&C.onDrag({draggedDistance:le}),ee&&!r.snapPoints.current){const We=XT(le),Je=Math.min(We*-1,0)*te;It(g(s),{transform:Tt(r.direction.current)?`translate3d(0, ${Je}px, 0)`:`translate3d(${Je}px, 0, 0)`});return}const Fe=1-re;if((C.shouldFade||r.fadeFromIndex.current&&C.activeSnapPointIndex===r.fadeFromIndex.current-1)&&((Ne=(Oe=r.onDrag).current)==null||Ne.call(Oe,j,re),It(g(i),{opacity:`${Fe}`,transition:"none"},!0)),ze&&g(i)&&r.shouldScaleBackground.current){const We=Math.min(k()+re*(1-k()),1),Je=8-re*8,pt=Math.max(0,14-re*14);It(ze,{borderRadius:`${Je}px`,transform:Tt(r.direction.current)?`scale(${We}) translate3d(0, ${pt}px, 0)`:`scale(${We}) translate3d(${pt}px, 0, 0)`,transition:"none"},!0)}if(!r.snapPoints.current){const We=me*te;It(g(s),{transform:Tt(r.direction.current)?`translate3d(0, ${We}px, 0)`:`translate3d(${We}px, 0, 0)`})}}rt(()=>{window.requestAnimationFrame(()=>{I(m,!0)})});function L(j){!r.dismissible.current&&!j||(j?I(e,!0):V(!0),r.open.current=j)}function K(){var te;if(!g(s)||!r.repositionInputs.current)return;const j=document.activeElement;if(Tu(j)||h.current){const le=((te=window.visualViewport)==null?void 0:te.height)||0,ee=window.innerHeight;let de=ee-le;const me=g(s).getBoundingClientRect().height||0,ze=me>ee*.8;w||(w=me);const Ce=g(s).getBoundingClientRect().top;if(Math.abs(y-de)>60&&(h.current=!h.current),r.snapPoints.current&&r.snapPoints.current.length>0&&C.snapPointsOffset&&C.activeSnapPointIndex){const re=C.snapPointsOffset[C.activeSnapPointIndex]||0;de+=re}if(y=de,me>le||h.current){const re=g(s).getBoundingClientRect().height;let ge=re;re>le&&(ge=le-(ze?Ce:Ou)),r.fixed.current?g(s).style.height=`${re-Math.max(de,0)}px`:g(s).style.height=`${Math.max(ge,le-Ce)}px`}else tA()||(g(s).style.height=`${w}px`);r.snapPoints.current&&r.snapPoints.current.length>0&&!h.current?g(s).style.bottom="0px":g(s).style.bottom=`${Math.max(de,0)}px`}}Qe([()=>C.activeSnapPointIndex,()=>r.snapPoints.current,()=>C.snapPointsOffset,()=>g(s)],()=>{if(window.visualViewport)return at(window.visualViewport,"resize",K)});function z(){!g(t)||!g(s)||(g(s).classList.remove(Ad),u=!1,I(t,!1),c=new Date)}function V(j){var te;z(),(te=r.onClose)==null||te.current(),j||(se(!1),r.open.current=!1),window.setTimeout(()=>{r.snapPoints.current&&r.snapPoints.current.length>0&&(r.activeSnapPoint.current=r.snapPoints.current[0])},gt.DURATION*1e3)}function D(){if(!g(s))return;const j=document.querySelector("[data-vaul-drawer-wrapper]"),te=ga(g(s),r.direction.current);It(g(s),{transform:"translate3d(0, 0, 0)",transition:`transform ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`}),It(g(i),{transition:`opacity ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`,opacity:"1"}),r.shouldScaleBackground.current&&te&&te>0&&r.open.current&&It(j,{borderRadius:`${Wy}px`,overflow:"hidden",...Tt(r.direction.current)?{transform:`scale(${k()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${k()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${gt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${gt.EASE.join(",")})`},!0)}function $(j){x=!0,W(j),Dt(()=>{x=!1})}function W(j){var re,ge,Fe,Oe,Ne,We,Je,pt,Mt,nt;if(!g(t)||!g(s))return;g(s).classList.remove(Ad),u=!1,I(t,!1),c=new Date;const te=ga(g(s),r.direction.current);if(!j||j.target&&!A(j.target,!1)||!te||Number.isNaN(te)||a===null)return;const le=c.getTime()-a.getTime(),ee=p-(Tt(r.direction.current)?j.pageY:j.pageX),de=Math.abs(ee)/le;if(de>.05&&(I(o,!0),setTimeout(()=>{I(o,!1)},200)),r.snapPoints.current){const Ct=r.direction.current==="bottom"||r.direction.current==="right"?1:-1;C.onRelease({draggedDistance:ee*Ct,closeDrawer:V,velocity:de,dismissible:r.dismissible.current}),(ge=(re=r.onRelease).current)==null||ge.call(re,j,!0);return}if(r.direction.current==="bottom"||r.direction.current==="right"?ee>0:ee<0){D(),(Oe=(Fe=r.onRelease).current)==null||Oe.call(Fe,j,!0);return}if(de>Hy){V(),(We=(Ne=r.onRelease).current)==null||We.call(Ne,j,!1);return}const me=Math.min(g(s).getBoundingClientRect().height??0,window.innerHeight),ze=Math.min(g(s).getBoundingClientRect().width??0,window.innerWidth),Ce=r.direction.current==="left"||r.direction.current==="right";if(Math.abs(te)>=(Ce?ze:me)*r.closeThreshold.current){V(),(pt=(Je=r.onRelease).current)==null||pt.call(Je,j,!1);return}(nt=(Mt=r.onRelease).current)==null||nt.call(Mt,j,!0),D()}Qe(()=>r.open.current,()=>(r.open.current&&(It(document.documentElement,{scrollBehavior:"auto"}),l=new Date),()=>{YT(document.documentElement,"scrollBehavior")}));function G(j){const te=j?(window.innerWidth-ma)/window.innerWidth:1,le=j?-16:0;f&&window.clearTimeout(f),It(g(s),{transition:`transform ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`,transform:Tt(r.direction.current)?`scale(${te}) translate3d(0, ${le}px, 0)`:`scale(${te}) translate3d(${le}px, 0, 0)`}),!j&&g(s)&&(f=window.setTimeout(()=>{const ee=ga(g(s),r.direction.current);It(g(s),{transition:"none",transform:Tt(r.direction.current)?`translate3d(0, ${ee}px, 0)`:`translate3d(${ee}px, 0, 0)`})},500))}function R(j,te){if(te<0)return;const le=(window.innerWidth-ma)/window.innerWidth,ee=le+te*(1-le),de=-16+te*ma;It(g(s),{transform:Tt(r.direction.current)?`scale(${ee}) translate3d(0, ${de}px, 0)`:`scale(${ee}) translate3d(${de}px, 0, 0)`,transition:"none"})}function J(j,te){const le=Tt(r.direction.current)?window.innerHeight:window.innerWidth,ee=te?(le-ma)/le:1,de=te?-16:0;te&&It(g(s),{transition:`transform ${gt.DURATION}s cubic-bezier(${gt.EASE.join(",")})`,transform:Tt(r.direction.current)?`scale(${ee}) translate3d(0, ${de}px, 0)`:`scale(${ee}) translate3d(${de}px, 0, 0)`})}let q;function se(j){var te,le;(le=(te=r.onOpenChange).current)==null||le.call(te,j),j&&!r.nested.current?q=document.body.style.cssText:!j&&!r.nested.current&&Jl(gt.DURATION*1e3,()=>{document.body.style.cssText=q}),!j&&!r.nested.current&&M(),setTimeout(()=>{var ee,de;(de=(ee=r.onAnimationEnd).current)==null||de.call(ee,j)},gt.DURATION*1e3),j&&!r.modal.current&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),j||(document.body.style.pointerEvents="auto")}Qe(()=>r.modal.current,()=>{r.modal.current||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})});function ie(j){I(i,j,!0)}function Me(j){I(s,j,!0)}return sa.set({...r,keyboardIsOpen:h,closeDrawer:V,setDrawerNode:Me,setOverlayNode:ie,onDrag:N,onNestedDrag:R,onNestedOpenChange:G,onNestedRelease:J,onRelease:$,onPress:E,onDialogOpenChange:L,get shouldAnimate(){return g(m)},get isDragging(){return g(t)},get overlayNode(){return g(i)},get drawerNode(){return g(s)},get snapPointsOffset(){return C.snapPointsOffset},get shouldFade(){return C.shouldFade},restorePositionSetting:M,handleOpenChange:se})}function fA(r,e){Y(e,!0);let t=v(e,"open",15,!1),o=v(e,"onOpenChange",3,Ot),i=v(e,"onDrag",3,Ot),s=v(e,"onRelease",3,Ot),l=v(e,"shouldScaleBackground",3,!1),a=v(e,"setBackgroundColorOnScale",3,!0),c=v(e,"closeThreshold",3,qT),d=v(e,"scrollLockTimeout",3,JT),u=v(e,"dismissible",3,!0),f=v(e,"handleOnly",3,!1),p=v(e,"fadeFromIndex",19,()=>e.snapPoints&&e.snapPoints.length-1),h=v(e,"activeSnapPoint",15,null),m=v(e,"onActiveSnapPointChange",3,Ot),y=v(e,"fixed",3,!1),b=v(e,"modal",3,!0),S=v(e,"onClose",3,Ot),w=v(e,"nested",3,!1),x=v(e,"noBodyStyles",3,!1),C=v(e,"direction",3,"bottom"),M=v(e,"snapToSequentialPoint",3,!1),k=v(e,"preventScrollRestoration",3,!1),E=v(e,"repositionInputs",3,!0),A=v(e,"onAnimationEnd",3,Ot),N=v(e,"container",3,null),L=v(e,"autoFocus",3,!1),K=v(e,"disablePreventScroll",3,!0),z=Ae(e,["$$slots","$$events","$$legacy","open","onOpenChange","onDrag","onRelease","snapPoints","shouldScaleBackground","setBackgroundColorOnScale","closeThreshold","scrollLockTimeout","dismissible","handleOnly","fadeFromIndex","activeSnapPoint","onActiveSnapPointChange","fixed","modal","onClose","nested","noBodyStyles","direction","snapToSequentialPoint","preventScrollRestoration","repositionInputs","onAnimationEnd","container","autoFocus","disablePreventScroll"]);const V=uA({open:_.with(()=>t(),R=>{t(R),V.handleOpenChange(R)}),closeThreshold:_.with(()=>c()),scrollLockTimeout:_.with(()=>d()),snapPoints:_.with(()=>e.snapPoints),fadeFromIndex:_.with(()=>p()),nested:_.with(()=>w()),shouldScaleBackground:_.with(()=>l()),activeSnapPoint:_.with(()=>h(),R=>{h(R),m()(R)}),onRelease:_.with(()=>s()),onDrag:_.with(()=>i()),onClose:_.with(()=>S()),dismissible:_.with(()=>u()),direction:_.with(()=>C()),fixed:_.with(()=>y()),modal:_.with(()=>b()),handleOnly:_.with(()=>f()),noBodyStyles:_.with(()=>x()),preventScrollRestoration:_.with(()=>k()),setBackgroundColorOnScale:_.with(()=>a()),repositionInputs:_.with(()=>E()),autoFocus:_.with(()=>L()),snapToSequentialPoint:_.with(()=>M()),container:_.with(()=>N()),disablePreventScroll:_.with(()=>K()),onOpenChange:_.with(()=>o()),onAnimationEnd:_.with(()=>A())});var D=B(),$=P(D),W=()=>V.open.current,G=R=>{V.onDialogOpenChange(R)};Z($,()=>ky,(R,J)=>{J(R,ae({get open(){return W()},set open(q){G(q)}},()=>z))}),O(r,D),X()}globalThis.vaulIdCounter??(globalThis.vaulIdCounter={current:0});function Gy(r="vaul-svelte"){return globalThis.vaulIdCounter.current++,`${r}-${globalThis.vaulIdCounter.current}`}function hA(){const r=sa.get();let e=null;const t=typeof document<"u"?document.body.style.backgroundColor:"";function o(){return(window.innerWidth-Ou)/window.innerWidth}Qe([()=>r.open.current,()=>r.shouldScaleBackground.current,()=>r.setBackgroundColorOnScale.current],()=>{if(r.open.current&&r.shouldScaleBackground.current){e&&clearTimeout(e);const i=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[data-vaul-drawer-wrapper]");if(!i)return;ZT(r.setBackgroundColorOnScale.current&&!r.noBodyStyles.current?Ed(document.body,{background:"black"}):Ot,Ed(i,{transformOrigin:Tt(r.direction.current)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${gt.DURATION}s`,transitionTimingFunction:`cubic-bezier(${gt.EASE.join(",")})`}));const s=Ed(i,{borderRadius:`${Wy}px`,overflow:"hidden",...Tt(r.direction.current)?{transform:`scale(${o()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${o()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{s(),e=window.setTimeout(()=>{t?document.body.style.background=t:document.body.style.removeProperty("background")},gt.DURATION*1e3)}}})}function pA(r){const e=sa.get();let t=ue(!1);st({id:r.id,ref:r.ref,deps:()=>[g(t),e.open.current],onRefChange:x=>{g(t)?e.setDrawerNode(x):e.setDrawerNode(null)}});let o=ue(!1),i=null,s=null,l=!1;const a=F(()=>e.snapPoints.current&&e.snapPoints.current.length>0);hA();function c(x,C,M=0){if(l)return!0;const k=Math.abs(x.y),E=Math.abs(x.x),A=E>k,N=["bottom","right"].includes(C)?1:-1;if(C==="left"||C==="right"){if(!(x.x*N<0)&&E>=0&&E<=M)return A}else if(!(x.y*N<0)&&k>=0&&k<=M)return!A;return l=!0,!0}Qe([()=>g(a),()=>e.open.current],()=>{g(a)&&e.open.current?window.requestAnimationFrame(()=>{I(o,!0)}):I(o,!1)});function d(x){i=null,l=!1,e.onRelease(x)}function u(x){var C,M;e.handleOnly.current||((M=(C=r.onpointerdown).current)==null||M.call(C,x),i={x:x.pageX,y:x.pageY},e.onPress(x))}function f(x){var C,M;(M=(C=r.onOpenAutoFocus).current)==null||M.call(C,x),e.autoFocus.current||x.preventDefault()}function p(x){var C,M;if((M=(C=r.onInteractOutside).current)==null||M.call(C,x),!e.modal.current||x.defaultPrevented){x.preventDefault();return}e.keyboardIsOpen.current&&(e.keyboardIsOpen.current=!1)}function h(x){if(!e.modal.current){x.preventDefault();return}}function m(x){var N,L;if(s=x,e.handleOnly.current||((L=(N=r.onpointermove).current)==null||L.call(N,x),!i))return;const C=x.pageY-i.y,M=x.pageX-i.x,k=x.pointerType==="touch"?10:2;c({x:M,y:C},e.direction.current,k)?e.onDrag(x):(Math.abs(M)>k||Math.abs(C)>k)&&(i=null)}function y(x){var C,M;(M=(C=r.onpointerup).current)==null||M.call(C,x),i=null,l=!1,e.onRelease(x)}function b(x){var C,M;(M=(C=r.onpointerout).current)==null||M.call(C,x),d(s)}function S(x){var C,M;(M=(C=r.oncontextmenu).current)==null||M.call(C,x),s&&d(s)}const w=F(()=>({id:r.id.current,"data-vaul-drawer-direction":e.direction.current,"data-vaul-drawer":"","data-vaul-delayed-snap-points":g(o)?"true":"false","data-vaul-snap-points":e.open.current&&g(a)?"true":"false","data-vaul-custom-container":e.container.current?"true":"false","data-vaul-animate":e.shouldAnimate?"true":"false",onpointerdown:u,onOpenAutoFocus:f,onInteractOutside:p,onFocusOutside:h,onpointerup:y,onpointermove:m,onpointerout:b,oncontextmenu:S,preventScroll:e.modal.current}));return{get props(){return g(w)},ctx:e,setMounted:x=>{I(t,x,!0)}}}function Uy(r,e){Y(e,!0),Rn(()=>(e.onMounted(!0),()=>{e.onMounted(!1)})),X()}var mA=U("<!> <!>",1);function gA(r,e){Y(e,!0);let t=v(e,"id",19,Gy),o=v(e,"ref",15,null),i=v(e,"onOpenAutoFocus",3,Ot),s=v(e,"onInteractOutside",3,Ot),l=v(e,"onFocusOutside",3,Ot),a=v(e,"oncontextmenu",3,Ot),c=v(e,"onpointerdown",3,Ot),d=v(e,"onpointerup",3,Ot),u=v(e,"onpointerout",3,Ot),f=v(e,"onpointermove",3,Ot),p=Ae(e,["$$slots","$$events","$$legacy","id","ref","onOpenAutoFocus","onInteractOutside","onFocusOutside","oncontextmenu","onpointerdown","onpointerup","onpointerout","onpointermove","children"]);const h=pA({id:_.with(()=>t()),ref:_.with(()=>o(),x=>o(x)),oncontextmenu:_.with(()=>a()??Ot),onInteractOutside:_.with(()=>s()),onpointerdown:_.with(()=>c()??Ot),onpointermove:_.with(()=>f()??Ot),onpointerout:_.with(()=>u()??Ot),onpointerup:_.with(()=>d()??Ot),onOpenAutoFocus:_.with(()=>i()),onFocusOutside:_.with(()=>l())}),m=gf(h.ctx.snapPointsOffset),y=F(()=>m&&m.length>0?{"--snap-point-height":`${m[h.ctx.activeSnapPointIndex??0]}px`}:{}),b=F(()=>Xe(p,h.props,{style:g(y)}));var S=B(),w=P(S);Z(w,()=>My,(x,C)=>{C(x,ae(()=>g(b),{children:(M,k)=>{var E=mA(),A=P(E);ce(A,()=>e.children??Re);var N=ne(A,2);Uy(N,{get onMounted(){return h.setMounted}}),O(M,E)},$$slots:{default:!0}}))}),O(r,S),X()}function yA(r){const e=sa.get();let t=ue(!1);st({id:r.id,ref:r.ref,deps:()=>g(t),onRefChange:l=>{g(t)?e.setOverlayNode(l):e.setOverlayNode(null)}});const o=F(()=>e.snapPoints.current&&e.snapPoints.current.length>0),i=F(()=>e.modal.current),s=F(()=>({id:r.id.current,onmouseup:e.onRelease,"data-vaul-overlay":"","data-vaul-snap-points":e.open.current&&g(o)?"true":"false","data-vaul-snap-points-overlay":e.open.current&&e.shouldFade?"true":"false","data-vaul-animate":e.shouldAnimate?"true":"false"}));return{get props(){return g(s)},get shouldRender(){return g(i)},setMounted:l=>{I(t,l,!0)}}}var vA=U("<!> <!>",1);function bA(r,e){Y(e,!0);let t=v(e,"id",19,Gy),o=v(e,"ref",15,null),i=Ae(e,["$$slots","$$events","$$legacy","id","ref","children"]);const s=yA({id:_.with(()=>t()),ref:_.with(()=>o(),u=>o(u))}),l=F(()=>Xe(i,s.props));var a=B(),c=P(a);{var d=u=>{var f=B(),p=P(f);Z(p,()=>Bg,(h,m)=>{m(h,ae(()=>g(l),{children:(y,b)=>{var S=vA(),w=P(S);Uy(w,{get onMounted(){return s.setMounted}});var x=ne(w,2);ce(x,()=>e.children??Re),O(y,S)},$$slots:{default:!0}}))}),O(u,f)};Pe(c,u=>{s.shouldRender&&u(d)})}O(r,a),X()}function wA(r,e){Y(e,!0);const t=sa.get();let o=v(e,"to",19,()=>t.container.current??void 0),i=Ae(e,["$$slots","$$events","$$legacy","to"]);var s=B(),l=P(s);Z(l,()=>Uc,(a,c)=>{c(a,ae({get to(){return o()}},()=>i))}),O(r,s),X()}const xA=OS;function SA(r,e){Y(e,!0);let t=v(e,"shouldScaleBackground",3,!0),o=v(e,"open",15,!1),i=v(e,"activeSnapPoint",15,null),s=Ae(e,["$$slots","$$events","$$legacy","shouldScaleBackground","open","activeSnapPoint"]);var l=B(),a=P(l);Z(a,()=>fA,(c,d)=>{d(c,ae({get shouldScaleBackground(){return t()}},()=>s,{get open(){return o()},set open(u){o(u)},get activeSnapPoint(){return i()},set activeSnapPoint(u){i(u)}}))}),O(r,l),X()}function kA(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class"]);var i=B(),s=P(i);const l=F(()=>mt("fixed inset-0 z-50 bg-black/80",e.class));Z(s,()=>bA,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}var MA=U('<div class="bg-muted mx-auto mt-4 h-2 w-[100px] rounded-full"></div> <!>',1),CA=U("<!> <!>",1);function OA(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var i=B(),s=P(i);Z(s,()=>wA,(l,a)=>{a(l,ae(()=>e.portalProps,{children:(c,d)=>{var u=CA(),f=P(u);kA(f,{});var p=ne(f,2);const h=F(()=>mt("bg-background fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border",e.class));Z(p,()=>gA,(m,y)=>{y(m,ae({get class(){return g(h)}},()=>o,{get ref(){return t()},set ref(b){t(b)},children:(b,S)=>{var w=MA(),x=ne(P(w),2);ce(x,()=>e.children??Re),O(b,w)},$$slots:{default:!0}}))}),O(c,u)},$$slots:{default:!0}}))}),O(r,i),X()}const TA=xA;function Kt(r){this.content=r}Kt.prototype={constructor:Kt,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var o=t&&t!=r?this.remove(t):this,i=o.find(r),s=o.content.slice();return i==-1?s.push(t||r,e):(s[i+1]=e,t&&(s[i]=t)),new Kt(s)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Kt(t)},addToStart:function(r,e){return new Kt([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new Kt(t)},addBefore:function(r,e,t){var o=this.remove(e),i=o.content.slice(),s=o.find(r);return i.splice(s==-1?i.length:s,0,e,t),new Kt(i)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=Kt.from(r),r.size?new Kt(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=Kt.from(r),r.size?new Kt(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=Kt.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};Kt.from=function(r){if(r instanceof Kt)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new Kt(e)};function qy(r,e,t){for(let o=0;;o++){if(o==r.childCount||o==e.childCount)return r.childCount==e.childCount?null:t;let i=r.child(o),s=e.child(o);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let l=0;i.text[l]==s.text[l];l++)t++;return t}if(i.content.size||s.content.size){let l=qy(i.content,s.content,t+1);if(l!=null)return l}t+=i.nodeSize}}function Jy(r,e,t,o){for(let i=r.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:o};let l=r.child(--i),a=e.child(--s),c=l.nodeSize;if(l==a){t-=c,o-=c;continue}if(!l.sameMarkup(a))return{a:t,b:o};if(l.isText&&l.text!=a.text){let d=0,u=Math.min(l.text.length,a.text.length);for(;d<u&&l.text[l.text.length-d-1]==a.text[a.text.length-d-1];)d++,t--,o--;return{a:t,b:o}}if(l.content.size||a.content.size){let d=Jy(l.content,a.content,t-1,o-1);if(d)return d}t-=c,o-=c}}class Q{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let o=0;o<e.length;o++)this.size+=e[o].nodeSize}nodesBetween(e,t,o,i=0,s){for(let l=0,a=0;a<t;l++){let c=this.content[l],d=a+c.nodeSize;if(d>e&&o(c,i+a,s||null,l)!==!1&&c.content.size){let u=a+1;c.nodesBetween(Math.max(0,e-u),Math.min(c.content.size,t-u),o,i+u)}a=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,o,i){let s="",l=!0;return this.nodesBetween(e,t,(a,c)=>{let d=a.isText?a.text.slice(Math.max(e,c)-c,t-c):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&d||a.isTextblock)&&o&&(l?l=!1:s+=o),s+=d},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,o=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(o)&&(i[i.length-1]=t.withText(t.text+o.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let o=[],i=0;if(t>e)for(let s=0,l=0;l<t;s++){let a=this.content[s],c=l+a.nodeSize;c>e&&((l<e||c>t)&&(a.isText?a=a.cut(Math.max(0,e-l),Math.min(a.text.length,t-l)):a=a.cut(Math.max(0,e-l-1),Math.min(a.content.size,t-l-1))),o.push(a),i+=a.nodeSize),l=c}return new Q(o,i)}cutByIndex(e,t){return e==t?Q.empty:e==0&&t==this.content.length?this:new Q(this.content.slice(e,t))}replaceChild(e,t){let o=this.content[e];if(o==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-o.nodeSize;return i[e]=t,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,o=0;t<this.content.length;t++){let i=this.content[t];e(i,o,t),o+=i.nodeSize}}findDiffStart(e,t=0){return qy(this,e,t)}findDiffEnd(e,t=this.size,o=e.size){return Jy(this,e,t,o)}findIndex(e,t=-1){if(e==0)return ba(0,e);if(e==this.size)return ba(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let o=0,i=0;;o++){let s=this.child(o),l=i+s.nodeSize;if(l>=e)return l==e||t>0?ba(o+1,l):ba(o,i);i=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Q.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let t,o=0;for(let i=0;i<e.length;i++){let s=e[i];o+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new Q(t||e,o)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const _d={index:0,offset:0};function ba(r,e){return _d.index=r,_d.offset=e,_d}function sc(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let o=0;o<r.length;o++)if(!sc(r[o],e[o]))return!1}else{for(let o in r)if(!(o in e)||!sc(r[o],e[o]))return!1;for(let o in e)if(!(o in r))return!1}return!0}let ut=class Au{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,o=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!o&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),o=!0),t&&t.push(s)}}return t||(t=e.slice()),o||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&sc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let o=e.marks[t.type];if(!o)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=o.create(t.attrs);return o.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++)if(!e[o].eq(t[o]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Au.none;if(e instanceof Au)return[e];let t=e.slice();return t.sort((o,i)=>o.type.rank-i.type.rank),t}};ut.none=[];class lc extends Error{}class pe{constructor(e,t,o){this.content=e,this.openStart=t,this.openEnd=o}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let o=Xy(this.content,e+this.openStart,t);return o&&new pe(o,this.openStart,this.openEnd)}removeBetween(e,t){return new pe(Yy(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return pe.empty;let o=t.openStart||0,i=t.openEnd||0;if(typeof o!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(Q.fromJSON(e,t.content),o,i)}static maxOpen(e,t=!0){let o=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)o++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new pe(e,o,i)}}pe.empty=new pe(Q.empty,0,0);function Yy(r,e,t){let{index:o,offset:i}=r.findIndex(e),s=r.maybeChild(o),{index:l,offset:a}=r.findIndex(t);if(i==e||s.isText){if(a!=t&&!r.child(l).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(o!=l)throw new RangeError("Removing non-flat range");return r.replaceChild(o,s.copy(Yy(s.content,e-i-1,t-i-1)))}function Xy(r,e,t,o){let{index:i,offset:s}=r.findIndex(e),l=r.maybeChild(i);if(s==e||l.isText)return r.cut(0,e).append(t).append(r.cut(e));let a=Xy(l.content,e-s-1,t);return a&&r.replaceChild(i,l.copy(a))}function AA(r,e,t){if(t.openStart>r.depth)throw new lc("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new lc("Inconsistent open depths");return Zy(r,e,t,0)}function Zy(r,e,t,o){let i=r.index(o),s=r.node(o);if(i==e.index(o)&&o<r.depth-t.openStart){let l=Zy(r,e,t,o+1);return s.copy(s.content.replaceChild(i,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==o&&e.depth==o){let l=r.parent,a=l.content;return uo(l,a.cut(0,r.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:l,end:a}=EA(t,r);return uo(s,ev(r,l,a,e,o))}else return uo(s,ac(r,e,o))}function Qy(r,e){if(!e.type.compatibleContent(r.type))throw new lc("Cannot join "+e.type.name+" onto "+r.type.name)}function Eu(r,e,t){let o=r.node(t);return Qy(o,e.node(t)),o}function co(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function ji(r,e,t,o){let i=(e||r).node(t),s=0,l=e?e.index(t):i.childCount;r&&(s=r.index(t),r.depth>t?s++:r.textOffset&&(co(r.nodeAfter,o),s++));for(let a=s;a<l;a++)co(i.child(a),o);e&&e.depth==t&&e.textOffset&&co(e.nodeBefore,o)}function uo(r,e){return r.type.checkContent(e),r.copy(e)}function ev(r,e,t,o,i){let s=r.depth>i&&Eu(r,e,i+1),l=o.depth>i&&Eu(t,o,i+1),a=[];return ji(null,r,i,a),s&&l&&e.index(i)==t.index(i)?(Qy(s,l),co(uo(s,ev(r,e,t,o,i+1)),a)):(s&&co(uo(s,ac(r,e,i+1)),a),ji(e,t,i,a),l&&co(uo(l,ac(t,o,i+1)),a)),ji(o,null,i,a),new Q(a)}function ac(r,e,t){let o=[];if(ji(null,r,t,o),r.depth>t){let i=Eu(r,e,t+1);co(uo(i,ac(r,e,t+1)),o)}return ji(e,null,t,o),new Q(o)}function EA(r,e){let t=e.depth-r.openStart,i=e.node(t).copy(r.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(r.openStart+t),end:i.resolveNoCache(i.content.size-r.openEnd-t)}}class Zi{constructor(e,t,o){this.pos=e,this.path=t,this.parentOffset=o,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let o=this.pos-this.path[this.path.length-1],i=e.child(t);return o?e.child(t).cut(o):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let o=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=o.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ut.none;if(this.textOffset)return e.child(t).marks;let o=e.maybeChild(t-1),i=e.maybeChild(t);if(!o){let a=o;o=i,i=a}let s=o.marks;for(var l=0;l<s.length;l++)s[l].type.spec.inclusive===!1&&(!i||!s[l].isInSet(i.marks))&&(s=s[l--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let o=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let o=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);o>=0;o--)if(e.pos<=this.end(o)&&(!t||t(this.node(o))))return new cc(this,e,o);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let o=[],i=0,s=t;for(let l=e;;){let{index:a,offset:c}=l.content.findIndex(s),d=s-c;if(o.push(l,a,i+c),!d||(l=l.child(a),l.isText))break;s=d-1,i+=c+1}return new Zi(t,o,s)}static resolveCached(e,t){let o=Np.get(e);if(o)for(let s=0;s<o.elts.length;s++){let l=o.elts[s];if(l.pos==t)return l}else Np.set(e,o=new PA);let i=o.elts[o.i]=Zi.resolve(e,t);return o.i=(o.i+1)%NA,i}}class PA{constructor(){this.elts=[],this.i=0}}const NA=12,Np=new WeakMap;class cc{constructor(e,t,o){this.$from=e,this.$to=t,this.depth=o}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const _A=Object.create(null);let Rr=class Pu{constructor(e,t,o,i=ut.none){this.type=e,this.attrs=t,this.marks=i,this.content=o||Q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,o,i=0){this.content.nodesBetween(e,t,o,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,o,i){return this.content.textBetween(e,t,o,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,o){return this.type==e&&sc(this.attrs,t||e.defaultAttrs||_A)&&ut.sameSet(this.marks,o||ut.none)}copy(e=null){return e==this.content?this:new Pu(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Pu(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,o=!1){if(e==t)return pe.empty;let i=this.resolve(e),s=this.resolve(t),l=o?0:i.sharedDepth(t),a=i.start(l),d=i.node(l).content.cut(i.pos-a,s.pos-a);return new pe(d,i.depth-l,s.depth-l)}replace(e,t,o){return AA(this.resolve(e),this.resolve(t),o)}nodeAt(e){for(let t=this;;){let{index:o,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(o),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:o}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:o}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:o}=this.content.findIndex(e);if(o<e)return{node:this.content.child(t),index:t,offset:o};let i=this.content.child(t-1);return{node:i,index:t-1,offset:o-i.nodeSize}}resolve(e){return Zi.resolveCached(this,e)}resolveNoCache(e){return Zi.resolve(this,e)}rangeHasMark(e,t,o){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(o.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),tv(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,o=Q.empty,i=0,s=o.childCount){let l=this.contentMatchAt(e).matchFragment(o,i,s),a=l&&l.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(o.child(c).marks))return!1;return!0}canReplaceWith(e,t,o,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(o),l=s&&s.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ut.none;for(let t=0;t<this.marks.length;t++){let o=this.marks[t];o.type.checkAttrs(o.attrs),e=o.addToSet(e)}if(!ut.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let o;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");o=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,o)}let i=Q.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,o);return s.type.checkAttrs(s.attrs),s}};Rr.prototype.text=void 0;class dc extends Rr{constructor(e,t,o,i){if(super(e,t,null,i),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new dc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new dc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function tv(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class vo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let o=new IA(e,t);if(o.next==null)return vo.empty;let i=nv(o);o.next&&o.err("Unexpected trailing text");let s=VA(BA(i));return HA(s,o),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,o=e.childCount){let i=this;for(let s=t;i&&s<o;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let o=0;o<e.next.length;o++)if(this.next[t].type==e.next[o].type)return!0;return!1}fillBefore(e,t=!1,o=0){let i=[this];function s(l,a){let c=l.matchFragment(e,o);if(c&&(!t||c.validEnd))return Q.from(a.map(d=>d.createAndFill()));for(let d=0;d<l.next.length;d++){let{type:u,next:f}=l.next[d];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=s(f,a.concat(u));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let o=0;o<this.wrapCache.length;o+=2)if(this.wrapCache[o]==e)return this.wrapCache[o+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),o=[{match:this,type:null,via:null}];for(;o.length;){let i=o.shift(),s=i.match;if(s.matchType(e)){let l=[];for(let a=i;a.type;a=a.via)l.push(a.type);return l.reverse()}for(let l=0;l<s.next.length;l++){let{type:a,next:c}=s.next[l];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||c.validEnd)&&(o.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(o){e.push(o);for(let i=0;i<o.next.length;i++)e.indexOf(o.next[i].next)==-1&&t(o.next[i].next)}return t(this),e.map((o,i)=>{let s=i+(o.validEnd?"*":" ")+" ";for(let l=0;l<o.next.length;l++)s+=(l?", ":"")+o.next[l].type.name+"->"+e.indexOf(o.next[l].next);return s}).join(`
`)}}vo.empty=new vo(!0);class IA{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function nv(r){let e=[];do e.push(DA(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function DA(r){let e=[];do e.push(RA(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function RA(r){let e=FA(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=zA(r,e);else break;return e}function _p(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function zA(r,e){let t=_p(r),o=t;return r.eat(",")&&(r.next!="}"?o=_p(r):o=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:o,expr:e}}function LA(r,e){let t=r.nodeTypes,o=t[e];if(o)return[o];let i=[];for(let s in t){let l=t[s];l.isInGroup(e)&&i.push(l)}return i.length==0&&r.err("No node type or group '"+e+"' found"),i}function FA(r){if(r.eat("(")){let e=nv(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=LA(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function BA(r){let e=[[]];return i(s(r,0),t()),e;function t(){return e.push([])-1}function o(l,a,c){let d={term:c,to:a};return e[l].push(d),d}function i(l,a){l.forEach(c=>c.to=a)}function s(l,a){if(l.type=="choice")return l.exprs.reduce((c,d)=>c.concat(s(d,a)),[]);if(l.type=="seq")for(let c=0;;c++){let d=s(l.exprs[c],a);if(c==l.exprs.length-1)return d;i(d,a=t())}else if(l.type=="star"){let c=t();return o(a,c),i(s(l.expr,c),c),[o(c)]}else if(l.type=="plus"){let c=t();return i(s(l.expr,a),c),i(s(l.expr,c),c),[o(c)]}else{if(l.type=="opt")return[o(a)].concat(s(l.expr,a));if(l.type=="range"){let c=a;for(let d=0;d<l.min;d++){let u=t();i(s(l.expr,c),u),c=u}if(l.max==-1)i(s(l.expr,c),c);else for(let d=l.min;d<l.max;d++){let u=t();o(c,u),i(s(l.expr,c),u),c=u}return[o(c)]}else{if(l.type=="name")return[o(a,void 0,l.value)];throw new Error("Unknown expr type")}}}}function rv(r,e){return e-r}function Ip(r,e){let t=[];return o(e),t.sort(rv);function o(i){let s=r[i];if(s.length==1&&!s[0].term)return o(s[0].to);t.push(i);for(let l=0;l<s.length;l++){let{term:a,to:c}=s[l];!a&&t.indexOf(c)==-1&&o(c)}}}function VA(r){let e=Object.create(null);return t(Ip(r,0));function t(o){let i=[];o.forEach(l=>{r[l].forEach(({term:a,to:c})=>{if(!a)return;let d;for(let u=0;u<i.length;u++)i[u][0]==a&&(d=i[u][1]);Ip(r,c).forEach(u=>{d||i.push([a,d=[]]),d.indexOf(u)==-1&&d.push(u)})})});let s=e[o.join(",")]=new vo(o.indexOf(r.length-1)>-1);for(let l=0;l<i.length;l++){let a=i[l][1].sort(rv);s.next.push({type:i[l][0],next:e[a.join(",")]||t(a)})}return s}}function HA(r,e){for(let t=0,o=[r];t<o.length;t++){let i=o[t],s=!i.validEnd,l=[];for(let a=0;a<i.next.length;a++){let{type:c,next:d}=i.next[a];l.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),o.indexOf(d)==-1&&o.push(d)}s&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ov(r){let e=Object.create(null);for(let t in r){let o=r[t];if(!o.hasDefault)return null;e[t]=o.default}return e}function iv(r,e){let t=Object.create(null);for(let o in r){let i=e&&e[o];if(i===void 0){let s=r[o];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+o)}t[o]=i}return t}function sv(r,e,t,o){for(let i in e)if(!(i in r))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in r){let s=r[i];s.validate&&s.validate(e[i])}}function lv(r,e){let t=Object.create(null);if(e)for(let o in e)t[o]=new KA(r,o,e[o]);return t}let Dp=class av{constructor(e,t,o){this.name=e,this.schema=t,this.spec=o,this.markSet=null,this.groups=o.group?o.group.split(" "):[],this.attrs=lv(e,o.attrs),this.defaultAttrs=ov(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(o.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:iv(this.attrs,e)}create(e=null,t,o){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Rr(this,this.computeAttrs(e),Q.from(t),ut.setFrom(o))}createChecked(e=null,t,o){return t=Q.from(t),this.checkContent(t),new Rr(this,this.computeAttrs(e),t,ut.setFrom(o))}createAndFill(e=null,t,o){if(e=this.computeAttrs(e),t=Q.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(Q.empty,!0);return s?new Rr(this,e,t.append(s),ut.setFrom(o)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let o=0;o<e.childCount;o++)if(!this.allowsMarks(e.child(o).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){sv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let o=0;o<e.length;o++)this.allowsMarkType(e[o].type)?t&&t.push(e[o]):t||(t=e.slice(0,o));return t?t.length?t:ut.none:e}static compile(e,t){let o=Object.create(null);e.forEach((s,l)=>o[s]=new av(s,t,l));let i=t.spec.topNode||"doc";if(!o[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!o.text)throw new RangeError("Every schema needs a 'text' type");for(let s in o.text.attrs)throw new RangeError("The text node type should not have attributes");return o}};function WA(r,e,t){let o=t.split("|");return i=>{let s=i===null?"null":typeof i;if(o.indexOf(s)<0)throw new RangeError(`Expected value of type ${o} for attribute ${e} on type ${r}, got ${s}`)}}class KA{constructor(e,t,o){this.hasDefault=Object.prototype.hasOwnProperty.call(o,"default"),this.default=o.default,this.validate=typeof o.validate=="string"?WA(e,t,o.validate):o.validate}get isRequired(){return!this.hasDefault}}class Qc{constructor(e,t,o,i){this.name=e,this.rank=t,this.schema=o,this.spec=i,this.attrs=lv(e,i.attrs),this.excluded=null;let s=ov(this.attrs);this.instance=s?new ut(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ut(this,iv(this.attrs,e))}static compile(e,t){let o=Object.create(null),i=0;return e.forEach((s,l)=>o[s]=new Qc(s,i++,t,l)),o}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){sv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class cv{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Kt.from(e.nodes),t.marks=Kt.from(e.marks||{}),this.nodes=Dp.compile(this.spec.nodes,this),this.marks=Qc.compile(this.spec.marks,this);let o=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],l=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=o[l]||(o[l]=vo.parse(l,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Rp(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],l=s.spec.excludes;s.excluded=l==null?[s]:l==""?[]:Rp(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,o,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Dp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,o,i)}text(e,t){let o=this.nodes.text;return new dc(o,o.defaultAttrs,e,ut.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Rr.fromJSON(this,e)}markFromJSON(e){return ut.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Rp(r,e){let t=[];for(let o=0;o<e.length;o++){let i=e[o],s=r.marks[i],l=s;if(s)t.push(s);else for(let a in r.marks){let c=r.marks[a];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&t.push(l=c)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[o]+"'")}return t}function jA(r){return r.tag!=null}function $A(r){return r.style!=null}class zr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let o=this.matchedStyles=[];t.forEach(i=>{if(jA(i))this.tags.push(i);else if($A(i)){let s=/[^=]*/.exec(i.style)[0];o.indexOf(s)<0&&o.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let o=new Lp(this,t,!1);return o.addAll(e,ut.none,t.from,t.to),o.finish()}parseSlice(e,t={}){let o=new Lp(this,t,!0);return o.addAll(e,ut.none,t.from,t.to),pe.maxOpen(o.finish())}matchTag(e,t,o){for(let i=o?this.tags.indexOf(o)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(qA(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let l=s.getAttrs(e);if(l===!1)continue;s.attrs=l||void 0}return s}}}matchStyle(e,t,o,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let l=this.styles[s],a=l.style;if(!(a.indexOf(e)!=0||l.context&&!o.matchesContext(l.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(l.getAttrs){let c=l.getAttrs(t);if(c===!1)continue;l.attrs=c||void 0}return l}}}static schemaRules(e){let t=[];function o(i){let s=i.priority==null?50:i.priority,l=0;for(;l<t.length;l++){let a=t[l];if((a.priority==null?50:a.priority)<s)break}t.splice(l,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(l=>{o(l=Fp(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(l=>{o(l=Fp(l)),l.node||l.ignore||l.mark||(l.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new zr(e,zr.schemaRules(e)))}}const dv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},GA={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},uv={ol:!0,ul:!0},Qi=1,Nu=2,Va=4;function zp(r,e,t){return e!=null?(e?Qi:0)|(e==="full"?Nu:0):r&&r.whitespace=="pre"?Qi|Nu:t&-5}class wa{constructor(e,t,o,i,s,l){this.type=e,this.attrs=t,this.marks=o,this.solid=i,this.options=l,this.content=[],this.activeMarks=ut.none,this.match=s||(l&Va?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Q.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let o=this.type.contentMatch,i;return(i=o.findWrapping(e.type))?(this.match=o,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qi)){let o=this.content[this.content.length-1],i;if(o&&o.isText&&(i=/[ \t\r\n\u000c]+$/.exec(o.text))){let s=o;o.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=Q.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!dv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Lp{constructor(e,t,o){this.parser=e,this.options=t,this.isOpen=o,this.open=0,this.localPreserveWS=!1;let i=t.topNode,s,l=zp(null,t.preserveWhitespace,0)|(o?Va:0);i?s=new wa(i.type,i.attrs,ut.none,!0,t.topMatch||i.type.contentMatch,l):o?s=new wa(null,null,ut.none,!0,null,l):s=new wa(e.schema.topNodeType,null,ut.none,!0,null,l),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let o=e.nodeValue,i=this.top,s=i.options&Nu?"full":this.localPreserveWS||(i.options&Qi)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(o)){if(s)s!=="full"?o=o.replace(/\r?\n|\r/g," "):o=o.replace(/\r\n?/g,`
`);else if(o=o.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(o)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(o=o.slice(1))}o&&this.insertNode(this.parser.schema.text(o),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,o){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),a;uv.hasOwnProperty(l)&&this.parser.normalizeLists&&UA(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,o));e:if(c?c.ignore:GA.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,u=this.needsBlock;if(dv.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let f=c&&c.skip?t:this.readStyles(e,t);f&&this.addAll(e,f),d&&this.sync(s),this.needsBlock=u}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,c,d,c.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let o=e.style;if(o&&o.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],l=o.getPropertyValue(s);if(l)for(let a=void 0;;){let c=this.parser.matchStyle(s,l,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?t=t.filter(d=>!c.clearMark(d)):t=t.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)a=c;else break}}return t}addElementByRule(e,t,o,i){let s,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),o)||this.leafFallback(e,o);else{let c=this.enter(l,t.attrs||null,o,t.preserveWhitespace);c&&(s=!0,o=c)}else{let c=this.parser.schema.marks[t.mark];o=o.concat(c.create(t.attrs))}let a=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,o,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,o));else{let c=e;typeof t.contentElement=="string"?c=e.querySelector(t.contentElement):typeof t.contentElement=="function"?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c,o),this.findAround(e,c,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,o,i){let s=o||0;for(let l=o?e.childNodes[o]:e.firstChild,a=i==null?null:e.childNodes[i];l!=a;l=l.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(l,t);this.findAtPoint(e,s)}findPlace(e,t){let o,i;for(let s=this.open;s>=0;s--){let l=this.nodes[s],a=l.findWrapping(e);if(a&&(!o||o.length>a.length)&&(o=a,i=l,!a.length)||l.solid)break}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)t=this.enterInner(o[s],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let o=this.findPlace(e,t);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=ut.none;for(let l of o.concat(e.marks))(i.type?i.type.allowsMarkType(l.type):Bp(l.type,e.type))&&(s=l.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,t,o,i){let s=this.findPlace(e.create(t),o);return s&&(s=this.enterInner(e,t,o,!0,i)),s}enterInner(e,t,o,i=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let a=zp(e,s,l.options);l.options&Va&&l.content.length==0&&(a|=Va);let c=ut.none;return o=o.filter(d=>(l.type?l.type.allowsMarkType(d.type):Bp(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new wa(e,t,c,i,null,a)),this.open++,o}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Qi)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let o=this.nodes[t].content;for(let i=o.length-1;i>=0;i--)e+=o[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let o=0;o<this.find.length;o++)this.find[o].node==e&&this.find[o].offset==t&&(this.find[o].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,o){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(o?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),o=this.options.context,i=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),s=-(o?o.depth+1:0)+(i?0:1),l=(a,c)=>{for(;a>=0;a--){let d=t[a];if(d==""){if(a==t.length-1||a==0)continue;for(;c>=s;c--)if(l(a-1,c))return!0;return!1}else{let u=c>0||c==0&&i?this.nodes[c].type:o&&c>=s?o.node(c-s).type:null;if(!u||u.name!=d&&!u.isInGroup(d))return!1;c--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(o&&o.isTextblock&&o.defaultAttrs)return o}for(let t in this.parser.schema.nodes){let o=this.parser.schema.nodes[t];if(o.isTextblock&&o.defaultAttrs)return o}}}function UA(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let o=e.nodeType==1?e.nodeName.toLowerCase():null;o&&uv.hasOwnProperty(o)&&t?(t.appendChild(e),e=t):o=="li"?t=e:o&&(t=null)}}function qA(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function Fp(r){let e={};for(let t in r)e[t]=r[t];return e}function Bp(r,e){let t=e.schema.nodes;for(let o in t){let i=t[o];if(!i.allowsMarkType(r))continue;let s=[],l=a=>{s.push(a);for(let c=0;c<a.edgeCount;c++){let{type:d,next:u}=a.edge(c);if(d==e||s.indexOf(u)<0&&l(u))return!0}};if(l(i.contentMatch))return!0}}class Oo{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},o){o||(o=Id(t).createDocumentFragment());let i=o,s=[];return e.forEach(l=>{if(s.length||l.marks.length){let a=0,c=0;for(;a<s.length&&c<l.marks.length;){let d=l.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(s[a][0])||d.type.spec.spanning===!1)break;a++,c++}for(;a<s.length;)i=s.pop()[1];for(;c<l.marks.length;){let d=l.marks[c++],u=this.serializeMark(d,l.isInline,t);u&&(s.push([d,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(l,t))}),o}serializeNodeInner(e,t){let{dom:o,contentDOM:i}=Ha(Id(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return o}serializeNode(e,t={}){let o=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(o),o=s.dom)}return o}serializeMark(e,t,o={}){let i=this.marks[e.type.name];return i&&Ha(Id(o),i(e,t),null,e.attrs)}static renderSpec(e,t,o=null,i){return Ha(e,t,o,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Oo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Vp(e.nodes);return t.text||(t.text=o=>o.text),t}static marksFromSchema(e){return Vp(e.marks)}}function Vp(r){let e={};for(let t in r){let o=r[t].spec.toDOM;o&&(e[t]=o)}return e}function Id(r){return r.document||window.document}const Hp=new WeakMap;function JA(r){let e=Hp.get(r);return e===void 0&&Hp.set(r,e=YA(r)),e}function YA(r){let e=null;function t(o){if(o&&typeof o=="object")if(Array.isArray(o))if(typeof o[0]=="string")e||(e=[]),e.push(o);else for(let i=0;i<o.length;i++)t(o[i]);else for(let i in o)t(o[i])}return t(r),e}function Ha(r,e,t,o){if(typeof e=="string")return{dom:r.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(o&&(s=JA(o))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(t=i.slice(0,l),i=i.slice(l+1));let a,c=t?r.createElementNS(t,i):r.createElement(i),d=e[1],u=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){u=2;for(let f in d)if(d[f]!=null){let p=f.indexOf(" ");p>0?c.setAttributeNS(f.slice(0,p),f.slice(p+1),d[f]):c.setAttribute(f,d[f])}}for(let f=u;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:h,contentDOM:m}=Ha(r,p,t,o);if(c.appendChild(h),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:c,contentDOM:a}}const fv=65535,hv=Math.pow(2,16);function XA(r,e){return r+e*hv}function Wp(r){return r&fv}function ZA(r){return(r-(r&fv))/hv}const pv=1,mv=2,Wa=4,gv=8;class _u{constructor(e,t,o){this.pos=e,this.delInfo=t,this.recover=o}get deleted(){return(this.delInfo&gv)>0}get deletedBefore(){return(this.delInfo&(pv|Wa))>0}get deletedAfter(){return(this.delInfo&(mv|Wa))>0}get deletedAcross(){return(this.delInfo&Wa)>0}}class mn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&mn.empty)return mn.empty}recover(e){let t=0,o=Wp(e);if(!this.inverted)for(let i=0;i<o;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[o*3]+t+ZA(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,o){let i=0,s=this.inverted?2:1,l=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?i:0);if(c>e)break;let d=this.ranges[a+s],u=this.ranges[a+l],f=c+d;if(e<=f){let p=d?e==c?-1:e==f?1:t:t,h=c+i+(p<0?0:u);if(o)return h;let m=e==(t<0?c:f)?null:XA(a/3,e-c),y=e==c?mv:e==f?pv:Wa;return(t<0?e!=c:e!=f)&&(y|=gv),new _u(h,y,m)}i+=u-d}return o?e+i:new _u(e+i,0,null)}touches(e,t){let o=0,i=Wp(t),s=this.inverted?2:1,l=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?o:0);if(c>e)break;let d=this.ranges[a+s],u=c+d;if(e<=u&&a==i*3)return!0;o+=this.ranges[a+l]-d}return!1}forEach(e){let t=this.inverted?2:1,o=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let l=this.ranges[i],a=l-(this.inverted?s:0),c=l+(this.inverted?0:s),d=this.ranges[i+t],u=this.ranges[i+o];e(a,a+d,c,c+u),s+=u-d}}invert(){return new mn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?mn.empty:new mn(e<0?[0,-e,0]:[0,0,e])}}mn.empty=new mn([]);class es{constructor(e,t,o=0,i=e?e.length:0){this.mirror=t,this.from=o,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new es(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,o=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?o+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,o=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?o-i-1:void 0)}}invert(){let e=new es;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let o=this.from;o<this.to;o++)e=this._maps[o].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,o){let i=0;for(let s=this.from;s<this.to;s++){let l=this._maps[s],a=l.mapResult(e,t);if(a.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return o?e:new _u(e,i,null)}}const Dd=Object.create(null);class Qt{getMap(){return mn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let o=Dd[t.stepType];if(!o)throw new RangeError(`No step type ${t.stepType} defined`);return o.fromJSON(e,t)}static jsonID(e,t){if(e in Dd)throw new RangeError("Duplicate use of step JSON ID "+e);return Dd[e]=t,t.prototype.jsonID=e,t}}class At{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new At(e,null)}static fail(e){return new At(null,e)}static fromReplace(e,t,o,i){try{return At.ok(e.replace(t,o,i))}catch(s){if(s instanceof lc)return At.fail(s.message);throw s}}}function Wf(r,e,t){let o=[];for(let i=0;i<r.childCount;i++){let s=r.child(i);s.content.size&&(s=s.copy(Wf(s.content,e,s))),s.isInline&&(s=e(s,t,i)),o.push(s)}return Q.fromArray(o)}class _r extends Qt{constructor(e,t,o){super(),this.from=e,this.to=t,this.mark=o}apply(e){let t=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new pe(Wf(t.content,(l,a)=>!l.isAtom||!a.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),t.openStart,t.openEnd);return At.fromReplace(e,this.from,this.to,s)}invert(){return new Vn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return t.deleted&&o.deleted||t.pos>=o.pos?null:new _r(t.pos,o.pos,this.mark)}merge(e){return e instanceof _r&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _r(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _r(t.from,t.to,e.markFromJSON(t.mark))}}Qt.jsonID("addMark",_r);class Vn extends Qt{constructor(e,t,o){super(),this.from=e,this.to=t,this.mark=o}apply(e){let t=e.slice(this.from,this.to),o=new pe(Wf(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return At.fromReplace(e,this.from,this.to,o)}invert(){return new _r(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return t.deleted&&o.deleted||t.pos>=o.pos?null:new Vn(t.pos,o.pos,this.mark)}merge(e){return e instanceof Vn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Vn(t.from,t.to,e.markFromJSON(t.mark))}}Qt.jsonID("removeMark",Vn);class Ir extends Qt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return At.fail("No node at mark step's position");let o=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return At.fromReplace(e,this.pos,this.pos+1,new pe(Q.from(o),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let o=this.mark.addToSet(t.marks);if(o.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(o))return new Ir(this.pos,t.marks[i]);return new Ir(this.pos,this.mark)}}return new ai(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ir(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ir(t.pos,e.markFromJSON(t.mark))}}Qt.jsonID("addNodeMark",Ir);class ai extends Qt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return At.fail("No node at mark step's position");let o=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return At.fromReplace(e,this.pos,this.pos+1,new pe(Q.from(o),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ir(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ai(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ai(t.pos,e.markFromJSON(t.mark))}}Qt.jsonID("removeNodeMark",ai);class Ft extends Qt{constructor(e,t,o,i=!1){super(),this.from=e,this.to=t,this.slice=o,this.structure=i}apply(e){return this.structure&&Iu(e,this.from,this.to)?At.fail("Structure replace would overwrite content"):At.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new mn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ft(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return t.deletedAcross&&o.deletedAcross?null:new Ft(t.pos,Math.max(t.pos,o.pos),this.slice)}merge(e){if(!(e instanceof Ft)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ft(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ft(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ft(t.from,t.to,pe.fromJSON(e,t.slice),!!t.structure)}}Qt.jsonID("replace",Ft);class Vt extends Qt{constructor(e,t,o,i,s,l,a=!1){super(),this.from=e,this.to=t,this.gapFrom=o,this.gapTo=i,this.slice=s,this.insert=l,this.structure=a}apply(e){if(this.structure&&(Iu(e,this.from,this.gapFrom)||Iu(e,this.gapTo,this.to)))return At.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return At.fail("Gap is not a flat range");let o=this.slice.insertAt(this.insert,t.content);return o?At.fromReplace(e,this.from,this.to,o):At.fail("Content does not fit in gap")}getMap(){return new mn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Vt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),o=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?o.pos:e.map(this.gapTo,1);return t.deletedAcross&&o.deletedAcross||i<t.pos||s>o.pos?null:new Vt(t.pos,o.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Vt(t.from,t.to,t.gapFrom,t.gapTo,pe.fromJSON(e,t.slice),t.insert,!!t.structure)}}Qt.jsonID("replaceAround",Vt);function Iu(r,e,t){let o=r.resolve(e),i=t-e,s=o.depth;for(;i>0&&s>0&&o.indexAfter(s)==o.node(s).childCount;)s--,i--;if(i>0){let l=o.node(s).maybeChild(o.indexAfter(s));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function QA(r,e,t,o){let i=[],s=[],l,a;r.doc.nodesBetween(e,t,(c,d,u)=>{if(!c.isInline)return;let f=c.marks;if(!o.isInSet(f)&&u.type.allowsMarkType(o.type)){let p=Math.max(d,e),h=Math.min(d+c.nodeSize,t),m=o.addToSet(f);for(let y=0;y<f.length;y++)f[y].isInSet(m)||(l&&l.to==p&&l.mark.eq(f[y])?l.to=h:i.push(l=new Vn(p,h,f[y])));a&&a.to==p?a.to=h:s.push(a=new _r(p,h,o))}}),i.forEach(c=>r.step(c)),s.forEach(c=>r.step(c))}function eE(r,e,t,o){let i=[],s=0;r.doc.nodesBetween(e,t,(l,a)=>{if(!l.isInline)return;s++;let c=null;if(o instanceof Qc){let d=l.marks,u;for(;u=o.isInSet(d);)(c||(c=[])).push(u),d=u.removeFromSet(d)}else o?o.isInSet(l.marks)&&(c=[o]):c=l.marks;if(c&&c.length){let d=Math.min(a+l.nodeSize,t);for(let u=0;u<c.length;u++){let f=c[u],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&f.eq(i[h].style)&&(p=m)}p?(p.to=d,p.step=s):i.push({style:f,from:Math.max(a,e),to:d,step:s})}}}),i.forEach(l=>r.step(new Vn(l.from,l.to,l.style)))}function Kf(r,e,t,o=t.contentMatch,i=!0){let s=r.doc.nodeAt(e),l=[],a=e+1;for(let c=0;c<s.childCount;c++){let d=s.child(c),u=a+d.nodeSize,f=o.matchType(d.type);if(!f)l.push(new Ft(a,u,pe.empty));else{o=f;for(let p=0;p<d.marks.length;p++)t.allowsMarkType(d.marks[p].type)||r.step(new Vn(a,u,d.marks[p]));if(i&&d.isText&&t.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(d.text);)m||(m=new pe(Q.from(t.schema.text(" ",t.allowedMarks(d.marks))),0,0)),l.push(new Ft(a+p.index,a+p.index+p[0].length,m))}}a=u}if(!o.validEnd){let c=o.fillBefore(Q.empty,!0);r.replace(a,a,new pe(c,0,0))}for(let c=l.length-1;c>=0;c--)r.step(l[c])}function tE(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function wi(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let o=r.depth;;--o){let i=r.$from.node(o),s=r.$from.index(o),l=r.$to.indexAfter(o);if(o<r.depth&&i.canReplace(s,l,t))return o;if(o==0||i.type.spec.isolating||!tE(i,s,l))break}return null}function nE(r,e,t){let{$from:o,$to:i,depth:s}=e,l=o.before(s+1),a=i.after(s+1),c=l,d=a,u=Q.empty,f=0;for(let m=s,y=!1;m>t;m--)y||o.index(m)>0?(y=!0,u=Q.from(o.node(m).copy(u)),f++):c--;let p=Q.empty,h=0;for(let m=s,y=!1;m>t;m--)y||i.after(m+1)<i.end(m)?(y=!0,p=Q.from(i.node(m).copy(p)),h++):d++;r.step(new Vt(c,d,l,a,new pe(u.append(p),f,h),u.size-f,!0))}function jf(r,e,t=null,o=r){let i=rE(r,e),s=i&&oE(o,e);return s?i.map(Kp).concat({type:e,attrs:t}).concat(s.map(Kp)):null}function Kp(r){return{type:r,attrs:null}}function rE(r,e){let{parent:t,startIndex:o,endIndex:i}=r,s=t.contentMatchAt(o).findWrapping(e);if(!s)return null;let l=s.length?s[0]:e;return t.canReplaceWith(o,i,l)?s:null}function oE(r,e){let{parent:t,startIndex:o,endIndex:i}=r,s=t.child(o),l=e.contentMatch.findWrapping(s.type);if(!l)return null;let c=(l.length?l[l.length-1]:e).contentMatch;for(let d=o;c&&d<i;d++)c=c.matchType(t.child(d).type);return!c||!c.validEnd?null:l}function iE(r,e,t){let o=Q.empty;for(let l=t.length-1;l>=0;l--){if(o.size){let a=t[l].type.contentMatch.matchFragment(o);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=Q.from(t[l].type.create(t[l].attrs,o))}let i=e.start,s=e.end;r.step(new Vt(i,s,i,s,new pe(o,0,0),t.length,!0))}function sE(r,e,t,o,i){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=r.steps.length;r.doc.nodesBetween(e,t,(l,a)=>{let c=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(o,c)&&lE(r.doc,r.mapping.slice(s).map(a),o)){let d=null;if(o.schema.linebreakReplacement){let h=o.whitespace=="pre",m=!!o.contentMatch.matchType(o.schema.linebreakReplacement);h&&!m?d=!1:!h&&m&&(d=!0)}d===!1&&vv(r,l,a,s),Kf(r,r.mapping.slice(s).map(a,1),o,void 0,d===null);let u=r.mapping.slice(s),f=u.map(a,1),p=u.map(a+l.nodeSize,1);return r.step(new Vt(f,p,f+1,p-1,new pe(Q.from(o.create(c,null,l.marks)),0,0),1,!0)),d===!0&&yv(r,l,a,s),!1}})}function yv(r,e,t,o){e.forEach((i,s)=>{if(i.isText){let l,a=/\r?\n|\r/g;for(;l=a.exec(i.text);){let c=r.mapping.slice(o).map(t+1+s+l.index);r.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function vv(r,e,t,o){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let l=r.mapping.slice(o).map(t+1+s);r.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function lE(r,e,t){let o=r.resolve(e),i=o.index();return o.parent.canReplaceWith(i,i+1,t)}function aE(r,e,t,o,i){let s=r.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let l=t.create(o,null,i||s.marks);if(s.isLeaf)return r.replaceWith(e,e+s.nodeSize,l);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new Vt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new pe(Q.from(l),0,0),1,!0))}function cr(r,e,t=1,o){let i=r.resolve(e),s=i.depth-t,l=o&&o[o.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,u=t-2;d>s;d--,u--){let f=i.node(d),p=i.index(d);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=o&&o[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let y=o&&o[u]||f;if(!f.canReplace(p+1,f.childCount)||!y.type.validContent(h))return!1}let a=i.indexAfter(s),c=o&&o[0];return i.node(s).canReplaceWith(a,a,c?c.type:i.node(s+1).type)}function cE(r,e,t=1,o){let i=r.doc.resolve(e),s=Q.empty,l=Q.empty;for(let a=i.depth,c=i.depth-t,d=t-1;a>c;a--,d--){s=Q.from(i.node(a).copy(s));let u=o&&o[d];l=Q.from(u?u.type.create(u.attrs,l):i.node(a).copy(l))}r.step(new Ft(e,e,new pe(s.append(l),t,t),!0))}function Gr(r,e){let t=r.resolve(e),o=t.index();return bv(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(o,o+1)}function dE(r,e){e.content.size||r.type.compatibleContent(e.type);let t=r.contentMatchAt(r.childCount),{linebreakReplacement:o}=r.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),l=s.type==o?r.type.schema.nodes.text:s.type;if(t=t.matchType(l),!t||!r.type.allowsMarks(s.marks))return!1}return t.validEnd}function bv(r,e){return!!(r&&e&&!r.isLeaf&&dE(r,e))}function ed(r,e,t=-1){let o=r.resolve(e);for(let i=o.depth;;i--){let s,l,a=o.index(i);if(i==o.depth?(s=o.nodeBefore,l=o.nodeAfter):t>0?(s=o.node(i+1),a++,l=o.node(i).maybeChild(a)):(s=o.node(i).maybeChild(a-1),l=o.node(i+1)),s&&!s.isTextblock&&bv(s,l)&&o.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?o.before(i):o.after(i)}}function uE(r,e,t){let o=null,{linebreakReplacement:i}=r.doc.type.schema,s=r.doc.resolve(e-t),l=s.node().type;if(i&&l.inlineContent){let u=l.whitespace=="pre",f=!!l.contentMatch.matchType(i);u&&!f?o=!1:!u&&f&&(o=!0)}let a=r.steps.length;if(o===!1){let u=r.doc.resolve(e+t);vv(r,u.node(),u.before(),a)}l.inlineContent&&Kf(r,e+t-1,l,s.node().contentMatchAt(s.index()),o==null);let c=r.mapping.slice(a),d=c.map(e-t);if(r.step(new Ft(d,c.map(e+t,-1),pe.empty,!0)),o===!0){let u=r.doc.resolve(d);yv(r,u.node(),u.before(),r.steps.length)}return r}function fE(r,e,t){let o=r.resolve(e);if(o.parent.canReplaceWith(o.index(),o.index(),t))return e;if(o.parentOffset==0)for(let i=o.depth-1;i>=0;i--){let s=o.index(i);if(o.node(i).canReplaceWith(s,s,t))return o.before(i+1);if(s>0)return null}if(o.parentOffset==o.parent.content.size)for(let i=o.depth-1;i>=0;i--){let s=o.indexAfter(i);if(o.node(i).canReplaceWith(s,s,t))return o.after(i+1);if(s<o.node(i).childCount)return null}return null}function wv(r,e,t){let o=r.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let l=o.depth;l>=0;l--){let a=l==o.depth?0:o.pos<=(o.start(l+1)+o.end(l+1))/2?-1:1,c=o.index(l)+(a>0?1:0),d=o.node(l),u=!1;if(s==1)u=d.canReplace(c,c,i);else{let f=d.contentMatchAt(c).findWrapping(i.firstChild.type);u=f&&d.canReplaceWith(c,c,f[0])}if(u)return a==0?o.pos:a<0?o.before(l+1):o.after(l+1)}return null}function td(r,e,t=e,o=pe.empty){if(e==t&&!o.size)return null;let i=r.resolve(e),s=r.resolve(t);return xv(i,s,o)?new Ft(e,t,o):new hE(i,s,o).fit()}function xv(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class hE{constructor(e,t,o){this.$from=e,this.$to=t,this.unplaced=o,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;let s=this.placed,l=o.depth,a=i.depth;for(;l&&a&&s.childCount==1;)s=s.firstChild.content,l--,a--;let c=new pe(s,l,a);return e>-1?new Vt(o.pos,e,this.$to.pos,this.$to.end(),c,t):c.size||o.pos!=this.$to.pos?new Ft(o.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,o=0,i=this.unplaced.openEnd;o<e;o++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=o){e=o;break}t=s.content}for(let t=1;t<=2;t++)for(let o=t==1?e:this.unplaced.openStart;o>=0;o--){let i,s=null;o?(s=Rd(this.unplaced.content,o-1).firstChild,i=s.content):i=this.unplaced.content;let l=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:d}=this.frontier[a],u,f=null;if(t==1&&(l?d.matchType(l.type)||(f=d.fillBefore(Q.from(l),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:o,frontierDepth:a,parent:s,inject:f};if(t==2&&l&&(u=d.findWrapping(l.type)))return{sliceDepth:o,frontierDepth:a,parent:s,wrap:u};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:o}=this.unplaced,i=Rd(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new pe(e,t+1,Math.max(o,i.size+t>=e.size-o?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:o}=this.unplaced,i=Rd(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new pe(Fi(e,t-1,1),t-1,s?t-1:o)}else this.unplaced=new pe(Fi(e,t,1),t,o)}placeNodes({sliceDepth:e,frontierDepth:t,parent:o,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let l=this.unplaced,a=o?o.content:l.content,c=l.openStart-e,d=0,u=[],{match:f,type:p}=this.frontier[t];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));f=f.matchFragment(i)}let h=a.size+e-(l.content.size-l.openEnd);for(;d<a.childCount;){let y=a.child(d),b=f.matchType(y.type);if(!b)break;d++,(d>1||c==0||y.content.size)&&(f=b,u.push(Sv(y.mark(p.allowedMarks(y.marks)),d==1?c:0,d==a.childCount?h:-1)))}let m=d==a.childCount;m||(h=-1),this.placed=Bi(this.placed,t,Q.from(u)),this.frontier[t].match=f,m&&h<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,b=a;y<h;y++){let S=b.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),b=S.content}this.unplaced=m?e==0?pe.empty:new pe(Fi(l.content,e-1,1),e-1,h<0?l.openEnd:e-1):new pe(Fi(l.content,e,d),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!zd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:o}=this.$to,i=this.$to.after(o);for(;o>1&&i==this.$to.end(--o);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:o,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=zd(e,t,i,o,s);if(l){for(let a=t-1;a>=0;a--){let{match:c,type:d}=this.frontier[a],u=zd(e,a,d,c,!0);if(!u||u.childCount)continue e}return{depth:t,fit:l,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Bi(this.placed,t.depth,t.fit)),e=t.move;for(let o=t.depth+1;o<=e.depth;o++){let i=e.node(o),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(o));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,o){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Bi(this.placed,this.depth,Q.from(e.create(t,o))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Q.empty,!0);t.childCount&&(this.placed=Bi(this.placed,this.frontier.length,t))}}function Fi(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(Fi(r.firstChild.content,e-1,t)))}function Bi(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(Bi(r.lastChild.content,e-1,t)))}function Rd(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function Sv(r,e,t){if(e<=0)return r;let o=r.content;return e>1&&(o=o.replaceChild(0,Sv(o.firstChild,e-1,o.childCount==1?t-1:0))),e>0&&(o=r.type.contentMatch.fillBefore(o).append(o),t<=0&&(o=o.append(r.type.contentMatch.matchFragment(o).fillBefore(Q.empty,!0)))),r.copy(o)}function zd(r,e,t,o,i){let s=r.node(e),l=i?r.indexAfter(e):r.index(e);if(l==s.childCount&&!t.compatibleContent(s.type))return null;let a=o.fillBefore(s.content,!0,l);return a&&!pE(t,s.content,l)?a:null}function pE(r,e,t){for(let o=t;o<e.childCount;o++)if(!r.allowsMarks(e.child(o).marks))return!0;return!1}function mE(r){return r.spec.defining||r.spec.definingForContent}function gE(r,e,t,o){if(!o.size)return r.deleteRange(e,t);let i=r.doc.resolve(e),s=r.doc.resolve(t);if(xv(i,s,o))return r.step(new Ft(e,t,o));let l=Mv(i,r.doc.resolve(t));l[l.length-1]==0&&l.pop();let a=-(i.depth+1);l.unshift(a);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;l.indexOf(p)>-1?a=p:i.before(p)==h&&l.splice(1,0,-p)}let c=l.indexOf(a),d=[],u=o.openStart;for(let p=o.content,h=0;;h++){let m=p.firstChild;if(d.push(m),h==o.openStart)break;p=m.content}for(let p=u-1;p>=0;p--){let h=d[p],m=mE(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=p;else if(m||!h.type.isTextblock)break}for(let p=o.openStart;p>=0;p--){let h=(p+u+1)%(o.openStart+1),m=d[h];if(m)for(let y=0;y<l.length;y++){let b=l[(y+c)%l.length],S=!0;b<0&&(S=!1,b=-b);let w=i.node(b-1),x=i.index(b-1);if(w.canReplaceWith(x,x,m.type,m.marks))return r.replace(i.before(b),S?s.after(b):t,new pe(kv(o.content,0,o.openStart,h),h,o.openEnd))}}let f=r.steps.length;for(let p=l.length-1;p>=0&&(r.replace(e,t,o),!(r.steps.length>f));p--){let h=l[p];h<0||(e=i.before(h),t=s.after(h))}}function kv(r,e,t,o,i){if(e<t){let s=r.firstChild;r=r.replaceChild(0,s.copy(kv(s.content,e+1,t,o,s)))}if(e>o){let s=i.contentMatchAt(0),l=s.fillBefore(r).append(r);r=l.append(s.matchFragment(l).fillBefore(Q.empty,!0))}return r}function yE(r,e,t,o){if(!o.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let i=fE(r.doc,e,o.type);i!=null&&(e=t=i)}r.replaceRange(e,t,new pe(Q.from(o),0,0))}function vE(r,e,t){let o=r.doc.resolve(e),i=r.doc.resolve(t),s=Mv(o,i);for(let l=0;l<s.length;l++){let a=s[l],c=l==s.length-1;if(c&&a==0||o.node(a).type.contentMatch.validEnd)return r.delete(o.start(a),i.end(a));if(a>0&&(c||o.node(a-1).canReplace(o.index(a-1),i.indexAfter(a-1))))return r.delete(o.before(a),i.after(a))}for(let l=1;l<=o.depth&&l<=i.depth;l++)if(e-o.start(l)==o.depth-l&&t>o.end(l)&&i.end(l)-t!=i.depth-l&&o.start(l-1)==i.start(l-1)&&o.node(l-1).canReplace(o.index(l-1),i.index(l-1)))return r.delete(o.before(l),t);r.delete(e,t)}function Mv(r,e){let t=[],o=Math.min(r.depth,e.depth);for(let i=o;i>=0;i--){let s=r.start(i);if(s<r.pos-(r.depth-i)||e.end(i)>e.pos+(e.depth-i)||r.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==r.depth&&i==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class $o extends Qt{constructor(e,t,o){super(),this.pos=e,this.attr=t,this.value=o}apply(e){let t=e.nodeAt(this.pos);if(!t)return At.fail("No node at attribute step's position");let o=Object.create(null);for(let s in t.attrs)o[s]=t.attrs[s];o[this.attr]=this.value;let i=t.type.create(o,null,t.marks);return At.fromReplace(e,this.pos,this.pos+1,new pe(Q.from(i),0,t.isLeaf?0:1))}getMap(){return mn.empty}invert(e){return new $o(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $o(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $o(t.pos,t.attr,t.value)}}Qt.jsonID("attr",$o);class ts extends Qt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let o=e.type.create(t,e.content,e.marks);return At.ok(o)}getMap(){return mn.empty}invert(e){return new ts(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ts(t.attr,t.value)}}Qt.jsonID("docAttr",ts);let ci=class extends Error{};ci=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};ci.prototype=Object.create(Error.prototype);ci.prototype.constructor=ci;ci.prototype.name="TransformError";class bE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new es}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ci(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,o=pe.empty){let i=td(this.doc,e,t,o);return i&&this.step(i),this}replaceWith(e,t,o){return this.replace(e,t,new pe(Q.from(o),0,0))}delete(e,t){return this.replace(e,t,pe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,o){return gE(this,e,t,o),this}replaceRangeWith(e,t,o){return yE(this,e,t,o),this}deleteRange(e,t){return vE(this,e,t),this}lift(e,t){return nE(this,e,t),this}join(e,t=1){return uE(this,e,t),this}wrap(e,t){return iE(this,e,t),this}setBlockType(e,t=e,o,i=null){return sE(this,e,t,o,i),this}setNodeMarkup(e,t,o=null,i){return aE(this,e,t,o,i),this}setNodeAttribute(e,t,o){return this.step(new $o(e,t,o)),this}setDocAttribute(e,t){return this.step(new ts(e,t)),this}addNodeMark(e,t){return this.step(new Ir(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ut)){let o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at position "+e);if(t=t.isInSet(o.marks),!t)return this}return this.step(new ai(e,t)),this}split(e,t=1,o){return cE(this,e,t,o),this}addMark(e,t,o){return QA(this,e,t,o),this}removeMark(e,t,o){return eE(this,e,t,o),this}clearIncompatible(e,t,o){return Kf(this,e,t,o),this}}const Ld=Object.create(null);class Ke{constructor(e,t,o){this.$anchor=e,this.$head=t,this.ranges=o||[new wE(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=pe.empty){let o=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=o,o=o.lastChild;let s=e.steps.length,l=this.ranges;for(let a=0;a<l.length;a++){let{$from:c,$to:d}=l[a],u=e.mapping.slice(s);e.replaceRange(u.map(c.pos),u.map(d.pos),a?pe.empty:t),a==0&&Gp(e,s,(o?o.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let o=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:a}=i[s],c=e.mapping.slice(o),d=c.map(l.pos),u=c.map(a.pos);s?e.deleteRange(d,u):(e.replaceRangeWith(d,u,t),Gp(e,o,t.isInline?-1:1))}}static findFrom(e,t,o=!1){let i=e.parent.inlineContent?new Be(e):Ro(e.node(0),e.parent,e.pos,e.index(),t,o);if(i)return i;for(let s=e.depth-1;s>=0;s--){let l=t<0?Ro(e.node(0),e.node(s),e.before(s+1),e.index(s),t,o):Ro(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,o);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new yn(e.node(0))}static atStart(e){return Ro(e,e,0,0,1)||new yn(e)}static atEnd(e){return Ro(e,e,e.content.size,e.childCount,-1)||new yn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let o=Ld[t.type];if(!o)throw new RangeError(`No selection type ${t.type} defined`);return o.fromJSON(e,t)}static jsonID(e,t){if(e in Ld)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ld[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Ke.prototype.visible=!0;class wE{constructor(e,t){this.$from=e,this.$to=t}}let jp=!1;function $p(r){!jp&&!r.parent.inlineContent&&(jp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class Be extends Ke{constructor(e,t=e){$p(e),$p(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let o=e.resolve(t.map(this.head));if(!o.parent.inlineContent)return Ke.near(o);let i=e.resolve(t.map(this.anchor));return new Be(i.parent.inlineContent?i:o,o)}replace(e,t=pe.empty){if(super.replace(e,t),t==pe.empty){let o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new nd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,o=t){let i=e.resolve(t);return new this(i,o==t?i:e.resolve(o))}static between(e,t,o){let i=e.pos-t.pos;if((!o||i)&&(o=i>=0?1:-1),!t.parent.inlineContent){let s=Ke.findFrom(t,o,!0)||Ke.findFrom(t,-o,!0);if(s)t=s.$head;else return Ke.near(t,o)}return e.parent.inlineContent||(i==0?e=t:(e=(Ke.findFrom(e,-o,!0)||Ke.findFrom(e,o,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Be(e,t)}}Ke.jsonID("text",Be);class nd{constructor(e,t){this.anchor=e,this.head=t}map(e){return new nd(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ie extends Ke{constructor(e){let t=e.nodeAfter,o=e.node(0).resolve(e.pos+t.nodeSize);super(e,o),this.node=t}map(e,t){let{deleted:o,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return o?Ke.near(s):new Ie(s)}content(){return new pe(Q.from(this.node),0,0)}eq(e){return e instanceof Ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new $f(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ie(e.resolve(t.anchor))}static create(e,t){return new Ie(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ie.prototype.visible=!1;Ke.jsonID("node",Ie);class $f{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:o}=e.mapResult(this.anchor);return t?new nd(o,o):new $f(o)}resolve(e){let t=e.resolve(this.anchor),o=t.nodeAfter;return o&&Ie.isSelectable(o)?new Ie(t):Ke.near(t)}}class yn extends Ke{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=pe.empty){if(t==pe.empty){e.delete(0,e.doc.content.size);let o=Ke.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new yn(e)}map(e){return new yn(e)}eq(e){return e instanceof yn}getBookmark(){return xE}}Ke.jsonID("all",yn);const xE={map(){return this},resolve(r){return new yn(r)}};function Ro(r,e,t,o,i,s=!1){if(e.inlineContent)return Be.create(r,t);for(let l=o-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let a=e.child(l);if(a.isAtom){if(!s&&Ie.isSelectable(a))return Ie.create(r,t-(i<0?a.nodeSize:0))}else{let c=Ro(r,a,t+i,i<0?a.childCount:0,i,s);if(c)return c}t+=a.nodeSize*i}return null}function Gp(r,e,t){let o=r.steps.length-1;if(o<e)return;let i=r.steps[o];if(!(i instanceof Ft||i instanceof Vt))return;let s=r.mapping.maps[o],l;s.forEach((a,c,d,u)=>{l==null&&(l=u)}),r.setSelection(Ke.near(r.doc.resolve(l),t))}const Up=1,qp=2,Jp=4;class SE extends bE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Up)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Up)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=qp,this}ensureMarks(e){return ut.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&qp)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let o=this.selection;return t&&(e=e.mark(this.storedMarks||(o.empty?o.$from.marks():o.$from.marksAcross(o.$to)||ut.none))),o.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,o){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(o==null&&(o=t),o=o??t,!e)return this.deleteRange(t,o);let s=this.storedMarks;if(!s){let l=this.doc.resolve(t);s=o==t?l.marks():l.marksAcross(this.doc.resolve(o))}return this.replaceRangeWith(t,o,i.text(e,s)),this.selection.empty||this.setSelection(Ke.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Jp,this}get scrolledIntoView(){return(this.updated&Jp)>0}}function Yp(r,e){return!e||!r?r:r.bind(e)}class Vi{constructor(e,t,o){this.name=e,this.init=Yp(t.init,o),this.apply=Yp(t.apply,o)}}const kE=[new Vi("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new Vi("selection",{init(r,e){return r.selection||Ke.atStart(e.doc)},apply(r){return r.selection}}),new Vi("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,o){return o.selection.$cursor?r.storedMarks:null}}),new Vi("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class Fd{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=kE.slice(),t&&t.forEach(o=>{if(this.pluginsByKey[o.key])throw new RangeError("Adding different instances of a keyed plugin ("+o.key+")");this.plugins.push(o),this.pluginsByKey[o.key]=o,o.spec.state&&this.fields.push(new Vi(o.key,o.spec.state,o))})}}class Bo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let o=0;o<this.config.plugins.length;o++)if(o!=t){let i=this.config.plugins[o];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],o=this.applyInner(e),i=null;for(;;){let s=!1;for(let l=0;l<this.config.plugins.length;l++){let a=this.config.plugins[l];if(a.spec.appendTransaction){let c=i?i[l].n:0,d=i?i[l].state:this,u=c<t.length&&a.spec.appendTransaction.call(a,c?t.slice(c):t,d,o);if(u&&o.filterTransaction(u,l)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<l?{state:o,n:t.length}:{state:this,n:0})}t.push(u),o=o.applyInner(u),s=!0}i&&(i[l]={state:o,n:t.length})}}if(!s)return{state:o,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Bo(this.config),o=this.config.fields;for(let i=0;i<o.length;i++){let s=o[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new SE(this)}static create(e){let t=new Fd(e.doc?e.doc.type.schema:e.schema,e.plugins),o=new Bo(t);for(let i=0;i<t.fields.length;i++)o[t.fields[i].name]=t.fields[i].init(e,o);return o}reconfigure(e){let t=new Fd(this.schema,e.plugins),o=t.fields,i=new Bo(t);for(let s=0;s<o.length;s++){let l=o[s].name;i[l]=this.hasOwnProperty(l)?this[l]:o[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(o=>o.toJSON())),e&&typeof e=="object")for(let o in e){if(o=="doc"||o=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[o],s=i.spec.state;s&&s.toJSON&&(t[o]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,o){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Fd(e.schema,e.plugins),s=new Bo(i);return i.fields.forEach(l=>{if(l.name=="doc")s.doc=Rr.fromJSON(e.schema,t.doc);else if(l.name=="selection")s.selection=Ke.fromJSON(s.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(o)for(let a in o){let c=o[a],d=c.spec.state;if(c.key==l.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[l.name]=d.fromJSON.call(c,e,t[a],s);return}}s[l.name]=l.init(e,s)}}),s}}function Cv(r,e,t){for(let o in r){let i=r[o];i instanceof Function?i=i.bind(e):o=="handleDOMEvents"&&(i=Cv(i,e,{})),t[o]=i}return t}class dn{constructor(e){this.spec=e,this.props={},e.props&&Cv(e.props,this,this.props),this.key=e.key?e.key.key:Ov("plugin")}getState(e){return e[this.key]}}const Bd=Object.create(null);function Ov(r){return r in Bd?r+"$"+ ++Bd[r]:(Bd[r]=0,r+"$")}class qn{constructor(e="key"){this.key=Ov(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const $t=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},di=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let Du=null;const Zn=function(r,e,t){let o=Du||(Du=document.createRange());return o.setEnd(r,t??r.nodeValue.length),o.setStart(r,e||0),o},ME=function(){Du=null},bo=function(r,e,t,o){return t&&(Xp(r,e,t,o,-1)||Xp(r,e,t,o,1))},CE=/^(img|br|input|textarea|hr)$/i;function Xp(r,e,t,o,i){for(;;){if(r==t&&e==o)return!0;if(e==(i<0?0:Cn(r))){let s=r.parentNode;if(!s||s.nodeType!=1||la(r)||CE.test(r.nodeName)||r.contentEditable=="false")return!1;e=$t(r)+(i<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.contentEditable=="false")return!1;e=i<0?Cn(r):0}else return!1}}function Cn(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function OE(r,e){for(;;){if(r.nodeType==3&&e)return r;if(r.nodeType==1&&e>0){if(r.contentEditable=="false")return null;r=r.childNodes[e-1],e=Cn(r)}else if(r.parentNode&&!la(r))e=$t(r),r=r.parentNode;else return null}}function TE(r,e){for(;;){if(r.nodeType==3&&e<r.nodeValue.length)return r;if(r.nodeType==1&&e<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[e],e=0}else if(r.parentNode&&!la(r))e=$t(r)+1,r=r.parentNode;else return null}}function AE(r,e,t){for(let o=e==0,i=e==Cn(r);o||i;){if(r==t)return!0;let s=$t(r);if(r=r.parentNode,!r)return!1;o=o&&s==0,i=i&&s==Cn(r)}}function la(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const rd=function(r){return r.focusNode&&bo(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function no(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function EE(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function PE(r,e,t){if(r.caretPositionFromPoint)try{let o=r.caretPositionFromPoint(e,t);if(o)return{node:o.offsetNode,offset:Math.min(Cn(o.offsetNode),o.offset)}}catch{}if(r.caretRangeFromPoint){let o=r.caretRangeFromPoint(e,t);if(o)return{node:o.startContainer,offset:Math.min(Cn(o.startContainer),o.startOffset)}}}const jn=typeof navigator<"u"?navigator:null,Zp=typeof document<"u"?document:null,Ur=jn&&jn.userAgent||"",Ru=/Edge\/(\d+)/.exec(Ur),Tv=/MSIE \d/.exec(Ur),zu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ur),cn=!!(Tv||zu||Ru),Lr=Tv?document.documentMode:zu?+zu[1]:Ru?+Ru[1]:0,In=!cn&&/gecko\/(\d+)/i.test(Ur);In&&+(/Firefox\/(\d+)/.exec(Ur)||[0,0])[1];const Lu=!cn&&/Chrome\/(\d+)/.exec(Ur),Zt=!!Lu,Av=Lu?+Lu[1]:0,rn=!cn&&!!jn&&/Apple Computer/.test(jn.vendor),ui=rn&&(/Mobile\/\w+/.test(Ur)||!!jn&&jn.maxTouchPoints>2),Mn=ui||(jn?/Mac/.test(jn.platform):!1),NE=jn?/Win/.test(jn.platform):!1,sr=/Android \d/.test(Ur),aa=!!Zp&&"webkitFontSmoothing"in Zp.documentElement.style,_E=aa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function IE(r){let e=r.defaultView&&r.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Xn(r,e){return typeof r=="number"?r:r[e]}function DE(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,o=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*o}}function Qp(r,e,t){let o=r.someProp("scrollThreshold")||0,i=r.someProp("scrollMargin")||5,s=r.dom.ownerDocument;for(let l=t||r.dom;l;){if(l.nodeType!=1){l=di(l);continue}let a=l,c=a==s.body,d=c?IE(s):DE(a),u=0,f=0;if(e.top<d.top+Xn(o,"top")?f=-(d.top-e.top+Xn(i,"top")):e.bottom>d.bottom-Xn(o,"bottom")&&(f=e.bottom-e.top>d.bottom-d.top?e.top+Xn(i,"top")-d.top:e.bottom-d.bottom+Xn(i,"bottom")),e.left<d.left+Xn(o,"left")?u=-(d.left-e.left+Xn(i,"left")):e.right>d.right-Xn(o,"right")&&(u=e.right-d.right+Xn(i,"right")),u||f)if(c)s.defaultView.scrollBy(u,f);else{let h=a.scrollLeft,m=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let y=a.scrollLeft-h,b=a.scrollTop-m;e={left:e.left-y,top:e.top-b,right:e.right-y,bottom:e.bottom-b}}let p=c?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(p))break;l=p=="absolute"?l.offsetParent:di(l)}}function RE(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),o,i;for(let s=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let a=r.root.elementFromPoint(s,l);if(!a||a==r.dom||!r.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=t-20){o=a,i=c.top;break}}return{refDOM:o,refTop:i,stack:Ev(r.dom)}}function Ev(r){let e=[],t=r.ownerDocument;for(let o=r;o&&(e.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),r!=t);o=di(o));return e}function zE({refDOM:r,refTop:e,stack:t}){let o=r?r.getBoundingClientRect().top:0;Pv(t,o==0?0:o-e)}function Pv(r,e){for(let t=0;t<r.length;t++){let{dom:o,top:i,left:s}=r[t];o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}let Eo=null;function LE(r){if(r.setActive)return r.setActive();if(Eo)return r.focus(Eo);let e=Ev(r);r.focus(Eo==null?{get preventScroll(){return Eo={preventScroll:!0},!0}}:void 0),Eo||(Eo=!1,Pv(e,0))}function Nv(r,e){let t,o=2e8,i,s=0,l=e.top,a=e.top,c,d;for(let u=r.firstChild,f=0;u;u=u.nextSibling,f++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=Zn(u).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=l&&m.bottom>=a){l=Math.max(m.bottom,l),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<o){t=u,o=y,i=y&&t.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(s=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!c&&m.left<=e.left&&m.right>=e.left&&(c=u,d={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!t&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=f+1)}}return!t&&c&&(t=c,i=d,o=0),t&&t.nodeType==3?FE(t,i):!t||o&&t.nodeType==1?{node:r,offset:s}:Nv(t,i)}function FE(r,e){let t=r.nodeValue.length,o=document.createRange();for(let i=0;i<t;i++){o.setEnd(r,i+1),o.setStart(r,i);let s=Mr(o,1);if(s.top!=s.bottom&&Gf(e,s))return{node:r,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:r,offset:0}}function Gf(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function BE(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function VE(r,e,t){let{node:o,offset:i}=Nv(e,t),s=-1;if(o.nodeType==1&&!o.firstChild){let l=o.getBoundingClientRect();s=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return r.docView.posFromDOM(o,i,s)}function HE(r,e,t,o){let i=-1;for(let s=e,l=!1;s!=r.dom;){let a=r.docView.nearestDesc(s,!0),c;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((c=a.dom.getBoundingClientRect()).width||c.height)&&(a.node.isBlock&&a.parent&&(!l&&c.left>o.left||c.top>o.top?i=a.posBefore:(!l&&c.right<o.left||c.bottom<o.top)&&(i=a.posAfter),l=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?o.top<(c.top+c.bottom)/2:o.left<(c.left+c.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:r.docView.posFromDOM(e,t,-1)}function _v(r,e,t){let o=r.childNodes.length;if(o&&t.top<t.bottom)for(let i=Math.max(0,Math.min(o-1,Math.floor(o*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let l=r.childNodes[s];if(l.nodeType==1){let a=l.getClientRects();for(let c=0;c<a.length;c++){let d=a[c];if(Gf(e,d))return _v(l,e,d)}}if((s=(s+1)%o)==i)break}return r}function WE(r,e){let t=r.dom.ownerDocument,o,i=0,s=PE(t,e.left,e.top);s&&({node:o,offset:i}=s);let l=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),a;if(!l||!r.dom.contains(l.nodeType!=1?l.parentNode:l)){let d=r.dom.getBoundingClientRect();if(!Gf(e,d)||(l=_v(r.dom,e,d),!l))return null}if(rn)for(let d=l;o&&d;d=di(d))d.draggable&&(o=void 0);if(l=BE(l,e),o){if(In&&o.nodeType==1&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){let u=o.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let d;aa&&i&&o.nodeType==1&&(d=o.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,o==r.dom&&i==o.childNodes.length-1&&o.lastChild.nodeType==1&&e.top>o.lastChild.getBoundingClientRect().bottom?a=r.state.doc.content.size:(i==0||o.nodeType!=1||o.childNodes[i-1].nodeName!="BR")&&(a=HE(r,o,i,e))}a==null&&(a=VE(r,l,e));let c=r.docView.nearestDesc(l,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function em(r){return r.top<r.bottom||r.left<r.right}function Mr(r,e){let t=r.getClientRects();if(t.length){let o=t[e<0?0:t.length-1];if(em(o))return o}return Array.prototype.find.call(t,em)||r.getBoundingClientRect()}const KE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Iv(r,e,t){let{node:o,offset:i,atom:s}=r.docView.domFromPos(e,t<0?-1:1),l=aa||In;if(o.nodeType==3)if(l&&(KE.test(o.nodeValue)||(t<0?!i:i==o.nodeValue.length))){let c=Mr(Zn(o,i,i),t);if(In&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){let d=Mr(Zn(o,i-1,i-1),-1);if(d.top==c.top){let u=Mr(Zn(o,i,i+1),-1);if(u.top!=c.top)return Ii(u,u.left<d.left)}}return c}else{let c=i,d=i,u=t<0?1:-1;return t<0&&!i?(d++,u=-1):t>=0&&i==o.nodeValue.length?(c--,u=1):t<0?c--:d++,Ii(Mr(Zn(o,c,d),u),u<0)}if(!r.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Cn(o))){let c=o.childNodes[i-1];if(c.nodeType==1)return Vd(c.getBoundingClientRect(),!1)}if(s==null&&i<Cn(o)){let c=o.childNodes[i];if(c.nodeType==1)return Vd(c.getBoundingClientRect(),!0)}return Vd(o.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Cn(o))){let c=o.childNodes[i-1],d=c.nodeType==3?Zn(c,Cn(c)-(l?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return Ii(Mr(d,1),!1)}if(s==null&&i<Cn(o)){let c=o.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?Zn(c,0,l?0:1):c.nodeType==1?c:null:null;if(d)return Ii(Mr(d,-1),!0)}return Ii(Mr(o.nodeType==3?Zn(o):o,-t),t>=0)}function Ii(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function Vd(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function Dv(r,e,t){let o=r.state,i=r.root.activeElement;o!=e&&r.updateState(e),i!=r.dom&&r.focus();try{return t()}finally{o!=e&&r.updateState(o),i!=r.dom&&i&&i.focus()}}function jE(r,e,t){let o=e.selection,i=t=="up"?o.$from:o.$to;return Dv(r,e,()=>{let{node:s}=r.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=r.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let l=Iv(r,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=Zn(a,0,a.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let u=c[d];if(u.bottom>u.top+1&&(t=="up"?l.top-u.top>(u.bottom-l.top)*2:u.bottom-l.bottom>(l.bottom-u.top)*2))return!1}}return!0})}const $E=/[\u0590-\u08ac]/;function GE(r,e,t){let{$head:o}=e.selection;if(!o.parent.isTextblock)return!1;let i=o.parentOffset,s=!i,l=i==o.parent.content.size,a=r.domSelection();return a?!$E.test(o.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:l:Dv(r,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:u,anchorOffset:f}=r.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",t,"character");let h=o.depth?r.docView.domAfterPos(o.before()):r.dom,{focusNode:m,focusOffset:y}=r.domSelectionRange(),b=m&&!h.contains(m.nodeType==1?m:m.parentNode)||c==m&&d==y;try{a.collapse(u,f),c&&(c!=u||d!=f)&&a.extend&&a.extend(c,d)}catch{}return p!=null&&(a.caretBidiLevel=p),b}):o.pos==o.start()||o.pos==o.end()}let tm=null,nm=null,rm=!1;function UE(r,e,t){return tm==e&&nm==t?rm:(tm=e,nm=t,rm=t=="up"||t=="down"?jE(r,e,t):GE(r,e,t))}const Tn=0,om=1,oo=2,$n=3;class ca{constructor(e,t,o,i){this.parent=e,this.children=t,this.dom=o,this.contentDOM=i,this.dirty=Tn,o.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,o){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,o=this.posAtStart;;t++){let i=this.children[t];if(i==e)return o;o+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,o){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(o<0){let s,l;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(l)+l.size:this.posAtStart}else{let s,l;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>$t(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??o>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let o=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),l;if(s&&(!t||s.node))if(o&&(l=s.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))o=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let o=t;o;o=o.parent)if(o==this)return t}posFromDOM(e,t,o){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,o)}return-1}descAt(e){for(let t=0,o=0;t<this.children.length;t++){let i=this.children[t],s=o+i.size;if(o==e&&s!=o){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let a=i.children[l];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-o-i.border);o=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let o=0,i=0;for(let s=0;o<this.children.length;o++){let l=this.children[o],a=s+l.size;if(a>e||l instanceof zv){i=e-s;break}s=a}if(i)return this.children[o].domFromPos(i-this.children[o].border,t);for(let s;o&&!(s=this.children[o-1]).size&&s instanceof Rv&&s.side>=0;o--);if(t<=0){let s,l=!0;for(;s=o?this.children[o-1]:null,!(!s||s.dom.parentNode==this.contentDOM);o--,l=!1);return s&&t&&l&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?$t(s.dom)+1:0}}else{let s,l=!0;for(;s=o<this.children.length?this.children[o]:null,!(!s||s.dom.parentNode==this.contentDOM);o++,l=!1);return s&&l&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?$t(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,o=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let l=o,a=0;;a++){let c=this.children[a],d=l+c.size;if(i==-1&&e<=d){let u=l+c.border;if(e>=u&&t<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,t,u);e=l;for(let f=a;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=$t(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(d>t||a==this.children.length-1)){t=d;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=$t(f.dom);break}t+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}l=d}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:o}=this.domFromPos(e,0);if(t.nodeType!=1||o==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[o]}setSelection(e,t,o,i=!1){let s=Math.min(e,t),l=Math.max(e,t);for(let h=0,m=0;h<this.children.length;h++){let y=this.children[h],b=m+y.size;if(s>m&&l<b)return y.setSelection(e-m-y.border,t-m-y.border,o,i);m=b}let a=this.domFromPos(e,e?-1:1),c=t==e?a:this.domFromPos(t,t?-1:1),d=o.root.getSelection(),u=o.domSelectionRange(),f=!1;if((In||rn)&&e==t){let{node:h,offset:m}=a;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let y=h,b;y;y=y.parentNode){if(b=y.nextSibling){b.nodeName=="BR"&&(a=c={node:b.parentNode,offset:$t(b)+1});break}let S=y.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let y=h.childNodes[m-1];f=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(In&&u.focusNode&&u.focusNode!=c.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&rn)&&bo(a.node,a.offset,u.anchorNode,u.anchorOffset)&&bo(c.node,c.offset,u.focusNode,u.focusOffset))return;let p=!1;if((d.extend||e==t)&&!f){d.collapse(a.node,a.offset);try{e!=t&&d.extend(c.node,c.offset),p=!0}catch{}}if(!p){if(e>t){let m=a;a=c,c=m}let h=document.createRange();h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let o=0,i=0;i<this.children.length;i++){let s=this.children[i],l=o+s.size;if(o==l?e<=l&&t>=o:e<l&&t>o){let a=o+s.border,c=l-s.border;if(e>=a&&t<=c){this.dirty=e==o||t==l?oo:om,e==a&&t==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=$n:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?oo:$n}o=l}this.dirty=oo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let o=e==1?oo:om;t.dirty<o&&(t.dirty=o)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Rv extends ca{constructor(e,t,o,i){let s,l=t.type.toDOM;if(typeof l=="function"&&(l=l(o,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(l.nodeType!=1){let a=document.createElement("span");a.appendChild(l),l=a}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Tn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class qE extends ca{constructor(e,t,o,i){super(e,[],t,null),this.textDOM=o,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class wo extends ca{constructor(e,t,o,i,s){super(e,[],o,i),this.mark=t,this.spec=s}static create(e,t,o,i){let s=i.nodeViews[t.type.name],l=s&&s(t,i,o);return(!l||!l.dom)&&(l=Oo.renderSpec(document,t.type.spec.toDOM(t,o),null,t.attrs)),new wo(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&$n||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=$n&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Tn){let o=this.parent;for(;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=Tn}}slice(e,t,o){let i=wo.create(this.parent,this.mark,!0,o),s=this.children,l=this.size;t<l&&(s=Bu(s,t,l,o)),e>0&&(s=Bu(s,0,e,o));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Fr extends ca{constructor(e,t,o,i,s,l,a,c,d){super(e,[],s,l),this.node=t,this.outerDeco=o,this.innerDeco=i,this.nodeDOM=a}static create(e,t,o,i,s,l){let a=s.nodeViews[t.type.name],c,d=a&&a(t,s,()=>{if(!c)return l;if(c.parent)return c.parent.posBeforeChild(c)},o,i),u=d&&d.dom,f=d&&d.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Oo.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let p=u;return u=Bv(u,o,t),d?c=new JE(e,t,o,i,u,f||null,p,d,s,l+1):t.isText?new od(e,t,o,i,u,p,s):new Fr(e,t,o,i,u,f||null,p,s,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let o=this.children[t];if(this.dom.contains(o.dom.parentNode)){e.contentElement=o.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,t,o){return this.dirty==Tn&&e.eq(this.node)&&uc(t,this.outerDeco)&&o.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let o=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,l=s&&s.pos>-1?s:null,a=s&&s.pos<0,c=new XE(this,l&&l.node,e);eP(this.node,this.innerDeco,(d,u,f)=>{d.spec.marks?c.syncToMarks(d.spec.marks,o,e):d.type.side>=0&&!f&&c.syncToMarks(u==this.node.childCount?ut.none:this.node.child(u).marks,o,e),c.placeWidget(d,e,i)},(d,u,f,p)=>{c.syncToMarks(d.marks,o,e);let h;c.findNodeMatch(d,u,f,p)||a&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(h=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(d,u,f,h,e)||c.updateNextNode(d,u,f,e,p,i)||c.addNode(d,u,f,e,i),i+=d.nodeSize}),c.syncToMarks([],o,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==oo)&&(l&&this.protectLocalComposition(e,l),Lv(this.contentDOM,this.children,e),ui&&tP(this.dom))}localCompositionInfo(e,t){let{from:o,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||o<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,a=nP(this.node.content,l,o-t,i-t);return a<0?null:{node:s,pos:a,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:o,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let l=new qE(this,s,t,i);e.input.compositionNodes.push(l),this.children=Bu(this.children,o,o+i.length,e,l)}update(e,t,o,i){return this.dirty==$n||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,o,i),!0)}updateInner(e,t,o,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=o,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Tn}updateOuterDeco(e){if(uc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,o=this.dom;this.dom=Fv(this.dom,this.nodeDOM,Fu(this.outerDeco,this.node,t),Fu(e,this.node,t)),this.dom!=o&&(o.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function im(r,e,t,o,i){Bv(o,e,r);let s=new Fr(void 0,r,e,t,o,o,o,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class od extends Fr{constructor(e,t,o,i,s,l,a){super(e,t,o,i,s,null,l,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,o,i){return this.dirty==$n||this.dirty!=Tn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Tn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Tn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,o){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,o)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,o){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new od(this.parent,i,this.outerDeco,this.innerDeco,s,s,o)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=$n)}get domAtom(){return!1}isText(e){return this.node.text==e}}class zv extends ca{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Tn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class JE extends Fr{constructor(e,t,o,i,s,l,a,c,d,u){super(e,t,o,i,s,l,a,d,u),this.spec=c}update(e,t,o,i){if(this.dirty==$n)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,o);return s&&this.updateInner(e,t,o,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,o,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,o,i){this.spec.setSelection?this.spec.setSelection(e,t,o.root):super.setSelection(e,t,o,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Lv(r,e,t){let o=r.firstChild,i=!1;for(let s=0;s<e.length;s++){let l=e[s],a=l.dom;if(a.parentNode==r){for(;a!=o;)o=sm(o),i=!0;o=o.nextSibling}else i=!0,r.insertBefore(a,o);if(l instanceof wo){let c=o?o.previousSibling:r.lastChild;Lv(l.contentDOM,l.children,t),o=c?c.nextSibling:r.firstChild}}for(;o;)o=sm(o),i=!0;i&&t.trackWrites==r&&(t.trackWrites=null)}const $i=function(r){r&&(this.nodeName=r)};$i.prototype=Object.create(null);const io=[new $i];function Fu(r,e,t){if(r.length==0)return io;let o=t?io[0]:new $i,i=[o];for(let s=0;s<r.length;s++){let l=r[s].type.attrs;if(l){l.nodeName&&i.push(o=new $i(l.nodeName));for(let a in l){let c=l[a];c!=null&&(t&&i.length==1&&i.push(o=new $i(e.isInline?"span":"div")),a=="class"?o.class=(o.class?o.class+" ":"")+c:a=="style"?o.style=(o.style?o.style+";":"")+c:a!="nodeName"&&(o[a]=c))}}}return i}function Fv(r,e,t,o){if(t==io&&o==io)return e;let i=e;for(let s=0;s<o.length;s++){let l=o[s],a=t[s];if(s){let c;a&&a.nodeName==l.nodeName&&i!=r&&(c=i.parentNode)&&c.nodeName.toLowerCase()==l.nodeName||(c=document.createElement(l.nodeName),c.pmIsDeco=!0,c.appendChild(i),a=io[0]),i=c}YE(i,a||io[0],l)}return i}function YE(r,e,t){for(let o in e)o!="class"&&o!="style"&&o!="nodeName"&&!(o in t)&&r.removeAttribute(o);for(let o in t)o!="class"&&o!="style"&&o!="nodeName"&&t[o]!=e[o]&&r.setAttribute(o,t[o]);if(e.class!=t.class){let o=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<o.length;s++)i.indexOf(o[s])==-1&&r.classList.remove(o[s]);for(let s=0;s<i.length;s++)o.indexOf(i[s])==-1&&r.classList.add(i[s]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=o.exec(e.style);)r.style.removeProperty(i[1])}t.style&&(r.style.cssText+=t.style)}}function Bv(r,e,t){return Fv(r,r,io,Fu(e,t,r.nodeType!=1))}function uc(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function sm(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class XE{constructor(e,t,o){this.lock=t,this.view=o,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=ZE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let o=e;o<t;o++)this.top.children[o].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,o){let i=0,s=this.stack.length>>1,l=Math.min(s,e.length);for(;i<l&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Tn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){a=c;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let c=wo.create(this.top,e[s],t,o);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,o,i){let s=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,o))s=this.top.children.indexOf(l,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let d=this.top.children[a];if(d.matchesNode(e,t,o)&&!this.preMatch.matched.has(d)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,o,i,s){let l=this.top.children[i];return l.dirty==$n&&l.dom==l.contentDOM&&(l.dirty=oo),l.update(e,t,o,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let o=e.pmViewDesc;if(o){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==o)return i}return-1}e=t}}updateNextNode(e,t,o,i,s,l){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof Fr){let d=this.preMatch.matched.get(c);if(d!=null&&d!=s)return!1;let u=c.dom,f,p=this.isLocked(u)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=$n&&uc(t,c.outerDeco));if(!p&&c.update(e,t,o,i))return this.destroyBetween(this.index,a),c.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(c,e,t,o,i,l)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=oo,f.updateChildren(i,l+1),f.dirty=Tn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,o,i,s,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!uc(o,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Fr.create(this.top,t,o,i,s,l);if(a.contentDOM){a.children=e.children,e.children=[];for(let c of a.children)c.parent=a}return e.destroy(),a}addNode(e,t,o,i,s){let l=Fr.create(this.top,e,t,o,i,s);l.contentDOM&&l.updateChildren(i,s+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,o){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Rv(this.top,e,t,o);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof wo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof od)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rn||Zt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let o=document.createElement(e);e=="IMG"&&(o.className="ProseMirror-separator",o.alt=""),e=="BR"&&(o.className="ProseMirror-trailingBreak");let i=new zv(this.top,[],o,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function ZE(r,e){let t=e,o=t.children.length,i=r.childCount,s=new Map,l=[];e:for(;i>0;){let a;for(;;)if(o){let d=t.children[o-1];if(d instanceof wo)t=d,o=d.children.length;else{a=d,o--;break}}else{if(t==e)break e;o=t.parent.children.indexOf(t),t=t.parent}let c=a.node;if(c){if(c!=r.child(i-1))break;--i,s.set(a,i),l.push(a)}}return{index:i,matched:s,matches:l.reverse()}}function QE(r,e){return r.type.side-e.type.side}function eP(r,e,t,o){let i=e.locals(r),s=0;if(i.length==0){for(let d=0;d<r.childCount;d++){let u=r.child(d);o(u,i,e.forChild(s,u),d),s+=u.nodeSize}return}let l=0,a=[],c=null;for(let d=0;;){let u,f;for(;l<i.length&&i[l].to==s;){let b=i[l++];b.widget&&(u?(f||(f=[u])).push(b):u=b)}if(u)if(f){f.sort(QE);for(let b=0;b<f.length;b++)t(f[b],d,!!c)}else t(u,d,!!c);let p,h;if(c)h=-1,p=c,c=null;else if(d<r.childCount)h=d,p=r.child(d++);else break;for(let b=0;b<a.length;b++)a[b].to<=s&&a.splice(b--,1);for(;l<i.length&&i[l].from<=s&&i[l].to>s;)a.push(i[l++]);let m=s+p.nodeSize;if(p.isText){let b=m;l<i.length&&i[l].from<b&&(b=i[l].from);for(let S=0;S<a.length;S++)a[S].to<b&&(b=a[S].to);b<m&&(c=p.cut(b-s),p=p.cut(0,b-s),m=b,h=-1)}else for(;l<i.length&&i[l].to<m;)l++;let y=p.isInline&&!p.isLeaf?a.filter(b=>!b.inline):a.slice();o(p,y,e.forChild(s,p),h),s=m}}function tP(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function nP(r,e,t,o){for(let i=0,s=0;i<r.childCount&&s<=o;){let l=r.child(i++),a=s;if(s+=l.nodeSize,!l.isText)continue;let c=l.text;for(;i<r.childCount;){let d=r.child(i++);if(s+=d.nodeSize,!d.isText)break;c+=d.text}if(s>=t){if(s>=o&&c.slice(o-e.length-a,o-a)==e)return o-e.length;let d=a<o?c.lastIndexOf(e,o-a-1):-1;if(d>=0&&d+e.length+a>=t)return a+d;if(t==o&&c.length>=o+e.length-a&&c.slice(o-a,o-a+e.length)==e)return o}}return-1}function Bu(r,e,t,o,i){let s=[];for(let l=0,a=0;l<r.length;l++){let c=r[l],d=a,u=a+=c.size;d>=t||u<=e?s.push(c):(d<e&&s.push(c.slice(0,e-d,o)),i&&(s.push(i),i=void 0),u>t&&s.push(c.slice(t-d,c.size,o)))}return s}function Uf(r,e=null){let t=r.domSelectionRange(),o=r.state.doc;if(!t.focusNode)return null;let i=r.docView.nearestDesc(t.focusNode),s=i&&i.size==0,l=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let a=o.resolve(l),c,d;if(rd(t)){for(c=l;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Ie.isSelectable(f)&&i.parent&&!(f.isInline&&AE(t.focusNode,t.focusOffset,i.dom))){let p=i.posBefore;d=new Ie(l==p?a:o.resolve(p))}}else{if(t instanceof r.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=l,p=l;for(let h=0;h<t.rangeCount;h++){let m=t.getRangeAt(h);f=Math.min(f,r.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,r.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[c,l]=p==r.state.selection.anchor?[p,f]:[f,p],a=o.resolve(l)}else c=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(c<0)return null}let u=o.resolve(c);if(!d){let f=e=="pointer"||r.state.selection.head<a.pos&&!s?1:-1;d=qf(r,u,a,f)}return d}function Vv(r){return r.editable?r.hasFocus():Wv(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function dr(r,e=!1){let t=r.state.selection;if(Hv(r,t),!!Vv(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Zt){let o=r.domSelectionRange(),i=r.domObserver.currentSelection;if(o.anchorNode&&i.anchorNode&&bo(o.anchorNode,o.anchorOffset,i.anchorNode,i.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)oP(r);else{let{anchor:o,head:i}=t,s,l;lm&&!(t instanceof Be)&&(t.$from.parent.inlineContent||(s=am(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=am(r,t.to))),r.docView.setSelection(o,i,r,e),lm&&(s&&cm(s),l&&cm(l)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&rP(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const lm=rn||Zt&&Av<63;function am(r,e){let{node:t,offset:o}=r.docView.domFromPos(e,0),i=o<t.childNodes.length?t.childNodes[o]:null,s=o?t.childNodes[o-1]:null;if(rn&&i&&i.contentEditable=="false")return Hd(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Hd(i);if(s)return Hd(s)}}function Hd(r){return r.contentEditable="true",rn&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function cm(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function rP(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),o=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=o||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!Vv(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function oP(r){let e=r.domSelection(),t=document.createRange();if(!e)return;let o=r.cursorWrapper.dom,i=o.nodeName=="IMG";i?t.setStart(o.parentNode,$t(o)+1):t.setStart(o,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!r.state.selection.visible&&cn&&Lr<=11&&(o.disabled=!0,o.disabled=!1)}function Hv(r,e){if(e instanceof Ie){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(dm(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else dm(r)}function dm(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function qf(r,e,t,o){return r.someProp("createSelectionBetween",i=>i(r,e,t))||Be.between(e,t,o)}function um(r){return r.editable&&!r.hasFocus()?!1:Wv(r)}function Wv(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function iP(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return bo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Vu(r,e){let{$anchor:t,$head:o}=r.selection,i=e>0?t.max(o):t.min(o),s=i.parent.inlineContent?i.depth?r.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ke.findFrom(s,e)}function Or(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function fm(r,e,t){let o=r.state.selection;if(o instanceof Be)if(t.indexOf("s")>-1){let{$head:i}=o,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let l=r.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Or(r,new Be(o.$anchor,l))}else if(o.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let i=Vu(r.state,e);return i&&i instanceof Ie?Or(r,i):!1}else if(!(Mn&&t.indexOf("m")>-1)){let i=o.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(l=r.docView.descAt(a))&&!l.contentDOM?Ie.isSelectable(s)?Or(r,new Ie(e<0?r.state.doc.resolve(i.pos-s.nodeSize):i)):aa?Or(r,new Be(r.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(o instanceof Ie&&o.node.isInline)return Or(r,new Be(e>0?o.$to:o.$from));{let i=Vu(r.state,e);return i?Or(r,i):!1}}}function fc(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Gi(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function Po(r,e){return e<0?sP(r):lP(r)}function sP(r){let e=r.domSelectionRange(),t=e.focusNode,o=e.focusOffset;if(!t)return;let i,s,l=!1;for(In&&t.nodeType==1&&o<fc(t)&&Gi(t.childNodes[o],-1)&&(l=!0);;)if(o>0){if(t.nodeType!=1)break;{let a=t.childNodes[o-1];if(Gi(a,-1))i=t,s=--o;else if(a.nodeType==3)t=a,o=t.nodeValue.length;else break}}else{if(Kv(t))break;{let a=t.previousSibling;for(;a&&Gi(a,-1);)i=t.parentNode,s=$t(a),a=a.previousSibling;if(a)t=a,o=fc(t);else{if(t=t.parentNode,t==r.dom)break;o=0}}}l?Hu(r,t,o):i&&Hu(r,i,s)}function lP(r){let e=r.domSelectionRange(),t=e.focusNode,o=e.focusOffset;if(!t)return;let i=fc(t),s,l;for(;;)if(o<i){if(t.nodeType!=1)break;let a=t.childNodes[o];if(Gi(a,1))s=t,l=++o;else break}else{if(Kv(t))break;{let a=t.nextSibling;for(;a&&Gi(a,1);)s=a.parentNode,l=$t(a)+1,a=a.nextSibling;if(a)t=a,o=0,i=fc(t);else{if(t=t.parentNode,t==r.dom)break;o=i=0}}}s&&Hu(r,s,l)}function Kv(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function aP(r,e){for(;r&&e==r.childNodes.length&&!la(r);)e=$t(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function cP(r,e){for(;r&&!e&&!la(r);)e=$t(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function Hu(r,e,t){if(e.nodeType!=3){let s,l;(l=aP(e,t))?(e=l,t=0):(s=cP(e,t))&&(e=s,t=s.nodeValue.length)}let o=r.domSelection();if(!o)return;if(rd(o)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),o.removeAllRanges(),o.addRange(s)}else o.extend&&o.extend(e,t);r.domObserver.setCurSelection();let{state:i}=r;setTimeout(()=>{r.state==i&&dr(r)},50)}function hm(r,e){let t=r.state.doc.resolve(e);if(!(Zt||NE)&&t.parent.inlineContent){let i=r.coordsAtPos(e);if(e>t.start()){let s=r.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=r.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function pm(r,e,t){let o=r.state.selection;if(o instanceof Be&&!o.empty||t.indexOf("s")>-1||Mn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=o;if(!i.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let l=Vu(r.state,e);if(l&&l instanceof Ie)return Or(r,l)}if(!i.parent.inlineContent){let l=e<0?i:s,a=o instanceof yn?Ke.near(l,e):Ke.findFrom(l,e);return a?Or(r,a):!1}return!1}function mm(r,e){if(!(r.state.selection instanceof Be))return!0;let{$head:t,$anchor:o,empty:i}=r.state.selection;if(!t.sameParent(o))return!0;if(!i)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let l=r.state.tr;return e<0?l.delete(t.pos-s.nodeSize,t.pos):l.delete(t.pos,t.pos+s.nodeSize),r.dispatch(l),!0}return!1}function gm(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function dP(r){if(!rn||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let o=e.firstChild;gm(r,o,"true"),setTimeout(()=>gm(r,o,"false"),20)}return!1}function uP(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function fP(r,e){let t=e.keyCode,o=uP(e);if(t==8||Mn&&t==72&&o=="c")return mm(r,-1)||Po(r,-1);if(t==46&&!e.shiftKey||Mn&&t==68&&o=="c")return mm(r,1)||Po(r,1);if(t==13||t==27)return!0;if(t==37||Mn&&t==66&&o=="c"){let i=t==37?hm(r,r.state.selection.from)=="ltr"?-1:1:-1;return fm(r,i,o)||Po(r,i)}else if(t==39||Mn&&t==70&&o=="c"){let i=t==39?hm(r,r.state.selection.from)=="ltr"?1:-1:1;return fm(r,i,o)||Po(r,i)}else{if(t==38||Mn&&t==80&&o=="c")return pm(r,-1,o)||Po(r,-1);if(t==40||Mn&&t==78&&o=="c")return dP(r)||pm(r,1,o)||Po(r,1);if(o==(Mn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Jf(r,e){r.someProp("transformCopied",h=>{e=h(e,r)});let t=[],{content:o,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&o.childCount==1&&o.firstChild.childCount==1;){i--,s--;let h=o.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),o=h.content}let l=r.someProp("clipboardSerializer")||Oo.fromSchema(r.state.schema),a=Jv(),c=a.createElement("div");c.appendChild(l.serializeFragment(o,{document:a}));let d=c.firstChild,u,f=0;for(;d&&d.nodeType==1&&(u=qv[d.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=a.createElement(u[h]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),f++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(t)}`);let p=r.someProp("clipboardTextSerializer",h=>h(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:p,slice:e}}function jv(r,e,t,o,i){let s=i.parent.type.spec.code,l,a;if(!t&&!e)return null;let c=e&&(o||s||!t);if(c){if(r.someProp("transformPastedText",p=>{e=p(e,s||o,r)}),s)return e?new pe(Q.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):pe.empty;let f=r.someProp("clipboardTextParser",p=>p(e,i,o,r));if(f)a=f;else{let p=i.marks(),{schema:h}=r.state,m=Oo.fromSchema(h);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let b=l.appendChild(document.createElement("p"));y&&b.appendChild(m.serializeNode(h.text(y,p)))})}}else r.someProp("transformPastedHTML",f=>{t=f(t,r)}),l=gP(t),aa&&yP(l);let d=l&&l.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let p=l.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;l=p}if(a||(a=(r.someProp("clipboardParser")||r.someProp("domParser")||zr.fromSchema(r.state.schema)).parseSlice(l,{preserveWhitespace:!!(c||u),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!hP.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)a=vP(ym(a,+u[1],+u[2]),u[4]);else if(a=pe.maxOpen(pP(a.content,i),!0),a.openStart||a.openEnd){let f=0,p=0;for(let h=a.content.firstChild;f<a.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=a.content.lastChild;p<a.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);a=ym(a,f,p)}return r.someProp("transformPasted",f=>{a=f(a,r)}),a}const hP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function pP(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,l=[];if(r.forEach(a=>{if(!l)return;let c=i.findWrapping(a.type),d;if(!c)return l=null;if(d=l.length&&s.length&&Gv(c,s,a,l[l.length-1],0))l[l.length-1]=d;else{l.length&&(l[l.length-1]=Uv(l[l.length-1],s.length));let u=$v(a,c);l.push(u),i=i.matchType(u.type),s=c}}),l)return Q.from(l)}return r}function $v(r,e,t=0){for(let o=e.length-1;o>=t;o--)r=e[o].create(null,Q.from(r));return r}function Gv(r,e,t,o,i){if(i<r.length&&i<e.length&&r[i]==e[i]){let s=Gv(r,e,t,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==r.length-1?t.type:r[i+1]))return o.copy(o.content.append(Q.from($v(t,r,i+1))))}}function Uv(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,Uv(r.lastChild,e-1)),o=r.contentMatchAt(r.childCount).fillBefore(Q.empty,!0);return r.copy(t.append(o))}function Wu(r,e,t,o,i,s){let l=e<0?r.firstChild:r.lastChild,a=l.content;return r.childCount>1&&(s=0),i<o-1&&(a=Wu(a,e,t,o,i+1,s)),i>=t&&(a=e<0?l.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(l.contentMatchAt(l.childCount).fillBefore(Q.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,l.copy(a))}function ym(r,e,t){return e<r.openStart&&(r=new pe(Wu(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new pe(Wu(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const qv={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let vm=null;function Jv(){return vm||(vm=document.implementation.createHTMLDocument("title"))}let Wd=null;function mP(r){let e=window.trustedTypes;return e?(Wd||(Wd=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Wd.createHTML(r)):r}function gP(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=Jv().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(r),i;if((i=o&&qv[o[1].toLowerCase()])&&(r=i.map(s=>"<"+s+">").join("")+r+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=mP(r),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function yP(r){let e=r.querySelectorAll(Zt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let o=e[t];o.childNodes.length==1&&o.textContent==" "&&o.parentNode&&o.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),o)}}function vP(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,o;try{o=JSON.parse(e)}catch{return r}let{content:i,openStart:s,openEnd:l}=r;for(let a=o.length-2;a>=0;a-=2){let c=t.nodes[o[a]];if(!c||c.hasRequiredAttrs())break;i=Q.from(c.create(o[a+1],i)),s++,l++}return new pe(i,s,l)}const on={},sn={},bP={touchstart:!0,touchmove:!0};class wP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function xP(r){for(let e in on){let t=on[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=o=>{kP(r,o)&&!Yf(r,o)&&(r.editable||!(o.type in sn))&&t(r,o)},bP[e]?{passive:!0}:void 0)}rn&&r.dom.addEventListener("input",()=>null),Ku(r)}function Dr(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function SP(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function Ku(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=o=>Yf(r,o))})}function Yf(r,e){return r.someProp("handleDOMEvents",t=>{let o=t[e.type];return o?o(r,e)||e.defaultPrevented:!1})}function kP(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function MP(r,e){!Yf(r,e)&&on[e.type]&&(r.editable||!(e.type in sn))&&on[e.type](r,e)}sn.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!Xv(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(sr&&Zt&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),ui&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let o=Date.now();r.input.lastIOSEnter=o,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==o&&(r.someProp("handleKeyDown",i=>i(r,no(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",o=>o(r,t))||fP(r,t)?t.preventDefault():Dr(r,"key")};sn.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};sn.keypress=(r,e)=>{let t=e;if(Xv(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||Mn&&t.metaKey)return;if(r.someProp("handleKeyPress",i=>i(r,t))){t.preventDefault();return}let o=r.state.selection;if(!(o instanceof Be)||!o.$from.sameParent(o.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!r.someProp("handleTextInput",s=>s(r,o.$from.pos,o.$to.pos,i))&&r.dispatch(r.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function id(r){return{left:r.clientX,top:r.clientY}}function CP(r,e){let t=e.x-r.clientX,o=e.y-r.clientY;return t*t+o*o<100}function Xf(r,e,t,o,i){if(o==-1)return!1;let s=r.state.doc.resolve(o);for(let l=s.depth+1;l>0;l--)if(r.someProp(e,a=>l>s.depth?a(r,t,s.nodeAfter,s.before(l),i,!0):a(r,t,s.node(l),s.before(l),i,!1)))return!0;return!1}function Go(r,e,t){if(r.focused||r.focus(),r.state.selection.eq(e))return;let o=r.state.tr.setSelection(e);o.setMeta("pointer",!0),r.dispatch(o)}function OP(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),o=t.nodeAfter;return o&&o.isAtom&&Ie.isSelectable(o)?(Go(r,new Ie(t)),!0):!1}function TP(r,e){if(e==-1)return!1;let t=r.state.selection,o,i;t instanceof Ie&&(o=t.node);let s=r.state.doc.resolve(e);for(let l=s.depth+1;l>0;l--){let a=l>s.depth?s.nodeAfter:s.node(l);if(Ie.isSelectable(a)){o&&t.$from.depth>0&&l>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(l);break}}return i!=null?(Go(r,Ie.create(r.state.doc,i)),!0):!1}function AP(r,e,t,o,i){return Xf(r,"handleClickOn",e,t,o)||r.someProp("handleClick",s=>s(r,e,o))||(i?TP(r,t):OP(r,t))}function EP(r,e,t,o){return Xf(r,"handleDoubleClickOn",e,t,o)||r.someProp("handleDoubleClick",i=>i(r,e,o))}function PP(r,e,t,o){return Xf(r,"handleTripleClickOn",e,t,o)||r.someProp("handleTripleClick",i=>i(r,e,o))||NP(r,t,o)}function NP(r,e,t){if(t.button!=0)return!1;let o=r.state.doc;if(e==-1)return o.inlineContent?(Go(r,Be.create(o,0,o.content.size)),!0):!1;let i=o.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(l.inlineContent)Go(r,Be.create(o,a+1,a+1+l.content.size));else if(Ie.isSelectable(l))Go(r,Ie.create(o,a));else continue;return!0}}function Zf(r){return hc(r)}const Yv=Mn?"metaKey":"ctrlKey";on.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let o=Zf(r),i=Date.now(),s="singleClick";i-r.input.lastClick.time<500&&CP(t,r.input.lastClick)&&!t[Yv]&&(r.input.lastClick.type=="singleClick"?s="doubleClick":r.input.lastClick.type=="doubleClick"&&(s="tripleClick")),r.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let l=r.posAtCoords(id(t));l&&(s=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new _P(r,l,t,!!o)):(s=="doubleClick"?EP:PP)(r,l.pos,l.inside,t)?t.preventDefault():Dr(r,"pointer"))};class _P{constructor(e,t,o,i){this.view=e,this.pos=t,this.event=o,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!o[Yv],this.allowDefault=o.shiftKey;let s,l;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),l=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,l=u.depth?u.before():0}const a=i?null:o.target,c=a?e.docView.nearestDesc(a,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:d}=e.state;(o.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Ie&&d.from<=l&&d.to>l)&&(this.mightDrag={node:s,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&In&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Dr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>dr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(id(e))),this.updateAllowDefault(e),this.allowDefault||!t?Dr(this.view,"pointer"):AP(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rn&&this.mightDrag&&!this.mightDrag.node.isAtom||Zt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Go(this.view,Ke.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Dr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Dr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}on.touchstart=r=>{r.input.lastTouch=Date.now(),Zf(r),Dr(r,"pointer")};on.touchmove=r=>{r.input.lastTouch=Date.now(),Dr(r,"pointer")};on.contextmenu=r=>Zf(r);function Xv(r,e){return r.composing?!0:rn&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const IP=sr?5e3:-1;sn.compositionstart=sn.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(o=>o.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),hc(r,!0),r.markCursor=null;else if(hc(r,!e.selection.empty),In&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let o=r.domSelectionRange();for(let i=o.focusNode,s=o.focusOffset;i&&i.nodeType==1&&s!=0;){let l=s<0?i.lastChild:i.childNodes[s-1];if(!l)break;if(l.nodeType==3){let a=r.domSelection();a&&a.collapse(l,l.nodeValue.length);break}else i=l,s=-1}}r.input.composing=!0}Zv(r,IP)};sn.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionNode=null,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,Zv(r,20))};function Zv(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>hc(r),e))}function Qv(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=RP());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function DP(r){let e=r.domSelectionRange();if(!e.focusNode)return null;let t=OE(e.focusNode,e.focusOffset),o=TE(e.focusNode,e.focusOffset);if(t&&o&&t!=o){let i=o.pmViewDesc,s=r.domObserver.lastChangedTextNode;if(t==s||o==s)return s;if(!i||!i.isText(o.nodeValue))return o;if(r.input.compositionNode==o){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return o}}return t||o}function RP(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function hc(r,e=!1){if(!(sr&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),Qv(r),e||r.docView&&r.docView.dirty){let t=Uf(r);return t&&!t.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(t)):(r.markCursor||e)&&!r.state.selection.empty?r.dispatch(r.state.tr.deleteSelection()):r.updateState(r.state),!0}return!1}}function zP(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),i=document.createRange();i.selectNodeContents(e),r.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const ns=cn&&Lr<15||ui&&_E<604;on.copy=sn.cut=(r,e)=>{let t=e,o=r.state.selection,i=t.type=="cut";if(o.empty)return;let s=ns?null:t.clipboardData,l=o.content(),{dom:a,text:c}=Jf(r,l);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",c)):zP(r,a),i&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function LP(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function FP(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,o=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus();let i=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),o.parentNode&&o.parentNode.removeChild(o),t?rs(r,o.value,null,i,e):rs(r,o.textContent,o.innerHTML,i,e)},50)}function rs(r,e,t,o,i){let s=jv(r,e,t,o,r.state.selection.$from);if(r.someProp("handlePaste",c=>c(r,i,s||pe.empty)))return!0;if(!s)return!1;let l=LP(s),a=l?r.state.tr.replaceSelectionWith(l,o):r.state.tr.replaceSelection(s);return r.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function eb(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}sn.paste=(r,e)=>{let t=e;if(r.composing&&!sr)return;let o=ns?null:t.clipboardData,i=r.input.shiftKey&&r.input.lastKeyCode!=45;o&&rs(r,eb(o),o.getData("text/html"),i,t)?t.preventDefault():FP(r,t)};class tb{constructor(e,t,o){this.slice=e,this.move=t,this.node=o}}const BP=Mn?"altKey":"ctrlKey";function nb(r,e){let t=r.someProp("dragCopies",o=>!o(e));return t??!e[BP]}on.dragstart=(r,e)=>{let t=e,o=r.input.mouseDown;if(o&&o.done(),!t.dataTransfer)return;let i=r.state.selection,s=i.empty?null:r.posAtCoords(id(t)),l;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ie?i.to-1:i.to))){if(o&&o.mightDrag)l=Ie.create(r.state.doc,o.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=r.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=r.docView&&(l=Ie.create(r.state.doc,f.posBefore))}}let a=(l||r.state.selection).content(),{dom:c,text:d,slice:u}=Jf(r,a);(!t.dataTransfer.files.length||!Zt||Av>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(ns?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",ns||t.dataTransfer.setData("text/plain",d),r.dragging=new tb(u,nb(r,t),l)};on.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};sn.dragover=sn.dragenter=(r,e)=>e.preventDefault();sn.drop=(r,e)=>{let t=e,o=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let i=r.posAtCoords(id(t));if(!i)return;let s=r.state.doc.resolve(i.pos),l=o&&o.slice;l?r.someProp("transformPasted",m=>{l=m(l,r)}):l=jv(r,eb(t.dataTransfer),ns?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(o&&nb(r,t));if(r.someProp("handleDrop",m=>m(r,t,l||pe.empty,a))){t.preventDefault();return}if(!l)return;t.preventDefault();let c=l?wv(r.state.doc,s.pos,l):s.pos;c==null&&(c=s.pos);let d=r.state.tr;if(a){let{node:m}=o;m?m.replace(d):d.deleteSelection()}let u=d.mapping.map(c),f=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,p=d.doc;if(f?d.replaceRangeWith(u,u,l.content.firstChild):d.replaceRange(u,u,l),d.doc.eq(p))return;let h=d.doc.resolve(u);if(f&&Ie.isSelectable(l.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new Ie(h));else{let m=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((y,b,S,w)=>m=w),d.setSelection(qf(r,h,d.doc.resolve(m)))}r.focus(),r.dispatch(d.setMeta("uiEvent","drop"))};on.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&dr(r)},20))};on.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};on.beforeinput=(r,e)=>{if(Zt&&sr&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:o}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=o||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",s=>s(r,no(8,"Backspace")))))return;let{$cursor:i}=r.state.selection;i&&i.pos>0&&r.dispatch(r.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let r in sn)on[r]=sn[r];function is(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class pc{constructor(e,t){this.toDOM=e,this.spec=t||fo,this.side=this.spec.side||0}map(e,t,o,i){let{pos:s,deleted:l}=e.mapResult(t.from+i,this.side<0?-1:1);return l?null:new On(s-o,s-o,this)}valid(){return!0}eq(e){return this==e||e instanceof pc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&is(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Br{constructor(e,t){this.attrs=e,this.spec=t||fo}map(e,t,o,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-o,l=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-o;return s>=l?null:new On(s,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Br&&is(this.attrs,e.attrs)&&is(this.spec,e.spec)}static is(e){return e.type instanceof Br}destroy(){}}class Qf{constructor(e,t){this.attrs=e,this.spec=t||fo}map(e,t,o,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let l=e.mapResult(t.to+i,-1);return l.deleted||l.pos<=s.pos?null:new On(s.pos-o,l.pos-o,this)}valid(e,t){let{index:o,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(o)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof Qf&&is(this.attrs,e.attrs)&&is(this.spec,e.spec)}destroy(){}}class On{constructor(e,t,o){this.from=e,this.to=t,this.type=o}copy(e,t){return new On(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,o){return this.type.map(e,this,t,o)}static widget(e,t,o){return new On(e,e,new pc(t,o))}static inline(e,t,o,i){return new On(e,t,new Br(o,i))}static node(e,t,o,i){return new On(e,t,new Qf(o,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Br}get widget(){return this.type instanceof pc}}const zo=[],fo={};class Rt{constructor(e,t){this.local=e.length?e:zo,this.children=t.length?t:zo}static create(e,t){return t.length?mc(t,e,0,fo):Xt}find(e,t,o){let i=[];return this.findInner(e??0,t??1e9,i,0,o),i}findInner(e,t,o,i,s){for(let l=0;l<this.local.length;l++){let a=this.local[l];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&o.push(a.copy(a.from+i,a.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let a=this.children[l]+1;this.children[l+2].findInner(e-a,t-a,o,i+a,s)}}map(e,t,o){return this==Xt||e.maps.length==0?this:this.mapInner(e,t,0,0,o||fo)}mapInner(e,t,o,i,s){let l;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(e,o,i);c&&c.type.valid(t,c)?(l||(l=[])).push(c):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?VP(this.children,l||[],e,t,o,i,s):l?new Rt(l.sort(ho),zo):Xt}add(e,t){return t.length?this==Xt?Rt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,o){let i,s=0;e.forEach((a,c)=>{let d=c+o,u;if(u=ob(t,a,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(a,u,d+1):i.splice(s,0,c,c+a.nodeSize,mc(u,a,d+1,fo)),s+=3}});let l=rb(s?ib(t):t,-o);for(let a=0;a<l.length;a++)l[a].type.valid(e,l[a])||l.splice(a--,1);return new Rt(l.length?this.local.concat(l).sort(ho):this.local,i||this.children)}remove(e){return e.length==0||this==Xt?this:this.removeInner(e,0)}removeInner(e,t){let o=this.children,i=this.local;for(let s=0;s<o.length;s+=3){let l,a=o[s]+t,c=o[s+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<c&&(e[u]=null,(l||(l=[])).push(f));if(!l)continue;o==this.children&&(o=this.children.slice());let d=o[s+2].removeInner(l,a+1);d!=Xt?o[s+2]=d:(o.splice(s,3),s-=3)}if(i.length){for(let s=0,l;s<e.length;s++)if(l=e[s])for(let a=0;a<i.length;a++)i[a].eq(l,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return o==this.children&&i==this.local?this:i.length||o.length?new Rt(i,o):Xt}forChild(e,t){if(this==Xt)return this;if(t.isLeaf)return Rt.empty;let o,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(o=this.children[a+2]);break}let s=e+1,l=s+t.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<l&&c.to>s&&c.type instanceof Br){let d=Math.max(s,c.from)-s,u=Math.min(l,c.to)-s;d<u&&(i||(i=[])).push(c.copy(d,u))}}if(i){let a=new Rt(i.sort(ho),zo);return o?new Ar([a,o]):a}return o||Xt}eq(e){if(this==e)return!0;if(!(e instanceof Rt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return eh(this.localsInner(e))}localsInner(e){if(this==Xt)return zo;if(e.inlineContent||!this.local.some(Br.is))return this.local;let t=[];for(let o=0;o<this.local.length;o++)this.local[o].type instanceof Br||t.push(this.local[o]);return t}forEachSet(e){e(this)}}Rt.empty=new Rt([],[]);Rt.removeOverlap=eh;const Xt=Rt.empty;class Ar{constructor(e){this.members=e}map(e,t){const o=this.members.map(i=>i.map(e,t,fo));return Ar.from(o)}forChild(e,t){if(t.isLeaf)return Rt.empty;let o=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Xt&&(s instanceof Ar?o=o.concat(s.members):o.push(s))}return Ar.from(o)}eq(e){if(!(e instanceof Ar)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,o=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{o&&(t=t.slice(),o=!1);for(let l=0;l<s.length;l++)t.push(s[l])}}return t?eh(o?t:t.sort(ho)):zo}static from(e){switch(e.length){case 0:return Xt;case 1:return e[0];default:return new Ar(e.every(t=>t instanceof Rt)?e:e.reduce((t,o)=>t.concat(o instanceof Rt?o:o.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function VP(r,e,t,o,i,s,l){let a=r.slice();for(let d=0,u=s;d<t.maps.length;d++){let f=0;t.maps[d].forEach((p,h,m,y)=>{let b=y-m-(h-p);for(let S=0;S<a.length;S+=3){let w=a[S+1];if(w<0||p>w+u-f)continue;let x=a[S]+u-f;h>=x?a[S+1]=p<=x?-2:-1:p>=u&&b&&(a[S]+=b,a[S+1]+=b)}f+=b}),u=t.maps[d].map(u,-1)}let c=!1;for(let d=0;d<a.length;d+=3)if(a[d+1]<0){if(a[d+1]==-2){c=!0,a[d+1]=-1;continue}let u=t.map(r[d]+s),f=u-i;if(f<0||f>=o.content.size){c=!0;continue}let p=t.map(r[d+1]+s,-1),h=p-i,{index:m,offset:y}=o.content.findIndex(f),b=o.maybeChild(m);if(b&&y==f&&y+b.nodeSize==h){let S=a[d+2].mapInner(t,b,u+1,r[d]+s+1,l);S!=Xt?(a[d]=f,a[d+1]=h,a[d+2]=S):(a[d+1]=-2,c=!0)}else c=!0}if(c){let d=HP(a,r,e,t,i,s,l),u=mc(d,o,0,l);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,p=0;f<u.children.length;f+=3){let h=u.children[f];for(;p<a.length&&a[p]<h;)p+=3;a.splice(p,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Rt(e.sort(ho),a)}function rb(r,e){if(!e||!r.length)return r;let t=[];for(let o=0;o<r.length;o++){let i=r[o];t.push(new On(i.from+e,i.to+e,i.type))}return t}function HP(r,e,t,o,i,s,l){function a(c,d){for(let u=0;u<c.local.length;u++){let f=c.local[u].map(o,i,d);f?t.push(f):l.onRemove&&l.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)a(c.children[u+2],c.children[u]+d+1)}for(let c=0;c<r.length;c+=3)r[c+1]==-1&&a(r[c+2],e[c]+s+1);return t}function ob(r,e,t){if(e.isLeaf)return null;let o=t+e.nodeSize,i=null;for(let s=0,l;s<r.length;s++)(l=r[s])&&l.from>t&&l.to<o&&((i||(i=[])).push(l),r[s]=null);return i}function ib(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function mc(r,e,t,o){let i=[],s=!1;e.forEach((a,c)=>{let d=ob(r,a,c+t);if(d){s=!0;let u=mc(d,a,t+c+1,o);u!=Xt&&i.push(c,c+a.nodeSize,u)}});let l=rb(s?ib(r):r,-t).sort(ho);for(let a=0;a<l.length;a++)l[a].type.valid(e,l[a])||(o.onRemove&&o.onRemove(l[a].spec),l.splice(a--,1));return l.length||i.length?new Rt(l,i):Xt}function ho(r,e){return r.from-e.from||r.to-e.to}function eh(r){let e=r;for(let t=0;t<e.length-1;t++){let o=e[t];if(o.from!=o.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==o.from){s.to!=o.to&&(e==r&&(e=r.slice()),e[i]=s.copy(s.from,o.to),bm(e,i+1,s.copy(o.to,s.to)));continue}else{s.from<o.to&&(e==r&&(e=r.slice()),e[t]=o.copy(o.from,s.from),bm(e,i,o.copy(s.from,o.to)));break}}}return e}function bm(r,e,t){for(;e<r.length&&ho(t,r[e])>0;)e++;r.splice(e,0,t)}function Kd(r){let e=[];return r.someProp("decorations",t=>{let o=t(r.state);o&&o!=Xt&&e.push(o)}),r.cursorWrapper&&e.push(Rt.create(r.state.doc,[r.cursorWrapper.deco])),Ar.from(e)}const WP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},KP=cn&&Lr<=11;class jP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class $P{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new jP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(o=>{for(let i=0;i<o.length;i++)this.queue.push(o[i]);cn&&Lr<=11&&o.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),KP&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,WP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(um(this.view)){if(this.suppressingSelectionUpdates)return dr(this.view);if(cn&&Lr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&bo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,o;for(let s=e.focusNode;s;s=di(s))t.add(s);for(let s=e.anchorNode;s;s=di(s))if(t.has(s)){o=s;break}let i=o&&this.view.docView.nearestDesc(o);if(i&&i.ignoreMutation({type:"selection",target:o.nodeType==3?o.parentNode:o}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let o=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(o)&&um(e)&&!this.ignoreSelectionChange(o),s=-1,l=-1,a=!1,c=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],c);f&&(s=s<0?f.from:Math.min(f.from,s),l=l<0?f.to:Math.max(f.to,l),f.typeOver&&(a=!0))}if(In&&c.length){let u=c.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,p]=u;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of u){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||qP(e,f)!=h)&&p.remove()}}}let d=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&rd(o)&&(d=Uf(e))&&d.eq(Ke.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,dr(e),this.currentSelection.set(o),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,l),GP(e)),this.handleDOMChange(s,l,a,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(o)||dr(e),this.currentSelection.set(o))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let o=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(o==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!o||o.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(o.contentDOM&&o.contentDOM!=o.dom&&!o.contentDOM.contains(e.target))return{from:o.posBefore,to:o.posAfter};let i=e.previousSibling,s=e.nextSibling;if(cn&&Lr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:p}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let l=i&&i.parentNode==e.target?$t(i)+1:0,a=o.localPosFromDOM(e.target,l,-1),c=s&&s.parentNode==e.target?$t(s):e.target.childNodes.length,d=o.localPosFromDOM(e.target,c,1);return{from:a,to:d}}else return e.type=="attributes"?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:(this.lastChangedTextNode=e.target,{from:o.posAtStart,to:o.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let wm=new WeakMap,xm=!1;function GP(r){if(!wm.has(r)&&(wm.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=In,xm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),xm=!0}}function Sm(r,e){let t=e.startContainer,o=e.startOffset,i=e.endContainer,s=e.endOffset,l=r.domAtPos(r.state.selection.anchor);return bo(l.node,l.offset,i,s)&&([t,o,i,s]=[i,s,t,o]),{anchorNode:t,anchorOffset:o,focusNode:i,focusOffset:s}}function UP(r,e){if(e.getComposedRanges){let i=e.getComposedRanges(r.root)[0];if(i)return Sm(r,i)}let t;function o(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return r.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",o,!0),t?Sm(r,t):null}function qP(r,e){for(let t=e.parentNode;t&&t!=r.dom;t=t.parentNode){let o=r.docView.nearestDesc(t,!0);if(o&&o.node.isBlock)return t}return null}function JP(r,e,t){let{node:o,fromOffset:i,toOffset:s,from:l,to:a}=r.docView.parseRange(e,t),c=r.domSelectionRange(),d,u=c.anchorNode;if(u&&r.dom.contains(u.nodeType==1?u:u.parentNode)&&(d=[{node:u,offset:c.anchorOffset}],rd(c)||d.push({node:c.focusNode,offset:c.focusOffset})),Zt&&r.input.lastKeyCode===8)for(let b=s;b>i;b--){let S=o.childNodes[b-1],w=S.pmViewDesc;if(S.nodeName=="BR"&&!w){s=b;break}if(!w||w.size)break}let f=r.state.doc,p=r.someProp("domParser")||zr.fromSchema(r.state.schema),h=f.resolve(l),m=null,y=p.parse(o,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:YP,context:h});if(d&&d[0].pos!=null){let b=d[0].pos,S=d[1]&&d[1].pos;S==null&&(S=b),m={anchor:b+l,head:S+l}}return{doc:y,sel:m,from:l,to:a}}function YP(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(rn&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||rn&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const XP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function ZP(r,e,t,o,i){let s=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){let N=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,L=Uf(r,N);if(L&&!r.state.selection.eq(L)){if(Zt&&sr&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",z=>z(r,no(13,"Enter"))))return;let K=r.state.tr.setSelection(L);N=="pointer"?K.setMeta("pointer",!0):N=="key"&&K.scrollIntoView(),s&&K.setMeta("composition",s),r.dispatch(K)}return}let l=r.state.doc.resolve(e),a=l.sharedDepth(t);e=l.before(a+1),t=r.state.doc.resolve(t).after(a+1);let c=r.state.selection,d=JP(r,e,t),u=r.state.doc,f=u.slice(d.from,d.to),p,h;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(p=r.state.selection.to,h="end"):(p=r.state.selection.from,h="start"),r.input.lastKeyCode=null;let m=tN(f.content,d.doc.content,d.from,p,h);if(m&&r.input.domChangeCount++,(ui&&r.input.lastIOSEnter>Date.now()-225||sr)&&i.some(N=>N.nodeType==1&&!XP.test(N.nodeName))&&(!m||m.endA>=m.endB)&&r.someProp("handleKeyDown",N=>N(r,no(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!m)if(o&&c instanceof Be&&!c.empty&&c.$head.sameParent(c.$anchor)&&!r.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let N=km(r,r.state.doc,d.sel);if(N&&!N.eq(r.state.selection)){let L=r.state.tr.setSelection(N);s&&L.setMeta("composition",s),r.dispatch(L)}}return}r.state.selection.from<r.state.selection.to&&m.start==m.endB&&r.state.selection instanceof Be&&(m.start>r.state.selection.from&&m.start<=r.state.selection.from+2&&r.state.selection.from>=d.from?m.start=r.state.selection.from:m.endA<r.state.selection.to&&m.endA>=r.state.selection.to-2&&r.state.selection.to<=d.to&&(m.endB+=r.state.selection.to-m.endA,m.endA=r.state.selection.to)),cn&&Lr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>d.from&&d.doc.textBetween(m.start-d.from-1,m.start-d.from+1)=="  "&&(m.start--,m.endA--,m.endB--);let y=d.doc.resolveNoCache(m.start-d.from),b=d.doc.resolveNoCache(m.endB-d.from),S=u.resolve(m.start),w=y.sameParent(b)&&y.parent.inlineContent&&S.end()>=m.endA,x;if((ui&&r.input.lastIOSEnter>Date.now()-225&&(!w||i.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!w&&y.pos<d.doc.content.size&&(!y.sameParent(b)||!y.parent.inlineContent)&&(x=Ke.findFrom(d.doc.resolve(y.pos+1),1,!0))&&x.head>y.pos)&&r.someProp("handleKeyDown",N=>N(r,no(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>m.start&&eN(u,m.start,m.endA,y,b)&&r.someProp("handleKeyDown",N=>N(r,no(8,"Backspace")))){sr&&Zt&&r.domObserver.suppressSelectionUpdates();return}Zt&&m.endB==m.start&&(r.input.lastChromeDelete=Date.now()),sr&&!w&&y.start()!=b.start()&&b.parentOffset==0&&y.depth==b.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==m.endA&&(m.endB-=2,b=d.doc.resolveNoCache(m.endB-d.from),setTimeout(()=>{r.someProp("handleKeyDown",function(N){return N(r,no(13,"Enter"))})},20));let C=m.start,M=m.endA,k,E,A;if(w){if(y.pos==b.pos)cn&&Lr<=11&&y.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>dr(r),20)),k=r.state.tr.delete(C,M),E=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(A=QP(y.parent.content.cut(y.parentOffset,b.parentOffset),S.parent.content.cut(S.parentOffset,m.endA-S.start()))))k=r.state.tr,A.type=="add"?k.addMark(C,M,A.mark):k.removeMark(C,M,A.mark);else if(y.parent.child(y.index()).isText&&y.index()==b.index()-(b.textOffset?0:1)){let N=y.parent.textBetween(y.parentOffset,b.parentOffset);if(r.someProp("handleTextInput",L=>L(r,C,M,N)))return;k=r.state.tr.insertText(N,C,M)}}if(k||(k=r.state.tr.replace(C,M,d.doc.slice(m.start-d.from,m.endB-d.from))),d.sel){let N=km(r,k.doc,d.sel);N&&!(Zt&&r.composing&&N.empty&&(m.start!=m.endB||r.input.lastChromeDelete<Date.now()-100)&&(N.head==C||N.head==k.mapping.map(M)-1)||cn&&N.empty&&N.head==C)&&k.setSelection(N)}E&&k.ensureMarks(E),s&&k.setMeta("composition",s),r.dispatch(k.scrollIntoView())}function km(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:qf(r,e.resolve(t.anchor),e.resolve(t.head))}function QP(r,e){let t=r.firstChild.marks,o=e.firstChild.marks,i=t,s=o,l,a,c;for(let u=0;u<o.length;u++)i=o[u].removeFromSet(i);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],l="add",c=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],l="remove",c=u=>u.mark(a.removeFromSet(u.marks));else return null;let d=[];for(let u=0;u<e.childCount;u++)d.push(c(e.child(u)));if(Q.from(d).eq(r))return{mark:a,type:l}}function eN(r,e,t,o,i){if(t-e<=i.pos-o.pos||jd(o,!0,!1)<i.pos)return!1;let s=r.resolve(e);if(!o.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let l=r.resolve(jd(s,!0,!0));return!l.parent.isTextblock||l.pos>t||jd(l,!0,!1)<t?!1:o.parent.content.cut(o.parentOffset).eq(l.parent.content)}function jd(r,e,t){let o=r.depth,i=e?r.end():r.pos;for(;o>0&&(e||r.indexAfter(o)==r.node(o).childCount);)o--,i++,e=!1;if(t){let s=r.node(o).maybeChild(r.indexAfter(o));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function tN(r,e,t,o,i){let s=r.findDiffStart(e,t);if(s==null)return null;let{a:l,b:a}=r.findDiffEnd(e,t+r.size,t+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(l,a));o-=l+c-s}if(l<s&&r.size<e.size){let c=o<=s&&o>=l?s-o:0;s-=c,s&&s<e.size&&Mm(e.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-l),l=s}else if(a<s){let c=o<=s&&o>=a?s-o:0;s-=c,s&&s<r.size&&Mm(r.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-a),a=s}return{start:s,endA:l,endB:a}}function Mm(r){if(r.length!=2)return!1;let e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class nN{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new wP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Em),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Tm(this),Om(this),this.nodeViews=Am(this),this.docView=im(this.state.doc,Cm(this),Kd(this),this.dom,this),this.domObserver=new $P(this,(o,i,s,l)=>ZP(this,o,i,s,l)),this.domObserver.start(),xP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ku(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Em),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let o in this._props)t[o]=this._props[o];t.state=this.state;for(let o in e)t[o]=e[o];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var o;let i=this.state,s=!1,l=!1;e.storedMarks&&this.composing&&(Qv(this),l=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Am(this);oN(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ku(this),this.editable=Tm(this),Om(this);let c=Kd(this),d=Cm(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,d,c);(f||!e.selection.eq(i.selection))&&(l=!0);let p=u=="preserve"&&l&&this.dom.style.overflowAnchor==null&&RE(this);if(l){this.domObserver.stop();let h=f&&(cn||Zt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&rN(i.selection,e.selection);if(f){let m=Zt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=DP(this)),(s||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=im(e.doc,d,c,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&iP(this))?dr(this,h):(Hv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((o=this.dragging)===null||o===void 0)&&o.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&zE(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ie){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Qp(this,t.getBoundingClientRect(),e)}else Qp(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let o=this.directPlugins[t];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let o=this.state.plugins[t];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let o=this.pluginViews[t];o.update&&o.update(this,e)}}updateDraggedNode(e,t){let o=e.node,i=-1;if(this.state.doc.nodeAt(o.from)==o.node)i=o.from;else{let s=o.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==o.node&&(i=s)}this.dragging=new tb(e.slice,e.move,i<0?void 0:Ie.create(this.state.doc,i))}someProp(e,t){let o=this._props&&this._props[e],i;if(o!=null&&(i=t?t(o):o))return i;for(let l=0;l<this.directPlugins.length;l++){let a=this.directPlugins[l].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let a=s[l].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(cn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&LE(this.dom),dr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return WE(this,e)}coordsAtPos(e,t=1){return Iv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,o=-1){let i=this.docView.posFromDOM(e,t,o);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return UE(this,t||this.state,e)}pasteHTML(e,t){return rs(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return rs(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Jf(this,e)}destroy(){this.docView&&(SP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Kd(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ME())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return MP(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?rn&&this.root.nodeType===11&&EE(this.dom.ownerDocument)==this.dom&&UP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Cm(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let o in t)o=="class"?e.class+=" "+t[o]:o=="style"?e.style=(e.style?e.style+";":"")+t[o]:!e[o]&&o!="contenteditable"&&o!="nodeName"&&(e[o]=String(t[o]))}),e.translate||(e.translate="no"),[On.node(0,r.state.doc.content.size,e)]}function Om(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:On.widget(r.state.selection.from,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Tm(r){return!r.someProp("editable",e=>e(r.state)===!1)}function rN(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function Am(r){let e=Object.create(null);function t(o){for(let i in o)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=o[i])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function oN(r,e){let t=0,o=0;for(let i in r){if(r[i]!=e[i])return!0;t++}for(let i in e)o++;return t!=o}function Em(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},iN=typeof navigator<"u"&&/Mac/.test(navigator.platform),sN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Gt=0;Gt<10;Gt++)jr[48+Gt]=jr[96+Gt]=String(Gt);for(var Gt=1;Gt<=24;Gt++)jr[Gt+111]="F"+Gt;for(var Gt=65;Gt<=90;Gt++)jr[Gt]=String.fromCharCode(Gt+32),gc[Gt]=String.fromCharCode(Gt);for(var $d in jr)gc.hasOwnProperty($d)||(gc[$d]=jr[$d]);function lN(r){var e=iN&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||sN&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?gc:jr)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const aN=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function cN(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let o,i,s,l;for(let a=0;a<e.length-1;a++){let c=e[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))o=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))aN?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return o&&(t="Alt-"+t),i&&(t="Ctrl-"+t),l&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function dN(r){let e=Object.create(null);for(let t in r)e[cN(t)]=r[t];return e}function Gd(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function uN(r){return new dn({props:{handleKeyDown:sb(r)}})}function sb(r){let e=dN(r);return function(t,o){let i=lN(o),s,l=e[Gd(i,o)];if(l&&l(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(o.shiftKey){let a=e[Gd(i,o,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((o.shiftKey||o.altKey||o.metaKey||i.charCodeAt(0)>127)&&(s=jr[o.keyCode])&&s!=i){let a=e[Gd(s,o)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const th=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function lb(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const ab=(r,e,t)=>{let o=lb(r,t);if(!o)return!1;let i=nh(o);if(!i){let l=o.blockRange(),a=l&&wi(l);return a==null?!1:(e&&e(r.tr.lift(l,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(yb(r,i,e,-1))return!0;if(o.parent.content.size==0&&(fi(s,"end")||Ie.isSelectable(s)))for(let l=o.depth;;l--){let a=td(r.doc,o.before(l),o.after(l),pe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=r.tr.step(a);c.setSelection(fi(s,"end")?Ke.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):Ie.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(l==1||o.node(l-1).childCount>1)break}return s.isAtom&&i.depth==o.depth-1?(e&&e(r.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},fN=(r,e,t)=>{let o=lb(r,t);if(!o)return!1;let i=nh(o);return i?cb(r,i,e):!1},hN=(r,e,t)=>{let o=ub(r,t);if(!o)return!1;let i=rh(o);return i?cb(r,i,e):!1};function cb(r,e,t){let o=e.nodeBefore,i=o,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let l=e.nodeAfter,a=l,c=e.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let d=td(r.doc,s,c,pe.empty);if(!d||d.from!=s||d instanceof Ft&&d.slice.size>=c-s)return!1;if(t){let u=r.tr.step(d);u.setSelection(Be.create(u.doc,s)),t(u.scrollIntoView())}return!0}function fi(r,e,t=!1){for(let o=r;o;o=e=="start"?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(t&&o.childCount!=1)return!1}return!1}const db=(r,e,t)=>{let{$head:o,empty:i}=r.selection,s=o;if(!i)return!1;if(o.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):o.parentOffset>0)return!1;s=nh(o)}let l=s&&s.nodeBefore;return!l||!Ie.isSelectable(l)?!1:(e&&e(r.tr.setSelection(Ie.create(r.doc,s.pos-l.nodeSize)).scrollIntoView()),!0)};function nh(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function ub(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const fb=(r,e,t)=>{let o=ub(r,t);if(!o)return!1;let i=rh(o);if(!i)return!1;let s=i.nodeAfter;if(yb(r,i,e,1))return!0;if(o.parent.content.size==0&&(fi(s,"start")||Ie.isSelectable(s))){let l=td(r.doc,o.before(),o.after(),pe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=r.tr.step(l);a.setSelection(fi(s,"start")?Ke.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Ie.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==o.depth-1?(e&&e(r.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},hb=(r,e,t)=>{let{$head:o,empty:i}=r.selection,s=o;if(!i)return!1;if(o.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):o.parentOffset<o.parent.content.size)return!1;s=rh(o)}let l=s&&s.nodeAfter;return!l||!Ie.isSelectable(l)?!1:(e&&e(r.tr.setSelection(Ie.create(r.doc,s.pos)).scrollIntoView()),!0)};function rh(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const pN=(r,e)=>{let t=r.selection,o=t instanceof Ie,i;if(o){if(t.node.isTextblock||!Gr(r.doc,t.from))return!1;i=t.from}else if(i=ed(r.doc,t.from,-1),i==null)return!1;if(e){let s=r.tr.join(i);o&&s.setSelection(Ie.create(s.doc,i-r.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},mN=(r,e)=>{let t=r.selection,o;if(t instanceof Ie){if(t.node.isTextblock||!Gr(r.doc,t.to))return!1;o=t.to}else if(o=ed(r.doc,t.to,1),o==null)return!1;return e&&e(r.tr.join(o).scrollIntoView()),!0},gN=(r,e)=>{let{$from:t,$to:o}=r.selection,i=t.blockRange(o),s=i&&wi(i);return s==null?!1:(e&&e(r.tr.lift(i,s).scrollIntoView()),!0)},pb=(r,e)=>{let{$head:t,$anchor:o}=r.selection;return!t.parent.type.spec.code||!t.sameParent(o)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function oh(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const yN=(r,e)=>{let{$head:t,$anchor:o}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(o))return!1;let i=t.node(-1),s=t.indexAfter(-1),l=oh(i.contentMatchAt(s));if(!l||!i.canReplaceWith(s,s,l))return!1;if(e){let a=t.after(),c=r.tr.replaceWith(a,a,l.createAndFill());c.setSelection(Ke.near(c.doc.resolve(a),1)),e(c.scrollIntoView())}return!0},mb=(r,e)=>{let t=r.selection,{$from:o,$to:i}=t;if(t instanceof yn||o.parent.inlineContent||i.parent.inlineContent)return!1;let s=oh(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let l=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,a=r.tr.insert(l,s.createAndFill());a.setSelection(Be.create(a.doc,l+1)),e(a.scrollIntoView())}return!0},gb=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(cr(r.doc,s))return e&&e(r.tr.split(s).scrollIntoView()),!0}let o=t.blockRange(),i=o&&wi(o);return i==null?!1:(e&&e(r.tr.lift(o,i).scrollIntoView()),!0)};function vN(r){return(e,t)=>{let{$from:o,$to:i}=e.selection;if(e.selection instanceof Ie&&e.selection.node.isBlock)return!o.parentOffset||!cr(e.doc,o.pos)?!1:(t&&t(e.tr.split(o.pos).scrollIntoView()),!0);if(!o.depth)return!1;let s=[],l,a,c=!1,d=!1;for(let h=o.depth;;h--)if(o.node(h).isBlock){c=o.end(h)==o.pos+(o.depth-h),d=o.start(h)==o.pos-(o.depth-h),a=oh(o.node(h-1).contentMatchAt(o.indexAfter(h-1))),s.unshift(c&&a?{type:a}:null),l=h;break}else{if(h==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Be||e.selection instanceof yn)&&u.deleteSelection();let f=u.mapping.map(o.pos),p=cr(u.doc,f,s.length,s);if(p||(s[0]=a?{type:a}:null,p=cr(u.doc,f,s.length,s)),!p)return!1;if(u.split(f,s.length,s),!c&&d&&o.node(l).type!=a){let h=u.mapping.map(o.before(l)),m=u.doc.resolve(h);a&&o.node(l-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(o.before(l)),a)}return t&&t(u.scrollIntoView()),!0}}const bN=vN(),wN=(r,e)=>{let{$from:t,to:o}=r.selection,i,s=t.sharedDepth(o);return s==0?!1:(i=t.before(s),e&&e(r.tr.setSelection(Ie.create(r.doc,i))),!0)};function xN(r,e,t){let o=e.nodeBefore,i=e.nodeAfter,s=e.index();return!o||!i||!o.type.compatibleContent(i.type)?!1:!o.content.size&&e.parent.canReplace(s-1,s)?(t&&t(r.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Gr(r.doc,e.pos))?!1:(t&&t(r.tr.join(e.pos).scrollIntoView()),!0)}function yb(r,e,t,o){let i=e.nodeBefore,s=e.nodeAfter,l,a,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&xN(r,e,t))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(l=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(l[0]||s.type).validEnd){if(t){let h=e.pos+s.nodeSize,m=Q.empty;for(let S=l.length-1;S>=0;S--)m=Q.from(l[S].create(null,m));m=Q.from(i.copy(m));let y=r.tr.step(new Vt(e.pos-1,h,e.pos,h,new pe(m,1,0),l.length,!0)),b=y.doc.resolve(h+2*l.length);b.nodeAfter&&b.nodeAfter.type==i.type&&Gr(y.doc,b.pos)&&y.join(b.pos),t(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||o>0&&c?null:Ke.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),p=f&&wi(f);if(p!=null&&p>=e.depth)return t&&t(r.tr.lift(f,p).scrollIntoView()),!0;if(d&&fi(s,"start",!0)&&fi(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let y=s,b=1;for(;!y.isTextblock;y=y.firstChild)b++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(t){let S=Q.empty;for(let x=m.length-1;x>=0;x--)S=Q.from(m[x].copy(S));let w=r.tr.step(new Vt(e.pos-m.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new pe(S,m.length,0),0,!0));t(w.scrollIntoView())}return!0}}return!1}function vb(r){return function(e,t){let o=e.selection,i=r<0?o.$from:o.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Be.create(e.doc,r<0?i.start(s):i.end(s)))),!0):!1}}const SN=vb(-1),kN=vb(1);function MN(r,e=null){return function(t,o){let{$from:i,$to:s}=t.selection,l=i.blockRange(s),a=l&&jf(l,r,e);return a?(o&&o(t.tr.wrap(l,a).scrollIntoView()),!0):!1}}function Pm(r,e=null){return function(t,o){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(l,a,(c,d)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(r,e)))if(c.type==r)i=!0;else{let u=t.doc.resolve(d),f=u.index();i=u.parent.canReplaceWith(f,f+1,r)}})}if(!i)return!1;if(o){let s=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:a},$to:{pos:c}}=t.selection.ranges[l];s.setBlockType(a,c,r,e)}o(s.scrollIntoView())}return!0}}function ih(...r){return function(e,t,o){for(let i=0;i<r.length;i++)if(r[i](e,t,o))return!0;return!1}}ih(th,ab,db);ih(th,fb,hb);ih(pb,mb,gb,bN);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function CN(r,e=null){return function(t,o){let{$from:i,$to:s}=t.selection,l=i.blockRange(s);if(!l)return!1;let a=o?t.tr:null;return ON(a,l,r,e)?(o&&o(a.scrollIntoView()),!0):!1}}function ON(r,e,t,o=null){let i=!1,s=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=l.resolve(e.start-2);s=new cc(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new cc(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=jf(s,t,o,e);return a?(r&&TN(r,e,a,i,t),!0):!1}function TN(r,e,t,o,i){let s=Q.empty;for(let u=t.length-1;u>=0;u--)s=Q.from(t[u].type.create(t[u].attrs,s));r.step(new Vt(e.start-(o?2:0),e.end,e.start,e.end,new pe(s,0,0),t.length,!0));let l=0;for(let u=0;u<t.length;u++)t[u].type==i&&(l=u+1);let a=t.length-l,c=e.start+t.length-(o?2:0),d=e.parent;for(let u=e.startIndex,f=e.endIndex,p=!0;u<f;u++,p=!1)!p&&cr(r.doc,c,a)&&(r.split(c,a),c+=2*a),c+=d.child(u).nodeSize;return r}function AN(r){return function(e,t){let{$from:o,$to:i}=e.selection,s=o.blockRange(i,l=>l.childCount>0&&l.firstChild.type==r);return s?t?o.node(s.depth-1).type==r?EN(e,t,r,s):PN(e,t,s):!0:!1}}function EN(r,e,t,o){let i=r.tr,s=o.end,l=o.$to.end(o.depth);s<l&&(i.step(new Vt(s-1,l,s,l,new pe(Q.from(t.create(null,o.parent.copy())),1,0),1,!0)),o=new cc(i.doc.resolve(o.$from.pos),i.doc.resolve(l),o.depth));const a=wi(o);if(a==null)return!1;i.lift(o,a);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return Gr(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function PN(r,e,t){let o=r.tr,i=t.parent;for(let h=t.end,m=t.endIndex-1,y=t.startIndex;m>y;m--)h-=i.child(m).nodeSize,o.delete(h-1,h+1);let s=o.doc.resolve(t.start),l=s.nodeAfter;if(o.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,c=t.endIndex==i.childCount,d=s.node(-1),u=s.index(-1);if(!d.canReplace(u+(a?0:1),u+1,l.content.append(c?Q.empty:Q.from(i))))return!1;let f=s.pos,p=f+l.nodeSize;return o.step(new Vt(f-(a?1:0),p+(c?1:0),f+1,p-1,new pe((a?Q.empty:Q.from(i.copy(Q.empty))).append(c?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,c?0:1),a?0:1)),e(o.scrollIntoView()),!0}function NN(r){return function(e,t){let{$from:o,$to:i}=e.selection,s=o.blockRange(i,d=>d.childCount>0&&d.firstChild.type==r);if(!s)return!1;let l=s.startIndex;if(l==0)return!1;let a=s.parent,c=a.child(l-1);if(c.type!=r)return!1;if(t){let d=c.lastChild&&c.lastChild.type==a.type,u=Q.from(d?r.create():null),f=new pe(Q.from(r.create(null,Q.from(a.type.create(null,u)))),d?3:1,0),p=s.start,h=s.end;t(e.tr.step(new Vt(p-(d?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}function sd(r){const{state:e,transaction:t}=r;let{selection:o}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return o},get doc(){return i},get tr(){return o=t.selection,i=t.doc,s=t.storedMarks,t}}}class ld{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:o}=this,{view:i}=t,{tr:s}=o,l=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,c])=>[a,(...u)=>{const f=c(...u)(l);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:o,editor:i,state:s}=this,{view:l}=i,a=[],c=!!e,d=e||s.tr,u=()=>(!c&&t&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(d),a.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(o).map(([p,h])=>[p,(...y)=>{const b=this.buildProps(d,t),S=h(...y)(b);return a.push(S),f}])),run:u};return f}createCan(e){const{rawCommands:t,state:o}=this,i=!1,s=e||o.tr,l=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([c,d])=>[c,(...u)=>d(...u)({...l,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:o,editor:i,state:s}=this,{view:l}=i,a={tr:e,editor:i,view:l,state:sd({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(o).map(([c,d])=>[c,(...u)=>d(...u)(a)]))}};return a}}class _N{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const o=this.callbacks[e];return o&&o.forEach(i=>i.apply(this,t)),this}off(e,t){const o=this.callbacks[e];return o&&(t?this.callbacks[e]=o.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const o=(...i)=>{this.off(e,o),t.apply(this,i)};return this.on(e,o)}removeAllListeners(){this.callbacks={}}}function ke(r,e,t){return r.config[e]===void 0&&r.parent?ke(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?ke(r.parent,e,t):null}):r.config[e]}function ad(r){const e=r.filter(i=>i.type==="extension"),t=r.filter(i=>i.type==="node"),o=r.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:o}}function bb(r){const e=[],{nodeExtensions:t,markExtensions:o}=ad(r),i=[...t,...o],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(l=>{const a={name:l.name,options:l.options,storage:l.storage,extensions:i},c=ke(l,"addGlobalAttributes",a);if(!c)return;c().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:{...s,...h}})})})})}),i.forEach(l=>{const a={name:l.name,options:l.options,storage:l.storage},c=ke(l,"addAttributes",a);if(!c)return;const d=c();Object.entries(d).forEach(([u,f])=>{const p={...s,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:l.name,name:u,attribute:p})})}),e}function Wt(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}function Et(...r){return r.filter(e=>!!e).reduce((e,t)=>{const o={...e};return Object.entries(t).forEach(([i,s])=>{if(!o[i]){o[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],c=o[i]?o[i].split(" "):[],d=a.filter(u=>!c.includes(u));o[i]=[...c,...d].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],c=o[i]?o[i].split(";").map(u=>u.trim()).filter(Boolean):[],d=new Map;c.forEach(u=>{const[f,p]=u.split(":").map(h=>h.trim());d.set(f,p)}),a.forEach(u=>{const[f,p]=u.split(":").map(h=>h.trim());d.set(f,p)}),o[i]=Array.from(d.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else o[i]=s}),o},{})}function ju(r,e){return e.filter(t=>t.type===r.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,o)=>Et(t,o),{})}function wb(r){return typeof r=="function"}function Ue(r,e=void 0,...t){return wb(r)?e?r.bind(e)(...t):r(...t):r}function IN(r={}){return Object.keys(r).length===0&&r.constructor===Object}function DN(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function Nm(r,e){return"style"in r?r:{...r,getAttrs:t=>{const o=r.getAttrs?r.getAttrs(t):r.attrs;if(o===!1)return!1;const i=e.reduce((s,l)=>{const a=l.attribute.parseHTML?l.attribute.parseHTML(t):DN(t.getAttribute(l.name));return a==null?s:{...s,[l.name]:a}},{});return{...o,...i}}}}function _m(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&IN(t)?!1:t!=null))}function RN(r,e){var t;const o=bb(r),{nodeExtensions:i,markExtensions:s}=ad(r),l=(t=i.find(d=>ke(d,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(i.map(d=>{const u=o.filter(S=>S.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},p=r.reduce((S,w)=>{const x=ke(w,"extendNodeSchema",f);return{...S,...x?x(d):{}}},{}),h=_m({...p,content:Ue(ke(d,"content",f)),marks:Ue(ke(d,"marks",f)),group:Ue(ke(d,"group",f)),inline:Ue(ke(d,"inline",f)),atom:Ue(ke(d,"atom",f)),selectable:Ue(ke(d,"selectable",f)),draggable:Ue(ke(d,"draggable",f)),code:Ue(ke(d,"code",f)),whitespace:Ue(ke(d,"whitespace",f)),linebreakReplacement:Ue(ke(d,"linebreakReplacement",f)),defining:Ue(ke(d,"defining",f)),isolating:Ue(ke(d,"isolating",f)),attrs:Object.fromEntries(u.map(S=>{var w;return[S.name,{default:(w=S==null?void 0:S.attribute)===null||w===void 0?void 0:w.default}]}))}),m=Ue(ke(d,"parseHTML",f));m&&(h.parseDOM=m.map(S=>Nm(S,u)));const y=ke(d,"renderHTML",f);y&&(h.toDOM=S=>y({node:S,HTMLAttributes:ju(S,u)}));const b=ke(d,"renderText",f);return b&&(h.toText=b),[d.name,h]})),c=Object.fromEntries(s.map(d=>{const u=o.filter(b=>b.type===d.name),f={name:d.name,options:d.options,storage:d.storage,editor:e},p=r.reduce((b,S)=>{const w=ke(S,"extendMarkSchema",f);return{...b,...w?w(d):{}}},{}),h=_m({...p,inclusive:Ue(ke(d,"inclusive",f)),excludes:Ue(ke(d,"excludes",f)),group:Ue(ke(d,"group",f)),spanning:Ue(ke(d,"spanning",f)),code:Ue(ke(d,"code",f)),attrs:Object.fromEntries(u.map(b=>{var S;return[b.name,{default:(S=b==null?void 0:b.attribute)===null||S===void 0?void 0:S.default}]}))}),m=Ue(ke(d,"parseHTML",f));m&&(h.parseDOM=m.map(b=>Nm(b,u)));const y=ke(d,"renderHTML",f);return y&&(h.toDOM=b=>y({mark:b,HTMLAttributes:ju(b,u)})),[d.name,h]}));return new cv({topNode:l,nodes:a,marks:c})}function Ud(r,e){return e.nodes[r]||e.marks[r]||null}function Im(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}function sh(r,e){const t=Oo.fromSchema(e).serializeFragment(r),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const zN=(r,e=500)=>{let t="";const o=r.parentOffset;return r.parent.nodesBetween(Math.max(0,o-e),o,(i,s,l,a)=>{var c,d;const u=((d=(c=i.type.spec).toText)===null||d===void 0?void 0:d.call(c,{node:i,pos:s,parent:l,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,o-s))}),t};function lh(r){return Object.prototype.toString.call(r)==="[object RegExp]"}class cd{constructor(e){this.find=e.find,this.handler=e.handler}}const LN=(r,e)=>{if(lh(e))return e.exec(r);const t=e(r);if(!t)return null;const o=[t.text];return o.index=t.index,o.input=r,o.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(t.replaceWith)),o};function xa(r){var e;const{editor:t,from:o,to:i,text:s,rules:l,plugin:a}=r,{view:c}=t;if(c.composing)return!1;const d=c.state.doc.resolve(o);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let u=!1;const f=zN(d)+s;return l.forEach(p=>{if(u)return;const h=LN(f,p.find);if(!h)return;const m=c.state.tr,y=sd({state:c.state,transaction:m}),b={from:o-(h[0].length-s.length),to:i},{commands:S,chain:w,can:x}=new ld({editor:t,state:y});p.handler({state:y,range:b,match:h,commands:S,chain:w,can:x})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:o,to:i,text:s}),c.dispatch(m),u=!0)}),u}function FN(r){const{editor:e,rules:t}=r,o=new dn({state:{init(){return null},apply(i,s,l){const a=i.getMeta(o);if(a)return a;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:u}=c;typeof u=="string"?u=u:u=sh(Q.from(u),l.schema);const{from:f}=c,p=f+u.length;xa({editor:e,from:f,to:p,text:u,rules:t,plugin:o})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,l,a){return xa({editor:e,from:s,to:l,text:a,rules:t,plugin:o})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&xa({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:o})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?xa({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:o}):!1}},isInputRules:!0});return o}function BN(r){return Object.prototype.toString.call(r).slice(8,-1)}function Sa(r){return BN(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function dd(r,e){const t={...r};return Sa(r)&&Sa(e)&&Object.keys(e).forEach(o=>{Sa(e[o])&&Sa(r[o])?t[o]=dd(r[o],e[o]):t[o]=e[o]}),t}class Dn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ue(ke(this,"addOptions",{name:this.name}))),this.storage=Ue(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>dd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Dn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ue(ke(t,"addOptions",{name:t.name})),t.storage=Ue(ke(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:o}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const c=l.find(d=>(d==null?void 0:d.type.name)===t.name);return c&&o.removeStoredMark(c),o.insertText(" ",i.pos),e.view.dispatch(o),!0}return!1}}function VN(r){return typeof r=="number"}class HN{constructor(e){this.find=e.find,this.handler=e.handler}}const WN=(r,e,t)=>{if(lh(e))return[...r.matchAll(e)];const o=e(r,t);return o?o.map(i=>{const s=[i.text];return s.index=i.index,s.input=r,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function KN(r){const{editor:e,state:t,from:o,to:i,rule:s,pasteEvent:l,dropEvent:a}=r,{commands:c,chain:d,can:u}=new ld({editor:e,state:t}),f=[];return t.doc.nodesBetween(o,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const y=Math.max(o,m),b=Math.min(i,m+h.content.size),S=h.textBetween(y-m,b-m,void 0,"￼");WN(S,s.find,l).forEach(x=>{if(x.index===void 0)return;const C=y+x.index+1,M=C+x[0].length,k={from:t.tr.mapping.map(C),to:t.tr.mapping.map(M)},E=s.handler({state:t,range:k,match:x,commands:c,chain:d,can:u,pasteEvent:l,dropEvent:a});f.push(E)})}),f.every(h=>h!==null)}let ka=null;const jN=r=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",r),t};function $N(r){const{editor:e,rules:t}=r;let o=null,i=!1,s=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const c=({state:u,from:f,to:p,rule:h,pasteEvt:m})=>{const y=u.tr,b=sd({state:u,transaction:y});if(!(!KN({editor:e,state:b,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return t.map(u=>new dn({view(f){const p=m=>{var y;o=!((y=f.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?f.dom.parentElement:null,o&&(ka=e)},h=()=>{ka&&(ka=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(s=o===f.dom.parentElement,a=p,!s){const h=ka;h&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return l=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],y=m.getMeta("uiEvent")==="paste"&&!i,b=m.getMeta("uiEvent")==="drop"&&!s,S=m.getMeta("applyPasteRules"),w=!!S;if(!y&&!b&&!w)return;if(w){let{text:M}=S;typeof M=="string"?M=M:M=sh(Q.from(M),h.schema);const{from:k}=S,E=k+M.length,A=jN(M);return c({rule:u,state:h,from:k,to:{b:E},pasteEvt:A})}const x=p.doc.content.findDiffStart(h.doc.content),C=p.doc.content.findDiffEnd(h.doc.content);if(!(!VN(x)||!C||x===C.b))return c({rule:u,state:h,from:x,to:C,pasteEvt:l})}}))}function GN(r){const e=r.filter((t,o)=>r.indexOf(t)!==o);return Array.from(new Set(e))}class Vo{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Vo.resolve(e),this.schema=RN(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Vo.sort(Vo.flatten(e)),o=GN(t.map(i=>i.name));return o.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${o.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const o={name:t.name,options:t.options,storage:t.storage},i=ke(t,"addExtensions",o);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((o,i)=>{const s=ke(o,"priority")||100,l=ke(i,"priority")||100;return s>l?-1:s<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const o={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Ud(t.name,this.schema)},i=ke(t,"addCommands",o);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Vo.sort([...this.extensions].reverse()),o=[],i=[],s=t.map(l=>{const a={name:l.name,options:l.options,storage:l.storage,editor:e,type:Ud(l.name,this.schema)},c=[],d=ke(l,"addKeyboardShortcuts",a);let u={};if(l.type==="mark"&&ke(l,"exitable",a)&&(u.ArrowRight=()=>Dn.handleExit({editor:e,mark:l})),d){const y=Object.fromEntries(Object.entries(d()).map(([b,S])=>[b,()=>S({editor:e})]));u={...u,...y}}const f=uN(u);c.push(f);const p=ke(l,"addInputRules",a);Im(l,e.options.enableInputRules)&&p&&o.push(...p());const h=ke(l,"addPasteRules",a);Im(l,e.options.enablePasteRules)&&h&&i.push(...h());const m=ke(l,"addProseMirrorPlugins",a);if(m){const y=m();c.push(...y)}return c}).flat();return[FN({editor:e,rules:o}),...$N({editor:e,rules:i}),...s]}get attributes(){return bb(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ad(this.extensions);return Object.fromEntries(t.filter(o=>!!ke(o,"addNodeView")).map(o=>{const i=this.attributes.filter(c=>c.type===o.name),s={name:o.name,options:o.options,storage:o.storage,editor:e,type:Wt(o.name,this.schema)},l=ke(o,"addNodeView",s);if(!l)return[];const a=(c,d,u,f,p)=>{const h=ju(c,i);return l()({node:c,view:d,getPos:u,decorations:f,innerDecorations:p,editor:e,extension:o,HTMLAttributes:h})};return[o.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const o={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ud(e.name,this.schema)};e.type==="mark"&&(!((t=Ue(ke(e,"keepOnSplit",o)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=ke(e,"onBeforeCreate",o),s=ke(e,"onCreate",o),l=ke(e,"onUpdate",o),a=ke(e,"onSelectionUpdate",o),c=ke(e,"onTransaction",o),d=ke(e,"onFocus",o),u=ke(e,"onBlur",o),f=ke(e,"onDestroy",o);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),l&&this.editor.on("update",l),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class Ut{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ue(ke(this,"addOptions",{name:this.name}))),this.storage=Ue(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ut(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>dd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ut({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ue(ke(t,"addOptions",{name:t.name})),t.storage=Ue(ke(t,"addStorage",{name:t.name,options:t.options})),t}}function xb(r,e,t){const{from:o,to:i}=e,{blockSeparator:s=`

`,textSerializers:l={}}=t||{};let a="";return r.nodesBetween(o,i,(c,d,u,f)=>{var p;c.isBlock&&d>o&&(a+=s);const h=l==null?void 0:l[c.type.name];if(h)return u&&(a+=h({node:c,pos:d,parent:u,index:f,range:e})),!1;c.isText&&(a+=(p=c==null?void 0:c.text)===null||p===void 0?void 0:p.slice(Math.max(o,d)-d,i-d))}),a}function Sb(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const UN=Ut.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new dn({key:new qn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:o,selection:i}=e,{ranges:s}=i,l=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),c=Sb(t);return xb(o,{from:l,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),qN=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),JN=(r=!1)=>({commands:e})=>e.setContent("",r),YN=()=>({state:r,tr:e,dispatch:t})=>{const{selection:o}=e,{ranges:i}=o;return t&&i.forEach(({$from:s,$to:l})=>{r.doc.nodesBetween(s.pos,l.pos,(a,c)=>{if(a.type.isText)return;const{doc:d,mapping:u}=e,f=d.resolve(u.map(c)),p=d.resolve(u.map(c+a.nodeSize)),h=f.blockRange(p);if(!h)return;const m=wi(h);if(a.type.isTextblock){const{defaultType:y}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,y)}(m||m===0)&&e.lift(h,m)})}),!0},XN=r=>e=>r(e),ZN=()=>({state:r,dispatch:e})=>mb(r,e),QN=(r,e)=>({editor:t,tr:o})=>{const{state:i}=t,s=i.doc.slice(r.from,r.to);o.deleteRange(r.from,r.to);const l=o.mapping.map(e);return o.insert(l,s.content),o.setSelection(new Be(o.doc.resolve(l-1))),!0},e_=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,o=t.$anchor.node();if(o.content.size>0)return!1;const i=r.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o.type){if(e){const a=i.before(s),c=i.after(s);r.delete(a,c).scrollIntoView()}return!0}return!1},t_=r=>({tr:e,state:t,dispatch:o})=>{const i=Wt(r,t.schema),s=e.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===i){if(o){const c=s.before(l),d=s.after(l);e.delete(c,d).scrollIntoView()}return!0}return!1},n_=r=>({tr:e,dispatch:t})=>{const{from:o,to:i}=r;return t&&e.delete(o,i),!0},r_=()=>({state:r,dispatch:e})=>th(r,e),o_=()=>({commands:r})=>r.keyboardShortcut("Enter"),i_=()=>({state:r,dispatch:e})=>yN(r,e);function yc(r,e,t={strict:!0}){const o=Object.keys(e);return o.length?o.every(i=>t.strict?e[i]===r[i]:lh(e[i])?e[i].test(r[i]):e[i]===r[i]):!0}function kb(r,e,t={}){return r.find(o=>o.type===e&&yc(Object.fromEntries(Object.keys(t).map(i=>[i,o.attrs[i]])),t))}function Dm(r,e,t={}){return!!kb(r,e,t)}function ah(r,e,t){var o;if(!r||!e)return;let i=r.parent.childAfter(r.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=r.parent.childBefore(r.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(t=t||((o=i.node.marks[0])===null||o===void 0?void 0:o.attrs),!kb([...i.node.marks],e,t)))return;let l=i.index,a=r.start()+i.offset,c=l+1,d=a+i.node.nodeSize;for(;l>0&&Dm([...r.parent.child(l-1).marks],e,t);)l-=1,a-=r.parent.child(l).nodeSize;for(;c<r.parent.childCount&&Dm([...r.parent.child(c).marks],e,t);)d+=r.parent.child(c).nodeSize,c+=1;return{from:a,to:d}}function qr(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}const s_=(r,e={})=>({tr:t,state:o,dispatch:i})=>{const s=qr(r,o.schema),{doc:l,selection:a}=t,{$from:c,from:d,to:u}=a;if(i){const f=ah(c,s,e);if(f&&f.from<=d&&f.to>=u){const p=Be.create(l,f.from,f.to);t.setSelection(p)}}return!0},l_=r=>e=>{const t=typeof r=="function"?r(e):r;for(let o=0;o<t.length;o+=1)if(t[o](e))return!0;return!1};function Mb(r){return r instanceof Be}function so(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function Cb(r,e=null){if(!e)return null;const t=Ke.atStart(r),o=Ke.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return o;const i=t.from,s=o.to;return e==="all"?Be.create(r,so(0,i,s),so(r.content.size,i,s)):Be.create(r,so(e,i,s),so(e,i,s))}function a_(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ch(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const c_=(r=null,e={})=>({editor:t,view:o,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const l=()=>{(ch()||a_())&&o.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(o.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(o.hasFocus()&&r===null||r===!1)return!0;if(s&&r===null&&!Mb(t.state.selection))return l(),!0;const a=Cb(i.doc,r)||t.state.selection,c=t.state.selection.eq(a);return s&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},d_=(r,e)=>t=>r.every((o,i)=>e(o,{...t,index:i})),u_=(r,e)=>({tr:t,commands:o})=>o.insertContentAt({from:t.selection.from,to:t.selection.to},r,e),Ob=r=>{const e=r.childNodes;for(let t=e.length-1;t>=0;t-=1){const o=e[t];o.nodeType===3&&o.nodeValue&&/^(\n\s\s|\n)$/.test(o.nodeValue)?r.removeChild(o):o.nodeType===1&&Ob(o)}return r};function Ma(r){const e=`<body>${r}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Ob(t)}function vc(r,e,t){if(r instanceof Rr||r instanceof Q)return r;t={slice:!0,parseOptions:{},...t};const o=typeof r=="object"&&r!==null,i=typeof r=="string";if(o)try{if(Array.isArray(r)&&r.length>0)return Q.fromArray(r.map(a=>e.nodeFromJSON(a)));const l=e.nodeFromJSON(r);return t.errorOnInvalidContent&&l.check(),l}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",s),vc("",e,t)}if(i){if(t.errorOnInvalidContent){let l=!1,a="";const c=new cv({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(l=!0,a=typeof d=="string"?d:d.outerHTML,null)}]}})});if(t.slice?zr.fromSchema(c).parseSlice(Ma(r),t.parseOptions):zr.fromSchema(c).parse(Ma(r),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=zr.fromSchema(e);return t.slice?s.parseSlice(Ma(r),t.parseOptions).content:s.parse(Ma(r),t.parseOptions)}return vc("",e,t)}function f_(r,e,t){const o=r.steps.length-1;if(o<e)return;const i=r.steps[o];if(!(i instanceof Ft||i instanceof Vt))return;const s=r.mapping.maps[o];let l=0;s.forEach((a,c,d,u)=>{l===0&&(l=u)}),r.setSelection(Ke.near(r.doc.resolve(l),t))}const h_=r=>!("type"in r),p_=(r,e,t)=>({tr:o,dispatch:i,editor:s})=>{var l;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=vc(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck})}catch(m){return s.emit("contentError",{editor:s,error:m,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:d}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},u=!0,f=!0;if((h_(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,f=f?m.isBlock:!1}),c===d&&f){const{parent:m}=o.doc.resolve(c);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(c-=1,d+=1)}let h;if(u){if(Array.isArray(e))h=e.map(m=>m.text||"").join("");else if(e instanceof Q){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),h=m}else typeof e=="object"&&e&&e.text?h=e.text:h=e;o.insertText(h,c,d)}else h=a,o.replaceWith(c,d,h);t.updateSelection&&f_(o,o.steps.length-1,-1),t.applyInputRules&&o.setMeta("applyInputRules",{from:c,text:h}),t.applyPasteRules&&o.setMeta("applyPasteRules",{from:c,text:h})}return!0},m_=()=>({state:r,dispatch:e})=>pN(r,e),g_=()=>({state:r,dispatch:e})=>mN(r,e),y_=()=>({state:r,dispatch:e})=>ab(r,e),v_=()=>({state:r,dispatch:e})=>fb(r,e),b_=()=>({state:r,dispatch:e,tr:t})=>{try{const o=ed(r.doc,r.selection.$from.pos,-1);return o==null?!1:(t.join(o,2),e&&e(t),!0)}catch{return!1}},w_=()=>({state:r,dispatch:e,tr:t})=>{try{const o=ed(r.doc,r.selection.$from.pos,1);return o==null?!1:(t.join(o,2),e&&e(t),!0)}catch{return!1}},x_=()=>({state:r,dispatch:e})=>fN(r,e),S_=()=>({state:r,dispatch:e})=>hN(r,e);function Tb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function k_(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let o,i,s,l;for(let a=0;a<e.length-1;a+=1){const c=e[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))o=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))ch()||Tb()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return o&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const M_=r=>({editor:e,view:t,tr:o,dispatch:i})=>{const s=k_(r).split(/-(?!$)/),l=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),a=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,a))});return c==null||c.steps.forEach(d=>{const u=d.map(o.mapping);u&&i&&o.maybeStep(u)}),!0};function ss(r,e,t={}){const{from:o,to:i,empty:s}=r.selection,l=e?Wt(e,r.schema):null,a=[];r.doc.nodesBetween(o,i,(f,p)=>{if(f.isText)return;const h=Math.max(o,p),m=Math.min(i,p+f.nodeSize);a.push({node:f,from:h,to:m})});const c=i-o,d=a.filter(f=>l?l.name===f.node.type.name:!0).filter(f=>yc(f.node.attrs,t,{strict:!1}));return s?!!d.length:d.reduce((f,p)=>f+p.to-p.from,0)>=c}const C_=(r,e={})=>({state:t,dispatch:o})=>{const i=Wt(r,t.schema);return ss(t,i,e)?gN(t,o):!1},O_=()=>({state:r,dispatch:e})=>gb(r,e),T_=r=>({state:e,dispatch:t})=>{const o=Wt(r,e.schema);return AN(o)(e,t)},A_=()=>({state:r,dispatch:e})=>pb(r,e);function ud(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function Rm(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((o,i)=>(t.includes(i)||(o[i]=r[i]),o),{})}const E_=(r,e)=>({tr:t,state:o,dispatch:i})=>{let s=null,l=null;const a=ud(typeof r=="string"?r:r.name,o.schema);return a?(a==="node"&&(s=Wt(r,o.schema)),a==="mark"&&(l=qr(r,o.schema)),i&&t.selection.ranges.forEach(c=>{o.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,u)=>{s&&s===d.type&&t.setNodeMarkup(u,void 0,Rm(d.attrs,e)),l&&d.marks.length&&d.marks.forEach(f=>{l===f.type&&t.addMark(u,u+d.nodeSize,l.create(Rm(f.attrs,e)))})})}),!0):!1},P_=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),N_=()=>({tr:r,dispatch:e})=>{if(e){const t=new yn(r.doc);r.setSelection(t)}return!0},__=()=>({state:r,dispatch:e})=>db(r,e),I_=()=>({state:r,dispatch:e})=>hb(r,e),D_=()=>({state:r,dispatch:e})=>wN(r,e),R_=()=>({state:r,dispatch:e})=>kN(r,e),z_=()=>({state:r,dispatch:e})=>SN(r,e);function $u(r,e,t={},o={}){return vc(r,e,{slice:!1,parseOptions:t,errorOnInvalidContent:o.errorOnInvalidContent})}const L_=(r,e=!1,t={},o={})=>({editor:i,tr:s,dispatch:l,commands:a})=>{var c,d;const{doc:u}=s;if(t.preserveWhitespace!=="full"){const f=$u(r,i.schema,t,{errorOnInvalidContent:(c=o.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck});return l&&s.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return l&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},r,{parseOptions:t,errorOnInvalidContent:(d=o.errorOnInvalidContent)!==null&&d!==void 0?d:i.options.enableContentCheck})};function Ab(r,e){const t=qr(e,r.schema),{from:o,to:i,empty:s}=r.selection,l=[];s?(r.storedMarks&&l.push(...r.storedMarks),l.push(...r.selection.$head.marks())):r.doc.nodesBetween(o,i,c=>{l.push(...c.marks)});const a=l.find(c=>c.type.name===t.name);return a?{...a.attrs}:{}}function F_(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function B_(r,e){for(let t=r.depth;t>0;t-=1){const o=r.node(t);if(e(o))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:o}}}function dh(r){return e=>B_(e.$from,r)}function V_(r,e){const t={from:0,to:r.content.size};return xb(r,t,e)}function H_(r,e){const t=Wt(e,r.schema),{from:o,to:i}=r.selection,s=[];r.doc.nodesBetween(o,i,a=>{s.push(a)});const l=s.reverse().find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function W_(r,e){const t=ud(typeof e=="string"?e:e.name,r.schema);return t==="node"?H_(r,e):t==="mark"?Ab(r,e):{}}function Eb(r,e,t){const o=[];return r===e?t.resolve(r).marks().forEach(i=>{const s=t.resolve(r),l=ah(s,i.type);l&&o.push({mark:i,...l})}):t.nodesBetween(r,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||o.push(...i.marks.map(l=>({from:s,to:s+i.nodeSize,mark:l})))}),o}function Ka(r,e,t){return Object.fromEntries(Object.entries(t).filter(([o])=>{const i=r.find(s=>s.type===e&&s.name===o);return i?i.attribute.keepOnSplit:!1}))}function Gu(r,e,t={}){const{empty:o,ranges:i}=r.selection,s=e?qr(e,r.schema):null;if(o)return!!(r.storedMarks||r.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>yc(f.attrs,t,{strict:!1}));let l=0;const a=[];if(i.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;r.doc.nodesBetween(h,m,(y,b)=>{if(!y.isText&&!y.marks.length)return;const S=Math.max(h,b),w=Math.min(m,b+y.nodeSize),x=w-S;l+=x,a.push(...y.marks.map(C=>({mark:C,from:S,to:w})))})}),l===0)return!1;const c=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>yc(f.mark.attrs,t,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),d=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,p)=>f+p.to-p.from,0);return(c>0?c+d:c)>=l}function K_(r,e,t={}){if(!e)return ss(r,null,t)||Gu(r,null,t);const o=ud(e,r.schema);return o==="node"?ss(r,e,t):o==="mark"?Gu(r,e,t):!1}function zm(r,e){const{nodeExtensions:t}=ad(e),o=t.find(l=>l.name===r);if(!o)return!1;const i={name:o.name,options:o.options,storage:o.storage},s=Ue(ke(o,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function uh(r,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var o;if(t){if(r.type.name==="hardBreak")return!0;if(r.isText)return/^\s*$/m.test((o=r.text)!==null&&o!==void 0?o:"")}if(r.isText)return!r.text;if(r.isAtom||r.isLeaf)return!1;if(r.content.childCount===0)return!0;if(e){let i=!0;return r.content.forEach(s=>{i!==!1&&(uh(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function j_(r){return r instanceof Ie}function $_(r,e,t){var o;const{selection:i}=e;let s=null;if(Mb(i)&&(s=i.$cursor),s){const a=(o=r.storedMarks)!==null&&o!==void 0?o:s.marks();return!!t.isInSet(a)||!a.some(c=>c.type.excludes(t))}const{ranges:l}=i;return l.some(({$from:a,$to:c})=>{let d=a.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(a.pos,c.pos,(u,f,p)=>{if(d)return!1;if(u.isInline){const h=!p||p.type.allowsMarkType(t),m=!!t.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(t));d=h&&m}return!d}),d})}const G_=(r,e={})=>({tr:t,state:o,dispatch:i})=>{const{selection:s}=t,{empty:l,ranges:a}=s,c=qr(r,o.schema);if(i)if(l){const d=Ab(o,c);t.addStoredMark(c.create({...d,...e}))}else a.forEach(d=>{const u=d.$from.pos,f=d.$to.pos;o.doc.nodesBetween(u,f,(p,h)=>{const m=Math.max(h,u),y=Math.min(h+p.nodeSize,f);p.marks.find(S=>S.type===c)?p.marks.forEach(S=>{c===S.type&&t.addMark(m,y,c.create({...S.attrs,...e}))}):t.addMark(m,y,c.create(e))})});return $_(o,t,c)},U_=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),q_=(r,e={})=>({state:t,dispatch:o,chain:i})=>{const s=Wt(r,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>Pm(s,{...l,...e})(t)?!0:a.clearNodes()).command(({state:a})=>Pm(s,{...l,...e})(a,o)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},J_=r=>({tr:e,dispatch:t})=>{if(t){const{doc:o}=e,i=so(r,0,o.content.size),s=Ie.create(o,i);e.setSelection(s)}return!0},Y_=r=>({tr:e,dispatch:t})=>{if(t){const{doc:o}=e,{from:i,to:s}=typeof r=="number"?{from:r,to:r}:r,l=Be.atStart(o).from,a=Be.atEnd(o).to,c=so(i,l,a),d=so(s,l,a),u=Be.create(o,c,d);e.setSelection(u)}return!0},X_=r=>({state:e,dispatch:t})=>{const o=Wt(r,e.schema);return NN(o)(e,t)};function Lm(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const o=t.filter(i=>e==null?void 0:e.includes(i.type.name));r.tr.ensureMarks(o)}}const Z_=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:o,editor:i})=>{const{selection:s,doc:l}=e,{$from:a,$to:c}=s,d=i.extensionManager.attributes,u=Ka(d,a.node().type.name,a.node().attrs);if(s instanceof Ie&&s.node.isBlock)return!a.parentOffset||!cr(l,a.pos)?!1:(o&&(r&&Lm(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,p=a.depth===0?void 0:F_(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=f&&p?[{type:p,attrs:u}]:void 0,m=cr(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!m&&cr(e.doc,e.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:u}]:void 0),o){if(m&&(s instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),p&&!f&&!a.parentOffset&&a.parent.type!==p)){const y=e.mapping.map(a.before()),b=e.doc.resolve(y);a.node(-1).canReplaceWith(b.index(),b.index()+1,p)&&e.setNodeMarkup(e.mapping.map(a.before()),p)}r&&Lm(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},Q_=(r,e={})=>({tr:t,state:o,dispatch:i,editor:s})=>{var l;const a=Wt(r,o.schema),{$from:c,$to:d}=o.selection,u=o.selection.node;if(u&&u.isBlock||c.depth<2||!c.sameParent(d))return!1;const f=c.node(-1);if(f.type!==a)return!1;const p=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let S=Q.empty;const w=c.index(-1)?1:c.index(-2)?2:3;for(let A=c.depth-w;A>=c.depth-3;A-=1)S=Q.from(c.node(A).copy(S));const x=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,C={...Ka(p,c.node().type.name,c.node().attrs),...e},M=((l=a.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(C))||void 0;S=S.append(Q.from(a.createAndFill(null,M)||void 0));const k=c.before(c.depth-(w-1));t.replace(k,c.after(-x),new pe(S,4-w,0));let E=-1;t.doc.nodesBetween(k,t.doc.content.size,(A,N)=>{if(E>-1)return!1;A.isTextblock&&A.content.size===0&&(E=N+1)}),E>-1&&t.setSelection(Be.near(t.doc.resolve(E))),t.scrollIntoView()}return!0}const h=d.pos===c.end()?f.contentMatchAt(0).defaultType:null,m={...Ka(p,f.type.name,f.attrs),...e},y={...Ka(p,c.node().type.name,c.node().attrs),...e};t.delete(c.pos,d.pos);const b=h?[{type:a,attrs:m},{type:h,attrs:y}]:[{type:a,attrs:m}];if(!cr(t.doc,c.pos,2))return!1;if(i){const{selection:S,storedMarks:w}=o,{splittableMarks:x}=s.extensionManager,C=w||S.$to.parentOffset&&S.$from.marks();if(t.split(c.pos,2,b).scrollIntoView(),!C||!i)return!0;const M=C.filter(k=>x.includes(k.type.name));t.ensureMarks(M)}return!0},qd=(r,e)=>{const t=dh(l=>l.type===e)(r.selection);if(!t)return!0;const o=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(o===void 0)return!0;const i=r.doc.nodeAt(o);return t.node.type===(i==null?void 0:i.type)&&Gr(r.doc,t.pos)&&r.join(t.pos),!0},Jd=(r,e)=>{const t=dh(l=>l.type===e)(r.selection);if(!t)return!0;const o=r.doc.resolve(t.start).after(t.depth);if(o===void 0)return!0;const i=r.doc.nodeAt(o);return t.node.type===(i==null?void 0:i.type)&&Gr(r.doc,o)&&r.join(o),!0},eI=(r,e,t,o={})=>({editor:i,tr:s,state:l,dispatch:a,chain:c,commands:d,can:u})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,h=Wt(r,l.schema),m=Wt(e,l.schema),{selection:y,storedMarks:b}=l,{$from:S,$to:w}=y,x=S.blockRange(w),C=b||y.$to.parentOffset&&y.$from.marks();if(!x)return!1;const M=dh(k=>zm(k.type.name,f))(y);if(x.depth>=1&&M&&x.depth-M.depth<=1){if(M.node.type===h)return d.liftListItem(m);if(zm(M.node.type.name,f)&&h.validContent(M.node.content)&&a)return c().command(()=>(s.setNodeMarkup(M.pos,h),!0)).command(()=>qd(s,h)).command(()=>Jd(s,h)).run()}return!t||!C||!a?c().command(()=>u().wrapInList(h,o)?!0:d.clearNodes()).wrapInList(h,o).command(()=>qd(s,h)).command(()=>Jd(s,h)).run():c().command(()=>{const k=u().wrapInList(h,o),E=C.filter(A=>p.includes(A.type.name));return s.ensureMarks(E),k?!0:d.clearNodes()}).wrapInList(h,o).command(()=>qd(s,h)).command(()=>Jd(s,h)).run()},tI=(r,e={},t={})=>({state:o,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,l=qr(r,o.schema);return Gu(o,l,e)?i.unsetMark(l,{extendEmptyMarkRange:s}):i.setMark(l,e)},nI=(r,e,t={})=>({state:o,commands:i})=>{const s=Wt(r,o.schema),l=Wt(e,o.schema),a=ss(o,s,t);let c;return o.selection.$anchor.sameParent(o.selection.$head)&&(c=o.selection.$anchor.parent.attrs),a?i.setNode(l,c):i.setNode(s,{...c,...t})},rI=(r,e={})=>({state:t,commands:o})=>{const i=Wt(r,t.schema);return ss(t,i,e)?o.lift(i):o.wrapIn(i,e)},oI=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let o=0;o<t.length;o+=1){const i=t[o];let s;if(i.spec.isInputRules&&(s=i.getState(r))){if(e){const l=r.tr,a=s.transform;for(let c=a.steps.length-1;c>=0;c-=1)l.step(a.steps[c].invert(a.docs[c]));if(s.text){const c=l.doc.resolve(s.from).marks();l.replaceWith(s.from,s.to,r.schema.text(s.text,c))}else l.delete(s.from,s.to)}return!0}}return!1},iI=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:o,ranges:i}=t;return o||e&&i.forEach(s=>{r.removeMark(s.$from.pos,s.$to.pos)}),!0},sI=(r,e={})=>({tr:t,state:o,dispatch:i})=>{var s;const{extendEmptyMarkRange:l=!1}=e,{selection:a}=t,c=qr(r,o.schema),{$from:d,empty:u,ranges:f}=a;if(!i)return!0;if(u&&l){let{from:p,to:h}=a;const m=(s=d.marks().find(b=>b.type===c))===null||s===void 0?void 0:s.attrs,y=ah(d,c,m);y&&(p=y.from,h=y.to),t.removeMark(p,h,c)}else f.forEach(p=>{t.removeMark(p.$from.pos,p.$to.pos,c)});return t.removeStoredMark(c),!0},lI=(r,e={})=>({tr:t,state:o,dispatch:i})=>{let s=null,l=null;const a=ud(typeof r=="string"?r:r.name,o.schema);return a?(a==="node"&&(s=Wt(r,o.schema)),a==="mark"&&(l=qr(r,o.schema)),i&&t.selection.ranges.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;let f,p,h,m;t.selection.empty?o.doc.nodesBetween(d,u,(y,b)=>{s&&s===y.type&&(h=Math.max(b,d),m=Math.min(b+y.nodeSize,u),f=b,p=y)}):o.doc.nodesBetween(d,u,(y,b)=>{b<d&&s&&s===y.type&&(h=Math.max(b,d),m=Math.min(b+y.nodeSize,u),f=b,p=y),b>=d&&b<=u&&(s&&s===y.type&&t.setNodeMarkup(b,void 0,{...y.attrs,...e}),l&&y.marks.length&&y.marks.forEach(S=>{if(l===S.type){const w=Math.max(b,d),x=Math.min(b+y.nodeSize,u);t.addMark(w,x,l.create({...S.attrs,...e}))}}))}),p&&(f!==void 0&&t.setNodeMarkup(f,void 0,{...p.attrs,...e}),l&&p.marks.length&&p.marks.forEach(y=>{l===y.type&&t.addMark(h,m,l.create({...y.attrs,...e}))}))}),!0):!1},aI=(r,e={})=>({state:t,dispatch:o})=>{const i=Wt(r,t.schema);return MN(i,e)(t,o)},cI=(r,e={})=>({state:t,dispatch:o})=>{const i=Wt(r,t.schema);return CN(i,e)(t,o)};var dI=Object.freeze({__proto__:null,blur:qN,clearContent:JN,clearNodes:YN,command:XN,createParagraphNear:ZN,cut:QN,deleteCurrentNode:e_,deleteNode:t_,deleteRange:n_,deleteSelection:r_,enter:o_,exitCode:i_,extendMarkRange:s_,first:l_,focus:c_,forEach:d_,insertContent:u_,insertContentAt:p_,joinBackward:y_,joinDown:g_,joinForward:v_,joinItemBackward:b_,joinItemForward:w_,joinTextblockBackward:x_,joinTextblockForward:S_,joinUp:m_,keyboardShortcut:M_,lift:C_,liftEmptyBlock:O_,liftListItem:T_,newlineInCode:A_,resetAttributes:E_,scrollIntoView:P_,selectAll:N_,selectNodeBackward:__,selectNodeForward:I_,selectParentNode:D_,selectTextblockEnd:R_,selectTextblockStart:z_,setContent:L_,setMark:G_,setMeta:U_,setNode:q_,setNodeSelection:J_,setTextSelection:Y_,sinkListItem:X_,splitBlock:Z_,splitListItem:Q_,toggleList:eI,toggleMark:tI,toggleNode:nI,toggleWrap:rI,undoInputRule:oI,unsetAllMarks:iI,unsetMark:sI,updateAttributes:lI,wrapIn:aI,wrapInList:cI});const uI=Ut.create({name:"commands",addCommands(){return{...dI}}}),fI=Ut.create({name:"drop",addProseMirrorPlugins(){return[new dn({key:new qn("tiptapDrop"),props:{handleDrop:(r,e,t,o)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:o})}}})]}}),hI=Ut.create({name:"editable",addProseMirrorPlugins(){return[new dn({key:new qn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),pI=new qn("focusEvents"),mI=Ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new dn({key:pI,props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const o=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(o),!1},blur:(e,t)=>{r.isFocused=!1;const o=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(o),!1}}}})]}}),gI=Ut.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:a})=>{const{selection:c,doc:d}=a,{empty:u,$anchor:f}=c,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?a.doc.resolve(p-1):f,y=m.parent.type.spec.isolating,b=f.pos-f.parentOffset,S=y&&m.parent.childCount===1?b===f.pos:Ke.atStart(d).from===p;return!u||!h.type.isTextblock||h.textContent.length||!S||S&&f.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),o={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...o},s={...o,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ch()||Tb()?s:i},addProseMirrorPlugins(){return[new dn({key:new qn("clearDocument"),appendTransaction:(r,e,t)=>{if(r.some(y=>y.getMeta("composition")))return;const o=r.some(y=>y.docChanged)&&!e.doc.eq(t.doc),i=r.some(y=>y.getMeta("preventClearDocument"));if(!o||i)return;const{empty:s,from:l,to:a}=e.selection,c=Ke.atStart(e.doc).from,d=Ke.atEnd(e.doc).to;if(s||!(l===c&&a===d)||!uh(t.doc))return;const p=t.tr,h=sd({state:t,transaction:p}),{commands:m}=new ld({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),yI=Ut.create({name:"paste",addProseMirrorPlugins(){return[new dn({key:new qn("tiptapPaste"),props:{handlePaste:(r,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),vI=Ut.create({name:"tabindex",addProseMirrorPlugins(){return[new dn({key:new qn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ro{get name(){return this.node.type.name}constructor(e,t,o=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=o,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,o=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,o=this.to-1}this.editor.commands.insertContentAt({from:t,to:o},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new ro(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ro(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ro(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,o)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,l=this.pos+o+(s?0:1),a=this.resolvedPos.doc.resolve(l);if(!i&&a.depth<=this.depth)return;const c=new ro(a,this.editor,i,i?t:null);i&&(c.actualDepth=this.depth+1),e.push(new ro(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let o=null,i=this.parent;for(;i&&!o;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,l=Object.keys(t);for(let a=0;a<l.length;a+=1){const c=l[a];if(s[c]!==t[c])break}}else o=i;i=i.parent}return o}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},o=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(l=>{o&&i.length>0||(l.node.type.name===e&&s.every(c=>t[c]===l.node.attrs[c])&&i.push(l),!(o&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,t,o))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const bI=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function wI(r,e,t){const o=document.querySelector("style[data-tiptap-style]");if(o!==null)return o;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(i),i}let xI=class extends _N{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:o,moved:i})=>this.options.onDrop(t,o,i)),this.on("paste",({event:t,slice:o})=>this.options.onPaste(t,o)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=wI(bI,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const o=wb(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:o});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let o=t;if([].concat(e).forEach(s=>{const l=typeof s=="string"?`${s}$`:s.key;o=t.filter(a=>!a.key.startsWith(l))}),t.length===o.length)return;const i=this.state.reconfigure({plugins:o});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[hI,UN.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),uI,mI,gI,vI,fI,yI].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Vo(i,this)}createCommandManager(){this.commandManager=new ld({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=$u(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=$u(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const o=Cb(t,this.options.autofocus);this.view=new nN(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Bo.create({doc:t,selection:o||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(l)});return}const t=this.state.apply(e),o=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return W_(this.state,e)}isActive(e,t){const o=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return K_(this.state,o,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return sh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:o={}}=e||{};return V_(this.state.doc,{blockSeparator:t,textSerializers:{...Sb(this.schema),...o}})}get isEmpty(){return uh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var o;return((o=this.$doc)===null||o===void 0?void 0:o.querySelector(e,t))||null}$nodes(e,t){var o;return((o=this.$doc)===null||o===void 0?void 0:o.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new ro(t,this)}get $doc(){return this.$pos(0)}};function xo(r){return new cd({find:r.find,handler:({state:e,range:t,match:o})=>{const i=Ue(r.getAttributes,void 0,o);if(i===!1||i===null)return null;const{tr:s}=e,l=o[o.length-1],a=o[0];if(l){const c=a.search(/\S/),d=t.from+a.indexOf(l),u=d+l.length;if(Eb(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===r.type&&y!==h.mark.type)).filter(h=>h.to>d).length)return null;u<t.to&&s.delete(u,t.to),d>t.from&&s.delete(t.from+c,d);const p=t.from+c+l.length;s.addMark(t.from+c,p,r.type.create(i||{})),s.removeStoredMark(r.type)}}})}function SI(r){return new cd({find:r.find,handler:({state:e,range:t,match:o})=>{const i=Ue(r.getAttributes,void 0,o)||{},{tr:s}=e,l=t.from;let a=t.to;const c=r.type.create(i);if(o[1]){const d=o[0].lastIndexOf(o[1]);let u=l+d;u>a?u=a:a=u+o[1].length;const f=o[0][o[0].length-1];s.insertText(f,l+o[0].length-1),s.replaceWith(u,a,c)}else if(o[0]){const d=r.type.isInline?l:l-1;s.insert(d,r.type.create(i)).delete(s.mapping.map(l),s.mapping.map(a))}s.scrollIntoView()}})}function Uu(r){return new cd({find:r.find,handler:({state:e,range:t,match:o})=>{const i=e.doc.resolve(t.from),s=Ue(r.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,s)}})}function hi(r){return new cd({find:r.find,handler:({state:e,range:t,match:o,chain:i})=>{const s=Ue(r.getAttributes,void 0,o)||{},l=e.tr.delete(t.from,t.to),c=l.doc.resolve(t.from).blockRange(),d=c&&jf(c,r.type,s);if(!d)return null;if(l.wrap(c,d),r.keepMarks&&r.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=r.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const y=m.filter(b=>h.includes(b.type.name));l.ensureMarks(y)}}if(r.keepAttributes){const f=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const u=l.doc.resolve(t.from-1).nodeBefore;u&&u.type===r.type&&Gr(l.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(o,u))&&l.join(t.from-1)}})}let wn=class qu{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ue(ke(this,"addOptions",{name:this.name}))),this.storage=Ue(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qu(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>dd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new qu(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ue(ke(t,"addOptions",{name:t.name})),t.storage=Ue(ke(t,"addStorage",{name:t.name,options:t.options})),t}};function So(r){return new HN({find:r.find,handler:({state:e,range:t,match:o,pasteEvent:i})=>{const s=Ue(r.getAttributes,void 0,o,i);if(s===!1||s===null)return null;const{tr:l}=e,a=o[o.length-1],c=o[0];let d=t.to;if(a){const u=c.search(/\S/),f=t.from+c.indexOf(a),p=f+a.length;if(Eb(t.from,t.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===r.type&&b!==m.mark.type)).filter(m=>m.to>f).length)return null;p<t.to&&l.delete(p,t.to),f>t.from&&l.delete(t.from+u,f),d=t.from+u+a.length,l.addMark(t.from+u,d,r.type.create(s||{})),l.removeStoredMark(r.type)}}})}const kI=r=>{if(!r.children.length)return;const e=r.querySelectorAll("span");e&&e.forEach(t=>{var o,i;const s=t.getAttribute("style"),l=(i=(o=t.parentElement)===null||o===void 0?void 0:o.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");t.setAttribute("style",`${l};${s}`)})},Fm=Dn.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:r=>r.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&kI(r),{}):!1}]},renderHTML({HTMLAttributes:r}){return["span",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:r})=>{const{selection:e}=r;return r.doc.nodesBetween(e.from,e.to,(t,o)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||r.removeMark(o,o+t.nodeSize,this.type)}),!0}}}}),MI=Ut.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:r=>{var e;return(e=r.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.color?{style:`color: ${r.color}`}:{}}}}]},addCommands(){return{setColor:r=>({chain:e})=>e().setMark("textStyle",{color:r}).run(),unsetColor:()=>({chain:r})=>r().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Ju=wn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",Et(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),CI=/^\s*(\[([( |x])?\])\s$/,Yd=wn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:r=>{const e=r.getAttribute("data-checked");return e===""||e==="true"},renderHTML:r=>({"data-checked":r.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:r,HTMLAttributes:e}){return["li",Et(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:r.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const r={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...r,Tab:()=>this.editor.commands.sinkListItem(this.name)}:r},addNodeView(){return({node:r,HTMLAttributes:e,getPos:t,editor:o})=>{const i=document.createElement("li"),s=document.createElement("label"),l=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return s.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!o.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:u}=d.target;o.isEditable&&typeof t=="function"&&o.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const p=t();if(typeof p!="number")return!1;const h=f.doc.nodeAt(p);return f.setNodeMarkup(p,void 0,{...h==null?void 0:h.attrs,checked:u}),!0}).run(),!o.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(r,u)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,u])=>{i.setAttribute(d,u)}),i.dataset.checked=r.attrs.checked,a.checked=r.attrs.checked,s.append(a,l),i.append(s,c),Object.entries(e).forEach(([d,u])=>{i.setAttribute(d,u)}),{dom:i,contentDOM:c,update:d=>d.type!==this.type?!1:(i.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,!0)}}},addInputRules(){return[hi({find:CI,type:this.type,getAttributes:r=>({checked:r[r.length-1]==="x"})})]}}),OI=wn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:r}){return["ul",Et(this.options.HTMLAttributes,r,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),TI=Ut.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:r=>{const e=r.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:r=>r.textAlign?{style:`text-align: ${r.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:r=>({commands:e})=>this.options.alignments.includes(r)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:r})).every(t=>t):!1,unsetTextAlign:()=>({commands:r})=>this.options.types.map(e=>r.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),AI=Dn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),EI=/^\s*>\s$/,PI=wn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return["blockquote",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[hi({find:EI,type:this.type})]}}),NI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_I=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,II=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,DI=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,RI=Dn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:r=>r.type.name===this.name},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return["strong",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[xo({find:NI,type:this.type}),xo({find:II,type:this.type})]},addPasteRules(){return[So({find:_I,type:this.type}),So({find:DI,type:this.type})]}}),zI="listItem",Bm="textStyle",Vm=/^\s*([-+*])\s$/,LI=wn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zI,this.editor.getAttributes(Bm)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=hi({find:Vm,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=hi({find:Vm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Bm),editor:this.editor})),[r]}}),FI=/(^|[^`])`([^`]+)`(?!`)/,BI=/(^|[^`])`([^`]+)`(?!`)/g,VI=Dn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[xo({find:FI,type:this.type})]},addPasteRules(){return[So({find:BI,type:this.type})]}}),HI=/^```([a-z]+)?[\s\n]$/,WI=/^~~~([a-z]+)?[\s\n]$/,KI=wn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:r=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=r.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",Et(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=r,{selection:t}=e,{$from:o,empty:i}=t;if(!i||o.parent.type!==this.type)return!1;const s=o.parentOffset===o.parent.nodeSize-2,l=o.parent.textContent.endsWith(`

`);return!s||!l?!1:r.chain().command(({tr:a})=>(a.delete(o.pos-2,o.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=r,{selection:t,doc:o}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:o.nodeAt(a)?r.commands.command(({tr:d})=>(d.setSelection(Ke.near(o.resolve(a))),!0)):r.commands.exitCode()}}},addInputRules(){return[Uu({find:HI,type:this.type,getAttributes:r=>({language:r[1]})}),Uu({find:WI,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new dn({key:new qn("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),o=e.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:l,schema:a}=r.state,c=a.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:s},c)),l.selection.$from.parent.type!==this.type&&l.setSelection(Be.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),r.dispatch(l),!0}}})]}}),jI=wn.create({name:"doc",topNode:!0,content:"block+"});function $I(r={}){return new dn({view(e){return new GI(e,r)}})}class GI{constructor(e,t){var o;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(o=t.width)!==null&&o!==void 0?o:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=l=>{this[i](l)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,o;if(t){let a=e.nodeBefore,c=e.nodeAfter;if(a||c){let d=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(d){let u=d.getBoundingClientRect(),f=a?u.bottom:u.top;a&&c&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),o={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!o){let a=this.editorView.coordsAtPos(this.cursorPos);o={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,l;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,l=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,l=a.top-i.scrollTop}this.element.style.left=o.left-s+"px",this.element.style.top=o.top-l+"px",this.element.style.width=o.right-o.left+"px",this.element.style.height=o.bottom-o.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),o=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=o&&o.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=wv(this.editorView.state.doc,l,this.editorView.dragging.slice);a!=null&&(l=a)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const UI=Ut.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[$I(this.options)]}});class wt extends Ke{constructor(e){super(e,e)}map(e,t){let o=e.resolve(t.map(this.head));return wt.valid(o)?new wt(o):Ke.near(o)}content(){return pe.empty}eq(e){return e instanceof wt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new wt(e.resolve(t.pos))}getBookmark(){return new fh(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!qI(e)||!JI(e))return!1;let o=t.type.spec.allowGapCursor;if(o!=null)return o;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,o=!1){e:for(;;){if(!o&&wt.valid(e))return e;let i=e.pos,s=null;for(let l=e.depth;;l--){let a=e.node(l);if(t>0?e.indexAfter(l)<a.childCount:e.index(l)>0){s=a.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=t;let c=e.doc.resolve(i);if(wt.valid(c))return c}for(;;){let l=t>0?s.firstChild:s.lastChild;if(!l){if(s.isAtom&&!s.isText&&!Ie.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),o=!1;continue e}break}s=l,i+=t;let a=e.doc.resolve(i);if(wt.valid(a))return a}return null}}}wt.prototype.visible=!1;wt.findFrom=wt.findGapCursorFrom;Ke.jsonID("gapcursor",wt);class fh{constructor(e){this.pos=e}map(e){return new fh(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return wt.valid(t)?new wt(t):Ke.near(t)}}function qI(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),o=r.node(e);if(t==0){if(o.type.spec.isolating)return!0;continue}for(let i=o.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function JI(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),o=r.node(e);if(t==o.childCount){if(o.type.spec.isolating)return!0;continue}for(let i=o.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function YI(){return new dn({props:{decorations:eD,createSelectionBetween(r,e,t){return e.pos==t.pos&&wt.valid(t)?new wt(t):null},handleClick:ZI,handleKeyDown:XI,handleDOMEvents:{beforeinput:QI}}})}const XI=sb({ArrowLeft:Ca("horiz",-1),ArrowRight:Ca("horiz",1),ArrowUp:Ca("vert",-1),ArrowDown:Ca("vert",1)});function Ca(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(o,i,s){let l=o.selection,a=e>0?l.$to:l.$from,c=l.empty;if(l instanceof Be){if(!s.endOfTextblock(t)||a.depth==0)return!1;c=!1,a=o.doc.resolve(e>0?a.after():a.before())}let d=wt.findGapCursorFrom(a,e,c);return d?(i&&i(o.tr.setSelection(new wt(d))),!0):!1}}function ZI(r,e,t){if(!r||!r.editable)return!1;let o=r.state.doc.resolve(e);if(!wt.valid(o))return!1;let i=r.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Ie.isSelectable(r.state.doc.nodeAt(i.inside))?!1:(r.dispatch(r.state.tr.setSelection(new wt(o))),!0)}function QI(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof wt))return!1;let{$from:t}=r.state.selection,o=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!o)return!1;let i=Q.empty;for(let l=o.length-1;l>=0;l--)i=Q.from(o[l].createAndFill(null,i));let s=r.state.tr.replace(t.pos,t.pos,new pe(i,0,0));return s.setSelection(Be.near(s.doc.resolve(t.pos+1))),r.dispatch(s),!1}function eD(r){if(!(r.selection instanceof wt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Rt.create(r.doc,[On.widget(r.selection.head,e,{key:"gapcursor"})])}const tD=Ut.create({name:"gapCursor",addProseMirrorPlugins(){return[YI()]},extendNodeSchema(r){var e;const t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=Ue(ke(r,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),nD=wn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",Et(this.options.HTMLAttributes,r)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:o})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:a}=o.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:u})=>{if(u&&c&&l){const f=c.filter(p=>a.includes(p.type.name));d.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),rD=wn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,Et(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>Uu({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}});var bc=200,Ht=function(){};Ht.prototype.append=function(e){return e.length?(e=Ht.from(e),!this.length&&e||e.length<bc&&this.leafAppend(e)||this.length<bc&&e.leafPrepend(this)||this.appendInner(e)):this};Ht.prototype.prepend=function(e){return e.length?Ht.from(e).append(this):this};Ht.prototype.appendInner=function(e){return new oD(this,e)};Ht.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Ht.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Ht.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ht.prototype.forEach=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=this.length),t<=o?this.forEachInner(e,t,o,0):this.forEachInvertedInner(e,t,o,0)};Ht.prototype.map=function(e,t,o){t===void 0&&(t=0),o===void 0&&(o=this.length);var i=[];return this.forEach(function(s,l){return i.push(e(s,l))},t,o),i};Ht.from=function(e){return e instanceof Ht?e:e&&e.length?new Pb(e):Ht.empty};var Pb=function(r){function e(o){r.call(this),this.values=o}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,l,a){for(var c=s;c<l;c++)if(i(this.values[c],a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,l,a){for(var c=s-1;c>=l;c--)if(i(this.values[c],a+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=bc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=bc)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Ht);Ht.empty=new Pb([]);var oD=function(r){function e(t,o){r.call(this),this.left=t,this.right=o,this.length=t.length+o.length,this.depth=Math.max(t.depth,o.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(o){return o<this.left.length?this.left.get(o):this.right.get(o-this.left.length)},e.prototype.forEachInner=function(o,i,s,l){var a=this.left.length;if(i<a&&this.left.forEachInner(o,i,Math.min(s,a),l)===!1||s>a&&this.right.forEachInner(o,Math.max(i-a,0),Math.min(this.length,s)-a,l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,l){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(o,i-a,Math.max(s,a)-a,l+a)===!1||s<a&&this.left.forEachInvertedInner(o,Math.min(i,a),s,l)===!1)return!1},e.prototype.sliceInner=function(o,i){if(o==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(o,i):o>=s?this.right.slice(o-s,i-s):this.left.slice(o,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(o){var i=this.right.leafAppend(o);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(o){var i=this.left.leafPrepend(o);if(i)return new e(i,this.right)},e.prototype.appendInner=function(o){return this.left.depth>=Math.max(this.right.depth,o.depth)+1?new e(this.left,new e(this.right,o)):new e(this,o)},e}(Ht);const iD=500;class Pn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let o=this.items.length;for(;;o--)if(this.items.get(o-1).selection){--o;break}let i,s;t&&(i=this.remapping(o,this.items.length),s=i.maps.length);let l=e.tr,a,c,d=[],u=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(o,p+1),s=i.maps.length),s--,u.push(f);return}if(i){u.push(new Ln(f.map));let h=f.step.map(i.slice(s)),m;h&&l.maybeStep(h).doc&&(m=l.mapping.maps[l.mapping.maps.length-1],d.push(new Ln(m,void 0,void 0,d.length+u.length))),s--,m&&i.appendMap(m,s)}else l.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(s)):f.selection,c=new Pn(this.items.slice(0,o).append(u.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:l,selection:a}}addTransform(e,t,o,i){let s=[],l=this.eventCount,a=this.items,c=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),p=new Ln(e.mapping.maps[u],f,t),h;(h=c&&c.merge(p))&&(p=h,u?s.pop():a=a.slice(0,a.length-1)),s.push(p),t&&(l++,t=void 0),i||(c=p)}let d=l-o.depth;return d>lD&&(a=sD(a,d),l-=d),new Pn(a.append(s),l)}remapping(e,t){let o=new es;return this.items.forEach((i,s)=>{let l=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?o.maps.length-i.mirrorOffset:void 0;o.appendMap(i.map,l)},e,t),o}addMaps(e){return this.eventCount==0?this:new Pn(this.items.append(e.map(t=>new Ln(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let o=[],i=Math.max(0,this.items.length-t),s=e.mapping,l=e.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},i);let c=t;this.items.forEach(p=>{let h=s.getMirror(--c);if(h==null)return;l=Math.min(l,h);let m=s.maps[h];if(p.step){let y=e.steps[h].invert(e.docs[h]),b=p.selection&&p.selection.map(s.slice(c+1,h));b&&a++,o.push(new Ln(m,y,b))}else o.push(new Ln(m))},i);let d=[];for(let p=t;p<l;p++)d.push(new Ln(s.maps[p]));let u=this.items.slice(0,i).append(d).append(o),f=new Pn(u,a);return f.emptyItemCount()>iD&&(f=f.compress(this.items.length-o.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),o=t.maps.length,i=[],s=0;return this.items.forEach((l,a)=>{if(a>=e)i.push(l),l.selection&&s++;else if(l.step){let c=l.step.map(t.slice(o)),d=c&&c.getMap();if(o--,d&&t.appendMap(d,o),c){let u=l.selection&&l.selection.map(t.slice(o));u&&s++;let f=new Ln(d.invert(),c,u),p,h=i.length-1;(p=i.length&&i[h].merge(f))?i[h]=p:i.push(f)}}else l.map&&o--},this.items.length,0),new Pn(Ht.from(i.reverse()),s)}}Pn.empty=new Pn(Ht.empty,0);function sD(r,e){let t;return r.forEach((o,i)=>{if(o.selection&&e--==0)return t=i,!1}),r.slice(t)}class Ln{constructor(e,t,o,i){this.map=e,this.step=t,this.selection=o,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Ln(t.getMap().invert(),t,this.selection)}}}class Tr{constructor(e,t,o,i,s){this.done=e,this.undone=t,this.prevRanges=o,this.prevTime=i,this.prevComposition=s}}const lD=20;function aD(r,e,t,o){let i=t.getMeta(po),s;if(i)return i.historyState;t.getMeta(uD)&&(r=new Tr(r.done,r.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(l&&l.getMeta(po))return l.getMeta(po).redo?new Tr(r.done.addTransform(t,void 0,o,ja(e)),r.undone,Hm(t.mapping.maps),r.prevTime,r.prevComposition):new Tr(r.done,r.undone.addTransform(t,void 0,o,ja(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),c=r.prevTime==0||!l&&r.prevComposition!=a&&(r.prevTime<(t.time||0)-o.newGroupDelay||!cD(t,r.prevRanges)),d=l?Xd(r.prevRanges,t.mapping):Hm(t.mapping.maps);return new Tr(r.done.addTransform(t,c?e.selection.getBookmark():void 0,o,ja(e)),Pn.empty,d,t.time,a??r.prevComposition)}else return(s=t.getMeta("rebased"))?new Tr(r.done.rebased(t,s),r.undone.rebased(t,s),Xd(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new Tr(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),Xd(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function cD(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((o,i)=>{for(let s=0;s<e.length;s+=2)o<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function Hm(r){let e=[];for(let t=r.length-1;t>=0&&e.length==0;t--)r[t].forEach((o,i,s,l)=>e.push(s,l));return e}function Xd(r,e){if(!r)return null;let t=[];for(let o=0;o<r.length;o+=2){let i=e.map(r[o],1),s=e.map(r[o+1],-1);i<=s&&t.push(i,s)}return t}function dD(r,e,t){let o=ja(e),i=po.get(e).spec.config,s=(t?r.undone:r.done).popEvent(e,o);if(!s)return null;let l=s.selection.resolve(s.transform.doc),a=(t?r.done:r.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),c=new Tr(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(l).setMeta(po,{redo:t,historyState:c})}let Zd=!1,Wm=null;function ja(r){let e=r.plugins;if(Wm!=e){Zd=!1,Wm=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Zd=!0;break}}return Zd}const po=new qn("history"),uD=new qn("closeHistory");function fD(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new dn({key:po,state:{init(){return new Tr(Pn.empty,Pn.empty,null,0,-1)},apply(e,t,o){return aD(t,o,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let o=t.inputType,i=o=="historyUndo"?_b:o=="historyRedo"?Ib:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Nb(r,e){return(t,o)=>{let i=po.getState(t);if(!i||(r?i.undone:i.done).eventCount==0)return!1;if(o){let s=dD(i,t,r);s&&o(e?s.scrollIntoView():s)}return!0}}const _b=Nb(!1,!0),Ib=Nb(!0,!0),hD=Ut.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>_b(r,e),redo:()=>({state:r,dispatch:e})=>Ib(r,e)}},addProseMirrorPlugins(){return[fD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),pD=wn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",Et(this.options.HTMLAttributes,r)]},addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{const{selection:t}=e,{$from:o,$to:i}=t,s=r();return o.parentOffset===0?s.insertContentAt({from:Math.max(o.pos-1,0),to:i.pos},{type:this.name}):j_(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:l,dispatch:a})=>{var c;if(a){const{$to:d}=l.selection,u=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Be.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(Ie.create(l.doc,d.pos)):l.setSelection(Be.create(l.doc,d.pos));else{const f=(c=d.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();f&&(l.insert(u,f),l.setSelection(Be.create(l.doc,u+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[SI({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),mD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,gD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,yD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,bD=Dn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:r=>r.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[xo({find:mD,type:this.type}),xo({find:yD,type:this.type})]},addPasteRules(){return[So({find:gD,type:this.type}),So({find:vD,type:this.type})]}}),wD="listItem",Km="textStyle",jm=/^(\d+)\.\s$/,xD=wn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1},type:{default:null,parseHTML:r=>r.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",Et(this.options.HTMLAttributes,t),0]:["ol",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wD,this.editor.getAttributes(Km)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=hi({find:jm,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=hi({find:jm,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Km)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),SD=wn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),kD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,MD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,CD=Dn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[xo({find:kD,type:this.type})]},addPasteRules(){return[So({find:MD,type:this.type})]}}),OD=wn.create({name:"text",group:"inline"}),TD=Ut.create({name:"starterKit",addExtensions(){const r=[];return this.options.bold!==!1&&r.push(RI.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(PI.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push(LI.configure(this.options.bulletList)),this.options.code!==!1&&r.push(VI.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(KI.configure(this.options.codeBlock)),this.options.document!==!1&&r.push(jI.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(UI.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(tD.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(nD.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push(rD.configure(this.options.heading)),this.options.history!==!1&&r.push(hD.configure(this.options.history)),this.options.horizontalRule!==!1&&r.push(pD.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(bD.configure(this.options.italic)),this.options.listItem!==!1&&r.push(Ju.configure(this.options.listItem)),this.options.orderedList!==!1&&r.push(xD.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(SD.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(CD.configure(this.options.strike)),this.options.text!==!1&&r.push(OD.configure(this.options.text)),r}});class AD extends xI{constructor(){super(...arguments);oe(this,"contentElement",null)}}const ED=r=>{const e=new AD(r);return sg(e,t=>(e.on("transaction",()=>{t(e)}),()=>{e.destroy()}))};var PD=U("<div></div> <!>",1);function ND(r,e){Y(e,!0);const t=v(e,"editor",7);let o;Rn(async()=>{var d;await hf(),o&&(d=t())!=null&&d.options.element&&(t().contentElement||(o.append(...Array.from(t().options.element.childNodes)),t().setOptions({element:o}),t().contentElement=o))}),pf(()=>{if(!t()||(t().contentElement=null,!t().options.element.firstChild))return;const d=document.createElement("div");d.append(...Array.from(t().options.element.childNodes)),t().setOptions({element:d})});var s=PD(),l=P(s);nn(l,d=>o=d,()=>o);var a=ne(l,2);{var c=d=>{var u=B(),f=P(u);ce(f,()=>e.children),O(d,u)};Pe(a,d=>{e.children&&d(c)})}Te(()=>gr(l,1,$r(e.class))),O(r,s),X()}const $m=["#fb2c36","#ff6900","#fe9a00","#f0b100","#7ccf00","#00c951","#00bc7d","#00bba7","#00b8db","#00a6f4","#2b7fff","#615fff","#8e51ff","#ad46ff","#e12afb","#f6339a","#ff2056"];function _D(r="",e=1){let t=r.replace(/^#/,"");if(t.length===3&&(t=t.split("").map(a=>a+a).join("")),t.length!==6||Number.isNaN(Number.parseInt(t,16)))throw new Error(`Invalid hex color: "${r}"`);const o=Number.parseInt(t.substr(0,2),16),i=Number.parseInt(t.substr(2,2),16),s=Number.parseInt(t.substr(4,2),16),l=Math.max(0,Math.min(1,e));return`rgba(${o}, ${i}, ${s}, ${l})`}var Gm=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,an=r=>!r||typeof r!="object"||Object.keys(r).length===0,ID=(r,e)=>JSON.stringify(r)===JSON.stringify(e);function Db(r,e){r.forEach(function(t){Array.isArray(t)?Db(t,e):e.push(t)})}function Rb(r){let e=[];return Db(r,e),e}var zb=(...r)=>Rb(r).filter(Boolean),Lb=(r,e)=>{let t={},o=Object.keys(r),i=Object.keys(e);for(let s of o)if(i.includes(s)){let l=r[s],a=e[s];Array.isArray(l)||Array.isArray(a)?t[s]=zb(a,l):typeof l=="object"&&typeof a=="object"?t[s]=Lb(l,a):t[s]=a+" "+l}else t[s]=r[s];for(let s of i)o.includes(s)||(t[s]=e[s]);return t},Um=r=>!r||typeof r!="string"?r:r.replace(/\s+/g," ").trim();const hh="-",DD=r=>{const e=zD(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:o}=r;return{getClassGroupId:l=>{const a=l.split(hh);return a[0]===""&&a.length!==1&&a.shift(),Fb(a,e)||RD(l)},getConflictingClassGroupIds:(l,a)=>{const c=t[l]||[];return a&&o[l]?[...c,...o[l]]:c}}},Fb=(r,e)=>{var l;if(r.length===0)return e.classGroupId;const t=r[0],o=e.nextPart.get(t),i=o?Fb(r.slice(1),o):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(hh);return(l=e.validators.find(({validator:a})=>a(s)))==null?void 0:l.classGroupId},qm=/^\[(.+)\]$/,RD=r=>{if(qm.test(r)){const e=qm.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},zD=r=>{const{theme:e,classGroups:t}=r,o={nextPart:new Map,validators:[]};for(const i in t)Yu(t[i],o,i,e);return o},Yu=(r,e,t,o)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Jm(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(LD(i)){Yu(i(o),e,t,o);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,l])=>{Yu(l,Jm(e,s),t,o)})})},Jm=(r,e)=>{let t=r;return e.split(hh).forEach(o=>{t.nextPart.has(o)||t.nextPart.set(o,{nextPart:new Map,validators:[]}),t=t.nextPart.get(o)}),t},LD=r=>r.isThemeGetter,FD=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,o=new Map;const i=(s,l)=>{t.set(s,l),e++,e>r&&(e=0,o=t,t=new Map)};return{get(s){let l=t.get(s);if(l!==void 0)return l;if((l=o.get(s))!==void 0)return i(s,l),l},set(s,l){t.has(s)?t.set(s,l):i(s,l)}}},Xu="!",Zu=":",BD=Zu.length,VD=r=>{const{prefix:e,experimentalParseClassName:t}=r;let o=i=>{const s=[];let l=0,a=0,c=0,d;for(let m=0;m<i.length;m++){let y=i[m];if(l===0&&a===0){if(y===Zu){s.push(i.slice(c,m)),c=m+BD;continue}if(y==="/"){d=m;continue}}y==="["?l++:y==="]"?l--:y==="("?a++:y===")"&&a--}const u=s.length===0?i:i.substring(c),f=HD(u),p=f!==u,h=d&&d>c?d-c:void 0;return{modifiers:s,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:h}};if(e){const i=e+Zu,s=o;o=l=>l.startsWith(i)?s(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const i=o;o=s=>t({className:s,parseClassName:i})}return o},HD=r=>r.endsWith(Xu)?r.substring(0,r.length-1):r.startsWith(Xu)?r.substring(1):r,WD=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const i=[];let s=[];return o.forEach(l=>{l[0]==="["||e[l]?(i.push(...s.sort(),l),s=[]):s.push(l)}),i.push(...s.sort()),i}},KD=r=>({cache:FD(r.cacheSize),parseClassName:VD(r),sortModifiers:WD(r),...DD(r)}),jD=/\s+/,$D=(r,e)=>{const{parseClassName:t,getClassGroupId:o,getConflictingClassGroupIds:i,sortModifiers:s}=e,l=[],a=r.trim().split(jD);let c="";for(let d=a.length-1;d>=0;d-=1){const u=a[d],{isExternal:f,modifiers:p,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=t(u);if(f){c=u+(c.length>0?" "+c:c);continue}let b=!!y,S=o(b?m.substring(0,y):m);if(!S){if(!b){c=u+(c.length>0?" "+c:c);continue}if(S=o(m),!S){c=u+(c.length>0?" "+c:c);continue}b=!1}const w=s(p).join(":"),x=h?w+Xu:w,C=x+S;if(l.includes(C))continue;l.push(C);const M=i(S,b);for(let k=0;k<M.length;++k){const E=M[k];l.push(x+E)}c=u+(c.length>0?" "+c:c)}return c};function GD(){let r=0,e,t,o="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Bb(e))&&(o&&(o+=" "),o+=t);return o}const Bb=r=>{if(typeof r=="string")return r;let e,t="";for(let o=0;o<r.length;o++)r[o]&&(e=Bb(r[o]))&&(t&&(t+=" "),t+=e);return t};function Qu(r,...e){let t,o,i,s=l;function l(c){const d=e.reduce((u,f)=>f(u),r());return t=KD(d),o=t.cache.get,i=t.cache.set,s=a,a(c)}function a(c){const d=o(c);if(d)return d;const u=$D(c,t);return i(c,u),u}return function(){return s(GD.apply(null,arguments))}}const Lt=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},Vb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Hb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,UD=/^\d+\/\d+$/,qD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,XD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,No=r=>UD.test(r),Ye=r=>!!r&&!Number.isNaN(Number(r)),Zr=r=>!!r&&Number.isInteger(Number(r)),Ym=r=>r.endsWith("%")&&Ye(r.slice(0,-1)),xr=r=>qD.test(r),QD=()=>!0,eR=r=>JD.test(r)&&!YD.test(r),ph=()=>!1,tR=r=>XD.test(r),nR=r=>ZD.test(r),rR=r=>!xe(r)&&!Se(r),oR=r=>xi(r,jb,ph),xe=r=>Vb.test(r),Qr=r=>xi(r,$b,eR),Qd=r=>xi(r,mR,Ye),iR=r=>xi(r,Wb,ph),sR=r=>xi(r,Kb,nR),lR=r=>xi(r,ph,tR),Se=r=>Hb.test(r),Oa=r=>Si(r,$b),aR=r=>Si(r,gR),cR=r=>Si(r,Wb),dR=r=>Si(r,jb),uR=r=>Si(r,Kb),fR=r=>Si(r,yR,!0),xi=(r,e,t)=>{const o=Vb.exec(r);return o?o[1]?e(o[1]):t(o[2]):!1},Si=(r,e,t=!1)=>{const o=Hb.exec(r);return o?o[1]?e(o[1]):t:!1},Wb=r=>r==="position",hR=new Set(["image","url"]),Kb=r=>hR.has(r),pR=new Set(["length","size","percentage"]),jb=r=>pR.has(r),$b=r=>r==="length",mR=r=>r==="number",gR=r=>r==="family-name",yR=r=>r==="shadow",ef=()=>{const r=Lt("color"),e=Lt("font"),t=Lt("text"),o=Lt("font-weight"),i=Lt("tracking"),s=Lt("leading"),l=Lt("breakpoint"),a=Lt("container"),c=Lt("spacing"),d=Lt("radius"),u=Lt("shadow"),f=Lt("inset-shadow"),p=Lt("drop-shadow"),h=Lt("blur"),m=Lt("perspective"),y=Lt("aspect"),b=Lt("ease"),S=Lt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],x=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],C=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],k=()=>[Se,xe,c],E=()=>[No,"full","auto",...k()],A=()=>[Zr,"none","subgrid",Se,xe],N=()=>["auto",{span:["full",Zr,Se,xe]},Se,xe],L=()=>[Zr,"auto",Se,xe],K=()=>["auto","min","max","fr",Se,xe],z=()=>["start","end","center","between","around","evenly","stretch","baseline"],V=()=>["start","end","center","stretch"],D=()=>["auto",...k()],$=()=>[No,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],W=()=>[r,Se,xe],G=()=>[Ym,Qr],R=()=>["","none","full",d,Se,xe],J=()=>["",Ye,Oa,Qr],q=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["","none",h,Se,xe],Me=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se,xe],j=()=>["none",Ye,Se,xe],te=()=>["none",Ye,Se,xe],le=()=>[Ye,Se,xe],ee=()=>[No,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xr],breakpoint:[xr],color:[QD],container:[xr],"drop-shadow":[xr],ease:["in","out","in-out"],font:[rR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xr],shadow:[xr],spacing:["px",Ye],text:[xr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",No,xe,Se,y]}],container:["container"],columns:[{columns:[Ye,xe,Se,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...x(),xe,Se]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Zr,"auto",Se,xe]}],basis:[{basis:[No,"full","auto",a,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ye,No,"auto","initial","none",xe]}],grow:[{grow:["",Ye,Se,xe]}],shrink:[{shrink:["",Ye,Se,xe]}],order:[{order:[Zr,"first","last","none",Se,xe]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...V(),"normal"]}],"justify-self":[{"justify-self":["auto",...V()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...V(),"baseline"]}],"align-self":[{self:["auto",...V(),"baseline"]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...V(),"baseline"]}],"place-self":[{"place-self":["auto",...V()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[a,"screen",...$()]}],"min-w":[{"min-w":[a,"screen","none",...$()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[l]},...$()]}],h:[{h:["screen",...$()]}],"min-h":[{"min-h":["screen","none",...$()]}],"max-h":[{"max-h":["screen",...$()]}],"font-size":[{text:["base",t,Oa,Qr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Se,Qd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ym,xe]}],"font-family":[{font:[aR,xe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Se,xe]}],"line-clamp":[{"line-clamp":[Ye,"none",Se,Qd]}],leading:[{leading:[s,...k()]}],"list-image":[{"list-image":["none",Se,xe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Se,xe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ye,"from-font","auto",Se,Qr]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[Ye,"auto",Se,xe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se,xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se,xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...x(),cR,iR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",dR,oR]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zr,Se,xe],radial:["",Se,xe],conic:[Zr,Se,xe]},uR,sR]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...q(),"hidden","none"]}],"divide-style":[{divide:[...q(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ye,Se,xe]}],"outline-w":[{outline:["",Ye,Oa,Qr]}],"outline-color":[{outline:[r]}],shadow:[{shadow:["","none",u,fR,lR]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",Se,xe,f]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[Ye,Qr]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":W()}],opacity:[{opacity:[Ye,Se,xe]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none",Se,xe]}],blur:[{blur:ie()}],brightness:[{brightness:[Ye,Se,xe]}],contrast:[{contrast:[Ye,Se,xe]}],"drop-shadow":[{"drop-shadow":["","none",p,Se,xe]}],grayscale:[{grayscale:["",Ye,Se,xe]}],"hue-rotate":[{"hue-rotate":[Ye,Se,xe]}],invert:[{invert:["",Ye,Se,xe]}],saturate:[{saturate:[Ye,Se,xe]}],sepia:[{sepia:["",Ye,Se,xe]}],"backdrop-filter":[{"backdrop-filter":["","none",Se,xe]}],"backdrop-blur":[{"backdrop-blur":ie()}],"backdrop-brightness":[{"backdrop-brightness":[Ye,Se,xe]}],"backdrop-contrast":[{"backdrop-contrast":[Ye,Se,xe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ye,Se,xe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ye,Se,xe]}],"backdrop-invert":[{"backdrop-invert":["",Ye,Se,xe]}],"backdrop-opacity":[{"backdrop-opacity":[Ye,Se,xe]}],"backdrop-saturate":[{"backdrop-saturate":[Ye,Se,xe]}],"backdrop-sepia":[{"backdrop-sepia":["",Ye,Se,xe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Se,xe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ye,"initial",Se,xe]}],ease:[{ease:["linear","initial",b,Se,xe]}],delay:[{delay:[Ye,Se,xe]}],animate:[{animate:["none",S,Se,xe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Se,xe]}],"perspective-origin":[{"perspective-origin":Me()}],rotate:[{rotate:j()}],"rotate-x":[{"rotate-x":j()}],"rotate-y":[{"rotate-y":j()}],"rotate-z":[{"rotate-z":j()}],scale:[{scale:te()}],"scale-x":[{"scale-x":te()}],"scale-y":[{"scale-y":te()}],"scale-z":[{"scale-z":te()}],"scale-3d":["scale-3d"],skew:[{skew:le()}],"skew-x":[{"skew-x":le()}],"skew-y":[{"skew-y":le()}],transform:[{transform:[Se,xe,"","none","gpu","cpu"]}],"transform-origin":[{origin:Me()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ee()}],"translate-x":[{"translate-x":ee()}],"translate-y":[{"translate-y":ee()}],"translate-z":[{"translate-z":ee()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se,xe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se,xe]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[Ye,Oa,Qr,Qd]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},vR=(r,{cacheSize:e,prefix:t,experimentalParseClassName:o,extend:i={},override:s={}})=>(Hi(r,"cacheSize",e),Hi(r,"prefix",t),Hi(r,"experimentalParseClassName",o),Ta(r.theme,s.theme),Ta(r.classGroups,s.classGroups),Ta(r.conflictingClassGroups,s.conflictingClassGroups),Ta(r.conflictingClassGroupModifiers,s.conflictingClassGroupModifiers),Hi(r,"orderSensitiveModifiers",s.orderSensitiveModifiers),Aa(r.theme,i.theme),Aa(r.classGroups,i.classGroups),Aa(r.conflictingClassGroups,i.conflictingClassGroups),Aa(r.conflictingClassGroupModifiers,i.conflictingClassGroupModifiers),Gb(r,i,"orderSensitiveModifiers"),r),Hi=(r,e,t)=>{t!==void 0&&(r[e]=t)},Ta=(r,e)=>{if(e)for(const t in e)Hi(r,t,e[t])},Aa=(r,e)=>{if(e)for(const t in e)Gb(r,e,t)},Gb=(r,e,t)=>{const o=e[t];o!==void 0&&(r[t]=r[t]?r[t].concat(o):o)},bR=(r,...e)=>typeof r=="function"?Qu(ef,r,...e):Qu(()=>vR(ef(),r),...e),wR=Qu(ef);var xR={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},Ub=r=>r||void 0,ls=(...r)=>Ub(Rb(r).filter(Boolean).join(" ")),eu=null,Qn={},tf=!1,Di=(...r)=>e=>e.twMerge?((!eu||tf)&&(tf=!1,eu=an(Qn)?wR:bR({...Qn,extend:{theme:Qn.theme,classGroups:Qn.classGroups,conflictingClassGroupModifiers:Qn.conflictingClassGroupModifiers,conflictingClassGroups:Qn.conflictingClassGroups,...Qn.extend}})),Ub(eu(ls(r)))):ls(r),Xm=(r,e)=>{for(let t in e)r.hasOwnProperty(t)?r[t]=ls(r[t],e[t]):r[t]=e[t];return r},qb=(r,e)=>{let{extend:t=null,slots:o={},variants:i={},compoundVariants:s=[],compoundSlots:l=[],defaultVariants:a={}}=r,c={...xR,...e},d=t!=null&&t.base?ls(t.base,r==null?void 0:r.base):r==null?void 0:r.base,u=t!=null&&t.variants&&!an(t.variants)?Lb(i,t.variants):i,f=t!=null&&t.defaultVariants&&!an(t.defaultVariants)?{...t.defaultVariants,...a}:a;!an(c.twMergeConfig)&&!ID(c.twMergeConfig,Qn)&&(tf=!0,Qn=c.twMergeConfig);let p=an(t==null?void 0:t.slots),h=an(o)?{}:{base:ls(r==null?void 0:r.base,p&&(t==null?void 0:t.base)),...o},m=p?h:Xm({...t==null?void 0:t.slots},an(h)?{base:r==null?void 0:r.base}:h),y=an(t==null?void 0:t.compoundVariants)?s:zb(t==null?void 0:t.compoundVariants,s),b=w=>{if(an(u)&&an(o)&&p)return Di(d,w==null?void 0:w.class,w==null?void 0:w.className)(c);if(y&&!Array.isArray(y))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof y}`);if(l&&!Array.isArray(l))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof l}`);let x=(z,V,D=[],$)=>{let W=D;if(typeof V=="string")W=W.concat(Um(V).split(" ").map(G=>`${z}:${G}`));else if(Array.isArray(V))W=W.concat(V.reduce((G,R)=>G.concat(`${z}:${R}`),[]));else if(typeof V=="object"&&typeof $=="string"){for(let G in V)if(V.hasOwnProperty(G)&&G===$){let R=V[G];if(R&&typeof R=="string"){let J=Um(R);W[$]?W[$]=W[$].concat(J.split(" ").map(q=>`${z}:${q}`)):W[$]=J.split(" ").map(q=>`${z}:${q}`)}else Array.isArray(R)&&R.length>0&&(W[$]=R.reduce((J,q)=>J.concat(`${z}:${q}`),[]))}}return W},C=(z,V=u,D=null,$=null)=>{var W;let G=V[z];if(!G||an(G))return null;let R=(W=$==null?void 0:$[z])!=null?W:w==null?void 0:w[z];if(R===null)return null;let J=Gm(R),q=Array.isArray(c.responsiveVariants)&&c.responsiveVariants.length>0||c.responsiveVariants===!0,se=f==null?void 0:f[z],ie=[];if(typeof J=="object"&&q)for(let[te,le]of Object.entries(J)){let ee=G[le];if(te==="initial"){se=le;continue}Array.isArray(c.responsiveVariants)&&!c.responsiveVariants.includes(te)||(ie=x(te,ee,ie,D))}let Me=J!=null&&typeof J!="object"?J:Gm(se),j=G[Me||"false"];return typeof ie=="object"&&typeof D=="string"&&ie[D]?Xm(ie,j):ie.length>0?(ie.push(j),D==="base"?ie.join(" "):ie):j},M=()=>u?Object.keys(u).map(z=>C(z,u)):null,k=(z,V)=>{if(!u||typeof u!="object")return null;let D=new Array;for(let $ in u){let W=C($,u,z,V),G=z==="base"&&typeof W=="string"?W:W&&W[z];G&&(D[D.length]=G)}return D},E={};for(let z in w)w[z]!==void 0&&(E[z]=w[z]);let A=(z,V)=>{var D;let $=typeof(w==null?void 0:w[z])=="object"?{[z]:(D=w[z])==null?void 0:D.initial}:{};return{...f,...E,...$,...V}},N=(z=[],V)=>{let D=[];for(let{class:$,className:W,...G}of z){let R=!0;for(let[J,q]of Object.entries(G)){let se=A(J,V)[J];if(Array.isArray(q)){if(!q.includes(se)){R=!1;break}}else{let ie=Me=>Me==null||Me===!1;if(ie(q)&&ie(se))continue;if(se!==q){R=!1;break}}}R&&($&&D.push($),W&&D.push(W))}return D},L=z=>{let V=N(y,z);if(!Array.isArray(V))return V;let D={};for(let $ of V)if(typeof $=="string"&&(D.base=Di(D.base,$)(c)),typeof $=="object")for(let[W,G]of Object.entries($))D[W]=Di(D[W],G)(c);return D},K=z=>{if(l.length<1)return null;let V={};for(let{slots:D=[],class:$,className:W,...G}of l){if(!an(G)){let R=!0;for(let J of Object.keys(G)){let q=A(J,z)[J];if(q===void 0||(Array.isArray(G[J])?!G[J].includes(q):G[J]!==q)){R=!1;break}}if(!R)continue}for(let R of D)V[R]=V[R]||[],V[R].push([$,W])}return V};if(!an(o)||!p){let z={};if(typeof m=="object"&&!an(m))for(let V of Object.keys(m))z[V]=D=>{var $,W;return Di(m[V],k(V,D),(($=L(D))!=null?$:[])[V],((W=K(D))!=null?W:[])[V],D==null?void 0:D.class,D==null?void 0:D.className)(c)};return z}return Di(d,M(),N(y),w==null?void 0:w.class,w==null?void 0:w.className)(c)},S=()=>{if(!(!u||typeof u!="object"))return Object.keys(u)};return b.variantKeys=S(),b.extend=t,b.base=d,b.slots=m,b.variants=u,b.defaultVariants=f,b.compoundSlots=l,b.compoundVariants=y,b};const Ho=qb({base:"focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});var SR=U("<a><!></a>"),kR=U("<button><!></button>");function tn(r,e){Y(e,!0);let t=v(e,"variant",3,"default"),o=v(e,"size",3,"default"),i=v(e,"ref",15,null),s=v(e,"href",3,void 0),l=v(e,"type",3,"button"),a=Ae(e,["$$slots","$$events","$$legacy","class","variant","size","ref","href","type","children"]);var c=B(),d=P(c);{var u=p=>{var h=SR();let m;var y=we(h);ce(y,()=>e.children??Re),ye(h),nn(h,b=>i(b),()=>i()),Te(b=>m=He(h,m,{class:b,href:s(),...a}),[()=>mt(Ho({variant:t(),size:o()}),e.class)]),O(p,h)},f=p=>{var h=kR();let m;var y=we(h);ce(y,()=>e.children??Re),ye(h),nn(h,b=>i(b),()=>i()),Te(b=>m=He(h,m,{class:b,type:l(),...a}),[()=>mt(Ho({variant:t(),size:o()}),e.class)]),O(p,h)};Pe(d,p=>{s()?p(u):p(f,!1)})}O(r,c),X()}function Ea(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"sideOffset",3,4),i=Ae(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","portalProps"]);var s=B(),l=P(s);Z(l,()=>Uc,(a,c)=>{c(a,ae(()=>e.portalProps,{children:(d,u)=>{var f=B(),p=P(f);const h=F(()=>mt("bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 outline-none",e.class));Z(p,()=>GC,(m,y)=>{y(m,ae({get sideOffset(){return o()},get class(){return g(h)}},()=>i,{get ref(){return t()},set ref(b){t(b)}}))}),O(d,f)},$$slots:{default:!0}}))}),O(r,s),X()}function eo(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=Ae(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var i=B(),s=P(i);const l=F(()=>mt("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e.inset&&"pl-8",e.class));Z(s,()=>Sy,(a,c)=>{c(a,ae({get class(){return g(l)}},()=>o,{get ref(){return t()},set ref(d){t(d)}}))}),O(r,i),X()}const Pa=HC,Na=qC,Zm=TC;var MR=U('<!> <h1 class="m-0 p-0">Header</h1>',1),CR=U('<!> <h2 class="m-0 p-0">Header</h2>',1),OR=U('<!> <h3 class="m-0 p-0">Header</h3>',1),TR=U('<!> <h4 class="m-0 p-0">Header</h4>',1),AR=U("<!> <!> <!> <!>",1),ER=U("<!> <!>",1),PR=U("<!> Bullet List",1),NR=U("<!> Ordered List",1),_R=U("<!> Task List",1),IR=U("<!> <!> <!>",1),DR=U("<!> <!>",1),RR=U("<!> <!>",1),zR=U("<!> <!>",1),LR=U("<!> <!>",1),FR=U("<!> <!>",1),BR=U('<div class="flex space-x-1.5 rounded-md p-1.5 shadow-sm border-0 border-b rounded-none mx-5"><div class="w-fit mx-auto flex gap-1.5"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div>'),VR=U('<div class="pt-4 pb-3 sticky -top-1 bg-black z-50"><!></div>');function HR(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(e.editor,"$editor",t),s=(d,u={})=>{var f;return(f=i())==null?void 0:f.isActive(d,u)};var l=VR(),a=we(l);{var c=d=>{var u=BR(),f=we(u),p=we(f);Z(p,()=>Pa,(q,se)=>{se(q,{children:(ie,Me)=>{var j=ER(),te=P(j);const le=F(()=>`${Ho({variant:"ghost"})} ${s("heading")&&"bg-blue-500/30"}`);Z(te,()=>Na,(de,me)=>{me(de,{get class(){return g(le)},children:(ze,Ce)=>{fT(ze,{class:"size-4"})},$$slots:{default:!0}})});var ee=ne(te,2);Z(ee,()=>Ea,(de,me)=>{me(de,{class:"dark:prose-invert prose-sm",children:(ze,Ce)=>{var re=B(),ge=P(re);Z(ge,()=>Zm,(Fe,Oe)=>{Oe(Fe,{children:(Ne,We)=>{var Je=AR(),pt=P(Je);const Mt=F(()=>s("heading",{level:1})&&"bg-blue-500/30");Z(pt,()=>eo,(Nt,Jt)=>{Jt(Nt,{get class(){return g(Mt)},onclick:()=>i().chain().focus().toggleHeading({level:1}).run(),children:(St,ln)=>{var Yt=MR(),Sn=P(Yt);aT(Sn,{class:"size-4 mr-2"}),bt(2),O(St,Yt)},$$slots:{default:!0}})});var nt=ne(pt,2);const Ct=F(()=>s("heading",{level:2})&&"bg-blue-500/30");Z(nt,()=>eo,(Nt,Jt)=>{Jt(Nt,{get class(){return g(Ct)},onclick:()=>i().chain().focus().toggleHeading({level:2}).run(),children:(St,ln)=>{var Yt=CR(),Sn=P(Yt);cT(Sn,{class:"size-4 mr-2"}),bt(2),O(St,Yt)},$$slots:{default:!0}})});var xn=ne(nt,2);const Jr=F(()=>s("heading",{level:3})&&"bg-blue-500/30");Z(xn,()=>eo,(Nt,Jt)=>{Jt(Nt,{get class(){return g(Jr)},onclick:()=>i().chain().focus().toggleHeading({level:3}).run(),children:(St,ln)=>{var Yt=OR(),Sn=P(Yt);dT(Sn,{class:"size-4 mr-2"}),bt(2),O(St,Yt)},$$slots:{default:!0}})});var Pt=ne(xn,2);const yt=F(()=>s("heading",{level:4})&&"bg-blue-500/30");Z(Pt,()=>eo,(Nt,Jt)=>{Jt(Nt,{get class(){return g(yt)},onclick:()=>i().chain().focus().toggleHeading({level:4}).run(),children:(St,ln)=>{var Yt=TR(),Sn=P(Yt);uT(Sn,{class:"size-4 mr-2"}),bt(2),O(St,Yt)},$$slots:{default:!0}})}),O(Ne,Je)},$$slots:{default:!0}})}),O(ze,re)},$$slots:{default:!0}})}),O(ie,j)},$$slots:{default:!0}})});var h=ne(p,2);Z(h,()=>Pa,(q,se)=>{se(q,{children:(ie,Me)=>{var j=DR(),te=P(j);const le=F(()=>`
                        ${Ho({variant:"ghost"})}
                        ${(s("bulletList")||s("orderedList")||s("taskList"))&&"bg-blue-500/30"}`);Z(te,()=>Na,(de,me)=>{me(de,{get class(){return g(le)},children:(ze,Ce)=>{Op(ze,{class:"size-4"})},$$slots:{default:!0}})});var ee=ne(te,2);Z(ee,()=>Ea,(de,me)=>{me(de,{children:(ze,Ce)=>{var re=B(),ge=P(re);Z(ge,()=>Zm,(Fe,Oe)=>{Oe(Fe,{children:(Ne,We)=>{var Je=IR(),pt=P(Je);const Mt=F(()=>s("bulletList")&&"bg-blue-500/30");Z(pt,()=>eo,(Pt,yt)=>{yt(Pt,{get class(){return g(Mt)},onclick:()=>i().chain().focus().toggleBulletList().run(),children:(Nt,Jt)=>{var St=PR(),ln=P(St);Op(ln,{class:"size-4 mr-2"}),bt(),O(Nt,St)},$$slots:{default:!0}})});var nt=ne(pt,2);const Ct=F(()=>s("orderedList")&&"bg-blue-500/30");Z(nt,()=>eo,(Pt,yt)=>{yt(Pt,{get class(){return g(Ct)},onclick:()=>i().chain().focus().toggleOrderedList().run(),children:(Nt,Jt)=>{var St=NR(),ln=P(St);mT(ln,{class:"size-4 mr-2"}),bt(),O(Nt,St)},$$slots:{default:!0}})});var xn=ne(nt,2);const Jr=F(()=>s("taskList")&&"bg-blue-500/30");Z(xn,()=>eo,(Pt,yt)=>{yt(Pt,{get class(){return g(Jr)},onclick:()=>i().commands.toggleTaskList(),children:(Nt,Jt)=>{var St=_R(),ln=P(St);gT(ln,{class:"size-4 mr-2"}),bt(),O(Nt,St)},$$slots:{default:!0}})}),O(Ne,Je)},$$slots:{default:!0}})}),O(ze,re)},$$slots:{default:!0}})}),O(ie,j)},$$slots:{default:!0}})});var m=ne(h,2);const y=F(()=>s("blockquote")&&"bg-blue-500/30");tn(m,{variant:"ghost",get class(){return g(y)},onclick:()=>i().chain().focus().toggleBlockquote().run(),children:(q,se)=>{bT(q,{class:"size-4"})},$$slots:{default:!0}});var b=ne(m,2);Cu(b,{orientation:"vertical"});var S=ne(b,2);const w=F(()=>s("bold")&&"bg-blue-500/30");tn(S,{variant:"ghost",get class(){return g(w)},onclick:()=>i().chain().focus().toggleBold().run(),children:(q,se)=>{rT(q,{class:"size-4"})},$$slots:{default:!0}});var x=ne(S,2);const C=F(()=>s("italic")&&"bg-blue-500/30");tn(x,{variant:"ghost",get class(){return g(C)},onclick:()=>i().chain().focus().toggleItalic().run(),children:(q,se)=>{pT(q,{class:"size-4"})},$$slots:{default:!0}});var M=ne(x,2);const k=F(()=>s("strike")&&"bg-blue-500/30");tn(M,{variant:"ghost",get class(){return g(k)},onclick:()=>i().chain().focus().toggleStrike().run(),children:(q,se)=>{kT(q,{class:"size-4"})},$$slots:{default:!0}});var E=ne(M,2);const A=F(()=>s("underline")&&"bg-blue-500/30");tn(E,{variant:"ghost",get class(){return g(A)},onclick:()=>i().chain().focus().toggleUnderline().run(),children:(q,se)=>{MT(q,{class:"size-4"})},$$slots:{default:!0}});var N=ne(E,2);Z(N,()=>Pa,(q,se)=>{se(q,{children:(ie,Me)=>{var j=zR(),te=P(j);const le=F(()=>`${Ho({variant:"ghost"})} ${s("highlight")&&"bg-blue-500/30"}`);Z(te,()=>Na,(de,me)=>{me(de,{get class(){return g(le)},children:(ze,Ce)=>{hT(ze,{class:"size-4"})},$$slots:{default:!0}})});var ee=ne(te,2);Z(ee,()=>Ea,(de,me)=>{me(de,{class:"grid grid-cols-3 gap-1 min-w-none w-fit",children:(ze,Ce)=>{var re=RR(),ge=P(re);tn(ge,{variant:"ghost",class:"p-0 size-7 rounded-full",onclick:()=>i().chain().focus().unsetHighlight().run(),children:(Oe,Ne)=>{Cp(Oe,{class:"size-full"})},$$slots:{default:!0}});var Fe=ne(ge,2);Wn(Fe,17,()=>$m,Ui,(Oe,Ne)=>{const We=F(()=>_D(g(Ne),.2)),Je=F(()=>`p-0 size-7 rounded-full ${s("highlight",{color:g(We)})&&"border-2 border-foreground"}`);tn(Oe,{variant:"ghost",get class(){return g(Je)},get style(){return`background-color: ${g(We)??""};`},onclick:()=>i().chain().focus().toggleHighlight({color:g(We)}).run()})}),O(ze,re)},$$slots:{default:!0}})}),O(ie,j)},$$slots:{default:!0}})});var L=ne(N,2);Z(L,()=>Pa,(q,se)=>{se(q,{children:(ie,Me)=>{var j=FR(),te=P(j);const le=F(()=>`${Ho({variant:"ghost"})} ${s("textStyle")&&i().getAttributes("textStyle").color&&"bg-blue-500/30"}`);Z(te,()=>Na,(de,me)=>{me(de,{get class(){return g(le)},children:(ze,Ce)=>{vT(ze,{class:"size-4"})},$$slots:{default:!0}})});var ee=ne(te,2);Z(ee,()=>Ea,(de,me)=>{me(de,{class:"grid grid-cols-3 gap-1 min-w-none w-fit",children:(ze,Ce)=>{var re=LR(),ge=P(re);tn(ge,{variant:"ghost",class:"p-0 size-7 rounded-full",onclick:()=>i().chain().focus().unsetColor().run(),children:(Oe,Ne)=>{Cp(Oe,{class:"size-full"})},$$slots:{default:!0}});var Fe=ne(ge,2);Wn(Fe,17,()=>$m,Ui,(Oe,Ne)=>{const We=F(()=>`p-0 size-7 rounded-full ${s("textStyle",{color:g(Ne)})&&"border-2 border-foreground"}`);tn(Oe,{variant:"ghost",get class(){return g(We)},get style(){return`background-color: ${g(Ne)??""};`},onclick:()=>i().chain().focus().setColor(g(Ne)).run()})}),O(ze,re)},$$slots:{default:!0}})}),O(ie,j)},$$slots:{default:!0}})});var K=ne(L,2);Cu(K,{orientation:"vertical"});var z=ne(K,2);const V=F(()=>s({textAlign:"left"})&&"bg-blue-500/30");tn(z,{variant:"ghost",get class(){return g(V)},onclick:()=>i().commands.setTextAlign("left"),children:(q,se)=>{tT(q,{class:"size-4"})},$$slots:{default:!0}});var D=ne(z,2);const $=F(()=>s({textAlign:"center"})&&"bg-blue-500/30");tn(D,{variant:"ghost",get class(){return g($)},onclick:()=>i().commands.setTextAlign("center"),children:(q,se)=>{QO(q,{class:"size-4"})},$$slots:{default:!0}});var W=ne(D,2);const G=F(()=>s({textAlign:"right"})&&"bg-blue-500/30");tn(W,{variant:"ghost",get class(){return g(G)},onclick:()=>i().commands.setTextAlign("right"),children:(q,se)=>{nT(q,{class:"size-4"})},$$slots:{default:!0}});var R=ne(W,2);const J=F(()=>s({textAlign:"justify"})&&"bg-blue-500/30");tn(R,{variant:"ghost",get class(){return g(J)},onclick:()=>i().commands.setTextAlign("justify"),children:(q,se)=>{eT(q,{class:"size-4"})},$$slots:{default:!0}}),ye(f),ye(u),O(d,u)};Pe(a,d=>{i()&&d(c)})}ye(l),O(r,l),X(),o()}const WR=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,KR=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,jR=Dn.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:r=>r.getAttribute("data-color")||r.style.backgroundColor,renderHTML:r=>r.color?{"data-color":r.color,style:`background-color: ${r.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:r}){return["mark",Et(this.options.HTMLAttributes,r),0]},addCommands(){return{setHighlight:r=>({commands:e})=>e.setMark(this.name,r),toggleHighlight:r=>({commands:e})=>e.toggleMark(this.name,r),unsetHighlight:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[xo({find:WR,type:this.type})]},addPasteRules(){return[So({find:KR,type:this.type})]}});var $R=U('<div class="flex flex-col flex-1 pb-5 mx-auto select-none w-full overflow-auto relative"><!> <!></div>');function GR(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(s(),"$editor",t);let s=v(e,"editor",15),l=v(e,"content",11,""),a=v(e,"editable",11,!0),c=v(e,"change",3,()=>{});rt(()=>{var p;(p=i())==null||p.setEditable(a())}),Rn(()=>{s(ED({content:l(),editable:a(),extensions:[AI,jR.configure({multicolor:!0,HTMLAttributes:{class:"highlight"}}),MI.configure({types:[Fm.name,Ju.name,Yd.name]}),Fm.configure({types:[Ju.name,Yd.name]}),OI,Yd.configure({nested:!0,HTMLAttributes:{class:"flex gap-2"}}),TI.configure({defaultAlignment:"left",types:["heading","paragraph"],alignments:["left","center","right","justify"]}),TD.configure({bulletList:{keepMarks:!0},orderedList:{keepMarks:!0},heading:{levels:[1,2,3,4]},codeBlock:!1,code:!1})],editorProps:{attributes:{class:"editorEl"}},onUpdate(){var p;(p=c())==null||p(i())},onSelectionUpdate(){var y;(y=c())==null||y(i());const{selection:p}=i().state;if(p.to!=p.from)return;if(p.to==1){window.scrollTo({top:1,behavior:"smooth"});return}const h=i().view.coordsAtPos(p.from),m=window.scrollY+h.top;h.top>.7*window.innerHeight?window.scrollTo({top:m-window.innerHeight*.7,behavior:"smooth"}):h.top<.3*window.innerHeight&&window.scrollTo({top:m-window.innerHeight*.3,behavior:"smooth"})}})),i().commands.focus(null,{scrollIntoView:!0})});var d=$R(),u=we(d);HR(u,{get editor(){return s()}});var f=ne(u,2);ND(f,{get editor(){return i()},class:"editor"}),ye(d),O(r,d),X(),o()}var UR=U("<!> Edit",1),qR=U("<!> <!>",1);function JR(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(vn,"$lock",t);let s=v(e,"content",15,""),l=F(()=>!i());var a=B(),c=P(a);Z(c,()=>SA,(d,u)=>{u(d,{children:(f,p)=>{var h=qR(),m=P(h);Z(m,()=>TA,(b,S)=>{S(b,{class:"w-full hover:bg-accent hover:text-accent-foreground flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",children:(w,x)=>{var C=UR(),M=P(C);lT(M,{class:"mr-2 size-4"}),bt(),O(w,C)},$$slots:{default:!0}})});var y=ne(m,2);Z(y,()=>OA,(b,S)=>{S(b,{class:"h-[80svh] bg-black",children:(w,x)=>{GR(w,{get content(){return s()},change:C=>s(C.getHTML()),get editable(){return g(l)},set editable(C){I(l,C,!0)}})},$$slots:{default:!0}})}),O(f,h)},$$slots:{default:!0}})}),O(r,a),X(),o()}var YR=U('<div class="p-0.5 h-full w-full max-h-full"><!></div>'),XR=U("<!> <!>",1),ZR=U("<!> <!>",1);function QR(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(vn,"$lock",t);let{updateNodeData:s}=Mo(),l=ue(Bt(e.data.text||'<h4 style="text-align: left"><em>Inventory:</em></h4><ul><li><p style="text-align: left"><em>...</em></p></li></ul>'));rt(()=>{s(e.id,{text:g(l)})});var a=ZR(),c=P(a);const d=F(()=>e.selected&&!i());ql(c,{get nodeId(){return e.id},get isVisible(){return g(d)},minHeight:100,minWidth:150});var u=ne(c,2);Z(u,()=>ra,(f,p)=>{p(f,{children:(h,m)=>{var y=XR(),b=P(y);Z(b,()=>oa,(w,x)=>{x(w,{class:"max-h-full h-full w-full",children:(C,M)=>{var k=YR(),E=we(k);Z(E,()=>ta,(A,N)=>{N(A,{class:`
                        nowheel .nodrag
                        h-full w-full flex flex-col
                        backdrop-blur-md backdrop-filter
                        bg-clip-padding bg-black/10
                        overflow-hidden`,children:(L,K)=>{var z=B(),V=P(z);Z(V,()=>na,(D,$)=>{$(D,{class:`
                            px-2 pt-2 pb-0 flex-1 overflow-auto max-h-full min-w-full
                            prose dark:prose-invert prose-sm
                            *:!my-0 *:!py-0`,children:(W,G)=>{var R=B(),J=P(R);xx(J,()=>g(l)),O(W,R)},$$slots:{default:!0}})}),O(L,z)},$$slots:{default:!0}})}),ye(k),O(C,k)},$$slots:{default:!0}})});var S=ne(b,2);ia(S,{get id(){return e.id},children:(w,x)=>{JR(w,{get content(){return g(l)},set content(C){I(l,C,!0)}})},$$slots:{default:!0}}),O(h,y)},$$slots:{default:!0}})}),O(r,a),X(),o()}var e2=U('<div class="p-0.5 w-full h-full flex"><!></div>'),t2=U("<!> <!>",1),n2=U("<!> <!>",1);function r2(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(vn,"$lock",t);let{updateNodeData:s}=Mo(),l=ue(Bt(e.data.title||"STR"));rt(()=>{s(e.id,{title:g(l)})});var a=n2(),c=P(a);const d=F(()=>e.selected&&!i());ql(c,{get isVisible(){return g(d)},minHeight:50,maxHeight:50,minWidth:100});var u=ne(c,2);Z(u,()=>ra,(f,p)=>{p(f,{children:(h,m)=>{var y=t2(),b=P(y);Z(b,()=>oa,(w,x)=>{x(w,{class:"size-full",children:(C,M)=>{var k=e2(),E=we(k);Z(E,()=>ta,(A,N)=>{N(A,{class:"flex-1 backdrop-blur-md backdrop-filter bg-clip-padding bg-black/10",children:(L,K)=>{var z=B(),V=P(z);Z(V,()=>na,(D,$)=>{$(D,{class:"p-0.5 h-full flex flex-col",children:(W,G)=>{Ba(W,{class:"border-0 text-center font-bold !p-0 my-1 disabled:opacity-100",get disabled(){return i()},get value(){return g(l)},set value(R){I(l,R,!0)}})},$$slots:{default:!0}})}),O(L,z)},$$slots:{default:!0}})}),ye(k),O(C,k)},$$slots:{default:!0}})});var S=ne(b,2);ia(S,{get id(){return e.id}}),O(h,y)},$$slots:{default:!0}})}),O(r,a),X(),o()}const mo=mi([{id:"initial",type:"Text",position:{x:0,y:0},width:625,height:375,data:{text:'<h3 style="text-align: left"><strong><em>Welcome!!!</em></strong></h3><p style="text-align: left">This is a <span style="color: rgb(0, 166, 244)">modular character sheet</span> tool — flexible, simple, and designed to <span style="color: rgb(0, 166, 244)">fit <em>your</em> style</span>.</p><h4 style="text-align: left">Getting Started:</h4><ul><li><p style="text-align: left">Open the main menu with <mark class="highlight" data-color="rgba(0, 166, 244, 0.2)" style="background-color: rgba(0, 166, 244, 0.2); color: inherit">Cmd+K</mark> or by clicking the top button.</p></li><li><p style="text-align: left">Add a node from the menu.</p></li><li><p style="text-align: left">Drag nodes around to reposition them however you like.</p></li><li><p style="text-align: left">Right-click any node to open its menu for more options.</p></li><li><p style="text-align: left">Edit fields directly or via the node’s menu (depending on the type).</p></li></ul><p style="text-align: left">And that’s it — build your sheet <span style="color: rgb(0, 166, 244)">your way</span>.<br><strong>Have fun! Profit!!!</strong></p>'},measured:{width:625,height:375},selected:!1}]),Jb={Avatar:DT,Image:VT,Stat:UT,Text:QR,Title:r2},$a=mi({x:0,y:0,zoom:1}),vn=mi(!1);var o2=U("<!> <span> </span>",1),i2=U("<!> Unlock Nodes",1),s2=U("<!> Lock Nodes",1),l2=U("<!> Snap Viewport",1),a2=U("<!> Export",1),c2=U("<!> Import",1),d2=U("<!> <!> <!> <!>",1),u2=U("<!> <!> <!>",1),f2=U("<!> <!>",1),h2=U('<!> <input type="file" class="hidden" accept="application/JSON">',1);function p2(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(Li,"$open",t),s=()=>he(mo,"$nodes",t),l=()=>he(vn,"$lock",t),a=()=>jt(Li,!i());let{screenToFlowPosition:c,getViewport:d,setViewport:u}=Mo(),f=ue(void 0);const p=x=>{let{x:C,y:M}=c({x:window.innerWidth/2,y:window.innerHeight/2}),k={id:crypto.randomUUID(),position:{x:C,y:M},type:x};x=="Avatar"||x=="Image"?k.width=k.height=50:x=="Stat"?(k.height=150,k.width=100):x=="Title"?(k.height=50,k.width=100):x=="Text"&&(k.height=100,k.width=150),k.position.x-=k.width/2,k.position.y-=k.height/2,jw(mo,ur(s)[s().length]=k,ur(s)),a()};function h(){const x=JSON.stringify({sheet:s(),lock:l(),view:d()},null,2),C=new Blob([x],{type:"application/json"}),M=URL.createObjectURL(C),k=document.createElement("a");k.href=M,k.download="sheet.json",document.body.appendChild(k),k.click(),k.remove(),URL.revokeObjectURL(M),a()}async function m(x){const C=new FileReader;C.readAsText(x.target.files[0]),C.onload=function(){try{let M=JSON.parse(C.result);jt(mo,M.sheet),jt($a,M.view),jt(vn,M.lock)}catch{}},a()}function y(x){x.key==="k"&&(x.metaKey||x.ctrlKey)&&(x.preventDefault(),jt(Li,!i()))}var b=h2();xt("keydown",un,y);var S=P(b);Z(S,()=>VO,(x,C)=>{C(x,{loop:!0,class:"backdrop-blur-md bg-black",get open(){return Kw(),i()},set open(M){jt(Li,M)},children:(M,k)=>{var E=f2(),A=P(E);Z(A,()=>$O,(L,K)=>{K(L,{placeholder:"Type a command or search..."})});var N=ne(A,2);Z(N,()=>GO,(L,K)=>{K(L,{children:(z,V)=>{var D=u2(),$=P(D);Z($,()=>HO,(R,J)=>{J(R,{children:(q,se)=>{bt();var ie=nf("No results found...");O(q,ie)},$$slots:{default:!0}})});var W=ne($,2);Z(W,()=>Mp,(R,J)=>{J(R,{heading:"Nodes",children:(q,se)=>{var ie=B(),Me=P(ie);Wn(Me,17,()=>Object.keys(Jb),Ui,(j,te)=>{var le=B(),ee=P(le);Z(ee,()=>Ni,(de,me)=>{me(de,{onSelect:()=>p(g(te)),children:(ze,Ce)=>{var re=o2(),ge=P(re);iT(ge,{class:"mr-2 size-4"});var Fe=ne(ge,2),Oe=we(Fe,!0);ye(Fe),Te(()=>rf(Oe,g(te))),O(ze,re)},$$slots:{default:!0}})}),O(j,le)}),O(q,ie)},$$slots:{default:!0}})});var G=ne(W,2);Z(G,()=>Mp,(R,J)=>{J(R,{heading:"Commands",children:(q,se)=>{var ie=d2(),Me=P(ie);Z(Me,()=>Ni,(ee,de)=>{de(ee,{onclick:()=>{jt(vn,!l()),a()},children:(me,ze)=>{var Ce=B(),re=P(Ce);{var ge=Oe=>{var Ne=i2(),We=P(Ne);yT(We,{class:"mr-2 size-4"}),bt(),O(Oe,Ne)},Fe=Oe=>{var Ne=s2(),We=P(Ne);By(We,{class:"mr-2 size-4"}),bt(),O(Oe,Ne)};Pe(re,Oe=>{l()?Oe(ge):Oe(Fe,!1)})}O(me,Ce)},$$slots:{default:!0}})});var j=ne(Me,2);Z(j,()=>Ni,(ee,de)=>{de(ee,{onclick:()=>{let me=d();u({zoom:me.zoom,x:Math.round(me.x/25)*25,y:Math.round(me.y/25)*25}),a()},children:(me,ze)=>{var Ce=l2(),re=P(Ce);Vy(re,{class:"mr-2 size-4"}),bt(),O(me,Ce)},$$slots:{default:!0}})});var te=ne(j,2);Z(te,()=>Ni,(ee,de)=>{de(ee,{onclick:h,children:(me,ze)=>{var Ce=a2(),re=P(Ce);xT(re,{class:"mr-2 size-4"}),bt(),O(me,Ce)},$$slots:{default:!0}})});var le=ne(te,2);Z(le,()=>Ni,(ee,de)=>{de(ee,{onclick:()=>g(f).click(),children:(me,ze)=>{var Ce=c2(),re=P(Ce);sT(re,{class:"mr-2 size-4"}),bt(),O(me,Ce)},$$slots:{default:!0}})}),O(q,ie)},$$slots:{default:!0}})}),O(z,D)},$$slots:{default:!0}})}),O(M,E)},$$slots:{default:!0}})});var w=ne(S,2);w.__change=m,nn(w,x=>I(f,x),()=>g(f)),O(r,b),X(),o()}of(["change"]);const m2=qb({base:"focus:ring-ring inline-flex select-none items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-transparent shadow",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-transparent",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-transparent shadow",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function g2(r,e){Y(e,!0);let t=v(e,"ref",15,null),o=v(e,"variant",3,"default"),i=Ae(e,["$$slots","$$events","$$legacy","ref","href","class","variant","children"]);var s=B(),l=P(s);vf(l,()=>e.href?"a":"span",!1,(a,c)=>{nn(a,p=>t(p),()=>t());let d;Te(p=>d=He(a,d,{href:e.href,class:p,...i}),[()=>mt(m2({variant:o()}),e.class)]);var u=B(),f=P(u);ce(f,()=>e.children??Re),O(c,u)}),O(r,s),X()}var y2=U("<!> <span>+</span> <span>K</span>",1),v2=U('<!> <p class="text-muted-foreground mx-auto col-span-2">Search...</p> <!>',1),b2=U("<!> <!>",1);function w2(r){const[e,t]=ft(),o=()=>he(vn,"$lock",e);var i=b2(),s=P(i);lu(s,{position:"top-center",children:(a,c)=>{tn(a,{onclick:()=>jt(Li,!0),class:"bg-black/10 backdrop-blur-sm border hover:bg-accent rounded-2xl flex gap-5 group transition-colors",children:(d,u)=>{var f=v2(),p=P(f);ST(p,{class:"text-foreground size-5"});var h=ne(p,4);g2(h,{variant:"secondary",class:"text-muted-foreground group-hover:bg-red-900/50 transition-colors flex gap-1",children:(m,y)=>{var b=y2(),S=P(b);oT(S,{class:"size-4"}),bt(4),O(m,b)},$$slots:{default:!0}}),O(d,f)},$$slots:{default:!0}})},$$slots:{default:!0}});var l=ne(s,2);lu(l,{position:"top-right",children:(a,c)=>{var d=B(),u=P(d);{var f=p=>{tn(p,{variant:"ghost",size:"icon",class:"min-w-fit min-h-fit",onclick:()=>jt(vn,!1),children:(h,m)=>{By(h,{class:"!size-10 !m-1.5 stroke-blue-500 animate-pulse"})},$$slots:{default:!0}})};Pe(u,p=>{o()&&p(f)})}O(a,d)},$$slots:{default:!0}}),O(r,i),t()}var x2=U('<div class="h-svh select-none"><!> <!> <!></div>');function D2(r,e){Y(e,!0);const[t,o]=ft(),i=()=>he(mo,"$nodes",t),s=()=>he($a,"$viewport",t),l=()=>he(vn,"$lock",t);try{let h=JSON.parse(localStorage.getItem("sheet"));typeof h=="object"&&"length"in h&&jt(mo,h)}catch{}try{let h=JSON.parse(localStorage.getItem("view"));typeof h=="object"&&"zoom"in h&&jt($a,h)}catch{}try{let h=JSON.parse(localStorage.getItem("lock"));typeof n=="boolean"&&jt(vn,h)}catch{}rt(()=>{localStorage.setItem("view",JSON.stringify(s())),localStorage.setItem("sheet",JSON.stringify(i())),localStorage.setItem("lock",JSON.stringify(l()))});var a=x2(),c=we(a);const d=F(()=>mi([])),u=F(()=>!l());d0(c,{get edges(){return g(d)},colorMode:"dark",minZoom:.1,maxZoom:3,viewport:$a,nodeTypes:Jb,nodes:mo,get nodesDraggable(){return g(u)},fitView:localStorage.getItem("view")==null||localStorage.getItem("view")=="undefined",children:(h,m)=>{y0(h,{get variant(){return lr.Dots},size:1,gap:25})},$$slots:{default:!0}});var f=ne(c,2);w2(f);var p=ne(f,2);p2(p,{}),ye(a),O(r,a),X(),o()}export{D2 as component};
